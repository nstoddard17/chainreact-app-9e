=== Log Session Started: 2025-10-20T04:01:31.322Z ===
Node Version: v23.7.0
Platform: darwin
Working Directory: /Users/nathanielstoddard/chainreact-app/chainreact-app-9e
================================================================================

[2025-10-20T04:01:31.322Z] [INFO   ] File logging initialized
[2025-10-20T04:01:31.322Z] [INFO   ] Log file: /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-10-19_23-01-31.log
[2025-10-20T04:01:31.325Z] [INFO   ] üìÅ File logging enabled
[2025-10-20T04:01:31.325Z] [INFO   ] üìù Logs will be written to: /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-10-19_23-01-31.log
[2025-10-20T04:01:31.325Z] [INFO   ] üí° To view logs in real-time: tail -f /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-10-19_23-01-31.log
[2025-10-20T04:01:31.325Z] [INFO   ] üí° To view all logs: cat /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-10-19_23-01-31.log
[2025-10-20T04:01:31.325Z] [INFO   ] üí° To share logs: Copy the file at /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-10-19_23-01-31.log
[2025-10-20T04:01:31.325Z] [INFO   ] --------------------------------------------------------------------------------
[2025-10-20T04:01:31.325Z] [DEBUG  ] üìÅ File logging system initialized
[2025-10-20T04:01:31.338Z] [INFO   ]  [32m[1m‚úì[22m[39m Ready in 3s
[2025-10-20T04:01:31.454Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /middleware in 110ms (233 modules)
[2025-10-20T04:01:31.921Z] [INFO   ] 2025-10-20T04:01:31.920Z [DEBUG] [Middleware] Username check: {"path":"/workflows/builder/8340b576-0b3d-4af6-8e9b-8769b61147d1","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"admin","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":12366204521}
[2025-10-20T04:01:32.328Z] [INFO   ] 2025-10-20T04:01:32.328Z [DEBUG] ü§ñ Discord bot configured, initializing gateway connection in background...
[2025-10-20T04:01:34.207Z] [INFO   ] 2025-10-20T04:01:34.207Z [DEBUG] Initializing Discord Gateway connection (singleton)...
[2025-10-20T04:01:34.207Z] [INFO   ] 2025-10-20T04:01:34.207Z [DEBUG] üîë Discord bot token loaded
[2025-10-20T04:01:34.222Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /workflows/builder/[id] ...
[2025-10-20T04:01:34.414Z] [INFO   ] 2025-10-20T04:01:34.414Z [DEBUG] Discord Gateway initialization complete
[2025-10-20T04:01:34.416Z] [INFO   ] 2025-10-20T04:01:34.416Z [DEBUG] ‚úÖ Discord bot gateway connection initialized
[2025-10-20T04:01:34.620Z] [INFO   ] 2025-10-20T04:01:34.620Z [DEBUG] Discord Gateway WebSocket connection established
[2025-10-20T04:01:34.621Z] [INFO   ] 2025-10-20T04:01:34.621Z [DEBUG] üîë Sending identify with intents: {"GUILDS":true,"GUILD_MEMBERS":true,"GUILD_INVITES":true,"GUILD_MESSAGES":true,"MESSAGE_CONTENT":true,"intentsValue":33347}
[2025-10-20T04:01:34.794Z] [INFO   ] 2025-10-20T04:01:34.794Z [DEBUG] üéâ Discord bot ready! {"sessionId":"0798f30d21ff287c3d93003733bc31ef","username":"ChainReact-Bot","userId":"1378595955212812308","guildCount":2}
[2025-10-20T04:01:34.794Z] [INFO   ] 2025-10-20T04:01:34.794Z [DEBUG] üìã Initializing invite cache...
[2025-10-20T04:01:34.795Z] [INFO   ] 2025-10-20T04:01:34.795Z [DEBUG] üì° Discord event received: GUILD_CREATE
[2025-10-20T04:01:34.802Z] [INFO   ] 2025-10-20T04:01:34.802Z [DEBUG] üì° Discord event received: GUILD_CREATE
[2025-10-20T04:01:35.013Z] [INFO   ] 2025-10-20T04:01:35.013Z [DEBUG] ‚úÖ Cached 3 invites for guild 1378950884045623406
[2025-10-20T04:01:39.045Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /workflows/builder/[id] in 7.1s (5696 modules)
[2025-10-20T04:01:39.633Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 545ms (1576 modules)
[2025-10-20T04:01:40.023Z] [INFO   ] 2025-10-20T04:01:40.023Z [DEBUG] üíß [AUTH] Rehydrating auth state from storage {"hasState":true,"hasUser":false,"initialized":false,"timestamp":"2025-10-20T04:01:40.023Z"}
[2025-10-20T04:01:40.034Z] [INFO   ] 2025-10-20T04:01:40.034Z [DEBUG] üíß [AUTH] State hydrated and reset {"hasUser":false,"initialized":false,"timestamp":"2025-10-20T04:01:40.034Z"}
[2025-10-20T04:01:40.034Z] [INFO   ] 2025-10-20T04:01:40.034Z [DEBUG] ‚è≠Ô∏è [AUTH] Skipping initialization {"hasState":true,"alreadyInitialized":false,"isClient":false,"timestamp":"2025-10-20T04:01:40.034Z"}
[2025-10-20T04:01:40.303Z] [INFO   ] 2025-10-20T04:01:40.303Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-10-20T04:01:40.674Z] [INFO   ] üß™ [useWorkflowBuilder] Returning - testModeDialogOpen: false
[2025-10-20T04:01:41.324Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/presence/count ...
[2025-10-20T04:01:43.438Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/collaboration/join in 2.6s (5708 modules)
[2025-10-20T04:01:43.685Z] [INFO   ] 2025-10-20T04:01:43.685Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-10-20T04:01:43.685Z","headers":{"referer":"check-console"}}
[2025-10-20T04:01:43.845Z] [INFO   ] 2025-10-20T04:01:43.845Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-10-20T04:01:44.011Z] [INFO   ] 2025-10-20T04:01:44.010Z [DEBUG] üìä [API /api/integrations] Query result {"count":19,"error":null,"firstFew":[{"provider":"notion","status":"connected"},{"provider":"mailchimp","status":"connected"}]}
[2025-10-20T04:01:48.041Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/workflows/execute ...
[2025-10-20T04:01:50.713Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/workflows/execute in 3.2s (7720 modules)
[2025-10-20T04:01:53.151Z] [INFO   ] 2025-10-20T04:01:53.151Z [DEBUG] === Workflow Execution Started (Refactored) ===
[2025-10-20T04:01:53.152Z] [INFO   ] 2025-10-20T04:01:53.152Z [DEBUG] üìä [Execute Route] Request content-length: 46930
[2025-10-20T04:01:53.152Z] [INFO   ] 2025-10-20T04:01:53.152Z [DEBUG] üìä [Execute Route] Request body text length: 46914
[2025-10-20T04:01:53.152Z] [INFO   ] 2025-10-20T04:01:53.152Z [DEBUG] üìä [Execute Route] Workflow data received: {"workflowId":"8340b576-0b3d-4af6-8e9b-8769b61147d1","hasWorkflowData":true,"nodesCount":4,"nodeTypes":[{"id":"trigger-1760813764735","type":"gmail_trigger_new_email"},{"id":"action-1760841495900","type":"hitl_conversation"},{"id":"action-1760841551096","type":"discord_action_send_message"},{"id":"add-action-action-1760841551096"}],"hasTestModeConfig":true,"testModeConfig":{"triggerMode":"use_mock_data","actionMode":"intercept_writes","showDetailedSteps":true,"captureStepData":true}}
[2025-10-20T04:01:53.152Z] [INFO   ] 2025-10-20T04:01:53.152Z [DEBUG] Execution parameters: {"workflowId":"8340b576-0b3d-4af6-8e9b-8769b61147d1","testMode":true,"executionMode":"sandbox","effectiveTestMode":true,"skipTriggers":true,"hasInputData":true,"hasWorkflowData":true}
[2025-10-20T04:01:53.300Z] [INFO   ] 2025-10-20T04:01:53.300Z [DEBUG] Workflow found: {"id":"8340b576-0b3d-4af6-8e9b-8769b61147d1","name":"test","nodesCount":3}
[2025-10-20T04:01:53.379Z] [INFO   ] 2025-10-20T04:01:53.379Z [DEBUG] User authenticated: a3e3a51a-175c-4b59-ad03-227ba12a18b0
[2025-10-20T04:01:53.379Z] [INFO   ] 2025-10-20T04:01:53.379Z [DEBUG] Skipping trigger node: trigger-1760813764735 (gmail_trigger_new_email)
[2025-10-20T04:01:53.379Z] [INFO   ] 2025-10-20T04:01:53.379Z [DEBUG] Workflow structure: {"originalNodesCount":4,"filteredNodesCount":2,"skippedUINodes":2,"edgesCount":1,"nodeTypes":["hitl_conversation","discord_action_send_message"]}
[2025-10-20T04:01:53.379Z] [INFO   ] 2025-10-20T04:01:53.379Z [DEBUG] Action nodes found (triggers skipped): 2
[2025-10-20T04:01:53.379Z] [INFO   ] 2025-10-20T04:01:53.379Z [DEBUG] Starting workflow execution with effectiveTestMode: true
[2025-10-20T04:01:53.380Z] [INFO   ] 2025-10-20T04:01:53.380Z [DEBUG] üöÄ Starting workflow execution service {"testMode":true,"testModeConfig":{"triggerMode":"use_mock_data","actionMode":"intercept_writes"}}
[2025-10-20T04:01:53.381Z] [INFO   ] 2025-10-20T04:01:53.381Z [DEBUG] Executing workflow with: {"originalNodesCount":2,"validNodesCount":2,"skippedNodes":0,"connectionsCount":1,"usingWorkflowData":true,"nodeTypes":["hitl_conversation","discord_action_send_message"]}
[2025-10-20T04:01:53.381Z] [INFO   ] 2025-10-20T04:01:53.381Z [DEBUG] ‚öôÔ∏è Fallback: starting from 1 root action node(s) (no triggers present)
[2025-10-20T04:01:53.457Z] [ERROR  ] 2025-10-20T04:01:53.456Z [ERROR] Failed to create workflow execution record: {"code":"PGRST204","details":null,"hint":null,"message":"Could not find the 'execution_data' column of 'workflow_executions' in the schema cache"}
[2025-10-20T04:01:53.458Z] [ERROR  ] 2025-10-20T04:01:53.458Z [ERROR] Workflow execution error: {"message":"Failed to create execution record: Could not find the 'execution_data' column of 'workflow_executions' in the schema cache","stack":"Error: Failed to create execution record: Could not find the 'execution_data' column of 'workflow_executions' in the schema cache\n    at WorkflowExecutionService.executeWorkflow (webpack-internal:///(rsc)/./lib/services/workflowExecutionService.ts:134:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async POST (webpack-internal:///(rsc)/./app/api/workflows/execute/route.ts:229:33)\n    at async AppRouteRouteModule.do (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38696)\n    at async AppRouteRouteModule.handle (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45978)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fworkflows%2Fexecute%2Froute&page=%2Fapi%2Fworkflows%2Fexecute%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fworkflows%2Fexecute%2Froute.ts&appDir=%2FUsers%2Fnathanielstoddard%2Fchainreact-app%2Fchainreact-app-9e%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fnathanielstoddard%2Fchainreact-app%2Fchainreact-app-9e&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:187565)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fworkflows%2Fexecute%2Froute&page=%2Fapi%2Fworkflows%2Fexecute%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fworkflows%2Fexecute%2Froute.ts&appDir=%2FUsers%2Fnathanielstoddard%2Fchainreact-app%2Fchainreact-app-9e%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fnathanielstoddard%2Fchainreact-app%2Fchainreact-app-9e&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fworkflows%2Fexecute%2Froute&page=%2Fapi%2Fworkflows%2Fexecute%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fworkflows%2Fexecute%2Froute.ts&appDir=%2FUsers%2Fnathanielstoddard%2Fchainreact-app%2Fchainreact-app-9e%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fnathanielstoddard%2Fchainreact-app%2Fchainreact-app-9e&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async DevServer.renderToResponseWithComponentsImpl (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/base-server.js:1422:9)\n    at async DevServer.renderPageComponent (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/base-server.js:1474:24)\n    at async DevServer.renderToResponseImpl (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/base-server.js:1514:32)\n    at async DevServer.pipeImpl (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/base-server.js:1025:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/base-server.js:916:17)\n    at async /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/dev/next-dev-server.js:399:20\n    at async Span.traceAsyncFn (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/dev/next-dev-server.js:395:24)\n    at async invokeRender (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/lib/router-server.js:240:21)\n    at async handleRequest (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/lib/router-server.js:437:24)\n    at async requestHandlerImpl (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/lib/router-server.js:485:13)\n    at async Server.requestListener (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/lib/start-server.js:226:13)","name":"Error"}
[2025-10-20T04:02:14.712Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/collaboration/collaborators ...
[2025-10-20T04:02:14.825Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/collaboration/collaborators in 622ms (7722 modules)
[2025-10-20T04:03:10.505Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1166ms (5715 modules)
[2025-10-20T04:03:10.775Z] [INFO   ] 2025-10-20T04:03:10.774Z [DEBUG] [Middleware] Username check: {"path":"/workflows/builder/8340b576-0b3d-4af6-8e9b-8769b61147d1","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"admin","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":12366303375}
[2025-10-20T04:03:11.134Z] [INFO   ] 2025-10-20T04:03:11.134Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-10-20T04:03:11.930Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/collaboration/leave ...
[2025-10-20T04:03:12.202Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/collaboration/leave in 952ms (5703 modules)
[2025-10-20T04:03:12.348Z] [WARN   ]  [33m[1m‚ö†[22m[39m Fast Refresh had to perform a full reload due to a runtime error.
[2025-10-20T04:03:12.559Z] [INFO   ] 2025-10-20T04:03:12.559Z [DEBUG] [Middleware] Username check: {"path":"/workflows/builder/8340b576-0b3d-4af6-8e9b-8769b61147d1","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"admin","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":12366305160}
[2025-10-20T04:03:12.853Z] [INFO   ] 2025-10-20T04:03:12.852Z [DEBUG] üíß [AUTH] Rehydrating auth state from storage {"hasState":true,"hasUser":false,"initialized":false,"timestamp":"2025-10-20T04:03:12.852Z"}
[2025-10-20T04:03:12.863Z] [INFO   ] 2025-10-20T04:03:12.863Z [DEBUG] üíß [AUTH] State hydrated and reset {"hasUser":false,"initialized":false,"timestamp":"2025-10-20T04:03:12.863Z"}
[2025-10-20T04:03:12.863Z] [INFO   ] 2025-10-20T04:03:12.863Z [DEBUG] ‚è≠Ô∏è [AUTH] Skipping initialization {"hasState":true,"alreadyInitialized":false,"isClient":false,"timestamp":"2025-10-20T04:03:12.863Z"}
[2025-10-20T04:03:13.074Z] [INFO   ] 2025-10-20T04:03:13.073Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-10-20T04:03:13.507Z] [INFO   ] üß™ [useWorkflowBuilder] Returning - testModeDialogOpen: false
[2025-10-20T04:03:14.604Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/collaboration/join ...
[2025-10-20T04:03:14.613Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/collaboration/join in 516ms (4143 modules)
[2025-10-20T04:03:14.879Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled (4150 modules)
[2025-10-20T04:03:14.963Z] [INFO   ] 2025-10-20T04:03:14.963Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-10-20T04:03:14.963Z","headers":{"referer":"check-console"}}
[2025-10-20T04:03:15.067Z] [INFO   ] 2025-10-20T04:03:15.067Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-10-20T04:03:15.203Z] [INFO   ] 2025-10-20T04:03:15.203Z [DEBUG] üìä [API /api/integrations] Query result {"count":19,"error":null,"firstFew":[{"provider":"notion","status":"connected"},{"provider":"mailchimp","status":"connected"}]}
[2025-10-20T04:03:31.331Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 352ms (1576 modules)
[2025-10-20T04:03:31.533Z] [INFO   ] 2025-10-20T04:03:31.533Z [DEBUG] [Middleware] Username check: {"path":"/workflows/builder/8340b576-0b3d-4af6-8e9b-8769b61147d1","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"admin","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":12366324134}
[2025-10-20T04:03:31.717Z] [INFO   ] 2025-10-20T04:03:31.717Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}

=== Log Session Ended: 2025-10-20T04:13:37.290Z ===
