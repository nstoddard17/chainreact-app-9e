=== Log Session Started: 2025-11-09T21:13:12.480Z ===
Node Version: v23.7.0
Platform: darwin
Working Directory: /Users/nathanielstoddard/chainreact-app/chainreact-app-9e
================================================================================

[2025-11-09T21:13:12.481Z] [INFO   ] File logging initialized
[2025-11-09T21:13:12.481Z] [INFO   ] Log file: /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-11-09_15-13-12.log
[2025-11-09T21:13:12.482Z] [INFO   ] üìÅ File logging enabled
[2025-11-09T21:13:12.482Z] [INFO   ] üìù Logs will be written to: /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-11-09_15-13-12.log
[2025-11-09T21:13:12.482Z] [INFO   ] üí° To view logs in real-time: tail -f /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-11-09_15-13-12.log
[2025-11-09T21:13:12.482Z] [INFO   ] üí° To view all logs: cat /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-11-09_15-13-12.log
[2025-11-09T21:13:12.482Z] [INFO   ] üí° To share logs: Copy the file at /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-11-09_15-13-12.log
[2025-11-09T21:13:12.482Z] [INFO   ] --------------------------------------------------------------------------------
[2025-11-09T21:13:12.483Z] [DEBUG  ] üìÅ File logging system initialized
[2025-11-09T21:13:12.501Z] [INFO   ]  [32m[1m‚úì[22m[39m Ready in 6.5s
[2025-11-09T21:13:13.064Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /test/nodes ...
[2025-11-09T21:13:13.484Z] [INFO   ] 2025-11-09T21:13:13.484Z [DEBUG] ü§ñ Discord bot configured, initializing gateway connection in background...
[2025-11-09T21:13:15.805Z] [INFO   ] 2025-11-09T21:13:15.805Z [DEBUG] Initializing Discord Gateway connection (singleton)...
[2025-11-09T21:13:15.805Z] [INFO   ] 2025-11-09T21:13:15.805Z [DEBUG] üîë Discord bot token loaded
[2025-11-09T21:13:16.032Z] [INFO   ] 2025-11-09T21:13:16.031Z [DEBUG] Discord Gateway initialization complete
[2025-11-09T21:13:16.033Z] [INFO   ] 2025-11-09T21:13:16.033Z [DEBUG] ‚úÖ Discord bot gateway connection initialized
[2025-11-09T21:13:16.303Z] [INFO   ] 2025-11-09T21:13:16.303Z [DEBUG] Discord Gateway WebSocket connection established
[2025-11-09T21:13:16.303Z] [INFO   ] 2025-11-09T21:13:16.303Z [DEBUG] üîë Sending identify with intents: {"GUILDS":true,"GUILD_MEMBERS":true,"GUILD_INVITES":true,"GUILD_MESSAGES":true,"MESSAGE_CONTENT":true,"intentsValue":33347}
[2025-11-09T21:13:16.770Z] [INFO   ] 2025-11-09T21:13:16.770Z [DEBUG] üéâ Discord bot ready! {"sessionId":"6dc24419a9ee4d29b7f39ad00fa33bce","username":"ChainReact-Bot","userId":"1378595955212812308","guildCount":2}
[2025-11-09T21:13:16.770Z] [INFO   ] 2025-11-09T21:13:16.770Z [DEBUG] üìã Initializing invite cache...
[2025-11-09T21:13:16.771Z] [INFO   ] 2025-11-09T21:13:16.771Z [DEBUG] üì° Discord event received: GUILD_CREATE
[2025-11-09T21:13:16.771Z] [INFO   ] 2025-11-09T21:13:16.771Z [DEBUG] üì° Discord event received: GUILD_CREATE
[2025-11-09T21:13:16.943Z] [INFO   ] 2025-11-09T21:13:16.943Z [DEBUG] ‚úÖ Cached 3 invites for guild 1378950884045623406
[2025-11-09T21:13:23.590Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /test/nodes in 11.1s (5170 modules)
[2025-11-09T21:13:24.109Z] [INFO   ] 2025-11-09T21:13:24.109Z [DEBUG] üíß [AUTH] Rehydrating auth state from storage {"hasState":true,"hasUser":false,"initialized":false,"timestamp":"2025-11-09T21:13:24.108Z"}
[2025-11-09T21:13:24.121Z] [INFO   ] 2025-11-09T21:13:24.121Z [DEBUG] üíß [AUTH] State hydrated and reset {"hasUser":false,"initialized":false,"timestamp":"2025-11-09T21:13:24.121Z"}
[2025-11-09T21:13:24.121Z] [INFO   ] 2025-11-09T21:13:24.121Z [DEBUG] ‚è≠Ô∏è [AUTH] Skipping initialization {"hasState":true,"alreadyInitialized":false,"isClient":false,"timestamp":"2025-11-09T21:13:24.121Z"}
[2025-11-09T21:13:25.439Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /middleware ...
[2025-11-09T21:13:26.543Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /middleware in 1609ms (5522 modules)
[2025-11-09T21:13:26.893Z] [INFO   ] 2025-11-09T21:13:26.893Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-09T21:13:26.893Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-09T21:13:27.042Z] [INFO   ] 2025-11-09T21:13:27.041Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-09T21:13:27.042Z] [INFO   ] 2025-11-09T21:13:27.042Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-09T21:13:27.161Z] [INFO   ] 2025-11-09T21:13:27.161Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":10,"permissionsCount":9,"integrationsError":null,"permissionsError":null}
[2025-11-09T21:13:27.161Z] [INFO   ] 2025-11-09T21:13:27.161Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"61424f3b-166f-4d60-bf1c-b63cb9155549","provider":"google-drive","permission":"admin"}
[2025-11-09T21:13:27.161Z] [INFO   ] 2025-11-09T21:13:27.161Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"aed260e3-7d87-4ea0-ba04-1ab6c35bbda5","provider":"discord","permission":"admin"}
[2025-11-09T21:13:27.161Z] [INFO   ] 2025-11-09T21:13:27.161Z [DEBUG] üìã [API /api/integrations] Using implicit permission {"integrationId":"7015bddc-01e2-46ad-89bb-fd2385c7dbfc","provider":"gumroad","permission":"admin","reason":"connected_by"}
[2025-11-09T21:13:27.161Z] [INFO   ] 2025-11-09T21:13:27.161Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"f240f5c0-cb91-462a-bab9-51dcbb116331","provider":"gmail","permission":"admin"}
[2025-11-09T21:13:27.161Z] [INFO   ] 2025-11-09T21:13:27.161Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"f7f6cf20-d078-40ef-a73c-bc7afd16ec14","provider":"hubspot","permission":"admin"}
[2025-11-09T21:13:27.161Z] [INFO   ] 2025-11-09T21:13:27.161Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"cdcb4dfa-0de9-4b0c-b493-28dc16aa47cf","provider":"github","permission":"admin"}
[2025-11-09T21:13:27.161Z] [INFO   ] 2025-11-09T21:13:27.161Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"1cf3129a-cbcb-4df8-b59b-876edd75d137","provider":"google-analytics","permission":"admin"}
[2025-11-09T21:13:27.161Z] [INFO   ] 2025-11-09T21:13:27.161Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"fa4bc43d-e909-4b30-83ab-901e5d284a72","provider":"google-docs","permission":"admin"}
[2025-11-09T21:13:27.161Z] [INFO   ] 2025-11-09T21:13:27.161Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"72c8e3d3-ae7f-464a-b167-ad1e4b7bcc20","provider":"google-calendar","permission":"admin"}
[2025-11-09T21:13:27.161Z] [INFO   ] 2025-11-09T21:13:27.161Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"8640a243-994f-47b4-b456-26844f408359","provider":"google-sheets","permission":"admin"}
[2025-11-09T21:13:27.161Z] [INFO   ] 2025-11-09T21:13:27.161Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":10,"workspaceType":"personal"}
[2025-11-09T21:13:32.936Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 407ms (1129 modules)
[2025-11-09T21:13:40.188Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 835ms (5303 modules)
[2025-11-09T21:13:47.259Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 727ms (5303 modules)
[2025-11-09T21:14:07.418Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 539ms (1129 modules)
[2025-11-09T21:14:33.552Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 654ms (5187 modules)
[2025-11-09T21:14:52.923Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 838ms (5171 modules)
[2025-11-09T21:18:05.386Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/gmail/signatures ...
[2025-11-09T21:18:06.596Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/gmail/signatures in 1709ms (5280 modules)
[2025-11-09T21:18:06.814Z] [INFO   ] 2025-11-09T21:18:06.814Z [DEBUG] üîç [GMAIL SIGNATURES] API endpoint called
[2025-11-09T21:18:06.814Z] [INFO   ] 2025-11-09T21:18:06.814Z [DEBUG] üîç [GMAIL SIGNATURES] Request params: {"requestedUserId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-09T21:18:07.342Z] [INFO   ] 2025-11-09T21:18:07.342Z [DEBUG] üîç [GMAIL SIGNATURES] Getting access token for user: a3e3a51a-175c-4b59-ad03-227ba12a18b0
[2025-11-09T21:18:07.442Z] [INFO   ] 2025-11-09T21:18:07.442Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Access token retrieved successfully
[2025-11-09T21:18:07.442Z] [INFO   ] 2025-11-09T21:18:07.442Z [DEBUG] üîç [GMAIL SIGNATURES] Fetching Gmail sendAs settings...
[2025-11-09T21:18:07.779Z] [INFO   ] 2025-11-09T21:18:07.779Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] SendAs API response received: {
  "sendAs": [
    {
      "sendAsEmail": "stoddard.nathaniel900@gmail.com",
      "displayName": "",
      "replyToAddress": "",
      "signature": "Very Respectfully,\n\nSrA Nathaniel Stoddard, USAF",
      "isPrimary": true,
      "isDefault": true
    }
  ]
}
[2025-11-09T21:18:07.780Z] [INFO   ] 2025-11-09T21:18:07.780Z [DEBUG] üîç [GMAIL SIGNATURES] Found 1 sendAs settings
[2025-11-09T21:18:07.780Z] [INFO   ] 2025-11-09T21:18:07.780Z [DEBUG] üîç [GMAIL SIGNATURES] Processing sendAs 0: {"sendAsEmail":"stoddard.nathaniel900@gmail.com","displayName":"","hasSignature":true,"signaturePreview":"Very Respectfully,\n\nSrA Nathaniel Stoddard, USAF","isDefault":true}
[2025-11-09T21:18:07.780Z] [INFO   ] 2025-11-09T21:18:07.780Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Found signature for: stoddard.nathaniel900@gmail.com
[2025-11-09T21:18:07.780Z] [INFO   ] 2025-11-09T21:18:07.780Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Returning 1 signature(s): [{"id":"gmail-signature-0","name":"stoddard.nathaniel900@gmail.com","hasSignature":true}]
[2025-11-09T21:18:07.845Z] [INFO   ] 2025-11-09T21:18:07.845Z [DEBUG] üîç [GMAIL SIGNATURES] API endpoint called
[2025-11-09T21:18:07.846Z] [INFO   ] 2025-11-09T21:18:07.846Z [DEBUG] üîç [GMAIL SIGNATURES] Request params: {"requestedUserId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-09T21:18:07.941Z] [INFO   ] 2025-11-09T21:18:07.941Z [DEBUG] üîç [GMAIL SIGNATURES] Getting access token for user: a3e3a51a-175c-4b59-ad03-227ba12a18b0
[2025-11-09T21:18:08.042Z] [INFO   ] 2025-11-09T21:18:08.042Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Access token retrieved successfully
[2025-11-09T21:18:08.043Z] [INFO   ] 2025-11-09T21:18:08.042Z [DEBUG] üîç [GMAIL SIGNATURES] Fetching Gmail sendAs settings...
[2025-11-09T21:18:08.238Z] [INFO   ] 2025-11-09T21:18:08.237Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] SendAs API response received: {
  "sendAs": [
    {
      "sendAsEmail": "stoddard.nathaniel900@gmail.com",
      "displayName": "",
      "replyToAddress": "",
      "signature": "Very Respectfully,\n\nSrA Nathaniel Stoddard, USAF",
      "isPrimary": true,
      "isDefault": true
    }
  ]
}
[2025-11-09T21:18:08.238Z] [INFO   ] 2025-11-09T21:18:08.238Z [DEBUG] üîç [GMAIL SIGNATURES] Found 1 sendAs settings
[2025-11-09T21:18:08.238Z] [INFO   ] 2025-11-09T21:18:08.238Z [DEBUG] üîç [GMAIL SIGNATURES] Processing sendAs 0: {"sendAsEmail":"stoddard.nathaniel900@gmail.com","displayName":"","hasSignature":true,"signaturePreview":"Very Respectfully,\n\nSrA Nathaniel Stoddard, USAF","isDefault":true}
[2025-11-09T21:18:08.238Z] [INFO   ] 2025-11-09T21:18:08.238Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Found signature for: stoddard.nathaniel900@gmail.com
[2025-11-09T21:18:08.238Z] [INFO   ] 2025-11-09T21:18:08.238Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Returning 1 signature(s): [{"id":"gmail-signature-0","name":"stoddard.nathaniel900@gmail.com","hasSignature":true}]
[2025-11-09T21:18:25.334Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/presence/count in 252ms (4173 modules)
[2025-11-09T21:18:27.806Z] [INFO   ] 2025-11-09T21:18:27.806Z [DEBUG] üîç [GMAIL SIGNATURES] API endpoint called
[2025-11-09T21:18:27.807Z] [INFO   ] 2025-11-09T21:18:27.807Z [DEBUG] üîç [GMAIL SIGNATURES] Request params: {"requestedUserId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-09T21:18:27.929Z] [INFO   ] 2025-11-09T21:18:27.929Z [DEBUG] üîç [GMAIL SIGNATURES] Getting access token for user: a3e3a51a-175c-4b59-ad03-227ba12a18b0
[2025-11-09T21:18:28.015Z] [INFO   ] 2025-11-09T21:18:28.014Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Access token retrieved successfully
[2025-11-09T21:18:28.016Z] [INFO   ] 2025-11-09T21:18:28.015Z [DEBUG] üîç [GMAIL SIGNATURES] Fetching Gmail sendAs settings...
[2025-11-09T21:18:28.296Z] [INFO   ] 2025-11-09T21:18:28.296Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] SendAs API response received: {
  "sendAs": [
    {
      "sendAsEmail": "stoddard.nathaniel900@gmail.com",
      "displayName": "",
      "replyToAddress": "",
      "signature": "Very Respectfully,\n\nSrA Nathaniel Stoddard, USAF",
      "isPrimary": true,
      "isDefault": true
    }
  ]
}
[2025-11-09T21:18:28.297Z] [INFO   ] 2025-11-09T21:18:28.297Z [DEBUG] üîç [GMAIL SIGNATURES] Found 1 sendAs settings
[2025-11-09T21:18:28.297Z] [INFO   ] 2025-11-09T21:18:28.297Z [DEBUG] üîç [GMAIL SIGNATURES] Processing sendAs 0: {"sendAsEmail":"stoddard.nathaniel900@gmail.com","displayName":"","hasSignature":true,"signaturePreview":"Very Respectfully,\n\nSrA Nathaniel Stoddard, USAF","isDefault":true}
[2025-11-09T21:18:28.297Z] [INFO   ] 2025-11-09T21:18:28.297Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Found signature for: stoddard.nathaniel900@gmail.com
[2025-11-09T21:18:28.299Z] [INFO   ] 2025-11-09T21:18:28.298Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Returning 1 signature(s): [{"id":"gmail-signature-0","name":"stoddard.nathaniel900@gmail.com","hasSignature":true}]
[2025-11-09T21:18:28.372Z] [INFO   ] 2025-11-09T21:18:28.372Z [DEBUG] üîç [GMAIL SIGNATURES] API endpoint called
[2025-11-09T21:18:28.372Z] [INFO   ] 2025-11-09T21:18:28.372Z [DEBUG] üîç [GMAIL SIGNATURES] Request params: {"requestedUserId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-09T21:18:28.446Z] [INFO   ] 2025-11-09T21:18:28.446Z [DEBUG] üîç [GMAIL SIGNATURES] Getting access token for user: a3e3a51a-175c-4b59-ad03-227ba12a18b0
[2025-11-09T21:18:28.525Z] [INFO   ] 2025-11-09T21:18:28.525Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Access token retrieved successfully
[2025-11-09T21:18:28.525Z] [INFO   ] 2025-11-09T21:18:28.525Z [DEBUG] üîç [GMAIL SIGNATURES] Fetching Gmail sendAs settings...
[2025-11-09T21:18:28.722Z] [INFO   ] 2025-11-09T21:18:28.722Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] SendAs API response received: {
  "sendAs": [
    {
      "sendAsEmail": "stoddard.nathaniel900@gmail.com",
      "displayName": "",
      "replyToAddress": "",
      "signature": "Very Respectfully,\n\nSrA Nathaniel Stoddard, USAF",
      "isPrimary": true,
      "isDefault": true
    }
  ]
}
[2025-11-09T21:18:28.723Z] [INFO   ] 2025-11-09T21:18:28.723Z [DEBUG] üîç [GMAIL SIGNATURES] Found 1 sendAs settings
[2025-11-09T21:18:28.723Z] [INFO   ] 2025-11-09T21:18:28.723Z [DEBUG] üîç [GMAIL SIGNATURES] Processing sendAs 0: {"sendAsEmail":"stoddard.nathaniel900@gmail.com","displayName":"","hasSignature":true,"signaturePreview":"Very Respectfully,\n\nSrA Nathaniel Stoddard, USAF","isDefault":true}
[2025-11-09T21:18:28.723Z] [INFO   ] 2025-11-09T21:18:28.723Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Found signature for: stoddard.nathaniel900@gmail.com
[2025-11-09T21:18:28.723Z] [INFO   ] 2025-11-09T21:18:28.723Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Returning 1 signature(s): [{"id":"gmail-signature-0","name":"stoddard.nathaniel900@gmail.com","hasSignature":true}]
[2025-11-09T21:20:17.605Z] [INFO   ] 2025-11-09T21:20:17.605Z [DEBUG] üíß [AUTH] Rehydrating auth state from storage {"hasState":true,"hasUser":false,"initialized":false,"timestamp":"2025-11-09T21:20:17.605Z"}
[2025-11-09T21:20:17.617Z] [INFO   ] 2025-11-09T21:20:17.617Z [DEBUG] üíß [AUTH] State hydrated and reset {"hasUser":false,"initialized":false,"timestamp":"2025-11-09T21:20:17.617Z"}
[2025-11-09T21:20:17.617Z] [INFO   ] 2025-11-09T21:20:17.617Z [DEBUG] ‚è≠Ô∏è [AUTH] Skipping initialization {"hasState":true,"alreadyInitialized":false,"isClient":false,"timestamp":"2025-11-09T21:20:17.617Z"}
[2025-11-09T21:20:19.152Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations ...
[2025-11-09T21:20:19.270Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations in 831ms (4058 modules)
[2025-11-09T21:20:20.047Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled (4174 modules)
[2025-11-09T21:20:20.302Z] [INFO   ] 2025-11-09T21:20:20.302Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-09T21:20:20.302Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-09T21:20:20.498Z] [INFO   ] 2025-11-09T21:20:20.498Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-09T21:20:20.498Z] [INFO   ] 2025-11-09T21:20:20.498Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-09T21:20:20.639Z] [INFO   ] 2025-11-09T21:20:20.639Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":10,"permissionsCount":9,"integrationsError":null,"permissionsError":null}
[2025-11-09T21:20:20.721Z] [INFO   ] 2025-11-09T21:20:20.721Z [DEBUG] ‚è∞ [API /api/integrations] Updated 2 expired integrations
[2025-11-09T21:20:20.722Z] [INFO   ] 2025-11-09T21:20:20.722Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"61424f3b-166f-4d60-bf1c-b63cb9155549","provider":"google-drive","permission":"admin"}
[2025-11-09T21:20:20.722Z] [INFO   ] 2025-11-09T21:20:20.722Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"aed260e3-7d87-4ea0-ba04-1ab6c35bbda5","provider":"discord","permission":"admin"}
[2025-11-09T21:20:20.722Z] [INFO   ] 2025-11-09T21:20:20.722Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"f7f6cf20-d078-40ef-a73c-bc7afd16ec14","provider":"hubspot","permission":"admin"}
[2025-11-09T21:20:20.722Z] [INFO   ] 2025-11-09T21:20:20.722Z [DEBUG] üìã [API /api/integrations] Using implicit permission {"integrationId":"7015bddc-01e2-46ad-89bb-fd2385c7dbfc","provider":"gumroad","permission":"admin","reason":"connected_by"}
[2025-11-09T21:20:20.722Z] [INFO   ] 2025-11-09T21:20:20.722Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"f240f5c0-cb91-462a-bab9-51dcbb116331","provider":"gmail","permission":"admin"}
[2025-11-09T21:20:20.722Z] [INFO   ] 2025-11-09T21:20:20.722Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"cdcb4dfa-0de9-4b0c-b493-28dc16aa47cf","provider":"github","permission":"admin"}
[2025-11-09T21:20:20.722Z] [INFO   ] 2025-11-09T21:20:20.722Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"1cf3129a-cbcb-4df8-b59b-876edd75d137","provider":"google-analytics","permission":"admin"}
[2025-11-09T21:20:20.722Z] [INFO   ] 2025-11-09T21:20:20.722Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"fa4bc43d-e909-4b30-83ab-901e5d284a72","provider":"google-docs","permission":"admin"}
[2025-11-09T21:20:20.722Z] [INFO   ] 2025-11-09T21:20:20.722Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"72c8e3d3-ae7f-464a-b167-ad1e4b7bcc20","provider":"google-calendar","permission":"admin"}
[2025-11-09T21:20:20.722Z] [INFO   ] 2025-11-09T21:20:20.722Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"8640a243-994f-47b4-b456-26844f408359","provider":"google-sheets","permission":"admin"}
[2025-11-09T21:20:20.722Z] [INFO   ] 2025-11-09T21:20:20.722Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":10,"workspaceType":"personal"}
[2025-11-09T21:20:20.771Z] [INFO   ] 2025-11-09T21:20:20.771Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-09T21:20:20.771Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-09T21:20:20.845Z] [INFO   ] 2025-11-09T21:20:20.845Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-09T21:20:20.845Z] [INFO   ] 2025-11-09T21:20:20.845Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-09T21:20:20.971Z] [INFO   ] 2025-11-09T21:20:20.971Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":10,"permissionsCount":9,"integrationsError":null,"permissionsError":null}
[2025-11-09T21:20:20.972Z] [INFO   ] 2025-11-09T21:20:20.972Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"61424f3b-166f-4d60-bf1c-b63cb9155549","provider":"google-drive","permission":"admin"}
[2025-11-09T21:20:20.972Z] [INFO   ] 2025-11-09T21:20:20.972Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"aed260e3-7d87-4ea0-ba04-1ab6c35bbda5","provider":"discord","permission":"admin"}
[2025-11-09T21:20:20.972Z] [INFO   ] 2025-11-09T21:20:20.972Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"f7f6cf20-d078-40ef-a73c-bc7afd16ec14","provider":"hubspot","permission":"admin"}
[2025-11-09T21:20:20.972Z] [INFO   ] 2025-11-09T21:20:20.972Z [DEBUG] üìã [API /api/integrations] Using implicit permission {"integrationId":"7015bddc-01e2-46ad-89bb-fd2385c7dbfc","provider":"gumroad","permission":"admin","reason":"connected_by"}
[2025-11-09T21:20:20.972Z] [INFO   ] 2025-11-09T21:20:20.972Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"f240f5c0-cb91-462a-bab9-51dcbb116331","provider":"gmail","permission":"admin"}
[2025-11-09T21:20:20.972Z] [INFO   ] 2025-11-09T21:20:20.972Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"cdcb4dfa-0de9-4b0c-b493-28dc16aa47cf","provider":"github","permission":"admin"}
[2025-11-09T21:20:20.972Z] [INFO   ] 2025-11-09T21:20:20.972Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"1cf3129a-cbcb-4df8-b59b-876edd75d137","provider":"google-analytics","permission":"admin"}
[2025-11-09T21:20:20.972Z] [INFO   ] 2025-11-09T21:20:20.972Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"fa4bc43d-e909-4b30-83ab-901e5d284a72","provider":"google-docs","permission":"admin"}
[2025-11-09T21:20:20.972Z] [INFO   ] 2025-11-09T21:20:20.972Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"72c8e3d3-ae7f-464a-b167-ad1e4b7bcc20","provider":"google-calendar","permission":"admin"}
[2025-11-09T21:20:20.972Z] [INFO   ] 2025-11-09T21:20:20.972Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"8640a243-994f-47b4-b456-26844f408359","provider":"google-sheets","permission":"admin"}
[2025-11-09T21:20:20.972Z] [INFO   ] 2025-11-09T21:20:20.972Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":10,"workspaceType":"personal"}
[2025-11-09T21:20:21.020Z] [INFO   ] 2025-11-09T21:20:21.020Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-09T21:20:21.020Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-09T21:20:21.123Z] [INFO   ] 2025-11-09T21:20:21.123Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-09T21:20:21.123Z] [INFO   ] 2025-11-09T21:20:21.123Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-09T21:20:21.203Z] [INFO   ] 2025-11-09T21:20:21.203Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":10,"permissionsCount":9,"integrationsError":null,"permissionsError":null}
[2025-11-09T21:20:21.203Z] [INFO   ] 2025-11-09T21:20:21.203Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"61424f3b-166f-4d60-bf1c-b63cb9155549","provider":"google-drive","permission":"admin"}
[2025-11-09T21:20:21.203Z] [INFO   ] 2025-11-09T21:20:21.203Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"aed260e3-7d87-4ea0-ba04-1ab6c35bbda5","provider":"discord","permission":"admin"}
[2025-11-09T21:20:21.203Z] [INFO   ] 2025-11-09T21:20:21.203Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"f7f6cf20-d078-40ef-a73c-bc7afd16ec14","provider":"hubspot","permission":"admin"}
[2025-11-09T21:20:21.203Z] [INFO   ] 2025-11-09T21:20:21.203Z [DEBUG] üìã [API /api/integrations] Using implicit permission {"integrationId":"7015bddc-01e2-46ad-89bb-fd2385c7dbfc","provider":"gumroad","permission":"admin","reason":"connected_by"}
[2025-11-09T21:20:21.203Z] [INFO   ] 2025-11-09T21:20:21.203Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"f240f5c0-cb91-462a-bab9-51dcbb116331","provider":"gmail","permission":"admin"}
[2025-11-09T21:20:21.203Z] [INFO   ] 2025-11-09T21:20:21.203Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"cdcb4dfa-0de9-4b0c-b493-28dc16aa47cf","provider":"github","permission":"admin"}
[2025-11-09T21:20:21.203Z] [INFO   ] 2025-11-09T21:20:21.203Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"1cf3129a-cbcb-4df8-b59b-876edd75d137","provider":"google-analytics","permission":"admin"}
[2025-11-09T21:20:21.203Z] [INFO   ] 2025-11-09T21:20:21.203Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"fa4bc43d-e909-4b30-83ab-901e5d284a72","provider":"google-docs","permission":"admin"}
[2025-11-09T21:20:21.203Z] [INFO   ] 2025-11-09T21:20:21.203Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"72c8e3d3-ae7f-464a-b167-ad1e4b7bcc20","provider":"google-calendar","permission":"admin"}
[2025-11-09T21:20:21.203Z] [INFO   ] 2025-11-09T21:20:21.203Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"8640a243-994f-47b4-b456-26844f408359","provider":"google-sheets","permission":"admin"}
[2025-11-09T21:20:21.203Z] [INFO   ] 2025-11-09T21:20:21.203Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":10,"workspaceType":"personal"}
[2025-11-09T21:20:30.066Z] [INFO   ] 2025-11-09T21:20:30.066Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-09T21:20:30.066Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-09T21:20:30.209Z] [INFO   ] 2025-11-09T21:20:30.209Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-09T21:20:30.209Z] [INFO   ] 2025-11-09T21:20:30.209Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-09T21:20:30.375Z] [INFO   ] 2025-11-09T21:20:30.375Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":10,"permissionsCount":9,"integrationsError":null,"permissionsError":null}
[2025-11-09T21:20:30.375Z] [INFO   ] 2025-11-09T21:20:30.375Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"61424f3b-166f-4d60-bf1c-b63cb9155549","provider":"google-drive","permission":"admin"}
[2025-11-09T21:20:30.375Z] [INFO   ] 2025-11-09T21:20:30.375Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"aed260e3-7d87-4ea0-ba04-1ab6c35bbda5","provider":"discord","permission":"admin"}
[2025-11-09T21:20:30.375Z] [INFO   ] 2025-11-09T21:20:30.375Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"f7f6cf20-d078-40ef-a73c-bc7afd16ec14","provider":"hubspot","permission":"admin"}
[2025-11-09T21:20:30.375Z] [INFO   ] 2025-11-09T21:20:30.375Z [DEBUG] üìã [API /api/integrations] Using implicit permission {"integrationId":"7015bddc-01e2-46ad-89bb-fd2385c7dbfc","provider":"gumroad","permission":"admin","reason":"connected_by"}
[2025-11-09T21:20:30.375Z] [INFO   ] 2025-11-09T21:20:30.375Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"f240f5c0-cb91-462a-bab9-51dcbb116331","provider":"gmail","permission":"admin"}
[2025-11-09T21:20:30.375Z] [INFO   ] 2025-11-09T21:20:30.375Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"cdcb4dfa-0de9-4b0c-b493-28dc16aa47cf","provider":"github","permission":"admin"}
[2025-11-09T21:20:30.375Z] [INFO   ] 2025-11-09T21:20:30.375Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"1cf3129a-cbcb-4df8-b59b-876edd75d137","provider":"google-analytics","permission":"admin"}
[2025-11-09T21:20:30.375Z] [INFO   ] 2025-11-09T21:20:30.375Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"fa4bc43d-e909-4b30-83ab-901e5d284a72","provider":"google-docs","permission":"admin"}
[2025-11-09T21:20:30.375Z] [INFO   ] 2025-11-09T21:20:30.375Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"72c8e3d3-ae7f-464a-b167-ad1e4b7bcc20","provider":"google-calendar","permission":"admin"}
[2025-11-09T21:20:30.375Z] [INFO   ] 2025-11-09T21:20:30.375Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"8640a243-994f-47b4-b456-26844f408359","provider":"google-sheets","permission":"admin"}
[2025-11-09T21:20:30.375Z] [INFO   ] 2025-11-09T21:20:30.375Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":10,"workspaceType":"personal"}
[2025-11-09T21:20:31.086Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/auth/generate-url ...
[2025-11-09T21:20:31.354Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/auth/generate-url in 958ms (5293 modules)
[2025-11-09T21:20:34.179Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/google-drive/callback ...
[2025-11-09T21:20:34.541Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/google-drive/callback in 863ms (5301 modules)
[2025-11-09T21:20:34.634Z] [INFO   ] 2025-11-09T21:20:34.634Z [DEBUG] üîç google-drive callback called: {"url":"http://localhost:3000/api/integrations/google-drive/callback?state=eyJ1c2VySWQiOiJhM2UzYTUxYS0xNzVjLTRiNTktYWQwMy0yMjdiYTEyYTE4YjAiLCJwcm92aWRlciI6Imdvb2dsZS1kcml2ZSIsInJlY29ubmVjdCI6ZmFsc2UsInRpbWVzdGFtcCI6MTc2MjcyMzIzMTYzMywid29ya3NwYWNlVHlwZSI6InBlcnNvbmFsIn0%3D&code=4%2F0Ab32j932qoism5Px9vD4AyZx70bShu3WL4dqSxs2RyGnGOg1WF6soYwob03_KsLGqip0Iw&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fanalytics.edit+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fcalendar+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdocuments+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive.readonly+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgmail.modify+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgmail.settings.basic+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fspreadsheets+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fanalytics.readonly+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fcontacts.readonly+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgmail.settings.sharing+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+openid&authuser=0&prompt=none","hasCode":true,"hasState":true,"error":null,"userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36"}
[2025-11-09T21:20:34.634Z] [INFO   ] 2025-11-09T21:20:34.634Z [DEBUG] google-drive OAuth callback state: {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"google-drive","reconnect":false,"workspaceType":"personal"}
[2025-11-09T21:20:34.894Z] [INFO   ] 2025-11-09T21:20:34.894Z [DEBUG] Granting permissions for workspace context: {"type":"personal"}
[2025-11-09T21:20:34.987Z] [ERROR  ] 2025-11-09T21:20:34.987Z [ERROR] Error granting permission: {"code":"23505","details":null,"hint":null,"message":"duplicate key value violates unique constraint \"integration_permissions_integration_id_user_id_key\""}
[2025-11-09T21:20:34.987Z] [INFO   ] 2025-11-09T21:20:34.987Z [INFO] Personal integration 61424f3b-166f-4d60-bf1c-b63cb9155549 - granted admin to a3e3a51a-175c-4b59-ad03-227ba12a18b0
[2025-11-09T21:20:34.987Z] [INFO   ] 2025-11-09T21:20:34.987Z [DEBUG] ‚úÖ Permissions granted successfully
[2025-11-09T21:20:34.987Z] [INFO   ] 2025-11-09T21:20:34.987Z [DEBUG] ‚úÖ google-drive integration successfully saved
[2025-11-09T21:20:34.987Z] [INFO   ] 2025-11-09T21:20:34.987Z [DEBUG] üîÑ Creating popup response: type=success, provider=google-drive, displayName=Google Drive, message=google-drive connected successfully!
[2025-11-09T21:20:35.229Z] [INFO   ] 2025-11-09T21:20:35.229Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-09T21:20:35.229Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-09T21:20:35.310Z] [INFO   ] 2025-11-09T21:20:35.310Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-09T21:20:35.310Z] [INFO   ] 2025-11-09T21:20:35.310Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-09T21:20:35.436Z] [INFO   ] 2025-11-09T21:20:35.436Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":10,"permissionsCount":9,"integrationsError":null,"permissionsError":null}
[2025-11-09T21:20:35.436Z] [INFO   ] 2025-11-09T21:20:35.436Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"61424f3b-166f-4d60-bf1c-b63cb9155549","provider":"google-drive","permission":"admin"}
[2025-11-09T21:20:35.436Z] [INFO   ] 2025-11-09T21:20:35.436Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"aed260e3-7d87-4ea0-ba04-1ab6c35bbda5","provider":"discord","permission":"admin"}
[2025-11-09T21:20:35.436Z] [INFO   ] 2025-11-09T21:20:35.436Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"f7f6cf20-d078-40ef-a73c-bc7afd16ec14","provider":"hubspot","permission":"admin"}
[2025-11-09T21:20:35.436Z] [INFO   ] 2025-11-09T21:20:35.436Z [DEBUG] üìã [API /api/integrations] Using implicit permission {"integrationId":"7015bddc-01e2-46ad-89bb-fd2385c7dbfc","provider":"gumroad","permission":"admin","reason":"connected_by"}
[2025-11-09T21:20:35.436Z] [INFO   ] 2025-11-09T21:20:35.436Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"f240f5c0-cb91-462a-bab9-51dcbb116331","provider":"gmail","permission":"admin"}
[2025-11-09T21:20:35.436Z] [INFO   ] 2025-11-09T21:20:35.436Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"cdcb4dfa-0de9-4b0c-b493-28dc16aa47cf","provider":"github","permission":"admin"}
[2025-11-09T21:20:35.436Z] [INFO   ] 2025-11-09T21:20:35.436Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"1cf3129a-cbcb-4df8-b59b-876edd75d137","provider":"google-analytics","permission":"admin"}
[2025-11-09T21:20:35.436Z] [INFO   ] 2025-11-09T21:20:35.436Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"fa4bc43d-e909-4b30-83ab-901e5d284a72","provider":"google-docs","permission":"admin"}
[2025-11-09T21:20:35.436Z] [INFO   ] 2025-11-09T21:20:35.436Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"72c8e3d3-ae7f-464a-b167-ad1e4b7bcc20","provider":"google-calendar","permission":"admin"}
[2025-11-09T21:20:35.436Z] [INFO   ] 2025-11-09T21:20:35.436Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"8640a243-994f-47b4-b456-26844f408359","provider":"google-sheets","permission":"admin"}
[2025-11-09T21:20:35.436Z] [INFO   ] 2025-11-09T21:20:35.436Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":10,"workspaceType":"personal"}
[2025-11-09T21:20:46.765Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/fetch-user-data ...
[2025-11-09T21:20:47.075Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/fetch-user-data in 851ms (5303 modules)
[2025-11-09T21:20:47.202Z] [INFO   ] 2025-11-09T21:20:47.202Z [DEBUG] üöÄ [SERVER] fetch-user-data API route called
[2025-11-09T21:20:47.202Z] [INFO   ] 2025-11-09T21:20:47.202Z [DEBUG] üîç [SERVER] fetch-user-data request parsed: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_spreadsheets","options":{}}
[2025-11-09T21:20:47.329Z] [INFO   ] 2025-11-09T21:20:47.329Z [DEBUG] üîÑ [SERVER] Routing Google request to dedicated API: google-sheets_spreadsheets (provider: google-sheets)
[2025-11-09T21:20:47.863Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/google/data ...
[2025-11-09T21:20:47.870Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/google/data in 515ms (5337 modules)
[2025-11-09T21:20:47.998Z] [INFO   ] 2025-11-09T21:20:47.998Z [DEBUG] üöÄ [Google Data API] POST handler invoked
[2025-11-09T21:20:47.998Z] [INFO   ] 2025-11-09T21:20:47.998Z [DEBUG] üîç [Google Data API] Request received: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_spreadsheets","options":{},"fullRequestBody":{"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_spreadsheets","options":{}}}
[2025-11-09T21:20:48.077Z] [INFO   ] 2025-11-09T21:20:48.077Z [DEBUG] üìä [Google API] Integration provider check: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","actualProvider":"google-sheets","dataType":"google-sheets_spreadsheets","providerLowerCase":"google-sheets"}
[2025-11-09T21:20:48.078Z] [INFO   ] 2025-11-09T21:20:48.078Z [DEBUG] üîç [Google API] Processing request: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_spreadsheets","provider":"google-sheets","status":"connected","hasToken":true}
[2025-11-09T21:20:48.078Z] [INFO   ] 2025-11-09T21:20:48.078Z [DEBUG] üìä [Google Sheets] Fetching spreadsheets
[2025-11-09T21:20:48.589Z] [INFO   ] 2025-11-09T21:20:48.589Z [DEBUG] ‚úÖ [Google Sheets] Retrieved 21 spreadsheets
[2025-11-09T21:20:48.589Z] [INFO   ] 2025-11-09T21:20:48.589Z [DEBUG] ‚úÖ [Google API] Successfully processed google-sheets_spreadsheets: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","resultCount":21}
[2025-11-09T21:20:48.590Z] [INFO   ] 2025-11-09T21:20:48.590Z [DEBUG] ‚úÖ [SERVER] Google API completed for google-sheets_spreadsheets, result length: 21
[2025-11-09T21:23:03.773Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 3.5s (5171 modules)
[2025-11-09T21:23:39.680Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 725ms (1129 modules)
[2025-11-09T21:24:58.519Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1794ms (5171 modules)
[2025-11-09T21:25:12.441Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 397ms (1129 modules)
[2025-11-09T21:25:18.608Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 339ms (1129 modules)
[2025-11-09T21:25:19.695Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/presence/count in 291ms (4165 modules)
[2025-11-09T21:25:24.243Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 356ms (1129 modules)
[2025-11-09T21:25:32.104Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 323ms (1129 modules)
[2025-11-09T21:25:46.763Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 315ms (1129 modules)
[2025-11-09T21:25:54.726Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 411ms (1129 modules)
[2025-11-09T21:26:05.757Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 371ms (1129 modules)
[2025-11-09T21:26:17.861Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1288ms (5296 modules)
[2025-11-09T21:26:19.586Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 415ms (1130 modules)
[2025-11-09T21:26:27.867Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 751ms (5173 modules)
[2025-11-09T21:26:27.907Z] [WARN   ]  [33m[1m‚ö†[22m[39m Fast Refresh had to perform a full reload. Read more: https://nextjs.org/docs/messages/fast-refresh-reload
[2025-11-09T21:26:28.736Z] [INFO   ] 2025-11-09T21:26:28.736Z [DEBUG] üíß [AUTH] Rehydrating auth state from storage {"hasState":true,"hasUser":false,"initialized":false,"timestamp":"2025-11-09T21:26:28.736Z"}
[2025-11-09T21:26:28.750Z] [INFO   ] 2025-11-09T21:26:28.750Z [DEBUG] üíß [AUTH] State hydrated and reset {"hasUser":false,"initialized":false,"timestamp":"2025-11-09T21:26:28.750Z"}
[2025-11-09T21:26:28.750Z] [INFO   ] 2025-11-09T21:26:28.750Z [DEBUG] ‚è≠Ô∏è [AUTH] Skipping initialization {"hasState":true,"alreadyInitialized":false,"isClient":false,"timestamp":"2025-11-09T21:26:28.750Z"}
[2025-11-09T21:26:30.132Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations in 475ms (4059 modules)
[2025-11-09T21:26:31.045Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled (4175 modules)
[2025-11-09T21:26:31.226Z] [INFO   ] 2025-11-09T21:26:31.226Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-09T21:26:31.226Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-09T21:26:31.373Z] [INFO   ] 2025-11-09T21:26:31.373Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-09T21:26:31.373Z] [INFO   ] 2025-11-09T21:26:31.373Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-09T21:26:31.516Z] [INFO   ] 2025-11-09T21:26:31.516Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":10,"permissionsCount":9,"integrationsError":null,"permissionsError":null}
[2025-11-09T21:26:31.672Z] [INFO   ] 2025-11-09T21:26:31.672Z [DEBUG] ‚è∞ [API /api/integrations] Updated 1 expired integrations
[2025-11-09T21:26:31.672Z] [INFO   ] 2025-11-09T21:26:31.672Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"61424f3b-166f-4d60-bf1c-b63cb9155549","provider":"google-drive","permission":"admin"}
[2025-11-09T21:26:31.672Z] [INFO   ] 2025-11-09T21:26:31.672Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"aed260e3-7d87-4ea0-ba04-1ab6c35bbda5","provider":"discord","permission":"admin"}
[2025-11-09T21:26:31.672Z] [INFO   ] 2025-11-09T21:26:31.672Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"f7f6cf20-d078-40ef-a73c-bc7afd16ec14","provider":"hubspot","permission":"admin"}
[2025-11-09T21:26:31.672Z] [INFO   ] 2025-11-09T21:26:31.672Z [DEBUG] üìã [API /api/integrations] Using implicit permission {"integrationId":"7015bddc-01e2-46ad-89bb-fd2385c7dbfc","provider":"gumroad","permission":"admin","reason":"connected_by"}
[2025-11-09T21:26:31.672Z] [INFO   ] 2025-11-09T21:26:31.672Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"f240f5c0-cb91-462a-bab9-51dcbb116331","provider":"gmail","permission":"admin"}
[2025-11-09T21:26:31.672Z] [INFO   ] 2025-11-09T21:26:31.672Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"cdcb4dfa-0de9-4b0c-b493-28dc16aa47cf","provider":"github","permission":"admin"}
[2025-11-09T21:26:31.672Z] [INFO   ] 2025-11-09T21:26:31.672Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"1cf3129a-cbcb-4df8-b59b-876edd75d137","provider":"google-analytics","permission":"admin"}
[2025-11-09T21:26:31.672Z] [INFO   ] 2025-11-09T21:26:31.672Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"fa4bc43d-e909-4b30-83ab-901e5d284a72","provider":"google-docs","permission":"admin"}
[2025-11-09T21:26:31.673Z] [INFO   ] 2025-11-09T21:26:31.673Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"72c8e3d3-ae7f-464a-b167-ad1e4b7bcc20","provider":"google-calendar","permission":"admin"}
[2025-11-09T21:26:31.673Z] [INFO   ] 2025-11-09T21:26:31.673Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"8640a243-994f-47b4-b456-26844f408359","provider":"google-sheets","permission":"admin"}
[2025-11-09T21:26:31.673Z] [INFO   ] 2025-11-09T21:26:31.673Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":10,"workspaceType":"personal"}
[2025-11-09T21:26:37.908Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 361ms (1130 modules)
[2025-11-09T21:26:42.960Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 667ms (5305 modules)
[2025-11-09T21:26:54.527Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1008ms (5305 modules)
[2025-11-09T21:29:31.200Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/fetch-user-data ...
[2025-11-09T21:29:32.159Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/auth/generate-url in 1712ms (4150 modules)
[2025-11-09T21:29:32.647Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled (4173 modules)
[2025-11-09T21:29:32.834Z] [INFO   ] 2025-11-09T21:29:32.834Z [DEBUG] üöÄ [SERVER] fetch-user-data API route called
[2025-11-09T21:29:32.835Z] [INFO   ] 2025-11-09T21:29:32.835Z [DEBUG] üîç [SERVER] fetch-user-data request parsed: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_spreadsheets","options":{}}
[2025-11-09T21:29:33.146Z] [INFO   ] 2025-11-09T21:29:33.145Z [DEBUG] üîÑ [SERVER] Routing Google request to dedicated API: google-sheets_spreadsheets (provider: google-sheets)
[2025-11-09T21:29:33.724Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/google/data ...
[2025-11-09T21:29:33.978Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/google/data in 801ms (4207 modules)
[2025-11-09T21:29:34.088Z] [INFO   ] 2025-11-09T21:29:34.088Z [DEBUG] üöÄ [Google Data API] POST handler invoked
[2025-11-09T21:29:34.089Z] [INFO   ] 2025-11-09T21:29:34.089Z [DEBUG] üîç [Google Data API] Request received: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_spreadsheets","options":{},"fullRequestBody":{"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_spreadsheets","options":{}}}
[2025-11-09T21:29:34.190Z] [INFO   ] 2025-11-09T21:29:34.190Z [DEBUG] üìä [Google API] Integration provider check: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","actualProvider":"google-sheets","dataType":"google-sheets_spreadsheets","providerLowerCase":"google-sheets"}
[2025-11-09T21:29:34.190Z] [ERROR  ] 2025-11-09T21:29:34.190Z [ERROR] ‚ùå [Google API] Integration not connected: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","status":"expired"}
[2025-11-09T21:29:34.192Z] [ERROR  ] 2025-11-09T21:29:34.192Z [ERROR] ‚ùå [SERVER] Google API error: {"error":"Google integration is not connected. Please reconnect your account.","details":{"needsReconnection":true,"currentStatus":"expired"}}
[2025-11-09T21:29:35.566Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/google-sheets/callback ...
[2025-11-09T21:29:35.814Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/google-sheets/callback in 758ms (5331 modules)
[2025-11-09T21:29:35.942Z] [INFO   ] 2025-11-09T21:29:35.941Z [DEBUG] üîç google-sheets callback called: {"url":"http://localhost:3000/api/integrations/google-sheets/callback?state=eyJ1c2VySWQiOiJhM2UzYTUxYS0xNzVjLTRiNTktYWQwMy0yMjdiYTEyYTE4YjAiLCJwcm92aWRlciI6Imdvb2dsZS1zaGVldHMiLCJyZWNvbm5lY3QiOmZhbHNlLCJ0aW1lc3RhbXAiOjE3NjI3MjM3NzMxMzcsIndvcmtzcGFjZVR5cGUiOiJwZXJzb25hbCJ9&code=4%2F0Ab32j92bcBjGFj0FHv7N9cFL8tr_YILfXkiguU48m8UAt8ujl4PJmNVdjtsASkr40MQBjw&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgmail.settings.basic+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fanalytics.readonly+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fcontacts.readonly+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdocuments+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fspreadsheets+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgmail.modify+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fcalendar+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fanalytics.edit+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgmail.settings.sharing+openid+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive.readonly&authuser=0&prompt=none","hasCode":true,"hasState":true,"error":null,"userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36"}
[2025-11-09T21:29:35.942Z] [INFO   ] 2025-11-09T21:29:35.942Z [DEBUG] google-sheets OAuth callback state: {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"google-sheets","reconnect":false,"workspaceType":"personal"}
[2025-11-09T21:29:36.269Z] [INFO   ] 2025-11-09T21:29:36.269Z [DEBUG] Granting permissions for workspace context: {"type":"personal"}
[2025-11-09T21:29:36.386Z] [ERROR  ] 2025-11-09T21:29:36.386Z [ERROR] Error granting permission: {"code":"23505","details":null,"hint":null,"message":"duplicate key value violates unique constraint \"integration_permissions_integration_id_user_id_key\""}
[2025-11-09T21:29:36.386Z] [INFO   ] 2025-11-09T21:29:36.386Z [INFO] Personal integration 8640a243-994f-47b4-b456-26844f408359 - granted admin to a3e3a51a-175c-4b59-ad03-227ba12a18b0
[2025-11-09T21:29:36.386Z] [INFO   ] 2025-11-09T21:29:36.386Z [DEBUG] ‚úÖ Permissions granted successfully
[2025-11-09T21:29:36.386Z] [INFO   ] 2025-11-09T21:29:36.386Z [DEBUG] ‚úÖ google-sheets integration successfully saved
[2025-11-09T21:29:36.386Z] [INFO   ] 2025-11-09T21:29:36.386Z [DEBUG] üîÑ Creating popup response: type=success, provider=google-sheets, displayName=Google Sheets, message=google-sheets connected successfully!
[2025-11-09T21:29:40.419Z] [INFO   ] 2025-11-09T21:29:40.418Z [DEBUG] üöÄ [SERVER] fetch-user-data API route called
[2025-11-09T21:29:40.419Z] [INFO   ] 2025-11-09T21:29:40.419Z [DEBUG] üîç [SERVER] fetch-user-data request parsed: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_spreadsheets","options":{}}
[2025-11-09T21:29:40.571Z] [INFO   ] 2025-11-09T21:29:40.571Z [DEBUG] üîÑ [SERVER] Routing Google request to dedicated API: google-sheets_spreadsheets (provider: google-sheets)
[2025-11-09T21:29:40.643Z] [INFO   ] 2025-11-09T21:29:40.642Z [DEBUG] üöÄ [Google Data API] POST handler invoked
[2025-11-09T21:29:40.643Z] [INFO   ] 2025-11-09T21:29:40.643Z [DEBUG] üîç [Google Data API] Request received: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_spreadsheets","options":{},"fullRequestBody":{"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_spreadsheets","options":{}}}
[2025-11-09T21:29:40.724Z] [INFO   ] 2025-11-09T21:29:40.724Z [DEBUG] üìä [Google API] Integration provider check: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","actualProvider":"google-sheets","dataType":"google-sheets_spreadsheets","providerLowerCase":"google-sheets"}
[2025-11-09T21:29:40.725Z] [INFO   ] 2025-11-09T21:29:40.725Z [DEBUG] üîç [Google API] Processing request: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_spreadsheets","provider":"google-sheets","status":"connected","hasToken":true}
[2025-11-09T21:29:40.725Z] [INFO   ] 2025-11-09T21:29:40.725Z [DEBUG] üìä [Google Sheets] Fetching spreadsheets
[2025-11-09T21:29:41.171Z] [INFO   ] 2025-11-09T21:29:41.171Z [DEBUG] ‚úÖ [Google Sheets] Retrieved 21 spreadsheets
[2025-11-09T21:29:41.171Z] [INFO   ] 2025-11-09T21:29:41.171Z [DEBUG] ‚úÖ [Google API] Successfully processed google-sheets_spreadsheets: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","resultCount":21}
[2025-11-09T21:29:41.173Z] [INFO   ] 2025-11-09T21:29:41.173Z [DEBUG] ‚úÖ [SERVER] Google API completed for google-sheets_spreadsheets, result length: 21
[2025-11-09T21:29:41.657Z] [INFO   ] 2025-11-09T21:29:41.657Z [DEBUG] üíß [AUTH] Rehydrating auth state from storage {"hasState":true,"hasUser":false,"initialized":false,"timestamp":"2025-11-09T21:29:41.657Z"}
[2025-11-09T21:29:41.671Z] [INFO   ] 2025-11-09T21:29:41.670Z [DEBUG] üíß [AUTH] State hydrated and reset {"hasUser":false,"initialized":false,"timestamp":"2025-11-09T21:29:41.670Z"}
[2025-11-09T21:29:41.671Z] [INFO   ] 2025-11-09T21:29:41.671Z [DEBUG] ‚è≠Ô∏è [AUTH] Skipping initialization {"hasState":true,"alreadyInitialized":false,"isClient":false,"timestamp":"2025-11-09T21:29:41.671Z"}
[2025-11-09T21:29:42.866Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations ...
[2025-11-09T21:29:42.888Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations in 546ms (4217 modules)
[2025-11-09T21:29:43.917Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled (4223 modules)
[2025-11-09T21:29:44.002Z] [INFO   ] 2025-11-09T21:29:44.002Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-09T21:29:44.002Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-09T21:29:44.253Z] [INFO   ] 2025-11-09T21:29:44.252Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-09T21:29:44.253Z] [INFO   ] 2025-11-09T21:29:44.253Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-09T21:29:44.379Z] [INFO   ] 2025-11-09T21:29:44.379Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":10,"permissionsCount":9,"integrationsError":null,"permissionsError":null}
[2025-11-09T21:29:44.379Z] [INFO   ] 2025-11-09T21:29:44.379Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"61424f3b-166f-4d60-bf1c-b63cb9155549","provider":"google-drive","permission":"admin"}
[2025-11-09T21:29:44.379Z] [INFO   ] 2025-11-09T21:29:44.379Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"aed260e3-7d87-4ea0-ba04-1ab6c35bbda5","provider":"discord","permission":"admin"}
[2025-11-09T21:29:44.379Z] [INFO   ] 2025-11-09T21:29:44.379Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"f7f6cf20-d078-40ef-a73c-bc7afd16ec14","provider":"hubspot","permission":"admin"}
[2025-11-09T21:29:44.379Z] [INFO   ] 2025-11-09T21:29:44.379Z [DEBUG] üìã [API /api/integrations] Using implicit permission {"integrationId":"7015bddc-01e2-46ad-89bb-fd2385c7dbfc","provider":"gumroad","permission":"admin","reason":"connected_by"}
[2025-11-09T21:29:44.379Z] [INFO   ] 2025-11-09T21:29:44.379Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"f240f5c0-cb91-462a-bab9-51dcbb116331","provider":"gmail","permission":"admin"}
[2025-11-09T21:29:44.379Z] [INFO   ] 2025-11-09T21:29:44.379Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"cdcb4dfa-0de9-4b0c-b493-28dc16aa47cf","provider":"github","permission":"admin"}
[2025-11-09T21:29:44.379Z] [INFO   ] 2025-11-09T21:29:44.379Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"1cf3129a-cbcb-4df8-b59b-876edd75d137","provider":"google-analytics","permission":"admin"}
[2025-11-09T21:29:44.379Z] [INFO   ] 2025-11-09T21:29:44.379Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"fa4bc43d-e909-4b30-83ab-901e5d284a72","provider":"google-docs","permission":"admin"}
[2025-11-09T21:29:44.379Z] [INFO   ] 2025-11-09T21:29:44.379Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"72c8e3d3-ae7f-464a-b167-ad1e4b7bcc20","provider":"google-calendar","permission":"admin"}
[2025-11-09T21:29:44.379Z] [INFO   ] 2025-11-09T21:29:44.379Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"8640a243-994f-47b4-b456-26844f408359","provider":"google-sheets","permission":"admin"}
[2025-11-09T21:29:44.380Z] [INFO   ] 2025-11-09T21:29:44.380Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":10,"workspaceType":"personal"}
[2025-11-09T21:29:44.512Z] [INFO   ] 2025-11-09T21:29:44.512Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-09T21:29:44.512Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-09T21:29:44.599Z] [INFO   ] 2025-11-09T21:29:44.599Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-09T21:29:44.599Z] [INFO   ] 2025-11-09T21:29:44.599Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-09T21:29:44.731Z] [INFO   ] 2025-11-09T21:29:44.731Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":10,"permissionsCount":9,"integrationsError":null,"permissionsError":null}
[2025-11-09T21:29:44.731Z] [INFO   ] 2025-11-09T21:29:44.731Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"61424f3b-166f-4d60-bf1c-b63cb9155549","provider":"google-drive","permission":"admin"}
[2025-11-09T21:29:44.731Z] [INFO   ] 2025-11-09T21:29:44.731Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"aed260e3-7d87-4ea0-ba04-1ab6c35bbda5","provider":"discord","permission":"admin"}
[2025-11-09T21:29:44.731Z] [INFO   ] 2025-11-09T21:29:44.731Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"f7f6cf20-d078-40ef-a73c-bc7afd16ec14","provider":"hubspot","permission":"admin"}
[2025-11-09T21:29:44.731Z] [INFO   ] 2025-11-09T21:29:44.731Z [DEBUG] üìã [API /api/integrations] Using implicit permission {"integrationId":"7015bddc-01e2-46ad-89bb-fd2385c7dbfc","provider":"gumroad","permission":"admin","reason":"connected_by"}
[2025-11-09T21:29:44.731Z] [INFO   ] 2025-11-09T21:29:44.731Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"f240f5c0-cb91-462a-bab9-51dcbb116331","provider":"gmail","permission":"admin"}
[2025-11-09T21:29:44.731Z] [INFO   ] 2025-11-09T21:29:44.731Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"cdcb4dfa-0de9-4b0c-b493-28dc16aa47cf","provider":"github","permission":"admin"}
[2025-11-09T21:29:44.731Z] [INFO   ] 2025-11-09T21:29:44.731Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"1cf3129a-cbcb-4df8-b59b-876edd75d137","provider":"google-analytics","permission":"admin"}
[2025-11-09T21:29:44.731Z] [INFO   ] 2025-11-09T21:29:44.731Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"fa4bc43d-e909-4b30-83ab-901e5d284a72","provider":"google-docs","permission":"admin"}
[2025-11-09T21:29:44.731Z] [INFO   ] 2025-11-09T21:29:44.731Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"72c8e3d3-ae7f-464a-b167-ad1e4b7bcc20","provider":"google-calendar","permission":"admin"}
[2025-11-09T21:29:44.731Z] [INFO   ] 2025-11-09T21:29:44.731Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"8640a243-994f-47b4-b456-26844f408359","provider":"google-sheets","permission":"admin"}
[2025-11-09T21:29:44.731Z] [INFO   ] 2025-11-09T21:29:44.731Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":10,"workspaceType":"personal"}
[2025-11-09T21:29:44.783Z] [INFO   ] 2025-11-09T21:29:44.782Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-09T21:29:44.782Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-09T21:29:44.885Z] [INFO   ] 2025-11-09T21:29:44.885Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-09T21:29:44.885Z] [INFO   ] 2025-11-09T21:29:44.885Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-09T21:29:44.898Z] [INFO   ] 2025-11-09T21:29:44.898Z [DEBUG] üöÄ [SERVER] fetch-user-data API route called
[2025-11-09T21:29:44.899Z] [INFO   ] 2025-11-09T21:29:44.899Z [DEBUG] üîç [SERVER] fetch-user-data request parsed: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_spreadsheets","options":{}}
[2025-11-09T21:29:44.992Z] [INFO   ] 2025-11-09T21:29:44.991Z [DEBUG] üîÑ [SERVER] Routing Google request to dedicated API: google-sheets_spreadsheets (provider: google-sheets)
[2025-11-09T21:29:44.993Z] [INFO   ] 2025-11-09T21:29:44.993Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":10,"permissionsCount":9,"integrationsError":null,"permissionsError":null}
[2025-11-09T21:29:44.993Z] [INFO   ] 2025-11-09T21:29:44.993Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"61424f3b-166f-4d60-bf1c-b63cb9155549","provider":"google-drive","permission":"admin"}
[2025-11-09T21:29:44.993Z] [INFO   ] 2025-11-09T21:29:44.993Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"aed260e3-7d87-4ea0-ba04-1ab6c35bbda5","provider":"discord","permission":"admin"}
[2025-11-09T21:29:44.993Z] [INFO   ] 2025-11-09T21:29:44.993Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"f7f6cf20-d078-40ef-a73c-bc7afd16ec14","provider":"hubspot","permission":"admin"}
[2025-11-09T21:29:44.993Z] [INFO   ] 2025-11-09T21:29:44.993Z [DEBUG] üìã [API /api/integrations] Using implicit permission {"integrationId":"7015bddc-01e2-46ad-89bb-fd2385c7dbfc","provider":"gumroad","permission":"admin","reason":"connected_by"}
[2025-11-09T21:29:44.993Z] [INFO   ] 2025-11-09T21:29:44.993Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"f240f5c0-cb91-462a-bab9-51dcbb116331","provider":"gmail","permission":"admin"}
[2025-11-09T21:29:44.993Z] [INFO   ] 2025-11-09T21:29:44.993Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"cdcb4dfa-0de9-4b0c-b493-28dc16aa47cf","provider":"github","permission":"admin"}
[2025-11-09T21:29:44.993Z] [INFO   ] 2025-11-09T21:29:44.993Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"1cf3129a-cbcb-4df8-b59b-876edd75d137","provider":"google-analytics","permission":"admin"}
[2025-11-09T21:29:44.993Z] [INFO   ] 2025-11-09T21:29:44.993Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"fa4bc43d-e909-4b30-83ab-901e5d284a72","provider":"google-docs","permission":"admin"}
[2025-11-09T21:29:44.993Z] [INFO   ] 2025-11-09T21:29:44.993Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"72c8e3d3-ae7f-464a-b167-ad1e4b7bcc20","provider":"google-calendar","permission":"admin"}
[2025-11-09T21:29:44.993Z] [INFO   ] 2025-11-09T21:29:44.993Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"8640a243-994f-47b4-b456-26844f408359","provider":"google-sheets","permission":"admin"}
[2025-11-09T21:29:44.993Z] [INFO   ] 2025-11-09T21:29:44.993Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":10,"workspaceType":"personal"}
[2025-11-09T21:29:45.052Z] [INFO   ] 2025-11-09T21:29:45.052Z [DEBUG] üöÄ [Google Data API] POST handler invoked
[2025-11-09T21:29:45.052Z] [INFO   ] 2025-11-09T21:29:45.052Z [DEBUG] üîç [Google Data API] Request received: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_spreadsheets","options":{},"fullRequestBody":{"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_spreadsheets","options":{}}}
[2025-11-09T21:29:45.133Z] [INFO   ] 2025-11-09T21:29:45.133Z [DEBUG] üìä [Google API] Integration provider check: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","actualProvider":"google-sheets","dataType":"google-sheets_spreadsheets","providerLowerCase":"google-sheets"}
[2025-11-09T21:29:45.133Z] [INFO   ] 2025-11-09T21:29:45.133Z [DEBUG] üîç [Google API] Processing request: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_spreadsheets","provider":"google-sheets","status":"connected","hasToken":true}
[2025-11-09T21:29:45.133Z] [INFO   ] 2025-11-09T21:29:45.133Z [DEBUG] üìä [Google Sheets] Fetching spreadsheets
[2025-11-09T21:29:45.467Z] [INFO   ] 2025-11-09T21:29:45.466Z [DEBUG] ‚úÖ [Google Sheets] Retrieved 21 spreadsheets
[2025-11-09T21:29:45.467Z] [INFO   ] 2025-11-09T21:29:45.467Z [DEBUG] ‚úÖ [Google API] Successfully processed google-sheets_spreadsheets: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","resultCount":21}
[2025-11-09T21:29:45.468Z] [INFO   ] 2025-11-09T21:29:45.468Z [DEBUG] ‚úÖ [SERVER] Google API completed for google-sheets_spreadsheets, result length: 21
[2025-11-09T21:29:46.849Z] [INFO   ] 2025-11-09T21:29:46.849Z [DEBUG] üöÄ [SERVER] fetch-user-data API route called
[2025-11-09T21:29:46.850Z] [INFO   ] 2025-11-09T21:29:46.850Z [DEBUG] üîç [SERVER] fetch-user-data request parsed: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_sheets","options":{"spreadsheetId":"13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI"}}
[2025-11-09T21:29:46.926Z] [INFO   ] 2025-11-09T21:29:46.926Z [DEBUG] üîÑ [SERVER] Routing Google request to dedicated API: google-sheets_sheets (provider: google-sheets)
[2025-11-09T21:29:46.988Z] [INFO   ] 2025-11-09T21:29:46.988Z [DEBUG] üöÄ [Google Data API] POST handler invoked
[2025-11-09T21:29:46.988Z] [INFO   ] 2025-11-09T21:29:46.988Z [DEBUG] üîç [Google Data API] Request received: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_sheets","options":{"spreadsheetId":"13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI"},"fullRequestBody":{"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_sheets","options":{"spreadsheetId":"13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI"}}}
[2025-11-09T21:29:47.068Z] [INFO   ] 2025-11-09T21:29:47.068Z [DEBUG] üìä [Google API] Integration provider check: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","actualProvider":"google-sheets","dataType":"google-sheets_sheets","providerLowerCase":"google-sheets"}
[2025-11-09T21:29:47.068Z] [INFO   ] 2025-11-09T21:29:47.068Z [DEBUG] üîç [Google API] Processing request: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_sheets","provider":"google-sheets","status":"connected","hasToken":true}
[2025-11-09T21:29:47.068Z] [INFO   ] 2025-11-09T21:29:47.068Z [DEBUG] üìä [Google Sheets] Fetching sheets for spreadsheet: 13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI
[2025-11-09T21:29:47.773Z] [INFO   ] 2025-11-09T21:29:47.773Z [DEBUG] ‚úÖ [Google Sheets] Retrieved 4 sheets
[2025-11-09T21:29:47.774Z] [INFO   ] 2025-11-09T21:29:47.774Z [DEBUG] ‚úÖ [Google API] Successfully processed google-sheets_sheets: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","resultCount":4}
[2025-11-09T21:29:47.776Z] [INFO   ] 2025-11-09T21:29:47.776Z [DEBUG] ‚úÖ [SERVER] Google API completed for google-sheets_sheets, result length: 4
[2025-11-09T21:30:46.583Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/gmail/data ...
[2025-11-09T21:30:55.359Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/gmail/data in 9.3s (5338 modules)
[2025-11-09T21:30:55.778Z] [INFO   ] 2025-11-09T21:30:55.778Z [DEBUG] üîç [Gmail Data API] Request: {"integrationId":"f240f5c0-cb91-462a-bab9-51dcbb116331","dataType":"gmail_from_addresses","options":{}}
[2025-11-09T21:30:55.779Z] [INFO   ] 2025-11-09T21:30:55.779Z [DEBUG] üîç [Gmail Data API] Request: {"integrationId":"f240f5c0-cb91-462a-bab9-51dcbb116331","dataType":"gmail-enhanced-recipients","options":{}}
[2025-11-09T21:30:55.779Z] [INFO   ] 2025-11-09T21:30:55.779Z [DEBUG] üîç [Gmail Data API] Request: {"integrationId":"f240f5c0-cb91-462a-bab9-51dcbb116331","dataType":"gmail-enhanced-recipients","options":{}}
[2025-11-09T21:30:55.779Z] [INFO   ] 2025-11-09T21:30:55.779Z [DEBUG] üîç [Gmail Data API] Request: {"integrationId":"f240f5c0-cb91-462a-bab9-51dcbb116331","dataType":"gmail-enhanced-recipients","options":{}}
[2025-11-09T21:30:55.797Z] [INFO   ] 2025-11-09T21:30:55.797Z [DEBUG] üîç [GMAIL SIGNATURES] API endpoint called
[2025-11-09T21:30:55.797Z] [INFO   ] 2025-11-09T21:30:55.797Z [DEBUG] üîç [GMAIL SIGNATURES] Request params: {"requestedUserId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-09T21:30:56.115Z] [INFO   ] 2025-11-09T21:30:56.115Z [DEBUG] üîç [GMAIL SIGNATURES] Getting access token for user: a3e3a51a-175c-4b59-ad03-227ba12a18b0
[2025-11-09T21:30:56.118Z] [INFO   ] 2025-11-09T21:30:56.118Z [DEBUG] üöÄ [Gmail Data API] Executing handler for: gmail-enhanced-recipients
[2025-11-09T21:30:56.119Z] [INFO   ] 2025-11-09T21:30:56.119Z [DEBUG] üöÄ [Gmail API] Fetching fresh enhanced recipients
[2025-11-09T21:30:56.120Z] [INFO   ] 2025-11-09T21:30:56.120Z [DEBUG] üîç [Gmail API] Integration scopes: ["https://www.googleapis.com/auth/contacts.readonly","https://www.googleapis.com/auth/userinfo.profile","https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/analytics.readonly","https://www.googleapis.com/auth/gmail.modify","openid","https://www.googleapis.com/auth/gmail.settings.basic","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/analytics.edit","https://www.googleapis.com/auth/documents","https://www.googleapis.com/auth/calendar","https://www.googleapis.com/auth/userinfo.email","https://www.googleapis.com/auth/gmail.settings.sharing","https://www.googleapis.com/auth/spreadsheets"]
[2025-11-09T21:30:56.120Z] [INFO   ] 2025-11-09T21:30:56.120Z [DEBUG] üìá [Gmail API] Attempting to fetch Google Contacts...
[2025-11-09T21:30:56.124Z] [INFO   ] 2025-11-09T21:30:56.124Z [DEBUG] üöÄ [Gmail Data API] Executing handler for: gmail-enhanced-recipients
[2025-11-09T21:30:56.125Z] [INFO   ] 2025-11-09T21:30:56.125Z [DEBUG] üöÄ [Gmail API] Fetching fresh enhanced recipients
[2025-11-09T21:30:56.125Z] [INFO   ] 2025-11-09T21:30:56.125Z [DEBUG] üîç [Gmail API] Integration scopes: ["https://www.googleapis.com/auth/contacts.readonly","https://www.googleapis.com/auth/userinfo.profile","https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/analytics.readonly","https://www.googleapis.com/auth/gmail.modify","openid","https://www.googleapis.com/auth/gmail.settings.basic","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/analytics.edit","https://www.googleapis.com/auth/documents","https://www.googleapis.com/auth/calendar","https://www.googleapis.com/auth/userinfo.email","https://www.googleapis.com/auth/gmail.settings.sharing","https://www.googleapis.com/auth/spreadsheets"]
[2025-11-09T21:30:56.125Z] [INFO   ] 2025-11-09T21:30:56.125Z [DEBUG] üìá [Gmail API] Attempting to fetch Google Contacts...
[2025-11-09T21:30:56.127Z] [INFO   ] 2025-11-09T21:30:56.127Z [DEBUG] üöÄ [Gmail Data API] Executing handler for: gmail-enhanced-recipients
[2025-11-09T21:30:56.127Z] [INFO   ] 2025-11-09T21:30:56.127Z [DEBUG] üöÄ [Gmail API] Fetching fresh enhanced recipients
[2025-11-09T21:30:56.127Z] [INFO   ] 2025-11-09T21:30:56.127Z [DEBUG] üîç [Gmail API] Integration scopes: ["https://www.googleapis.com/auth/contacts.readonly","https://www.googleapis.com/auth/userinfo.profile","https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/analytics.readonly","https://www.googleapis.com/auth/gmail.modify","openid","https://www.googleapis.com/auth/gmail.settings.basic","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/analytics.edit","https://www.googleapis.com/auth/documents","https://www.googleapis.com/auth/calendar","https://www.googleapis.com/auth/userinfo.email","https://www.googleapis.com/auth/gmail.settings.sharing","https://www.googleapis.com/auth/spreadsheets"]
[2025-11-09T21:30:56.127Z] [INFO   ] 2025-11-09T21:30:56.127Z [DEBUG] üìá [Gmail API] Attempting to fetch Google Contacts...
[2025-11-09T21:30:56.133Z] [INFO   ] 2025-11-09T21:30:56.133Z [DEBUG] üöÄ [Gmail Data API] Executing handler for: gmail_from_addresses
[2025-11-09T21:30:56.133Z] [INFO   ] 2025-11-09T21:30:56.133Z [DEBUG] üöÄ [Gmail From Addresses] Fetching fresh from addresses
[2025-11-09T21:30:56.133Z] [INFO   ] 2025-11-09T21:30:56.133Z [DEBUG] üë§ [Gmail From Addresses] Fetching user profile...
[2025-11-09T21:30:56.200Z] [INFO   ] 2025-11-09T21:30:56.200Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Access token retrieved successfully
[2025-11-09T21:30:56.200Z] [INFO   ] 2025-11-09T21:30:56.200Z [DEBUG] üîç [GMAIL SIGNATURES] Fetching Gmail sendAs settings...
[2025-11-09T21:30:56.323Z] [INFO   ] 2025-11-09T21:30:56.323Z [DEBUG] ‚úÖ [Gmail API] Found 4 contacts from Google Contacts
[2025-11-09T21:30:56.324Z] [INFO   ] 2025-11-09T21:30:56.324Z [DEBUG] üë• [Gmail API] Contacts raw preview: [{"names":["Nathaniel Stoddard"],"emails":[]},{"names":["SGT Aguilar"],"emails":[]},{"names":["Sponsee A1C Simona Gamble"],"emails":[]},{"names":["Rob"],"emails":[]}]
[2025-11-09T21:30:56.324Z] [INFO   ] 2025-11-09T21:30:56.324Z [DEBUG] üì¨ [Gmail API] Contacts returned: []
[2025-11-09T21:30:56.324Z] [INFO   ] 2025-11-09T21:30:56.324Z [DEBUG] üìß [Gmail API] Fetching recent email recipients from sent and received...
[2025-11-09T21:30:56.329Z] [INFO   ] 2025-11-09T21:30:56.329Z [DEBUG] ‚úÖ [Gmail API] Found 4 contacts from Google Contacts
[2025-11-09T21:30:56.329Z] [INFO   ] 2025-11-09T21:30:56.329Z [DEBUG] üë• [Gmail API] Contacts raw preview: [{"names":["Nathaniel Stoddard"],"emails":[]},{"names":["SGT Aguilar"],"emails":[]},{"names":["Sponsee A1C Simona Gamble"],"emails":[]},{"names":["Rob"],"emails":[]}]
[2025-11-09T21:30:56.329Z] [INFO   ] 2025-11-09T21:30:56.329Z [DEBUG] üì¨ [Gmail API] Contacts returned: []
[2025-11-09T21:30:56.329Z] [INFO   ] 2025-11-09T21:30:56.329Z [DEBUG] üìß [Gmail API] Fetching recent email recipients from sent and received...
[2025-11-09T21:30:56.331Z] [INFO   ] 2025-11-09T21:30:56.331Z [DEBUG] ‚úÖ [Gmail API] Found 4 contacts from Google Contacts
[2025-11-09T21:30:56.331Z] [INFO   ] 2025-11-09T21:30:56.331Z [DEBUG] üë• [Gmail API] Contacts raw preview: [{"names":["Nathaniel Stoddard"],"emails":[]},{"names":["SGT Aguilar"],"emails":[]},{"names":["Sponsee A1C Simona Gamble"],"emails":[]},{"names":["Rob"],"emails":[]}]
[2025-11-09T21:30:56.331Z] [INFO   ] 2025-11-09T21:30:56.331Z [DEBUG] üì¨ [Gmail API] Contacts returned: []
[2025-11-09T21:30:56.331Z] [INFO   ] 2025-11-09T21:30:56.331Z [DEBUG] üìß [Gmail API] Fetching recent email recipients from sent and received...
[2025-11-09T21:30:56.481Z] [INFO   ] 2025-11-09T21:30:56.481Z [DEBUG] ‚úÖ [Gmail From Addresses] Primary email: stoddard.nathaniel900@gmail.com
[2025-11-09T21:30:56.481Z] [INFO   ] 2025-11-09T21:30:56.481Z [DEBUG] üìß [Gmail From Addresses] Fetching send-as aliases...
[2025-11-09T21:30:56.494Z] [INFO   ] 2025-11-09T21:30:56.494Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] SendAs API response received: {
  "sendAs": [
    {
      "sendAsEmail": "stoddard.nathaniel900@gmail.com",
      "displayName": "",
      "replyToAddress": "",
      "signature": "Very Respectfully,\n\nSrA Nathaniel Stoddard, USAF",
      "isPrimary": true,
      "isDefault": true
    }
  ]
}
[2025-11-09T21:30:56.495Z] [INFO   ] 2025-11-09T21:30:56.495Z [DEBUG] üîç [GMAIL SIGNATURES] Found 1 sendAs settings
[2025-11-09T21:30:56.495Z] [INFO   ] 2025-11-09T21:30:56.495Z [DEBUG] üîç [GMAIL SIGNATURES] Processing sendAs 0: {"sendAsEmail":"stoddard.nathaniel900@gmail.com","displayName":"","hasSignature":true,"signaturePreview":"Very Respectfully,\n\nSrA Nathaniel Stoddard, USAF","isDefault":true}
[2025-11-09T21:30:56.495Z] [INFO   ] 2025-11-09T21:30:56.495Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Found signature for: stoddard.nathaniel900@gmail.com
[2025-11-09T21:30:56.495Z] [INFO   ] 2025-11-09T21:30:56.495Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Returning 1 signature(s): [{"id":"gmail-signature-0","name":"stoddard.nathaniel900@gmail.com","hasSignature":true}]
[2025-11-09T21:30:56.559Z] [INFO   ] 2025-11-09T21:30:56.559Z [DEBUG] üîç [GMAIL SIGNATURES] API endpoint called
[2025-11-09T21:30:56.560Z] [INFO   ] 2025-11-09T21:30:56.560Z [DEBUG] üîç [GMAIL SIGNATURES] Request params: {"requestedUserId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-09T21:30:56.641Z] [INFO   ] 2025-11-09T21:30:56.641Z [DEBUG] üîç [GMAIL SIGNATURES] Getting access token for user: a3e3a51a-175c-4b59-ad03-227ba12a18b0
[2025-11-09T21:30:56.676Z] [INFO   ] 2025-11-09T21:30:56.676Z [DEBUG] ‚úÖ [Gmail From Addresses] Found 1 send-as aliases
[2025-11-09T21:30:56.677Z] [INFO   ] 2025-11-09T21:30:56.677Z [DEBUG] üì® [Gmail From Addresses] Fetching recent sent emails...
[2025-11-09T21:30:56.721Z] [INFO   ] 2025-11-09T21:30:56.721Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Access token retrieved successfully
[2025-11-09T21:30:56.721Z] [INFO   ] 2025-11-09T21:30:56.721Z [DEBUG] üîç [GMAIL SIGNATURES] Fetching Gmail sendAs settings...
[2025-11-09T21:30:56.770Z] [INFO   ] 2025-11-09T21:30:56.770Z [DEBUG] üìß [Gmail API] Processing 30 messages (sent + received)...
[2025-11-09T21:30:56.773Z] [INFO   ] 2025-11-09T21:30:56.773Z [DEBUG] üìß [Gmail API] Processing 30 messages (sent + received)...
[2025-11-09T21:30:56.778Z] [INFO   ] 2025-11-09T21:30:56.778Z [DEBUG] üìß [Gmail API] Processing 30 messages (sent + received)...
[2025-11-09T21:30:56.864Z] [INFO   ] 2025-11-09T21:30:56.864Z [DEBUG] üì® [Gmail From Addresses] Processing 20 sent messages...
[2025-11-09T21:30:56.915Z] [INFO   ] 2025-11-09T21:30:56.915Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] SendAs API response received: {
  "sendAs": [
    {
      "sendAsEmail": "stoddard.nathaniel900@gmail.com",
      "displayName": "",
      "replyToAddress": "",
      "signature": "Very Respectfully,\n\nSrA Nathaniel Stoddard, USAF",
      "isPrimary": true,
      "isDefault": true
    }
  ]
}
[2025-11-09T21:30:56.915Z] [INFO   ] 2025-11-09T21:30:56.915Z [DEBUG] üîç [GMAIL SIGNATURES] Found 1 sendAs settings
[2025-11-09T21:30:56.915Z] [INFO   ] 2025-11-09T21:30:56.915Z [DEBUG] üîç [GMAIL SIGNATURES] Processing sendAs 0: {"sendAsEmail":"stoddard.nathaniel900@gmail.com","displayName":"","hasSignature":true,"signaturePreview":"Very Respectfully,\n\nSrA Nathaniel Stoddard, USAF","isDefault":true}
[2025-11-09T21:30:56.915Z] [INFO   ] 2025-11-09T21:30:56.915Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Found signature for: stoddard.nathaniel900@gmail.com
[2025-11-09T21:30:56.915Z] [INFO   ] 2025-11-09T21:30:56.915Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Returning 1 signature(s): [{"id":"gmail-signature-0","name":"stoddard.nathaniel900@gmail.com","hasSignature":true}]
[2025-11-09T21:30:58.009Z] [INFO   ] 2025-11-09T21:30:58.009Z [DEBUG] ‚úÖ [Gmail From Addresses] Found 1 recent from addresses
[2025-11-09T21:30:58.009Z] [INFO   ] 2025-11-09T21:30:58.009Z [DEBUG] ‚úÖ [Gmail From Addresses] Total: 1 from addresses
[2025-11-09T21:30:58.009Z] [INFO   ] 2025-11-09T21:30:58.009Z [DEBUG] ‚úÖ [Gmail Data API] Handler completed in 1876ms, returned 1 items
[2025-11-09T21:30:58.483Z] [INFO   ] 2025-11-09T21:30:58.483Z [DEBUG] ‚úÖ [Gmail API] Found 24 unique recipients from sent and received emails
[2025-11-09T21:30:58.483Z] [INFO   ] 2025-11-09T21:30:58.483Z [DEBUG] ‚úÖ [Gmail API] Returning 24 enhanced recipients (contacts: true)
[2025-11-09T21:30:58.483Z] [INFO   ] 2025-11-09T21:30:58.483Z [DEBUG] ‚úÖ [Gmail Data API] Handler completed in 2365ms, returned 24 items
[2025-11-09T21:30:58.485Z] [INFO   ] 2025-11-09T21:30:58.485Z [DEBUG] ‚úÖ [Gmail API] Found 24 unique recipients from sent and received emails
[2025-11-09T21:30:58.485Z] [INFO   ] 2025-11-09T21:30:58.485Z [DEBUG] ‚úÖ [Gmail API] Returning 24 enhanced recipients (contacts: true)
[2025-11-09T21:30:58.485Z] [INFO   ] 2025-11-09T21:30:58.485Z [DEBUG] ‚úÖ [Gmail Data API] Handler completed in 2360ms, returned 24 items
[2025-11-09T21:30:58.494Z] [INFO   ] 2025-11-09T21:30:58.494Z [DEBUG] ‚úÖ [Gmail API] Found 24 unique recipients from sent and received emails
[2025-11-09T21:30:58.494Z] [INFO   ] 2025-11-09T21:30:58.494Z [DEBUG] ‚úÖ [Gmail API] Returning 24 enhanced recipients (contacts: true)
[2025-11-09T21:30:58.494Z] [INFO   ] 2025-11-09T21:30:58.494Z [DEBUG] ‚úÖ [Gmail Data API] Handler completed in 2367ms, returned 24 items
[2025-11-09T21:31:05.023Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 508ms (1130 modules)
[2025-11-09T21:31:23.449Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1930ms (5305 modules)
[2025-11-09T21:31:28.979Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 969ms (5305 modules)
[2025-11-09T21:31:40.157Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/fetch-user-data in 1392ms (5307 modules)
[2025-11-09T21:31:40.251Z] [INFO   ] 2025-11-09T21:31:40.251Z [DEBUG] üöÄ [SERVER] fetch-user-data API route called
[2025-11-09T21:31:40.252Z] [INFO   ] 2025-11-09T21:31:40.252Z [DEBUG] üîç [SERVER] fetch-user-data request parsed: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_columns","options":{"sheetName":"Monthly Budget","spreadsheetId":"13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI"}}
[2025-11-09T21:31:40.703Z] [INFO   ] 2025-11-09T21:31:40.703Z [DEBUG] üîÑ [SERVER] Routing Google request to dedicated API: google-sheets_columns (provider: google-sheets)
[2025-11-09T21:31:41.981Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/google/data ...
[2025-11-09T21:31:42.528Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/google/data in 1052ms (4213 modules)
[2025-11-09T21:31:42.611Z] [INFO   ] 2025-11-09T21:31:42.611Z [DEBUG] üöÄ [Google Data API] POST handler invoked
[2025-11-09T21:31:42.611Z] [INFO   ] 2025-11-09T21:31:42.611Z [DEBUG] üîç [Google Data API] Request received: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_columns","options":{"sheetName":"Monthly Budget","spreadsheetId":"13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI"},"fullRequestBody":{"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_columns","options":{"sheetName":"Monthly Budget","spreadsheetId":"13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI"}}}
[2025-11-09T21:31:42.706Z] [INFO   ] 2025-11-09T21:31:42.706Z [DEBUG] üìä [Google API] Integration provider check: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","actualProvider":"google-sheets","dataType":"google-sheets_columns","providerLowerCase":"google-sheets"}
[2025-11-09T21:31:42.707Z] [INFO   ] 2025-11-09T21:31:42.706Z [DEBUG] üîç [Google API] Processing request: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_columns","provider":"google-sheets","status":"connected","hasToken":true}
[2025-11-09T21:31:42.707Z] [INFO   ] 2025-11-09T21:31:42.707Z [DEBUG] üìä [Google Sheets] Fetching columns for: 13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI/Monthly Budget
[2025-11-09T21:31:43.035Z] [INFO   ] 2025-11-09T21:31:43.035Z [DEBUG] ‚úÖ [Google Sheets] Retrieved 26 columns
[2025-11-09T21:31:43.035Z] [INFO   ] 2025-11-09T21:31:43.035Z [DEBUG] ‚úÖ [Google API] Successfully processed google-sheets_columns: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","resultCount":26}
[2025-11-09T21:31:43.037Z] [INFO   ] 2025-11-09T21:31:43.037Z [DEBUG] ‚úÖ [SERVER] Google API completed for google-sheets_columns, result length: 26
[2025-11-09T21:31:47.050Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1621ms (5343 modules)
[2025-11-09T21:32:03.965Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1783ms (5316 modules)
[2025-11-09T21:32:17.976Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1623ms (5316 modules)
[2025-11-09T21:32:37.000Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 776ms (5314 modules)
[2025-11-09T21:32:58.328Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 2.1s (5171 modules)
[2025-11-09T21:32:58.638Z] [WARN   ]  [33m[1m‚ö†[22m[39m Fast Refresh had to perform a full reload. Read more: https://nextjs.org/docs/messages/fast-refresh-reload
[2025-11-09T21:32:58.901Z] [INFO   ] 2025-11-09T21:32:58.901Z [DEBUG] üíß [AUTH] Rehydrating auth state from storage {"hasState":true,"hasUser":false,"initialized":false,"timestamp":"2025-11-09T21:32:58.901Z"}
[2025-11-09T21:32:58.912Z] [INFO   ] 2025-11-09T21:32:58.912Z [DEBUG] üíß [AUTH] State hydrated and reset {"hasUser":false,"initialized":false,"timestamp":"2025-11-09T21:32:58.912Z"}
[2025-11-09T21:32:58.913Z] [INFO   ] 2025-11-09T21:32:58.912Z [DEBUG] ‚è≠Ô∏è [AUTH] Skipping initialization {"hasState":true,"alreadyInitialized":false,"isClient":false,"timestamp":"2025-11-09T21:32:58.912Z"}
[2025-11-09T21:33:00.284Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations ...
[2025-11-09T21:33:00.310Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations in 557ms (4058 modules)
[2025-11-09T21:33:01.105Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled (4174 modules)
[2025-11-09T21:33:01.326Z] [INFO   ] 2025-11-09T21:33:01.325Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-09T21:33:01.325Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-09T21:33:01.493Z] [INFO   ] 2025-11-09T21:33:01.493Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-09T21:33:01.493Z] [INFO   ] 2025-11-09T21:33:01.493Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-09T21:33:01.668Z] [INFO   ] 2025-11-09T21:33:01.668Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":10,"permissionsCount":9,"integrationsError":null,"permissionsError":null}
[2025-11-09T21:33:01.668Z] [INFO   ] 2025-11-09T21:33:01.668Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"61424f3b-166f-4d60-bf1c-b63cb9155549","provider":"google-drive","permission":"admin"}
[2025-11-09T21:33:01.668Z] [INFO   ] 2025-11-09T21:33:01.668Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"aed260e3-7d87-4ea0-ba04-1ab6c35bbda5","provider":"discord","permission":"admin"}
[2025-11-09T21:33:01.668Z] [INFO   ] 2025-11-09T21:33:01.668Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"f7f6cf20-d078-40ef-a73c-bc7afd16ec14","provider":"hubspot","permission":"admin"}
[2025-11-09T21:33:01.668Z] [INFO   ] 2025-11-09T21:33:01.668Z [DEBUG] üìã [API /api/integrations] Using implicit permission {"integrationId":"7015bddc-01e2-46ad-89bb-fd2385c7dbfc","provider":"gumroad","permission":"admin","reason":"connected_by"}
[2025-11-09T21:33:01.668Z] [INFO   ] 2025-11-09T21:33:01.668Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"f240f5c0-cb91-462a-bab9-51dcbb116331","provider":"gmail","permission":"admin"}
[2025-11-09T21:33:01.669Z] [INFO   ] 2025-11-09T21:33:01.669Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"cdcb4dfa-0de9-4b0c-b493-28dc16aa47cf","provider":"github","permission":"admin"}
[2025-11-09T21:33:01.669Z] [INFO   ] 2025-11-09T21:33:01.669Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"1cf3129a-cbcb-4df8-b59b-876edd75d137","provider":"google-analytics","permission":"admin"}
[2025-11-09T21:33:01.669Z] [INFO   ] 2025-11-09T21:33:01.669Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"fa4bc43d-e909-4b30-83ab-901e5d284a72","provider":"google-docs","permission":"admin"}
[2025-11-09T21:33:01.669Z] [INFO   ] 2025-11-09T21:33:01.669Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"72c8e3d3-ae7f-464a-b167-ad1e4b7bcc20","provider":"google-calendar","permission":"admin"}
[2025-11-09T21:33:01.669Z] [INFO   ] 2025-11-09T21:33:01.669Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"8640a243-994f-47b4-b456-26844f408359","provider":"google-sheets","permission":"admin"}
[2025-11-09T21:33:01.669Z] [INFO   ] 2025-11-09T21:33:01.669Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":10,"workspaceType":"personal"}
[2025-11-09T21:33:24.621Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 578ms (1129 modules)
[2025-11-09T21:33:37.028Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 354ms (1129 modules)
[2025-11-09T21:33:56.933Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 2.1s (5303 modules)
[2025-11-09T21:33:59.608Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 322ms (1129 modules)
[2025-11-09T21:34:05.107Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1433ms (5303 modules)
[2025-11-09T21:34:12.420Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1916ms (5171 modules)
[2025-11-09T21:34:22.288Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 706ms (5171 modules)
[2025-11-09T21:34:34.176Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1450ms (5171 modules)
[2025-11-09T21:34:50.967Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1635ms (5173 modules)
[2025-11-09T21:34:51.130Z] [WARN   ]  [33m[1m‚ö†[22m[39m Fast Refresh had to perform a full reload. Read more: https://nextjs.org/docs/messages/fast-refresh-reload
[2025-11-09T21:34:51.337Z] [INFO   ] 2025-11-09T21:34:51.337Z [DEBUG] üíß [AUTH] Rehydrating auth state from storage {"hasState":true,"hasUser":false,"initialized":false,"timestamp":"2025-11-09T21:34:51.337Z"}
[2025-11-09T21:34:51.349Z] [INFO   ] 2025-11-09T21:34:51.349Z [DEBUG] üíß [AUTH] State hydrated and reset {"hasUser":false,"initialized":false,"timestamp":"2025-11-09T21:34:51.349Z"}
[2025-11-09T21:34:51.349Z] [INFO   ] 2025-11-09T21:34:51.349Z [DEBUG] ‚è≠Ô∏è [AUTH] Skipping initialization {"hasState":true,"alreadyInitialized":false,"isClient":false,"timestamp":"2025-11-09T21:34:51.349Z"}
[2025-11-09T21:34:52.442Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations ...
[2025-11-09T21:34:53.519Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations in 1580ms (4168 modules)
[2025-11-09T21:34:54.315Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled (4175 modules)
[2025-11-09T21:34:54.505Z] [INFO   ] 2025-11-09T21:34:54.504Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-09T21:34:54.504Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-09T21:34:54.697Z] [INFO   ] 2025-11-09T21:34:54.697Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-09T21:34:54.697Z] [INFO   ] 2025-11-09T21:34:54.697Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-09T21:34:54.816Z] [INFO   ] 2025-11-09T21:34:54.816Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":10,"permissionsCount":9,"integrationsError":null,"permissionsError":null}
[2025-11-09T21:34:54.817Z] [INFO   ] 2025-11-09T21:34:54.817Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"61424f3b-166f-4d60-bf1c-b63cb9155549","provider":"google-drive","permission":"admin"}
[2025-11-09T21:34:54.817Z] [INFO   ] 2025-11-09T21:34:54.817Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"aed260e3-7d87-4ea0-ba04-1ab6c35bbda5","provider":"discord","permission":"admin"}
[2025-11-09T21:34:54.817Z] [INFO   ] 2025-11-09T21:34:54.817Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"f7f6cf20-d078-40ef-a73c-bc7afd16ec14","provider":"hubspot","permission":"admin"}
[2025-11-09T21:34:54.817Z] [INFO   ] 2025-11-09T21:34:54.817Z [DEBUG] üìã [API /api/integrations] Using implicit permission {"integrationId":"7015bddc-01e2-46ad-89bb-fd2385c7dbfc","provider":"gumroad","permission":"admin","reason":"connected_by"}
[2025-11-09T21:34:54.817Z] [INFO   ] 2025-11-09T21:34:54.817Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"f240f5c0-cb91-462a-bab9-51dcbb116331","provider":"gmail","permission":"admin"}
[2025-11-09T21:34:54.817Z] [INFO   ] 2025-11-09T21:34:54.817Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"cdcb4dfa-0de9-4b0c-b493-28dc16aa47cf","provider":"github","permission":"admin"}
[2025-11-09T21:34:54.817Z] [INFO   ] 2025-11-09T21:34:54.817Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"1cf3129a-cbcb-4df8-b59b-876edd75d137","provider":"google-analytics","permission":"admin"}
[2025-11-09T21:34:54.817Z] [INFO   ] 2025-11-09T21:34:54.817Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"fa4bc43d-e909-4b30-83ab-901e5d284a72","provider":"google-docs","permission":"admin"}
[2025-11-09T21:34:54.817Z] [INFO   ] 2025-11-09T21:34:54.817Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"72c8e3d3-ae7f-464a-b167-ad1e4b7bcc20","provider":"google-calendar","permission":"admin"}
[2025-11-09T21:34:54.817Z] [INFO   ] 2025-11-09T21:34:54.817Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"8640a243-994f-47b4-b456-26844f408359","provider":"google-sheets","permission":"admin"}
[2025-11-09T21:34:54.817Z] [INFO   ] 2025-11-09T21:34:54.817Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":10,"workspaceType":"personal"}
[2025-11-09T21:35:14.747Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 878ms (5305 modules)
[2025-11-09T21:35:26.503Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 886ms (5305 modules)
[2025-11-09T21:35:36.993Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1724ms (5305 modules)
[2025-11-09T21:35:45.224Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 767ms (5305 modules)
[2025-11-09T21:35:54.140Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1567ms (5305 modules)
[2025-11-09T21:39:42.292Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1067ms (1130 modules)
[2025-11-09T21:43:52.065Z] [INFO   ] 2025-11-09T21:43:52.065Z [DEBUG] üîë Discord bot token loaded
[2025-11-09T21:43:52.122Z] [INFO   ] 2025-11-09T21:43:52.122Z [DEBUG] Discord Gateway closed, persistent reconnect disabled
[2025-11-09T21:43:52.478Z] [INFO   ] 2025-11-09T21:43:52.478Z [DEBUG] Discord Gateway WebSocket connection established
[2025-11-09T21:43:52.480Z] [INFO   ] 2025-11-09T21:43:52.479Z [DEBUG] üîë Sending identify with intents: {"GUILDS":true,"GUILD_MEMBERS":true,"GUILD_INVITES":true,"GUILD_MESSAGES":true,"MESSAGE_CONTENT":true,"intentsValue":33347}
[2025-11-09T21:43:54.332Z] [INFO   ] 2025-11-09T21:43:54.331Z [DEBUG] üéâ Discord bot ready! {"sessionId":"f460a0a2b96f90b7bc9fd50edbc9260b","username":"ChainReact-Bot","userId":"1378595955212812308","guildCount":2}
[2025-11-09T21:43:54.332Z] [INFO   ] 2025-11-09T21:43:54.332Z [DEBUG] üìã Initializing invite cache...
[2025-11-09T21:43:54.333Z] [INFO   ] 2025-11-09T21:43:54.333Z [DEBUG] üì° Discord event received: GUILD_CREATE
[2025-11-09T21:43:54.349Z] [INFO   ] 2025-11-09T21:43:54.349Z [DEBUG] üì° Discord event received: GUILD_CREATE
[2025-11-09T21:43:54.548Z] [INFO   ] 2025-11-09T21:43:54.548Z [DEBUG] ‚úÖ Cached 3 invites for guild 1378950884045623406
[2025-11-09T23:07:16.953Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/gmail/signatures ...
[2025-11-09T23:07:18.765Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/gmail/signatures in 2.9s (4166 modules)
[2025-11-09T23:07:18.892Z] [INFO   ] 2025-11-09T23:07:18.892Z [DEBUG] üîç [GMAIL SIGNATURES] API endpoint called
[2025-11-09T23:07:18.893Z] [INFO   ] 2025-11-09T23:07:18.893Z [DEBUG] üîç [GMAIL SIGNATURES] Request params: {"requestedUserId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-09T23:07:19.083Z] [INFO   ] 2025-11-09T23:07:19.083Z [DEBUG] üîç [GMAIL SIGNATURES] Getting access token for user: a3e3a51a-175c-4b59-ad03-227ba12a18b0
[2025-11-09T23:07:19.239Z] [INFO   ] 2025-11-09T23:07:19.239Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Access token retrieved successfully
[2025-11-09T23:07:19.240Z] [INFO   ] 2025-11-09T23:07:19.239Z [DEBUG] üîç [GMAIL SIGNATURES] Fetching Gmail sendAs settings...
[2025-11-09T23:07:19.396Z] [ERROR  ] 2025-11-09T23:07:19.396Z [ERROR] ‚ùå [GMAIL SIGNATURES] Gmail sendAs API failed: 401
[2025-11-09T23:07:19.473Z] [INFO   ] 2025-11-09T23:07:19.473Z [DEBUG] üîç [GMAIL SIGNATURES] API endpoint called
[2025-11-09T23:07:19.473Z] [INFO   ] 2025-11-09T23:07:19.473Z [DEBUG] üîç [GMAIL SIGNATURES] Request params: {"requestedUserId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-09T23:07:19.561Z] [INFO   ] 2025-11-09T23:07:19.561Z [DEBUG] üîç [GMAIL SIGNATURES] Getting access token for user: a3e3a51a-175c-4b59-ad03-227ba12a18b0
[2025-11-09T23:07:19.658Z] [INFO   ] 2025-11-09T23:07:19.658Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Access token retrieved successfully
[2025-11-09T23:07:19.658Z] [INFO   ] 2025-11-09T23:07:19.658Z [DEBUG] üîç [GMAIL SIGNATURES] Fetching Gmail sendAs settings...
[2025-11-09T23:07:19.705Z] [ERROR  ] 2025-11-09T23:07:19.705Z [ERROR] ‚ùå [GMAIL SIGNATURES] Gmail sendAs API failed: 401
[2025-11-09T23:07:28.838Z] [INFO   ] 2025-11-09T23:07:28.838Z [DEBUG] üíß [AUTH] Rehydrating auth state from storage {"hasState":true,"hasUser":false,"initialized":false,"timestamp":"2025-11-09T23:07:28.838Z"}
[2025-11-09T23:07:28.849Z] [INFO   ] 2025-11-09T23:07:28.849Z [DEBUG] üíß [AUTH] State hydrated and reset {"hasUser":false,"initialized":false,"timestamp":"2025-11-09T23:07:28.849Z"}
[2025-11-09T23:07:28.849Z] [INFO   ] 2025-11-09T23:07:28.849Z [DEBUG] ‚è≠Ô∏è [AUTH] Skipping initialization {"hasState":true,"alreadyInitialized":false,"isClient":false,"timestamp":"2025-11-09T23:07:28.849Z"}
[2025-11-09T23:07:30.459Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations in 332ms (4168 modules)
[2025-11-09T23:07:30.707Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled (4181 modules)
[2025-11-09T23:07:30.841Z] [INFO   ] 2025-11-09T23:07:30.841Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-09T23:07:30.840Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-09T23:07:30.994Z] [INFO   ] 2025-11-09T23:07:30.994Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-09T23:07:30.995Z] [INFO   ] 2025-11-09T23:07:30.995Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-09T23:07:31.208Z] [INFO   ] 2025-11-09T23:07:31.207Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":10,"permissionsCount":9,"integrationsError":null,"permissionsError":null}
[2025-11-09T23:07:31.323Z] [INFO   ] 2025-11-09T23:07:31.323Z [DEBUG] ‚è∞ [API /api/integrations] Updated 3 expired integrations
[2025-11-09T23:07:31.324Z] [INFO   ] 2025-11-09T23:07:31.324Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"61424f3b-166f-4d60-bf1c-b63cb9155549","provider":"google-drive","permission":"admin"}
[2025-11-09T23:07:31.324Z] [INFO   ] 2025-11-09T23:07:31.324Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"aed260e3-7d87-4ea0-ba04-1ab6c35bbda5","provider":"discord","permission":"admin"}
[2025-11-09T23:07:31.324Z] [INFO   ] 2025-11-09T23:07:31.324Z [DEBUG] üìã [API /api/integrations] Using implicit permission {"integrationId":"7015bddc-01e2-46ad-89bb-fd2385c7dbfc","provider":"gumroad","permission":"admin","reason":"connected_by"}
[2025-11-09T23:07:31.324Z] [INFO   ] 2025-11-09T23:07:31.324Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"f240f5c0-cb91-462a-bab9-51dcbb116331","provider":"gmail","permission":"admin"}
[2025-11-09T23:07:31.324Z] [INFO   ] 2025-11-09T23:07:31.324Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"f7f6cf20-d078-40ef-a73c-bc7afd16ec14","provider":"hubspot","permission":"admin"}
[2025-11-09T23:07:31.324Z] [INFO   ] 2025-11-09T23:07:31.324Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"cdcb4dfa-0de9-4b0c-b493-28dc16aa47cf","provider":"github","permission":"admin"}
[2025-11-09T23:07:31.324Z] [INFO   ] 2025-11-09T23:07:31.324Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"1cf3129a-cbcb-4df8-b59b-876edd75d137","provider":"google-analytics","permission":"admin"}
[2025-11-09T23:07:31.324Z] [INFO   ] 2025-11-09T23:07:31.324Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"fa4bc43d-e909-4b30-83ab-901e5d284a72","provider":"google-docs","permission":"admin"}
[2025-11-09T23:07:31.325Z] [INFO   ] 2025-11-09T23:07:31.324Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"72c8e3d3-ae7f-464a-b167-ad1e4b7bcc20","provider":"google-calendar","permission":"admin"}
[2025-11-09T23:07:31.325Z] [INFO   ] 2025-11-09T23:07:31.325Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"8640a243-994f-47b4-b456-26844f408359","provider":"google-sheets","permission":"admin"}
[2025-11-09T23:07:31.325Z] [INFO   ] 2025-11-09T23:07:31.325Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":10,"workspaceType":"personal"}
[2025-11-09T23:17:50.626Z] [INFO   ] 2025-11-09T23:17:50.626Z [DEBUG] üîç [GMAIL SIGNATURES] API endpoint called
[2025-11-09T23:17:50.626Z] [INFO   ] 2025-11-09T23:17:50.626Z [DEBUG] üîç [GMAIL SIGNATURES] Request params: {"requestedUserId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-09T23:17:50.770Z] [INFO   ] 2025-11-09T23:17:50.770Z [DEBUG] üîç [GMAIL SIGNATURES] Getting access token for user: a3e3a51a-175c-4b59-ad03-227ba12a18b0
[2025-11-09T23:17:50.873Z] [INFO   ] 2025-11-09T23:17:50.872Z [DEBUG] ‚ùå [GMAIL SIGNATURES] Gmail integration not found: {}
[2025-11-09T23:17:50.955Z] [INFO   ] 2025-11-09T23:17:50.955Z [DEBUG] üîç [GMAIL SIGNATURES] API endpoint called
[2025-11-09T23:17:50.955Z] [INFO   ] 2025-11-09T23:17:50.955Z [DEBUG] üîç [GMAIL SIGNATURES] Request params: {"requestedUserId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-09T23:17:51.052Z] [INFO   ] 2025-11-09T23:17:51.052Z [DEBUG] üîç [GMAIL SIGNATURES] Getting access token for user: a3e3a51a-175c-4b59-ad03-227ba12a18b0
[2025-11-09T23:17:51.144Z] [INFO   ] 2025-11-09T23:17:51.144Z [DEBUG] ‚ùå [GMAIL SIGNATURES] Gmail integration not found: {}
[2025-11-09T23:17:53.339Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/auth/generate-url ...
[2025-11-09T23:17:54.453Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/auth/generate-url in 1980ms (4178 modules)
[2025-11-09T23:17:54.611Z] [INFO   ] 2025-11-09T23:17:54.611Z [DEBUG] üîç Generated Gmail OAuth URL with params: {"client_id":"380110053434-23tlbm7qtui7tu2vfn3lk7o795i538k6.apps.googleusercontent.com","redirect_uri":"http://localhost:3000/api/integrations/gmail/callback","response_type":"code","scope":"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/gmail.modify https://www.googleapis.com/auth/gmail.settings.basic https://www.googleapis.com/auth/gmail.settings.sharing https://www.googleapis.com/auth/contacts.readonly","state":"eyJ1c2VySWQiOiJhM2UzYTUxYS0xNzVjLTRiNTktYWQwMy0yMjdiYTEyYTE4YjAiLCJwcm92aWRlciI6ImdtYWlsIiwicmVjb25uZWN0IjpmYWxzZSwidGltZXN0YW1wIjoxNzYyNzMwMjc0NjExLCJ3b3Jrc3BhY2VUeXBlIjoicGVyc29uYWwifQ==","access_type":"offline","prompt":"select_account","include_granted_scopes":"true"}
[2025-11-09T23:17:57.503Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/gmail/callback ...
[2025-11-09T23:17:58.231Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/gmail/callback in 1228ms (5302 modules)
[2025-11-09T23:17:58.338Z] [INFO   ] 2025-11-09T23:17:58.338Z [DEBUG] üîç gmail callback called: {"url":"http://localhost:3000/api/integrations/gmail/callback?state=eyJ1c2VySWQiOiJhM2UzYTUxYS0xNzVjLTRiNTktYWQwMy0yMjdiYTEyYTE4YjAiLCJwcm92aWRlciI6ImdtYWlsIiwicmVjb25uZWN0IjpmYWxzZSwidGltZXN0YW1wIjoxNzYyNzMwMjc0NjExLCJ3b3Jrc3BhY2VUeXBlIjoicGVyc29uYWwifQ%3D%3D&code=4%2F0Ab32j93k8O-Qk5es5TbeyXPZqXhOWnoSpLG0gTFG8Wbl94nTIExXZvddV1N-gjxo-emXcg&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fanalytics.readonly+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgmail.settings.basic+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgmail.settings.sharing+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fspreadsheets+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fcalendar+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+openid+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdocuments+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive.readonly+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fanalytics.edit+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgmail.modify+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fcontacts.readonly&authuser=0&prompt=none","hasCode":true,"hasState":true,"error":null,"userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36"}
[2025-11-09T23:17:58.338Z] [INFO   ] 2025-11-09T23:17:58.338Z [DEBUG] gmail OAuth callback state: {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"gmail","reconnect":false,"workspaceType":"personal"}
[2025-11-09T23:17:58.635Z] [INFO   ] 2025-11-09T23:17:58.635Z [DEBUG] Granting permissions for workspace context: {"type":"personal"}
[2025-11-09T23:17:58.692Z] [INFO   ] 2025-11-09T23:17:58.691Z [DEBUG] Gmail userinfo fetched: {"email":"stoddard.nathaniel900@gmail.com","id":"101449365299172639751"}
[2025-11-09T23:17:58.732Z] [ERROR  ] 2025-11-09T23:17:58.731Z [ERROR] Error granting permission: {"code":"23505","details":null,"hint":null,"message":"duplicate key value violates unique constraint \"integration_permissions_integration_id_user_id_key\""}
[2025-11-09T23:17:58.732Z] [INFO   ] 2025-11-09T23:17:58.732Z [INFO] Personal integration f240f5c0-cb91-462a-bab9-51dcbb116331 - granted admin to a3e3a51a-175c-4b59-ad03-227ba12a18b0
[2025-11-09T23:17:58.732Z] [INFO   ] 2025-11-09T23:17:58.732Z [DEBUG] ‚úÖ Permissions granted successfully
[2025-11-09T23:17:58.732Z] [INFO   ] 2025-11-09T23:17:58.732Z [DEBUG] ‚úÖ gmail integration successfully saved
[2025-11-09T23:17:58.733Z] [INFO   ] 2025-11-09T23:17:58.733Z [DEBUG] üîÑ Creating popup response: type=success, provider=gmail, displayName=Gmail, message=gmail connected successfully!
[2025-11-09T23:18:04.130Z] [INFO   ] 2025-11-09T23:18:04.130Z [DEBUG] üíß [AUTH] Rehydrating auth state from storage {"hasState":true,"hasUser":false,"initialized":false,"timestamp":"2025-11-09T23:18:04.130Z"}
[2025-11-09T23:18:04.141Z] [INFO   ] 2025-11-09T23:18:04.141Z [DEBUG] üíß [AUTH] State hydrated and reset {"hasUser":false,"initialized":false,"timestamp":"2025-11-09T23:18:04.141Z"}
[2025-11-09T23:18:04.141Z] [INFO   ] 2025-11-09T23:18:04.141Z [DEBUG] ‚è≠Ô∏è [AUTH] Skipping initialization {"hasState":true,"alreadyInitialized":false,"isClient":false,"timestamp":"2025-11-09T23:18:04.141Z"}
[2025-11-09T23:18:05.124Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations in 464ms (4188 modules)
[2025-11-09T23:18:05.455Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled (4192 modules)
[2025-11-09T23:18:05.532Z] [INFO   ] 2025-11-09T23:18:05.532Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-09T23:18:05.532Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-09T23:18:05.691Z] [INFO   ] 2025-11-09T23:18:05.690Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-09T23:18:05.691Z] [INFO   ] 2025-11-09T23:18:05.691Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-09T23:18:05.827Z] [INFO   ] 2025-11-09T23:18:05.827Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":10,"permissionsCount":9,"integrationsError":null,"permissionsError":null}
[2025-11-09T23:18:05.827Z] [INFO   ] 2025-11-09T23:18:05.827Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"aed260e3-7d87-4ea0-ba04-1ab6c35bbda5","provider":"discord","permission":"admin"}
[2025-11-09T23:18:05.827Z] [INFO   ] 2025-11-09T23:18:05.827Z [DEBUG] üìã [API /api/integrations] Using implicit permission {"integrationId":"7015bddc-01e2-46ad-89bb-fd2385c7dbfc","provider":"gumroad","permission":"admin","reason":"connected_by"}
[2025-11-09T23:18:05.827Z] [INFO   ] 2025-11-09T23:18:05.827Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"f7f6cf20-d078-40ef-a73c-bc7afd16ec14","provider":"hubspot","permission":"admin"}
[2025-11-09T23:18:05.827Z] [INFO   ] 2025-11-09T23:18:05.827Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"cdcb4dfa-0de9-4b0c-b493-28dc16aa47cf","provider":"github","permission":"admin"}
[2025-11-09T23:18:05.827Z] [INFO   ] 2025-11-09T23:18:05.827Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"1cf3129a-cbcb-4df8-b59b-876edd75d137","provider":"google-analytics","permission":"admin"}
[2025-11-09T23:18:05.827Z] [INFO   ] 2025-11-09T23:18:05.827Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"61424f3b-166f-4d60-bf1c-b63cb9155549","provider":"google-drive","permission":"admin"}
[2025-11-09T23:18:05.827Z] [INFO   ] 2025-11-09T23:18:05.827Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"fa4bc43d-e909-4b30-83ab-901e5d284a72","provider":"google-docs","permission":"admin"}
[2025-11-09T23:18:05.827Z] [INFO   ] 2025-11-09T23:18:05.827Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"f240f5c0-cb91-462a-bab9-51dcbb116331","provider":"gmail","permission":"admin"}
[2025-11-09T23:18:05.827Z] [INFO   ] 2025-11-09T23:18:05.827Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"72c8e3d3-ae7f-464a-b167-ad1e4b7bcc20","provider":"google-calendar","permission":"admin"}
[2025-11-09T23:18:05.827Z] [INFO   ] 2025-11-09T23:18:05.827Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"8640a243-994f-47b4-b456-26844f408359","provider":"google-sheets","permission":"admin"}
[2025-11-09T23:18:05.828Z] [INFO   ] 2025-11-09T23:18:05.827Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":10,"workspaceType":"personal"}
[2025-11-09T23:18:06.203Z] [INFO   ] 2025-11-09T23:18:06.203Z [DEBUG] üîç [GMAIL SIGNATURES] API endpoint called
[2025-11-09T23:18:06.204Z] [INFO   ] 2025-11-09T23:18:06.204Z [DEBUG] üîç [GMAIL SIGNATURES] Request params: {"requestedUserId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-09T23:18:06.517Z] [INFO   ] 2025-11-09T23:18:06.517Z [DEBUG] üîç [GMAIL SIGNATURES] Getting access token for user: a3e3a51a-175c-4b59-ad03-227ba12a18b0
[2025-11-09T23:18:06.741Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/gmail/data ...
[2025-11-09T23:18:06.743Z] [INFO   ] 2025-11-09T23:18:06.743Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Access token retrieved successfully
[2025-11-09T23:18:06.744Z] [INFO   ] 2025-11-09T23:18:06.744Z [DEBUG] üîç [GMAIL SIGNATURES] Fetching Gmail sendAs settings...
[2025-11-09T23:18:07.120Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/gmail/data in 924ms (4201 modules)
[2025-11-09T23:18:07.132Z] [INFO   ] 2025-11-09T23:18:07.132Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] SendAs API response received: {
  "sendAs": [
    {
      "sendAsEmail": "stoddard.nathaniel900@gmail.com",
      "displayName": "",
      "replyToAddress": "",
      "signature": "Very Respectfully,\n\nSrA Nathaniel Stoddard, USAF",
      "isPrimary": true,
      "isDefault": true
    }
  ]
}
[2025-11-09T23:18:07.132Z] [INFO   ] 2025-11-09T23:18:07.132Z [DEBUG] üîç [GMAIL SIGNATURES] Found 1 sendAs settings
[2025-11-09T23:18:07.132Z] [INFO   ] 2025-11-09T23:18:07.132Z [DEBUG] üîç [GMAIL SIGNATURES] Processing sendAs 0: {"sendAsEmail":"stoddard.nathaniel900@gmail.com","displayName":"","hasSignature":true,"signaturePreview":"Very Respectfully,\n\nSrA Nathaniel Stoddard, USAF","isDefault":true}
[2025-11-09T23:18:07.132Z] [INFO   ] 2025-11-09T23:18:07.132Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Found signature for: stoddard.nathaniel900@gmail.com
[2025-11-09T23:18:07.132Z] [INFO   ] 2025-11-09T23:18:07.132Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Returning 1 signature(s): [{"id":"gmail-signature-0","name":"stoddard.nathaniel900@gmail.com","hasSignature":true}]
[2025-11-09T23:18:07.192Z] [INFO   ] 2025-11-09T23:18:07.192Z [DEBUG] üîç [Gmail Data API] Request: {"integrationId":"f240f5c0-cb91-462a-bab9-51dcbb116331","dataType":"gmail-enhanced-recipients","options":{}}
[2025-11-09T23:18:07.192Z] [INFO   ] 2025-11-09T23:18:07.192Z [DEBUG] üîç [Gmail Data API] Request: {"integrationId":"f240f5c0-cb91-462a-bab9-51dcbb116331","dataType":"gmail-enhanced-recipients","options":{}}
[2025-11-09T23:18:07.192Z] [INFO   ] 2025-11-09T23:18:07.192Z [DEBUG] üîç [Gmail Data API] Request: {"integrationId":"f240f5c0-cb91-462a-bab9-51dcbb116331","dataType":"gmail-enhanced-recipients","options":{}}
[2025-11-09T23:18:07.192Z] [INFO   ] 2025-11-09T23:18:07.192Z [DEBUG] üîç [Gmail Data API] Request: {"integrationId":"f240f5c0-cb91-462a-bab9-51dcbb116331","dataType":"gmail_from_addresses","options":{}}
[2025-11-09T23:18:07.236Z] [INFO   ] 2025-11-09T23:18:07.236Z [DEBUG] üîç [GMAIL SIGNATURES] API endpoint called
[2025-11-09T23:18:07.236Z] [INFO   ] 2025-11-09T23:18:07.236Z [DEBUG] üîç [GMAIL SIGNATURES] Request params: {"requestedUserId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-09T23:18:07.261Z] [INFO   ] 2025-11-09T23:18:07.261Z [DEBUG] üöÄ [Gmail Data API] Executing handler for: gmail-enhanced-recipients
[2025-11-09T23:18:07.261Z] [INFO   ] 2025-11-09T23:18:07.261Z [DEBUG] üöÄ [Gmail API] Fetching fresh enhanced recipients
[2025-11-09T23:18:07.261Z] [INFO   ] 2025-11-09T23:18:07.261Z [DEBUG] üîç [Gmail API] Integration scopes: ["https://www.googleapis.com/auth/gmail.modify","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/contacts.readonly","https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/analytics.edit","https://www.googleapis.com/auth/spreadsheets","https://www.googleapis.com/auth/gmail.settings.basic","https://www.googleapis.com/auth/documents","https://www.googleapis.com/auth/calendar","https://www.googleapis.com/auth/userinfo.email","openid","https://www.googleapis.com/auth/analytics.readonly","https://www.googleapis.com/auth/gmail.settings.sharing","https://www.googleapis.com/auth/userinfo.profile"]
[2025-11-09T23:18:07.261Z] [INFO   ] 2025-11-09T23:18:07.261Z [DEBUG] üìá [Gmail API] Attempting to fetch Google Contacts...
[2025-11-09T23:18:07.275Z] [INFO   ] 2025-11-09T23:18:07.275Z [DEBUG] üöÄ [Gmail Data API] Executing handler for: gmail-enhanced-recipients
[2025-11-09T23:18:07.276Z] [INFO   ] 2025-11-09T23:18:07.276Z [DEBUG] üöÄ [Gmail API] Fetching fresh enhanced recipients
[2025-11-09T23:18:07.276Z] [INFO   ] 2025-11-09T23:18:07.276Z [DEBUG] üîç [Gmail API] Integration scopes: ["https://www.googleapis.com/auth/gmail.modify","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/contacts.readonly","https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/analytics.edit","https://www.googleapis.com/auth/spreadsheets","https://www.googleapis.com/auth/gmail.settings.basic","https://www.googleapis.com/auth/documents","https://www.googleapis.com/auth/calendar","https://www.googleapis.com/auth/userinfo.email","openid","https://www.googleapis.com/auth/analytics.readonly","https://www.googleapis.com/auth/gmail.settings.sharing","https://www.googleapis.com/auth/userinfo.profile"]
[2025-11-09T23:18:07.276Z] [INFO   ] 2025-11-09T23:18:07.276Z [DEBUG] üìá [Gmail API] Attempting to fetch Google Contacts...
[2025-11-09T23:18:07.277Z] [INFO   ] 2025-11-09T23:18:07.277Z [DEBUG] üöÄ [Gmail Data API] Executing handler for: gmail-enhanced-recipients
[2025-11-09T23:18:07.277Z] [INFO   ] 2025-11-09T23:18:07.277Z [DEBUG] üöÄ [Gmail API] Fetching fresh enhanced recipients
[2025-11-09T23:18:07.277Z] [INFO   ] 2025-11-09T23:18:07.277Z [DEBUG] üîç [Gmail API] Integration scopes: ["https://www.googleapis.com/auth/gmail.modify","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/contacts.readonly","https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/analytics.edit","https://www.googleapis.com/auth/spreadsheets","https://www.googleapis.com/auth/gmail.settings.basic","https://www.googleapis.com/auth/documents","https://www.googleapis.com/auth/calendar","https://www.googleapis.com/auth/userinfo.email","openid","https://www.googleapis.com/auth/analytics.readonly","https://www.googleapis.com/auth/gmail.settings.sharing","https://www.googleapis.com/auth/userinfo.profile"]
[2025-11-09T23:18:07.277Z] [INFO   ] 2025-11-09T23:18:07.277Z [DEBUG] üìá [Gmail API] Attempting to fetch Google Contacts...
[2025-11-09T23:18:07.336Z] [INFO   ] 2025-11-09T23:18:07.336Z [DEBUG] üöÄ [Gmail Data API] Executing handler for: gmail_from_addresses
[2025-11-09T23:18:07.337Z] [INFO   ] 2025-11-09T23:18:07.337Z [DEBUG] üöÄ [Gmail From Addresses] Fetching fresh from addresses
[2025-11-09T23:18:07.337Z] [INFO   ] 2025-11-09T23:18:07.337Z [DEBUG] üë§ [Gmail From Addresses] Fetching user profile...
[2025-11-09T23:18:07.370Z] [INFO   ] 2025-11-09T23:18:07.370Z [DEBUG] üîç [GMAIL SIGNATURES] Getting access token for user: a3e3a51a-175c-4b59-ad03-227ba12a18b0
[2025-11-09T23:18:07.443Z] [INFO   ] 2025-11-09T23:18:07.443Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Access token retrieved successfully
[2025-11-09T23:18:07.444Z] [INFO   ] 2025-11-09T23:18:07.444Z [DEBUG] üîç [GMAIL SIGNATURES] Fetching Gmail sendAs settings...
[2025-11-09T23:18:07.470Z] [INFO   ] 2025-11-09T23:18:07.470Z [DEBUG] ‚úÖ [Gmail API] Found 4 contacts from Google Contacts
[2025-11-09T23:18:07.471Z] [INFO   ] 2025-11-09T23:18:07.471Z [DEBUG] üë• [Gmail API] Contacts raw preview: [{"names":["Nathaniel Stoddard"],"emails":[]},{"names":["SGT Aguilar"],"emails":[]},{"names":["Sponsee A1C Simona Gamble"],"emails":[]},{"names":["Rob"],"emails":[]}]
[2025-11-09T23:18:07.471Z] [INFO   ] 2025-11-09T23:18:07.471Z [DEBUG] üì¨ [Gmail API] Contacts returned: []
[2025-11-09T23:18:07.471Z] [INFO   ] 2025-11-09T23:18:07.471Z [DEBUG] üìß [Gmail API] Fetching recent email recipients from sent and received...
[2025-11-09T23:18:07.475Z] [INFO   ] 2025-11-09T23:18:07.475Z [DEBUG] ‚úÖ [Gmail API] Found 4 contacts from Google Contacts
[2025-11-09T23:18:07.475Z] [INFO   ] 2025-11-09T23:18:07.475Z [DEBUG] üë• [Gmail API] Contacts raw preview: [{"names":["Nathaniel Stoddard"],"emails":[]},{"names":["SGT Aguilar"],"emails":[]},{"names":["Sponsee A1C Simona Gamble"],"emails":[]},{"names":["Rob"],"emails":[]}]
[2025-11-09T23:18:07.475Z] [INFO   ] 2025-11-09T23:18:07.475Z [DEBUG] üì¨ [Gmail API] Contacts returned: []
[2025-11-09T23:18:07.475Z] [INFO   ] 2025-11-09T23:18:07.475Z [DEBUG] üìß [Gmail API] Fetching recent email recipients from sent and received...
[2025-11-09T23:18:07.479Z] [INFO   ] 2025-11-09T23:18:07.479Z [DEBUG] ‚úÖ [Gmail API] Found 4 contacts from Google Contacts
[2025-11-09T23:18:07.480Z] [INFO   ] 2025-11-09T23:18:07.480Z [DEBUG] üë• [Gmail API] Contacts raw preview: [{"names":["Nathaniel Stoddard"],"emails":[]},{"names":["SGT Aguilar"],"emails":[]},{"names":["Sponsee A1C Simona Gamble"],"emails":[]},{"names":["Rob"],"emails":[]}]
[2025-11-09T23:18:07.480Z] [INFO   ] 2025-11-09T23:18:07.480Z [DEBUG] üì¨ [Gmail API] Contacts returned: []
[2025-11-09T23:18:07.480Z] [INFO   ] 2025-11-09T23:18:07.480Z [DEBUG] üìß [Gmail API] Fetching recent email recipients from sent and received...
[2025-11-09T23:18:07.522Z] [INFO   ] 2025-11-09T23:18:07.522Z [DEBUG] ‚úÖ [Gmail From Addresses] Primary email: stoddard.nathaniel900@gmail.com
[2025-11-09T23:18:07.523Z] [INFO   ] 2025-11-09T23:18:07.523Z [DEBUG] üìß [Gmail From Addresses] Fetching send-as aliases...
[2025-11-09T23:18:07.699Z] [INFO   ] 2025-11-09T23:18:07.699Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] SendAs API response received: {
  "sendAs": [
    {
      "sendAsEmail": "stoddard.nathaniel900@gmail.com",
      "displayName": "",
      "replyToAddress": "",
      "signature": "Very Respectfully,\n\nSrA Nathaniel Stoddard, USAF",
      "isPrimary": true,
      "isDefault": true
    }
  ]
}
[2025-11-09T23:18:07.700Z] [INFO   ] 2025-11-09T23:18:07.700Z [DEBUG] üîç [GMAIL SIGNATURES] Found 1 sendAs settings
[2025-11-09T23:18:07.701Z] [INFO   ] 2025-11-09T23:18:07.701Z [DEBUG] üîç [GMAIL SIGNATURES] Processing sendAs 0: {"sendAsEmail":"stoddard.nathaniel900@gmail.com","displayName":"","hasSignature":true,"signaturePreview":"Very Respectfully,\n\nSrA Nathaniel Stoddard, USAF","isDefault":true}
[2025-11-09T23:18:07.702Z] [INFO   ] 2025-11-09T23:18:07.702Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Found signature for: stoddard.nathaniel900@gmail.com
[2025-11-09T23:18:07.702Z] [INFO   ] 2025-11-09T23:18:07.702Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Returning 1 signature(s): [{"id":"gmail-signature-0","name":"stoddard.nathaniel900@gmail.com","hasSignature":true}]
[2025-11-09T23:18:07.720Z] [INFO   ] 2025-11-09T23:18:07.720Z [DEBUG] ‚úÖ [Gmail From Addresses] Found 1 send-as aliases
[2025-11-09T23:18:07.720Z] [INFO   ] 2025-11-09T23:18:07.720Z [DEBUG] üì® [Gmail From Addresses] Fetching recent sent emails...
[2025-11-09T23:18:07.912Z] [INFO   ] 2025-11-09T23:18:07.912Z [DEBUG] üì® [Gmail From Addresses] Processing 20 sent messages...
[2025-11-09T23:18:07.923Z] [INFO   ] 2025-11-09T23:18:07.923Z [DEBUG] üìß [Gmail API] Processing 30 messages (sent + received)...
[2025-11-09T23:18:07.927Z] [INFO   ] 2025-11-09T23:18:07.927Z [DEBUG] üìß [Gmail API] Processing 30 messages (sent + received)...
[2025-11-09T23:18:07.933Z] [INFO   ] 2025-11-09T23:18:07.933Z [DEBUG] üìß [Gmail API] Processing 30 messages (sent + received)...
[2025-11-09T23:18:09.134Z] [INFO   ] 2025-11-09T23:18:09.134Z [DEBUG] ‚úÖ [Gmail From Addresses] Found 1 recent from addresses
[2025-11-09T23:18:09.135Z] [INFO   ] 2025-11-09T23:18:09.135Z [DEBUG] ‚úÖ [Gmail From Addresses] Total: 1 from addresses
[2025-11-09T23:18:09.135Z] [INFO   ] 2025-11-09T23:18:09.135Z [DEBUG] ‚úÖ [Gmail Data API] Handler completed in 1799ms, returned 1 items
[2025-11-09T23:18:09.726Z] [INFO   ] 2025-11-09T23:18:09.726Z [DEBUG] ‚úÖ [Gmail API] Found 24 unique recipients from sent and received emails
[2025-11-09T23:18:09.727Z] [INFO   ] 2025-11-09T23:18:09.727Z [DEBUG] ‚úÖ [Gmail API] Returning 24 enhanced recipients (contacts: true)
[2025-11-09T23:18:09.727Z] [INFO   ] 2025-11-09T23:18:09.727Z [DEBUG] ‚úÖ [Gmail Data API] Handler completed in 2452ms, returned 24 items
[2025-11-09T23:18:09.738Z] [INFO   ] 2025-11-09T23:18:09.738Z [DEBUG] ‚úÖ [Gmail API] Found 24 unique recipients from sent and received emails
[2025-11-09T23:18:09.739Z] [INFO   ] 2025-11-09T23:18:09.739Z [DEBUG] ‚úÖ [Gmail API] Returning 24 enhanced recipients (contacts: true)
[2025-11-09T23:18:09.739Z] [INFO   ] 2025-11-09T23:18:09.739Z [DEBUG] ‚úÖ [Gmail Data API] Handler completed in 2462ms, returned 24 items
[2025-11-09T23:18:09.751Z] [INFO   ] 2025-11-09T23:18:09.751Z [DEBUG] ‚úÖ [Gmail API] Found 24 unique recipients from sent and received emails
[2025-11-09T23:18:09.752Z] [INFO   ] 2025-11-09T23:18:09.752Z [DEBUG] ‚úÖ [Gmail API] Returning 24 enhanced recipients (contacts: true)
[2025-11-09T23:18:09.752Z] [INFO   ] 2025-11-09T23:18:09.752Z [DEBUG] ‚úÖ [Gmail Data API] Handler completed in 2491ms, returned 24 items
[2025-11-09T23:18:28.116Z] [INFO   ] 2025-11-09T23:18:28.116Z [DEBUG] üîç [GMAIL SIGNATURES] POST endpoint called
[2025-11-09T23:18:28.117Z] [INFO   ] 2025-11-09T23:18:28.117Z [DEBUG] üîç [GMAIL SIGNATURES] Request body: {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","name":"stoddard.nathaniel900@gmail.com","hasContent":true,"isDefault":false}
[2025-11-09T23:18:28.245Z] [INFO   ] 2025-11-09T23:18:28.245Z [DEBUG] üîç [GMAIL SIGNATURES] Getting access token for user: a3e3a51a-175c-4b59-ad03-227ba12a18b0
[2025-11-09T23:18:28.329Z] [INFO   ] 2025-11-09T23:18:28.329Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Access token retrieved successfully
[2025-11-09T23:18:28.330Z] [INFO   ] 2025-11-09T23:18:28.330Z [DEBUG] üîç [GMAIL SIGNATURES] Fetching user profile to get email...
[2025-11-09T23:18:28.582Z] [INFO   ] 2025-11-09T23:18:28.581Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] User email: stoddard.nathaniel900@gmail.com
[2025-11-09T23:18:28.582Z] [INFO   ] 2025-11-09T23:18:28.582Z [DEBUG] üîç [GMAIL SIGNATURES] Updating sendAs settings with new signature...
[2025-11-09T23:18:28.966Z] [INFO   ] 2025-11-09T23:18:28.966Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Signature updated successfully
[2025-11-09T23:18:29.059Z] [INFO   ] 2025-11-09T23:18:29.059Z [DEBUG] üîç [GMAIL SIGNATURES] API endpoint called
[2025-11-09T23:18:29.060Z] [INFO   ] 2025-11-09T23:18:29.060Z [DEBUG] üîç [GMAIL SIGNATURES] Request params: {"requestedUserId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-09T23:18:29.141Z] [INFO   ] 2025-11-09T23:18:29.141Z [DEBUG] üîç [GMAIL SIGNATURES] Getting access token for user: a3e3a51a-175c-4b59-ad03-227ba12a18b0
[2025-11-09T23:18:29.225Z] [INFO   ] 2025-11-09T23:18:29.224Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Access token retrieved successfully
[2025-11-09T23:18:29.225Z] [INFO   ] 2025-11-09T23:18:29.225Z [DEBUG] üîç [GMAIL SIGNATURES] Fetching Gmail sendAs settings...
[2025-11-09T23:18:29.415Z] [INFO   ] 2025-11-09T23:18:29.415Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] SendAs API response received: {
  "sendAs": [
    {
      "sendAsEmail": "stoddard.nathaniel900@gmail.com",
      "displayName": "",
      "replyToAddress": "",
      "signature": "Very Respectfully,\n\nSrA Nathaniel Stoddard, USAF",
      "isPrimary": true,
      "isDefault": true
    }
  ]
}
[2025-11-09T23:18:29.416Z] [INFO   ] 2025-11-09T23:18:29.416Z [DEBUG] üîç [GMAIL SIGNATURES] Found 1 sendAs settings
[2025-11-09T23:18:29.416Z] [INFO   ] 2025-11-09T23:18:29.416Z [DEBUG] üîç [GMAIL SIGNATURES] Processing sendAs 0: {"sendAsEmail":"stoddard.nathaniel900@gmail.com","displayName":"","hasSignature":true,"signaturePreview":"Very Respectfully,\n\nSrA Nathaniel Stoddard, USAF","isDefault":true}
[2025-11-09T23:18:29.416Z] [INFO   ] 2025-11-09T23:18:29.416Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Found signature for: stoddard.nathaniel900@gmail.com
[2025-11-09T23:18:29.416Z] [INFO   ] 2025-11-09T23:18:29.416Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Returning 1 signature(s): [{"id":"gmail-signature-0","name":"stoddard.nathaniel900@gmail.com","hasSignature":true}]
[2025-11-09T23:18:35.970Z] [INFO   ] 2025-11-09T23:18:35.970Z [DEBUG] üîç [GMAIL SIGNATURES] DELETE endpoint called
[2025-11-09T23:18:35.970Z] [INFO   ] 2025-11-09T23:18:35.970Z [DEBUG] üîç [GMAIL SIGNATURES] Delete params: {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","email":"stoddard.nathaniel900@gmail.com"}
[2025-11-09T23:18:36.104Z] [INFO   ] 2025-11-09T23:18:36.104Z [DEBUG] üîç [GMAIL SIGNATURES] Getting access token for user: a3e3a51a-175c-4b59-ad03-227ba12a18b0
[2025-11-09T23:18:36.192Z] [INFO   ] 2025-11-09T23:18:36.192Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Access token retrieved successfully
[2025-11-09T23:18:36.193Z] [INFO   ] 2025-11-09T23:18:36.193Z [DEBUG] üîç [GMAIL SIGNATURES] Deleting signature for email: stoddard.nathaniel900@gmail.com
[2025-11-09T23:18:36.649Z] [INFO   ] 2025-11-09T23:18:36.649Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Signature deleted successfully
[2025-11-09T23:18:36.734Z] [INFO   ] 2025-11-09T23:18:36.734Z [DEBUG] üîç [GMAIL SIGNATURES] API endpoint called
[2025-11-09T23:18:36.734Z] [INFO   ] 2025-11-09T23:18:36.734Z [DEBUG] üîç [GMAIL SIGNATURES] Request params: {"requestedUserId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-09T23:18:36.813Z] [INFO   ] 2025-11-09T23:18:36.813Z [DEBUG] üîç [GMAIL SIGNATURES] Getting access token for user: a3e3a51a-175c-4b59-ad03-227ba12a18b0
[2025-11-09T23:18:36.898Z] [INFO   ] 2025-11-09T23:18:36.898Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Access token retrieved successfully
[2025-11-09T23:18:36.898Z] [INFO   ] 2025-11-09T23:18:36.898Z [DEBUG] üîç [GMAIL SIGNATURES] Fetching Gmail sendAs settings...
[2025-11-09T23:18:37.085Z] [INFO   ] 2025-11-09T23:18:37.084Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] SendAs API response received: {
  "sendAs": [
    {
      "sendAsEmail": "stoddard.nathaniel900@gmail.com",
      "displayName": "",
      "replyToAddress": "",
      "signature": "",
      "isPrimary": true,
      "isDefault": true
    }
  ]
}
[2025-11-09T23:18:37.085Z] [INFO   ] 2025-11-09T23:18:37.085Z [DEBUG] üîç [GMAIL SIGNATURES] Found 1 sendAs settings
[2025-11-09T23:18:37.085Z] [INFO   ] 2025-11-09T23:18:37.085Z [DEBUG] üîç [GMAIL SIGNATURES] Processing sendAs 0: {"sendAsEmail":"stoddard.nathaniel900@gmail.com","displayName":"","hasSignature":false,"signaturePreview":"","isDefault":true}
[2025-11-09T23:18:37.086Z] [INFO   ] 2025-11-09T23:18:37.085Z [DEBUG] ‚ö†Ô∏è [GMAIL SIGNATURES] No signature set for: stoddard.nathaniel900@gmail.com
[2025-11-09T23:18:37.086Z] [INFO   ] 2025-11-09T23:18:37.086Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Returning 1 signature(s): [{"id":"gmail-signature-0","name":"stoddard.nathaniel900@gmail.com","hasSignature":false}]
[2025-11-09T23:19:36.518Z] [INFO   ] 2025-11-09T23:19:36.517Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-09T23:19:36.517Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-09T23:19:36.708Z] [INFO   ] 2025-11-09T23:19:36.708Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-09T23:19:36.708Z] [INFO   ] 2025-11-09T23:19:36.708Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-09T23:19:36.850Z] [INFO   ] 2025-11-09T23:19:36.850Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":10,"permissionsCount":9,"integrationsError":null,"permissionsError":null}
[2025-11-09T23:19:36.851Z] [INFO   ] 2025-11-09T23:19:36.851Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"aed260e3-7d87-4ea0-ba04-1ab6c35bbda5","provider":"discord","permission":"admin"}
[2025-11-09T23:19:36.851Z] [INFO   ] 2025-11-09T23:19:36.851Z [DEBUG] üìã [API /api/integrations] Using implicit permission {"integrationId":"7015bddc-01e2-46ad-89bb-fd2385c7dbfc","provider":"gumroad","permission":"admin","reason":"connected_by"}
[2025-11-09T23:19:36.851Z] [INFO   ] 2025-11-09T23:19:36.851Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"f7f6cf20-d078-40ef-a73c-bc7afd16ec14","provider":"hubspot","permission":"admin"}
[2025-11-09T23:19:36.851Z] [INFO   ] 2025-11-09T23:19:36.851Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"cdcb4dfa-0de9-4b0c-b493-28dc16aa47cf","provider":"github","permission":"admin"}
[2025-11-09T23:19:36.851Z] [INFO   ] 2025-11-09T23:19:36.851Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"1cf3129a-cbcb-4df8-b59b-876edd75d137","provider":"google-analytics","permission":"admin"}
[2025-11-09T23:19:36.852Z] [INFO   ] 2025-11-09T23:19:36.851Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"61424f3b-166f-4d60-bf1c-b63cb9155549","provider":"google-drive","permission":"admin"}
[2025-11-09T23:19:36.852Z] [INFO   ] 2025-11-09T23:19:36.852Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"fa4bc43d-e909-4b30-83ab-901e5d284a72","provider":"google-docs","permission":"admin"}
[2025-11-09T23:19:36.852Z] [INFO   ] 2025-11-09T23:19:36.852Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"f240f5c0-cb91-462a-bab9-51dcbb116331","provider":"gmail","permission":"admin"}
[2025-11-09T23:19:36.852Z] [INFO   ] 2025-11-09T23:19:36.852Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"72c8e3d3-ae7f-464a-b167-ad1e4b7bcc20","provider":"google-calendar","permission":"admin"}
[2025-11-09T23:19:36.852Z] [INFO   ] 2025-11-09T23:19:36.852Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"8640a243-994f-47b4-b456-26844f408359","provider":"google-sheets","permission":"admin"}
[2025-11-09T23:19:36.852Z] [INFO   ] 2025-11-09T23:19:36.852Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":10,"workspaceType":"personal"}
[2025-11-09T23:19:40.753Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/google-drive/callback ...
[2025-11-09T23:19:41.319Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/google-drive/callback in 1482ms (4186 modules)
[2025-11-09T23:19:41.373Z] [INFO   ] 2025-11-09T23:19:41.373Z [DEBUG] üîç google-drive callback called: {"url":"http://localhost:3000/api/integrations/google-drive/callback?state=eyJ1c2VySWQiOiJhM2UzYTUxYS0xNzVjLTRiNTktYWQwMy0yMjdiYTEyYTE4YjAiLCJwcm92aWRlciI6Imdvb2dsZS1kcml2ZSIsInJlY29ubmVjdCI6ZmFsc2UsInRpbWVzdGFtcCI6MTc2MjczMDM3NzU2Miwid29ya3NwYWNlVHlwZSI6InBlcnNvbmFsIn0%3D&code=4%2F0Ab32j913dEh14xRI5-94re4jJ3Qtk4OejBO4SfW7Cz9uU2ReSeSz5VT8nmGRkDQMn1zUHg&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive.readonly+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fspreadsheets+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fanalytics.edit+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fcalendar+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgmail.settings.sharing+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fanalytics.readonly+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgmail.modify+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdocuments+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fcontacts.readonly+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+openid+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgmail.settings.basic&authuser=0&prompt=none","hasCode":true,"hasState":true,"error":null,"userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36"}
[2025-11-09T23:19:41.373Z] [INFO   ] 2025-11-09T23:19:41.373Z [DEBUG] google-drive OAuth callback state: {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"google-drive","reconnect":false,"workspaceType":"personal"}
[2025-11-09T23:19:41.621Z] [INFO   ] 2025-11-09T23:19:41.621Z [DEBUG] Granting permissions for workspace context: {"type":"personal"}
[2025-11-09T23:19:41.722Z] [ERROR  ] 2025-11-09T23:19:41.722Z [ERROR] Error granting permission: {"code":"23505","details":null,"hint":null,"message":"duplicate key value violates unique constraint \"integration_permissions_integration_id_user_id_key\""}
[2025-11-09T23:19:41.722Z] [INFO   ] 2025-11-09T23:19:41.722Z [INFO] Personal integration 61424f3b-166f-4d60-bf1c-b63cb9155549 - granted admin to a3e3a51a-175c-4b59-ad03-227ba12a18b0
[2025-11-09T23:19:41.722Z] [INFO   ] 2025-11-09T23:19:41.722Z [DEBUG] ‚úÖ Permissions granted successfully
[2025-11-09T23:19:41.722Z] [INFO   ] 2025-11-09T23:19:41.722Z [DEBUG] ‚úÖ google-drive integration successfully saved
[2025-11-09T23:19:41.723Z] [INFO   ] 2025-11-09T23:19:41.723Z [DEBUG] üîÑ Creating popup response: type=success, provider=google-drive, displayName=Google Drive, message=google-drive connected successfully!
[2025-11-09T23:19:42.012Z] [INFO   ] 2025-11-09T23:19:42.012Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-09T23:19:42.012Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-09T23:19:42.130Z] [INFO   ] 2025-11-09T23:19:42.129Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-09T23:19:42.130Z] [INFO   ] 2025-11-09T23:19:42.130Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-09T23:19:42.273Z] [INFO   ] 2025-11-09T23:19:42.273Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":10,"permissionsCount":9,"integrationsError":null,"permissionsError":null}
[2025-11-09T23:19:42.274Z] [INFO   ] 2025-11-09T23:19:42.274Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"aed260e3-7d87-4ea0-ba04-1ab6c35bbda5","provider":"discord","permission":"admin"}
[2025-11-09T23:19:42.274Z] [INFO   ] 2025-11-09T23:19:42.274Z [DEBUG] üìã [API /api/integrations] Using implicit permission {"integrationId":"7015bddc-01e2-46ad-89bb-fd2385c7dbfc","provider":"gumroad","permission":"admin","reason":"connected_by"}
[2025-11-09T23:19:42.274Z] [INFO   ] 2025-11-09T23:19:42.274Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"f7f6cf20-d078-40ef-a73c-bc7afd16ec14","provider":"hubspot","permission":"admin"}
[2025-11-09T23:19:42.274Z] [INFO   ] 2025-11-09T23:19:42.274Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"cdcb4dfa-0de9-4b0c-b493-28dc16aa47cf","provider":"github","permission":"admin"}
[2025-11-09T23:19:42.274Z] [INFO   ] 2025-11-09T23:19:42.274Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"1cf3129a-cbcb-4df8-b59b-876edd75d137","provider":"google-analytics","permission":"admin"}
[2025-11-09T23:19:42.274Z] [INFO   ] 2025-11-09T23:19:42.274Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"fa4bc43d-e909-4b30-83ab-901e5d284a72","provider":"google-docs","permission":"admin"}
[2025-11-09T23:19:42.274Z] [INFO   ] 2025-11-09T23:19:42.274Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"f240f5c0-cb91-462a-bab9-51dcbb116331","provider":"gmail","permission":"admin"}
[2025-11-09T23:19:42.274Z] [INFO   ] 2025-11-09T23:19:42.274Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"61424f3b-166f-4d60-bf1c-b63cb9155549","provider":"google-drive","permission":"admin"}
[2025-11-09T23:19:42.274Z] [INFO   ] 2025-11-09T23:19:42.274Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"72c8e3d3-ae7f-464a-b167-ad1e4b7bcc20","provider":"google-calendar","permission":"admin"}
[2025-11-09T23:19:42.274Z] [INFO   ] 2025-11-09T23:19:42.274Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"8640a243-994f-47b4-b456-26844f408359","provider":"google-sheets","permission":"admin"}
[2025-11-09T23:19:42.274Z] [INFO   ] 2025-11-09T23:19:42.274Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":10,"workspaceType":"personal"}
[2025-11-09T23:19:56.632Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 3.1s (5311 modules)
[2025-11-09T23:20:32.784Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/fetch-user-data ...
[2025-11-09T23:20:33.557Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/fetch-user-data in 1334ms (4183 modules)
[2025-11-09T23:20:33.916Z] [INFO   ] 2025-11-09T23:20:33.916Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-09T23:20:33.916Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-09T23:20:33.922Z] [INFO   ] 2025-11-09T23:20:33.922Z [DEBUG] üöÄ [SERVER] fetch-user-data API route called
[2025-11-09T23:20:33.922Z] [INFO   ] 2025-11-09T23:20:33.922Z [DEBUG] üîç [SERVER] fetch-user-data request parsed: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_spreadsheets","options":{}}
[2025-11-09T23:20:34.068Z] [INFO   ] 2025-11-09T23:20:34.068Z [DEBUG] üîÑ [SERVER] Routing Google request to dedicated API: google-sheets_spreadsheets (provider: google-sheets)
[2025-11-09T23:20:34.070Z] [INFO   ] 2025-11-09T23:20:34.070Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-09T23:20:34.070Z] [INFO   ] 2025-11-09T23:20:34.070Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-09T23:20:34.186Z] [INFO   ] 2025-11-09T23:20:34.186Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":10,"permissionsCount":9,"integrationsError":null,"permissionsError":null}
[2025-11-09T23:20:34.186Z] [INFO   ] 2025-11-09T23:20:34.186Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"aed260e3-7d87-4ea0-ba04-1ab6c35bbda5","provider":"discord","permission":"admin"}
[2025-11-09T23:20:34.186Z] [INFO   ] 2025-11-09T23:20:34.186Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"f7f6cf20-d078-40ef-a73c-bc7afd16ec14","provider":"hubspot","permission":"admin"}
[2025-11-09T23:20:34.187Z] [INFO   ] 2025-11-09T23:20:34.186Z [DEBUG] üìã [API /api/integrations] Using implicit permission {"integrationId":"7015bddc-01e2-46ad-89bb-fd2385c7dbfc","provider":"gumroad","permission":"admin","reason":"connected_by"}
[2025-11-09T23:20:34.187Z] [INFO   ] 2025-11-09T23:20:34.187Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"cdcb4dfa-0de9-4b0c-b493-28dc16aa47cf","provider":"github","permission":"admin"}
[2025-11-09T23:20:34.187Z] [INFO   ] 2025-11-09T23:20:34.187Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"1cf3129a-cbcb-4df8-b59b-876edd75d137","provider":"google-analytics","permission":"admin"}
[2025-11-09T23:20:34.187Z] [INFO   ] 2025-11-09T23:20:34.187Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"fa4bc43d-e909-4b30-83ab-901e5d284a72","provider":"google-docs","permission":"admin"}
[2025-11-09T23:20:34.187Z] [INFO   ] 2025-11-09T23:20:34.187Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"f240f5c0-cb91-462a-bab9-51dcbb116331","provider":"gmail","permission":"admin"}
[2025-11-09T23:20:34.187Z] [INFO   ] 2025-11-09T23:20:34.187Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"61424f3b-166f-4d60-bf1c-b63cb9155549","provider":"google-drive","permission":"admin"}
[2025-11-09T23:20:34.187Z] [INFO   ] 2025-11-09T23:20:34.187Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"72c8e3d3-ae7f-464a-b167-ad1e4b7bcc20","provider":"google-calendar","permission":"admin"}
[2025-11-09T23:20:34.187Z] [INFO   ] 2025-11-09T23:20:34.187Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"8640a243-994f-47b4-b456-26844f408359","provider":"google-sheets","permission":"admin"}
[2025-11-09T23:20:34.188Z] [INFO   ] 2025-11-09T23:20:34.187Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":10,"workspaceType":"personal"}
[2025-11-09T23:20:34.618Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/google/data ...
[2025-11-09T23:20:36.050Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/google/data in 1943ms (4217 modules)
[2025-11-09T23:20:36.123Z] [INFO   ] 2025-11-09T23:20:36.123Z [DEBUG] üöÄ [Google Data API] POST handler invoked
[2025-11-09T23:20:36.124Z] [INFO   ] 2025-11-09T23:20:36.124Z [DEBUG] üîç [Google Data API] Request received: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_spreadsheets","options":{},"fullRequestBody":{"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_spreadsheets","options":{}}}
[2025-11-09T23:20:36.209Z] [INFO   ] 2025-11-09T23:20:36.209Z [DEBUG] üìä [Google API] Integration provider check: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","actualProvider":"google-sheets","dataType":"google-sheets_spreadsheets","providerLowerCase":"google-sheets"}
[2025-11-09T23:20:36.210Z] [ERROR  ] 2025-11-09T23:20:36.209Z [ERROR] ‚ùå [Google API] Integration not connected: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","status":"expired"}
[2025-11-09T23:20:36.211Z] [ERROR  ] 2025-11-09T23:20:36.211Z [ERROR] ‚ùå [SERVER] Google API error: {"error":"Google integration is not connected. Please reconnect your account.","details":{"needsReconnection":true,"currentStatus":"expired"}}
[2025-11-09T23:20:36.959Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/google-sheets/callback in 434ms (4219 modules)
[2025-11-09T23:20:37.022Z] [INFO   ] 2025-11-09T23:20:37.021Z [DEBUG] üîç google-sheets callback called: {"url":"http://localhost:3000/api/integrations/google-sheets/callback?state=eyJ1c2VySWQiOiJhM2UzYTUxYS0xNzVjLTRiNTktYWQwMy0yMjdiYTEyYTE4YjAiLCJwcm92aWRlciI6Imdvb2dsZS1zaGVldHMiLCJyZWNvbm5lY3QiOmZhbHNlLCJ0aW1lc3RhbXAiOjE3NjI3MzA0MzQwOTMsIndvcmtzcGFjZVR5cGUiOiJwZXJzb25hbCJ9&code=4%2F0Ab32j90gHKwGVg4wIlKiD-v2NsmRLoVUhf6utqbve6AQCovhxQYeDb9_o4XZNCCtMAaXSg&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgmail.modify+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fcontacts.readonly+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive.readonly+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgmail.settings.sharing+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fanalytics.edit+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fcalendar+openid+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fanalytics.readonly+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdocuments+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fspreadsheets+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgmail.settings.basic+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&authuser=0&prompt=none","hasCode":true,"hasState":true,"error":null,"userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36"}
[2025-11-09T23:20:37.022Z] [INFO   ] 2025-11-09T23:20:37.022Z [DEBUG] google-sheets OAuth callback state: {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"google-sheets","reconnect":false,"workspaceType":"personal"}
[2025-11-09T23:20:37.272Z] [INFO   ] 2025-11-09T23:20:37.272Z [DEBUG] Granting permissions for workspace context: {"type":"personal"}
[2025-11-09T23:20:37.357Z] [ERROR  ] 2025-11-09T23:20:37.357Z [ERROR] Error granting permission: {"code":"23505","details":null,"hint":null,"message":"duplicate key value violates unique constraint \"integration_permissions_integration_id_user_id_key\""}
[2025-11-09T23:20:37.358Z] [INFO   ] 2025-11-09T23:20:37.358Z [INFO] Personal integration 8640a243-994f-47b4-b456-26844f408359 - granted admin to a3e3a51a-175c-4b59-ad03-227ba12a18b0
[2025-11-09T23:20:37.358Z] [INFO   ] 2025-11-09T23:20:37.358Z [DEBUG] ‚úÖ Permissions granted successfully
[2025-11-09T23:20:37.358Z] [INFO   ] 2025-11-09T23:20:37.358Z [DEBUG] ‚úÖ google-sheets integration successfully saved
[2025-11-09T23:20:37.358Z] [INFO   ] 2025-11-09T23:20:37.358Z [DEBUG] üîÑ Creating popup response: type=success, provider=google-sheets, displayName=Google Sheets, message=google-sheets connected successfully!
[2025-11-09T23:20:37.680Z] [INFO   ] 2025-11-09T23:20:37.680Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-09T23:20:37.680Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-09T23:20:37.766Z] [INFO   ] 2025-11-09T23:20:37.766Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-09T23:20:37.766Z] [INFO   ] 2025-11-09T23:20:37.766Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-09T23:20:37.855Z] [INFO   ] 2025-11-09T23:20:37.855Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":10,"permissionsCount":9,"integrationsError":null,"permissionsError":null}
[2025-11-09T23:20:37.856Z] [INFO   ] 2025-11-09T23:20:37.856Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"aed260e3-7d87-4ea0-ba04-1ab6c35bbda5","provider":"discord","permission":"admin"}
[2025-11-09T23:20:37.856Z] [INFO   ] 2025-11-09T23:20:37.856Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"f7f6cf20-d078-40ef-a73c-bc7afd16ec14","provider":"hubspot","permission":"admin"}
[2025-11-09T23:20:37.856Z] [INFO   ] 2025-11-09T23:20:37.856Z [DEBUG] üìã [API /api/integrations] Using implicit permission {"integrationId":"7015bddc-01e2-46ad-89bb-fd2385c7dbfc","provider":"gumroad","permission":"admin","reason":"connected_by"}
[2025-11-09T23:20:37.856Z] [INFO   ] 2025-11-09T23:20:37.856Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"cdcb4dfa-0de9-4b0c-b493-28dc16aa47cf","provider":"github","permission":"admin"}
[2025-11-09T23:20:37.856Z] [INFO   ] 2025-11-09T23:20:37.856Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"1cf3129a-cbcb-4df8-b59b-876edd75d137","provider":"google-analytics","permission":"admin"}
[2025-11-09T23:20:37.856Z] [INFO   ] 2025-11-09T23:20:37.856Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"fa4bc43d-e909-4b30-83ab-901e5d284a72","provider":"google-docs","permission":"admin"}
[2025-11-09T23:20:37.856Z] [INFO   ] 2025-11-09T23:20:37.856Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"f240f5c0-cb91-462a-bab9-51dcbb116331","provider":"gmail","permission":"admin"}
[2025-11-09T23:20:37.856Z] [INFO   ] 2025-11-09T23:20:37.856Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"61424f3b-166f-4d60-bf1c-b63cb9155549","provider":"google-drive","permission":"admin"}
[2025-11-09T23:20:37.856Z] [INFO   ] 2025-11-09T23:20:37.856Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"72c8e3d3-ae7f-464a-b167-ad1e4b7bcc20","provider":"google-calendar","permission":"admin"}
[2025-11-09T23:20:37.856Z] [INFO   ] 2025-11-09T23:20:37.856Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"8640a243-994f-47b4-b456-26844f408359","provider":"google-sheets","permission":"admin"}
[2025-11-09T23:20:37.856Z] [INFO   ] 2025-11-09T23:20:37.856Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":10,"workspaceType":"personal"}
[2025-11-09T23:20:42.160Z] [INFO   ] 2025-11-09T23:20:42.159Z [DEBUG] üöÄ [SERVER] fetch-user-data API route called
[2025-11-09T23:20:42.161Z] [INFO   ] 2025-11-09T23:20:42.161Z [DEBUG] üîç [SERVER] fetch-user-data request parsed: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_spreadsheets","options":{}}
[2025-11-09T23:20:42.274Z] [INFO   ] 2025-11-09T23:20:42.274Z [DEBUG] üöÄ [SERVER] fetch-user-data API route called
[2025-11-09T23:20:42.275Z] [INFO   ] 2025-11-09T23:20:42.275Z [DEBUG] üîç [SERVER] fetch-user-data request parsed: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_spreadsheets","options":{"force":true}}
[2025-11-09T23:20:42.311Z] [INFO   ] 2025-11-09T23:20:42.311Z [DEBUG] üîÑ [SERVER] Routing Google request to dedicated API: google-sheets_spreadsheets (provider: google-sheets)
[2025-11-09T23:20:42.404Z] [INFO   ] 2025-11-09T23:20:42.404Z [DEBUG] üöÄ [Google Data API] POST handler invoked
[2025-11-09T23:20:42.404Z] [INFO   ] 2025-11-09T23:20:42.404Z [DEBUG] üîç [Google Data API] Request received: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_spreadsheets","options":{},"fullRequestBody":{"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_spreadsheets","options":{}}}
[2025-11-09T23:20:42.422Z] [INFO   ] 2025-11-09T23:20:42.422Z [DEBUG] üîÑ [SERVER] Routing Google request to dedicated API: google-sheets_spreadsheets (provider: google-sheets)
[2025-11-09T23:20:42.483Z] [INFO   ] 2025-11-09T23:20:42.483Z [DEBUG] üöÄ [Google Data API] POST handler invoked
[2025-11-09T23:20:42.483Z] [INFO   ] 2025-11-09T23:20:42.483Z [DEBUG] üîç [Google Data API] Request received: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_spreadsheets","options":{"force":true},"fullRequestBody":{"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_spreadsheets","options":{"force":true}}}
[2025-11-09T23:20:42.484Z] [INFO   ] 2025-11-09T23:20:42.484Z [DEBUG] üìä [Google API] Integration provider check: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","actualProvider":"google-sheets","dataType":"google-sheets_spreadsheets","providerLowerCase":"google-sheets"}
[2025-11-09T23:20:42.484Z] [INFO   ] 2025-11-09T23:20:42.484Z [DEBUG] üîç [Google API] Processing request: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_spreadsheets","provider":"google-sheets","status":"connected","hasToken":true}
[2025-11-09T23:20:42.485Z] [INFO   ] 2025-11-09T23:20:42.485Z [DEBUG] üìä [Google Sheets] Fetching spreadsheets
[2025-11-09T23:20:42.566Z] [INFO   ] 2025-11-09T23:20:42.566Z [DEBUG] üìä [Google API] Integration provider check: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","actualProvider":"google-sheets","dataType":"google-sheets_spreadsheets","providerLowerCase":"google-sheets"}
[2025-11-09T23:20:42.566Z] [INFO   ] 2025-11-09T23:20:42.566Z [DEBUG] üîç [Google API] Processing request: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_spreadsheets","provider":"google-sheets","status":"connected","hasToken":true}
[2025-11-09T23:20:42.566Z] [INFO   ] 2025-11-09T23:20:42.566Z [DEBUG] üìä [Google Sheets] Fetching spreadsheets
[2025-11-09T23:20:42.893Z] [INFO   ] 2025-11-09T23:20:42.893Z [DEBUG] ‚úÖ [Google Sheets] Retrieved 21 spreadsheets
[2025-11-09T23:20:42.893Z] [INFO   ] 2025-11-09T23:20:42.893Z [DEBUG] ‚úÖ [Google API] Successfully processed google-sheets_spreadsheets: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","resultCount":21}
[2025-11-09T23:20:42.898Z] [INFO   ] 2025-11-09T23:20:42.897Z [DEBUG] ‚úÖ [SERVER] Google API completed for google-sheets_spreadsheets, result length: 21
[2025-11-09T23:20:43.528Z] [INFO   ] 2025-11-09T23:20:43.528Z [DEBUG] ‚úÖ [Google Sheets] Retrieved 21 spreadsheets
[2025-11-09T23:20:43.529Z] [INFO   ] 2025-11-09T23:20:43.529Z [DEBUG] ‚úÖ [Google API] Successfully processed google-sheets_spreadsheets: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","resultCount":21}
[2025-11-09T23:20:43.531Z] [INFO   ] 2025-11-09T23:20:43.531Z [DEBUG] ‚úÖ [SERVER] Google API completed for google-sheets_spreadsheets, result length: 21
[2025-11-09T23:20:46.398Z] [INFO   ] 2025-11-09T23:20:46.398Z [DEBUG] üöÄ [SERVER] fetch-user-data API route called
[2025-11-09T23:20:46.399Z] [INFO   ] 2025-11-09T23:20:46.399Z [DEBUG] üîç [SERVER] fetch-user-data request parsed: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_sheets","options":{"spreadsheetId":"13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI"}}
[2025-11-09T23:20:46.475Z] [INFO   ] 2025-11-09T23:20:46.475Z [DEBUG] üîÑ [SERVER] Routing Google request to dedicated API: google-sheets_sheets (provider: google-sheets)
[2025-11-09T23:20:46.529Z] [INFO   ] 2025-11-09T23:20:46.529Z [DEBUG] üöÄ [Google Data API] POST handler invoked
[2025-11-09T23:20:46.529Z] [INFO   ] 2025-11-09T23:20:46.529Z [DEBUG] üîç [Google Data API] Request received: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_sheets","options":{"spreadsheetId":"13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI"},"fullRequestBody":{"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_sheets","options":{"spreadsheetId":"13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI"}}}
[2025-11-09T23:20:46.602Z] [INFO   ] 2025-11-09T23:20:46.602Z [DEBUG] üìä [Google API] Integration provider check: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","actualProvider":"google-sheets","dataType":"google-sheets_sheets","providerLowerCase":"google-sheets"}
[2025-11-09T23:20:46.602Z] [INFO   ] 2025-11-09T23:20:46.602Z [DEBUG] üîç [Google API] Processing request: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_sheets","provider":"google-sheets","status":"connected","hasToken":true}
[2025-11-09T23:20:46.602Z] [INFO   ] 2025-11-09T23:20:46.602Z [DEBUG] üìä [Google Sheets] Fetching sheets for spreadsheet: 13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI
[2025-11-09T23:20:47.274Z] [INFO   ] 2025-11-09T23:20:47.274Z [DEBUG] ‚úÖ [Google Sheets] Retrieved 4 sheets
[2025-11-09T23:20:47.274Z] [INFO   ] 2025-11-09T23:20:47.274Z [DEBUG] ‚úÖ [Google API] Successfully processed google-sheets_sheets: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","resultCount":4}
[2025-11-09T23:20:47.276Z] [INFO   ] 2025-11-09T23:20:47.276Z [DEBUG] ‚úÖ [SERVER] Google API completed for google-sheets_sheets, result length: 4
[2025-11-09T23:20:48.665Z] [INFO   ] 2025-11-09T23:20:48.664Z [DEBUG] üöÄ [SERVER] fetch-user-data API route called
[2025-11-09T23:20:48.665Z] [INFO   ] 2025-11-09T23:20:48.665Z [DEBUG] üîç [SERVER] fetch-user-data request parsed: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_columns","options":{"sheetName":"Monthly Budget","spreadsheetId":"13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI"}}
[2025-11-09T23:20:48.737Z] [INFO   ] 2025-11-09T23:20:48.737Z [DEBUG] üîÑ [SERVER] Routing Google request to dedicated API: google-sheets_columns (provider: google-sheets)
[2025-11-09T23:20:48.793Z] [INFO   ] 2025-11-09T23:20:48.793Z [DEBUG] üöÄ [Google Data API] POST handler invoked
[2025-11-09T23:20:48.794Z] [INFO   ] 2025-11-09T23:20:48.794Z [DEBUG] üîç [Google Data API] Request received: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_columns","options":{"sheetName":"Monthly Budget","spreadsheetId":"13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI"},"fullRequestBody":{"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_columns","options":{"sheetName":"Monthly Budget","spreadsheetId":"13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI"}}}
[2025-11-09T23:20:48.867Z] [INFO   ] 2025-11-09T23:20:48.867Z [DEBUG] üìä [Google API] Integration provider check: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","actualProvider":"google-sheets","dataType":"google-sheets_columns","providerLowerCase":"google-sheets"}
[2025-11-09T23:20:48.868Z] [INFO   ] 2025-11-09T23:20:48.868Z [DEBUG] üîç [Google API] Processing request: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","dataType":"google-sheets_columns","provider":"google-sheets","status":"connected","hasToken":true}
[2025-11-09T23:20:48.868Z] [INFO   ] 2025-11-09T23:20:48.868Z [DEBUG] üìä [Google Sheets] Fetching columns for: 13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI/Monthly Budget
[2025-11-09T23:20:49.080Z] [INFO   ] 2025-11-09T23:20:49.080Z [DEBUG] ‚úÖ [Google Sheets] Retrieved 26 columns
[2025-11-09T23:20:49.081Z] [INFO   ] 2025-11-09T23:20:49.081Z [DEBUG] ‚úÖ [Google API] Successfully processed google-sheets_columns: {"integrationId":"8640a243-994f-47b4-b456-26844f408359","resultCount":26}
[2025-11-09T23:20:49.082Z] [INFO   ] 2025-11-09T23:20:49.082Z [DEBUG] ‚úÖ [SERVER] Google API completed for google-sheets_columns, result length: 26
[2025-11-09T23:21:47.014Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 8.9s (5345 modules)
[2025-11-09T23:22:26.234Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 3.2s (5173 modules)
[2025-11-09T23:22:31.791Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1406ms (5173 modules)
[2025-11-09T23:23:03.539Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 2.3s (5173 modules)
[2025-11-09T23:23:06.119Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/presence/count ...
[2025-11-09T23:23:06.148Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/presence/count in 669ms (4166 modules)
[2025-11-09T23:23:55.507Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/gmail/signatures ...
[2025-11-09T23:23:58.027Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/gmail/signatures in 3s (4174 modules)
[2025-11-09T23:23:58.378Z] [INFO   ] 2025-11-09T23:23:58.378Z [DEBUG] üîç [GMAIL SIGNATURES] API endpoint called
[2025-11-09T23:23:58.379Z] [INFO   ] 2025-11-09T23:23:58.379Z [DEBUG] üîç [GMAIL SIGNATURES] Request params: {"requestedUserId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-09T23:23:58.625Z] [INFO   ] 2025-11-09T23:23:58.624Z [DEBUG] üîç [GMAIL SIGNATURES] Getting access token for user: a3e3a51a-175c-4b59-ad03-227ba12a18b0
[2025-11-09T23:23:58.751Z] [INFO   ] 2025-11-09T23:23:58.751Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Access token retrieved successfully
[2025-11-09T23:23:58.752Z] [INFO   ] 2025-11-09T23:23:58.752Z [DEBUG] üîç [GMAIL SIGNATURES] Fetching Gmail sendAs settings...
[2025-11-09T23:23:59.761Z] [INFO   ] 2025-11-09T23:23:59.761Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] SendAs API response received: {
  "sendAs": [
    {
      "sendAsEmail": "stoddard.nathaniel900@gmail.com",
      "displayName": "",
      "replyToAddress": "",
      "signature": "",
      "isPrimary": true,
      "isDefault": true
    }
  ]
}
[2025-11-09T23:23:59.761Z] [INFO   ] 2025-11-09T23:23:59.761Z [DEBUG] üîç [GMAIL SIGNATURES] Found 1 sendAs settings
[2025-11-09T23:23:59.761Z] [INFO   ] 2025-11-09T23:23:59.761Z [DEBUG] üîç [GMAIL SIGNATURES] Processing sendAs 0: {"sendAsEmail":"stoddard.nathaniel900@gmail.com","displayName":"","hasSignature":false,"signaturePreview":"","isDefault":true}
[2025-11-09T23:23:59.761Z] [INFO   ] 2025-11-09T23:23:59.761Z [DEBUG] ‚ö†Ô∏è [GMAIL SIGNATURES] No signature set for: stoddard.nathaniel900@gmail.com
[2025-11-09T23:23:59.762Z] [INFO   ] 2025-11-09T23:23:59.761Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Returning 1 signature(s): [{"id":"gmail-signature-0","name":"stoddard.nathaniel900@gmail.com","hasSignature":false}]
[2025-11-09T23:24:00.634Z] [INFO   ] 2025-11-09T23:24:00.633Z [DEBUG] üîç [GMAIL SIGNATURES] API endpoint called
[2025-11-09T23:24:00.634Z] [INFO   ] 2025-11-09T23:24:00.634Z [DEBUG] üîç [GMAIL SIGNATURES] Request params: {"requestedUserId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-09T23:24:00.806Z] [INFO   ] 2025-11-09T23:24:00.806Z [DEBUG] üîç [GMAIL SIGNATURES] Getting access token for user: a3e3a51a-175c-4b59-ad03-227ba12a18b0
[2025-11-09T23:24:00.946Z] [INFO   ] 2025-11-09T23:24:00.946Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Access token retrieved successfully
[2025-11-09T23:24:00.946Z] [INFO   ] 2025-11-09T23:24:00.946Z [DEBUG] üîç [GMAIL SIGNATURES] Fetching Gmail sendAs settings...
[2025-11-09T23:24:01.131Z] [INFO   ] 2025-11-09T23:24:01.131Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] SendAs API response received: {
  "sendAs": [
    {
      "sendAsEmail": "stoddard.nathaniel900@gmail.com",
      "displayName": "",
      "replyToAddress": "",
      "signature": "",
      "isPrimary": true,
      "isDefault": true
    }
  ]
}
[2025-11-09T23:24:01.131Z] [INFO   ] 2025-11-09T23:24:01.131Z [DEBUG] üîç [GMAIL SIGNATURES] Found 1 sendAs settings
[2025-11-09T23:24:01.131Z] [INFO   ] 2025-11-09T23:24:01.131Z [DEBUG] üîç [GMAIL SIGNATURES] Processing sendAs 0: {"sendAsEmail":"stoddard.nathaniel900@gmail.com","displayName":"","hasSignature":false,"signaturePreview":"","isDefault":true}
[2025-11-09T23:24:01.131Z] [INFO   ] 2025-11-09T23:24:01.131Z [DEBUG] ‚ö†Ô∏è [GMAIL SIGNATURES] No signature set for: stoddard.nathaniel900@gmail.com
[2025-11-09T23:24:01.131Z] [INFO   ] 2025-11-09T23:24:01.131Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Returning 1 signature(s): [{"id":"gmail-signature-0","name":"stoddard.nathaniel900@gmail.com","hasSignature":false}]
[2025-11-09T23:24:30.585Z] [INFO   ] 2025-11-09T23:24:30.584Z [DEBUG] üîç [GMAIL SIGNATURES] POST endpoint called
[2025-11-09T23:24:30.585Z] [INFO   ] 2025-11-09T23:24:30.585Z [DEBUG] üîç [GMAIL SIGNATURES] Request body: {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","name":"stoddard.nathaniel900@gmail.com","hasContent":true,"isDefault":false}
[2025-11-09T23:24:30.745Z] [INFO   ] 2025-11-09T23:24:30.745Z [DEBUG] üîç [GMAIL SIGNATURES] Getting access token for user: a3e3a51a-175c-4b59-ad03-227ba12a18b0
[2025-11-09T23:24:30.866Z] [INFO   ] 2025-11-09T23:24:30.866Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Access token retrieved successfully
[2025-11-09T23:24:30.866Z] [INFO   ] 2025-11-09T23:24:30.866Z [DEBUG] üîç [GMAIL SIGNATURES] Fetching user profile to get email...
[2025-11-09T23:24:31.118Z] [INFO   ] 2025-11-09T23:24:31.118Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] User email: stoddard.nathaniel900@gmail.com
[2025-11-09T23:24:31.119Z] [INFO   ] 2025-11-09T23:24:31.119Z [DEBUG] üîç [GMAIL SIGNATURES] Updating sendAs settings with new signature...
[2025-11-09T23:24:31.463Z] [INFO   ] 2025-11-09T23:24:31.463Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Signature updated successfully
[2025-11-09T23:24:31.528Z] [INFO   ] 2025-11-09T23:24:31.528Z [DEBUG] üîç [GMAIL SIGNATURES] API endpoint called
[2025-11-09T23:24:31.529Z] [INFO   ] 2025-11-09T23:24:31.529Z [DEBUG] üîç [GMAIL SIGNATURES] Request params: {"requestedUserId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-09T23:24:31.635Z] [INFO   ] 2025-11-09T23:24:31.635Z [DEBUG] üîç [GMAIL SIGNATURES] Getting access token for user: a3e3a51a-175c-4b59-ad03-227ba12a18b0
[2025-11-09T23:24:31.740Z] [INFO   ] 2025-11-09T23:24:31.740Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Access token retrieved successfully
[2025-11-09T23:24:31.740Z] [INFO   ] 2025-11-09T23:24:31.740Z [DEBUG] üîç [GMAIL SIGNATURES] Fetching Gmail sendAs settings...
[2025-11-09T23:24:31.923Z] [INFO   ] 2025-11-09T23:24:31.923Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] SendAs API response received: {
  "sendAs": [
    {
      "sendAsEmail": "stoddard.nathaniel900@gmail.com",
      "displayName": "",
      "replyToAddress": "",
      "signature": "test<div><br></div><div>test</div>",
      "isPrimary": true,
      "isDefault": true
    }
  ]
}
[2025-11-09T23:24:31.923Z] [INFO   ] 2025-11-09T23:24:31.923Z [DEBUG] üîç [GMAIL SIGNATURES] Found 1 sendAs settings
[2025-11-09T23:24:31.923Z] [INFO   ] 2025-11-09T23:24:31.923Z [DEBUG] üîç [GMAIL SIGNATURES] Processing sendAs 0: {"sendAsEmail":"stoddard.nathaniel900@gmail.com","displayName":"","hasSignature":true,"signaturePreview":"test<div><br></div><div>test</div>","isDefault":true}
[2025-11-09T23:24:31.924Z] [INFO   ] 2025-11-09T23:24:31.924Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Found signature for: stoddard.nathaniel900@gmail.com
[2025-11-09T23:24:31.924Z] [INFO   ] 2025-11-09T23:24:31.924Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Returning 1 signature(s): [{"id":"gmail-signature-0","name":"stoddard.nathaniel900@gmail.com","hasSignature":true}]
[2025-11-09T23:24:38.617Z] [INFO   ] 2025-11-09T23:24:38.617Z [DEBUG] üîç [GMAIL SIGNATURES] DELETE endpoint called
[2025-11-09T23:24:38.618Z] [INFO   ] 2025-11-09T23:24:38.618Z [DEBUG] üîç [GMAIL SIGNATURES] Delete params: {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","email":"stoddard.nathaniel900@gmail.com"}
[2025-11-09T23:24:38.741Z] [INFO   ] 2025-11-09T23:24:38.741Z [DEBUG] üîç [GMAIL SIGNATURES] Getting access token for user: a3e3a51a-175c-4b59-ad03-227ba12a18b0
[2025-11-09T23:24:38.839Z] [INFO   ] 2025-11-09T23:24:38.839Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Access token retrieved successfully
[2025-11-09T23:24:38.840Z] [INFO   ] 2025-11-09T23:24:38.840Z [DEBUG] üîç [GMAIL SIGNATURES] Deleting signature for email: stoddard.nathaniel900@gmail.com
[2025-11-09T23:24:39.270Z] [INFO   ] 2025-11-09T23:24:39.270Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Signature deleted successfully
[2025-11-09T23:24:39.361Z] [INFO   ] 2025-11-09T23:24:39.361Z [DEBUG] üîç [GMAIL SIGNATURES] API endpoint called
[2025-11-09T23:24:39.361Z] [INFO   ] 2025-11-09T23:24:39.361Z [DEBUG] üîç [GMAIL SIGNATURES] Request params: {"requestedUserId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-09T23:24:39.454Z] [INFO   ] 2025-11-09T23:24:39.453Z [DEBUG] üîç [GMAIL SIGNATURES] Getting access token for user: a3e3a51a-175c-4b59-ad03-227ba12a18b0
[2025-11-09T23:24:39.544Z] [INFO   ] 2025-11-09T23:24:39.544Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Access token retrieved successfully
[2025-11-09T23:24:39.544Z] [INFO   ] 2025-11-09T23:24:39.544Z [DEBUG] üîç [GMAIL SIGNATURES] Fetching Gmail sendAs settings...
[2025-11-09T23:24:39.731Z] [INFO   ] 2025-11-09T23:24:39.731Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] SendAs API response received: {
  "sendAs": [
    {
      "sendAsEmail": "stoddard.nathaniel900@gmail.com",
      "displayName": "",
      "replyToAddress": "",
      "signature": "",
      "isPrimary": true,
      "isDefault": true
    }
  ]
}
[2025-11-09T23:24:39.732Z] [INFO   ] 2025-11-09T23:24:39.732Z [DEBUG] üîç [GMAIL SIGNATURES] Found 1 sendAs settings
[2025-11-09T23:24:39.732Z] [INFO   ] 2025-11-09T23:24:39.732Z [DEBUG] üîç [GMAIL SIGNATURES] Processing sendAs 0: {"sendAsEmail":"stoddard.nathaniel900@gmail.com","displayName":"","hasSignature":false,"signaturePreview":"","isDefault":true}
[2025-11-09T23:24:39.732Z] [INFO   ] 2025-11-09T23:24:39.732Z [DEBUG] ‚ö†Ô∏è [GMAIL SIGNATURES] No signature set for: stoddard.nathaniel900@gmail.com
[2025-11-09T23:24:39.732Z] [INFO   ] 2025-11-09T23:24:39.732Z [DEBUG] ‚úÖ [GMAIL SIGNATURES] Returning 1 signature(s): [{"id":"gmail-signature-0","name":"stoddard.nathaniel900@gmail.com","hasSignature":false}]
[2025-11-09T23:24:56.714Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 4.5s (5296 modules)
[2025-11-09T23:25:01.201Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 682ms (1130 modules)
[2025-11-09T23:25:01.603Z] [INFO   ] 2025-11-09T23:25:01.603Z [DEBUG] üíß [AUTH] Rehydrating auth state from storage {"hasState":true,"hasUser":false,"initialized":false,"timestamp":"2025-11-09T23:25:01.603Z"}
[2025-11-09T23:25:01.620Z] [INFO   ] 2025-11-09T23:25:01.620Z [DEBUG] üíß [AUTH] State hydrated and reset {"hasUser":false,"initialized":false,"timestamp":"2025-11-09T23:25:01.620Z"}
[2025-11-09T23:25:01.620Z] [INFO   ] 2025-11-09T23:25:01.620Z [DEBUG] ‚è≠Ô∏è [AUTH] Skipping initialization {"hasState":true,"alreadyInitialized":false,"isClient":false,"timestamp":"2025-11-09T23:25:01.620Z"}
[2025-11-09T23:25:02.759Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations in 471ms (4168 modules)
[2025-11-09T23:25:05.251Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled (4181 modules)
[2025-11-09T23:25:05.472Z] [INFO   ] 2025-11-09T23:25:05.472Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-09T23:25:05.472Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-09T23:25:05.685Z] [INFO   ] 2025-11-09T23:25:05.685Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-09T23:25:05.685Z] [INFO   ] 2025-11-09T23:25:05.685Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-09T23:25:05.823Z] [INFO   ] 2025-11-09T23:25:05.823Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":10,"permissionsCount":9,"integrationsError":null,"permissionsError":null}
[2025-11-09T23:25:05.824Z] [INFO   ] 2025-11-09T23:25:05.824Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"aed260e3-7d87-4ea0-ba04-1ab6c35bbda5","provider":"discord","permission":"admin"}
[2025-11-09T23:25:05.824Z] [INFO   ] 2025-11-09T23:25:05.824Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"f7f6cf20-d078-40ef-a73c-bc7afd16ec14","provider":"hubspot","permission":"admin"}
[2025-11-09T23:25:05.824Z] [INFO   ] 2025-11-09T23:25:05.824Z [DEBUG] üìã [API /api/integrations] Using implicit permission {"integrationId":"7015bddc-01e2-46ad-89bb-fd2385c7dbfc","provider":"gumroad","permission":"admin","reason":"connected_by"}
[2025-11-09T23:25:05.824Z] [INFO   ] 2025-11-09T23:25:05.824Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"cdcb4dfa-0de9-4b0c-b493-28dc16aa47cf","provider":"github","permission":"admin"}
[2025-11-09T23:25:05.824Z] [INFO   ] 2025-11-09T23:25:05.824Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"1cf3129a-cbcb-4df8-b59b-876edd75d137","provider":"google-analytics","permission":"admin"}
[2025-11-09T23:25:05.825Z] [INFO   ] 2025-11-09T23:25:05.824Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"fa4bc43d-e909-4b30-83ab-901e5d284a72","provider":"google-docs","permission":"admin"}
[2025-11-09T23:25:05.825Z] [INFO   ] 2025-11-09T23:25:05.825Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"f240f5c0-cb91-462a-bab9-51dcbb116331","provider":"gmail","permission":"admin"}
[2025-11-09T23:25:05.825Z] [INFO   ] 2025-11-09T23:25:05.825Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"61424f3b-166f-4d60-bf1c-b63cb9155549","provider":"google-drive","permission":"admin"}
[2025-11-09T23:25:05.825Z] [INFO   ] 2025-11-09T23:25:05.825Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"72c8e3d3-ae7f-464a-b167-ad1e4b7bcc20","provider":"google-calendar","permission":"admin"}
[2025-11-09T23:25:05.825Z] [INFO   ] 2025-11-09T23:25:05.825Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"8640a243-994f-47b4-b456-26844f408359","provider":"google-sheets","permission":"admin"}
[2025-11-09T23:25:05.825Z] [INFO   ] 2025-11-09T23:25:05.825Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":10,"workspaceType":"personal"}
[2025-11-09T23:25:14.954Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 585ms (1130 modules)
[2025-11-09T23:25:17.424Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /_not-found ...
[2025-11-09T23:25:47.710Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/google-drive/data in 32.7s (6341 modules)
[2025-11-09T23:25:50.957Z] [INFO   ] 2025-11-09T23:25:50.956Z [DEBUG] [Google Drive API] POST request received: {"integrationId":"61424f3b-166f-4d60-bf1c-b63cb9155549","dataType":"search-preview","hasOptions":true,"optionsKeys":["searchConfig"]}
[2025-11-09T23:25:51.520Z] [INFO   ] 2025-11-09T23:25:51.520Z [DEBUG] üíß [AUTH] Rehydrating auth state from storage {"hasState":true,"hasUser":false,"initialized":false,"timestamp":"2025-11-09T23:25:51.520Z"}
[2025-11-09T23:25:51.532Z] [INFO   ] 2025-11-09T23:25:51.532Z [DEBUG] üíß [AUTH] State hydrated and reset {"hasUser":false,"initialized":false,"timestamp":"2025-11-09T23:25:51.532Z"}
[2025-11-09T23:25:51.532Z] [INFO   ] 2025-11-09T23:25:51.532Z [DEBUG] ‚è≠Ô∏è [AUTH] Skipping initialization {"hasState":true,"alreadyInitialized":false,"isClient":false,"timestamp":"2025-11-09T23:25:51.532Z"}
[2025-11-09T23:25:52.416Z] [INFO   ] 2025-11-09T23:25:52.416Z [DEBUG] [Google Drive API] Search preview found 2 files
[2025-11-09T23:25:57.560Z] [ERROR  ]  [31m[1m‚®Ø[22m[39m ENOENT: no such file or directory, open '/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/.next/server/app/icon.png/route.js'
Error: ENOENT: no such file or directory, open '/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/.next/server/app/icon.png/route.js'
    at Object.readFileSync (node:fs:443:20)
    at defaultLoadImpl (node:internal/modules/cjs/loader:1117:17)
    at loadSource (node:internal/modules/cjs/loader:1750:20)
    at Object..js (node:internal/modules/cjs/loader:1882:44)
    at Module.load (node:internal/modules/cjs/loader:1458:32)
    at Function._load (node:internal/modules/cjs/loader:1275:12)
    at TracingChannel.traceSync (node:diagnostics_channel:322:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:234:24)
    at Module.<anonymous> (node:internal/modules/cjs/loader:1480:12)
    at mod.require (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/require-hook.js:68:28)
    at require (node:internal/modules/helpers:135:16)
    at requirePage (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/require.js:99:80)
    at loadComponentsImpl (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/load-components.js:132:57)
    at async DevServer.findPageComponentsImpl (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/next-server.js:899:36)
    at async DevServer.findPageComponents (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/dev/next-dev-server.js:705:16)
    at async DevServer.renderPageComponent (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/base-server.js:1460:24)
    at async DevServer.renderToResponseImpl (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/base-server.js:1514:32)
    at async DevServer.pipeImpl (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/base-server.js:1025:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/next-server.js:393:17)
    at async DevServer.handleRequestImpl (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/base-server.js:916:17)
    at async /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/dev/next-dev-server.js:399:20
    at async Span.traceAsyncFn (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/trace/trace.js:157:20)
    at async DevServer.handleRequest (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/dev/next-dev-server.js:395:24)
    at async invokeRender (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/lib/router-server.js:240:21)
    at async handleRequest (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/lib/router-server.js:437:24)
    at async requestHandlerImpl (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/lib/router-server.js:485:13)
    at async Server.requestListener (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/lib/start-server.js:226:13)
[2025-11-09T23:25:58.091Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /_error ...
