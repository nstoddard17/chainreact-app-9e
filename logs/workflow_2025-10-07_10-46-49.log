=== Log Session Started: 2025-10-07T15:46:49.987Z ===
Node Version: v23.7.0
Platform: darwin
Working Directory: /Users/nathanielstoddard/chainreact-app/chainreact-app-9e
================================================================================

[2025-10-07T15:46:49.988Z] [INFO   ] File logging initialized
[2025-10-07T15:46:49.988Z] [INFO   ] Log file: /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-10-07_10-46-49.log
[2025-10-07T15:46:49.988Z] [INFO   ] 📁 File logging enabled
[2025-10-07T15:46:49.988Z] [INFO   ] 📝 Logs will be written to: /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-10-07_10-46-49.log
[2025-10-07T15:46:49.988Z] [INFO   ] 💡 To view logs in real-time: tail -f /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-10-07_10-46-49.log
[2025-10-07T15:46:49.988Z] [INFO   ] 💡 To view all logs: cat /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-10-07_10-46-49.log
[2025-10-07T15:46:49.988Z] [INFO   ] 💡 To share logs: Copy the file at /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-10-07_10-46-49.log
[2025-10-07T15:46:49.988Z] [INFO   ] --------------------------------------------------------------------------------
[2025-10-07T15:46:49.988Z] [INFO   ] 📁 File logging system initialized
[2025-10-07T15:46:49.995Z] [INFO   ]  [32m[1m✓[22m[39m Ready in 3s
[2025-10-07T15:46:51.002Z] [INFO   ] 🤖 Discord bot configured, initializing gateway connection in background...
[2025-10-07T15:46:52.676Z] [INFO   ] Initializing Discord Gateway connection (singleton)...
[2025-10-07T15:46:52.677Z] [INFO   ] 🔑 Using Discord bot token: MTM3ODU5NT...ElFqA
[2025-10-07T15:46:53.363Z] [INFO   ]  [37m[1m○[22m[39m Compiling /middleware ...
[2025-10-07T15:46:53.373Z] [INFO   ] Discord Gateway initialization complete
[2025-10-07T15:46:53.375Z] [INFO   ] ✅ Discord bot gateway connection initialized
[2025-10-07T15:46:53.496Z] [INFO   ]  [32m[1m✓[22m[39m Compiled /middleware in 722ms (231 modules)
[2025-10-07T15:46:53.599Z] [INFO   ] Discord Gateway WebSocket connection established
[2025-10-07T15:46:53.600Z] [INFO   ] 🔑 Sending identify with intents: {
  "GUILDS": true,
  "GUILD_MEMBERS": true,
  "GUILD_INVITES": true,
  "GUILD_MESSAGES": true,
  "MESSAGE_CONTENT": true,
  "intentsValue": 33347
}
[2025-10-07T15:46:53.891Z] [INFO   ] [Middleware] Username check: {
  path: '/workflows/builder',
  userId: 'a3e3a51a-175c-4b59-ad03-227ba12a18b0',
  provider: 'email',
  role: 'admin',
  username: 'nstoddard17',
  hasUsername: true,
  isBetaTester: false,
  isNewBetaUser: false,
  accountAge: 11285326492,
  profileError: undefined
}
[2025-10-07T15:46:53.932Z] [INFO   ] 🎉 Discord bot ready! {
  "sessionId": "8f195c800c0b1f2a7788623d6ead785e",
  "username": "ChainReact-Bot",
  "userId": "1378595955212812308",
  "guildCount": 2
}
[2025-10-07T15:46:53.932Z] [INFO   ] 📋 Initializing invite cache...
[2025-10-07T15:46:53.944Z] [INFO   ] 📡 Discord event received: GUILD_CREATE
[2025-10-07T15:46:54.042Z] [INFO   ] 📡 Discord event received: GUILD_CREATE
[2025-10-07T15:46:54.100Z] [INFO   ] ✅ Cached 4 invites for guild 1378950884045623406
[2025-10-07T15:46:54.413Z] [INFO   ]  [37m[1m○[22m[39m Compiling /workflows/builder ...
[2025-10-07T15:46:58.635Z] [INFO   ]  [32m[1m✓[22m[39m Compiled /workflows/builder in 4.7s (5582 modules)
[2025-10-07T15:46:59.360Z] [INFO   ]  [32m[1m✓[22m[39m Compiled in 710ms (1513 modules)
[2025-10-07T15:46:59.538Z] [INFO   ] [Username Check] {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0",
  "email": "stoddard.nathaniel900@gmail.com",
  "provider": "email",
  "username": "nstoddard17",
  "hasUsername": true,
  "isGoogleUser": false
}
[2025-10-07T15:47:00.241Z] [INFO   ]  [32m[1m✓[22m[39m Compiled /api/auth/profile in 322ms (5586 modules)
[2025-10-07T15:47:01.182Z] [INFO   ]  [32m[1m✓[22m[39m Compiled /api/presence/count in 478ms (5588 modules)
[2025-10-07T15:47:04.782Z] [INFO   ]  [32m[1m✓[22m[39m Compiled /api/integrations in 446ms (5590 modules)
[2025-10-07T15:47:04.854Z] [INFO   ] 📍 [API /api/integrations] GET request received {
  "timestamp": "2025-10-07T15:47:04.854Z",
  "headers": {
    "referer": "check-console"
  }
}
[2025-10-07T15:47:04.986Z] [INFO   ] ✅ [API /api/integrations] User authenticated {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0"
}
[2025-10-07T15:47:05.150Z] [INFO   ] 📊 [API /api/integrations] Query result {
  "count": 19,
  "error": null,
  "firstFew": [
    {
      "provider": "notion",
      "status": "connected"
    },
    {
      "provider": "microsoft-onenote",
      "status": "connected"
    }
  ]
}
[2025-10-07T16:06:36.077Z] [INFO   ]  [32m[1m✓[22m[39m Compiled in 504ms (1513 modules)
[2025-10-07T16:06:37.007Z] [INFO   ] [Middleware] Username check: {
  path: '/workflows/builder',
  userId: 'a3e3a51a-175c-4b59-ad03-227ba12a18b0',
  provider: 'email',
  role: 'admin',
  username: 'nstoddard17',
  hasUsername: true,
  isBetaTester: false,
  isNewBetaUser: false,
  accountAge: 11286509607,
  profileError: undefined
}
[2025-10-07T16:06:37.211Z] [INFO   ] [Username Check] {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0",
  "email": "stoddard.nathaniel900@gmail.com",
  "provider": "email",
  "username": "nstoddard17",
  "hasUsername": true,
  "isGoogleUser": false
}
[2025-10-07T16:06:37.319Z] [INFO   ] 📍 [API /api/integrations] GET request received {
  "timestamp": "2025-10-07T16:06:37.319Z",
  "headers": {
    "referer": "check-console"
  }
}
[2025-10-07T16:06:37.540Z] [INFO   ] ✅ [API /api/integrations] User authenticated {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0"
}
[2025-10-07T16:06:37.867Z] [INFO   ] 📊 [API /api/integrations] Query result {
  "count": 19,
  "error": null,
  "firstFew": [
    {
      "provider": "notion",
      "status": "connected"
    },
    {
      "provider": "google-sheets",
      "status": "connected"
    }
  ]
}
[2025-10-07T16:06:38.091Z] [INFO   ]  [37m[1m○[22m[39m Compiling /api/collaboration/join ...
[2025-10-07T16:06:38.199Z] [INFO   ]  [32m[1m✓[22m[39m Compiled /api/collaboration/join in 691ms (5588 modules)
[2025-10-07T16:06:42.889Z] [INFO   ]  [37m[1m○[22m[39m Compiling /api/webhooks/gmail ...
[2025-10-07T16:06:46.156Z] [INFO   ]  [32m[1m✓[22m[39m Compiled /api/webhooks/gmail in 3.8s (7614 modules)
[2025-10-07T16:06:48.552Z] [INFO   ] 🔔🔔🔔 GMAIL WEBHOOK ENDPOINT HIT! 🔔🔔🔔
[2025-10-07T16:06:48.552Z] [INFO   ] 📋 Request headers: {
  "accept": "application/json",
  "accept-encoding": "gzip, deflate, br",
  "content-length": "373",
  "content-type": "application/json",
  "from": "noreply@google.com",
  "host": "9b7007881520.ngrok-free.app",
  "user-agent": "APIs-Google; (+https://developers.google.com/webmasters/APIs-Google.html)",
  "x-forwarded-for": "142.250.32.41",
  "x-forwarded-host": "9b7007881520.ngrok-free.app",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "https"
}
[2025-10-07T16:06:48.552Z] [INFO   ] 📨 [bc5db5dd-5b59-4047-9102-2e1cd4c20c92] Gmail webhook request received at 2025-10-07T16:06:48.552Z
[2025-10-07T16:06:48.712Z] [INFO   ] 📝 [bc5db5dd-5b59-4047-9102-2e1cd4c20c92] Raw body received: {"deliveryAttempt":1,"message":{"data":"eyJlbWFpbEFkZHJlc3MiOiJzdG9kZGFyZC5uYXRoYW5pZWw5MDBAZ21haWwuY29tIiwiaGlzdG9yeUlkIjo2Nzc3NTYwfQ==","messageId":"16437935139689073","message_id":"16437935139689073","publishTime":"2025-10-07T16:06:41.581Z","publish_time":"2025-10-07T16:06:41.581Z"},"subscription":"projects/chainreact-462214/subscriptions/gmail-webhook-subscription"}

[2025-10-07T16:06:48.712Z] [INFO   ] 📦 [bc5db5dd-5b59-4047-9102-2e1cd4c20c92] Parsed body structure: {
  "hasMessage": true,
  "hasMessageData": true,
  "messageKeys": [
    "data",
    "messageId",
    "message_id",
    "publishTime",
    "publish_time"
  ],
  "subscription": "projects/chainreact-462214/subscriptions/gmail-webhook-subscription"
}
[2025-10-07T16:06:48.712Z] [INFO   ] [bc5db5dd-5b59-4047-9102-2e1cd4c20c92] Received Pub/Sub message from Gmail
[2025-10-07T16:06:48.712Z] [INFO   ] 🔓 [bc5db5dd-5b59-4047-9102-2e1cd4c20c92] Decoded Pub/Sub data: {"emailAddress":"stoddard.nathaniel900@gmail.com","historyId":6777560}
[2025-10-07T16:06:48.712Z] [INFO   ] [bc5db5dd-5b59-4047-9102-2e1cd4c20c92] 📧 Gmail notification received: {
  "emailAddress": "stoddard.nathaniel900@gmail.com",
  "historyId": 6777560,
  "messageId": "16437935139689073",
  "publishTime": "2025-10-07T16:06:41.581Z"
}
[2025-10-07T16:06:48.712Z] [INFO   ] [bc5db5dd-5b59-4047-9102-2e1cd4c20c92] 🔍 Processing Gmail webhook for email from: stoddard.nathaniel900@gmail.com
[2025-10-07T16:06:48.777Z] [INFO   ] [Middleware] Username check: {
  path: '/workflows/builder',
  userId: 'a3e3a51a-175c-4b59-ad03-227ba12a18b0',
  provider: 'email',
  role: 'admin',
  username: 'nstoddard17',
  hasUsername: true,
  isBetaTester: false,
  isNewBetaUser: false,
  accountAge: 11286521377,
  profileError: undefined
}
[2025-10-07T16:06:48.805Z] [INFO   ] 🔍 [Gmail Processor] Processing Gmail event: {
  "eventType": "gmail_new_email",
  "emailAddress": "stoddard.nathaniel900@gmail.com",
  "historyId": 6777560,
  "requestId": "bc5db5dd-5b59-4047-9102-2e1cd4c20c92"
}
[2025-10-07T16:06:48.805Z] [INFO   ] [Backend INFO] Gmail webhook event received {
  "eventType": "gmail_new_email",
  "emailAddress": "stoddard.nathaniel900@gmail.com",
  "historyId": 6777560,
  "requestId": "bc5db5dd-5b59-4047-9102-2e1cd4c20c92"
}
[2025-10-07T16:06:48.949Z] [INFO   ] [Username Check] {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0",
  "email": "stoddard.nathaniel900@gmail.com",
  "provider": "email",
  "username": "nstoddard17",
  "hasUsername": true,
  "isGoogleUser": false
}
[2025-10-07T16:06:48.951Z] [INFO   ] 🚀 [Gmail Processor] Starting to find matching workflows for Gmail event
[2025-10-07T16:06:49.139Z] [INFO   ] Processing Gmail new message event
[2025-10-07T16:06:49.251Z] [INFO   ] [Task Queue] Queued gmail webhook task: undefined
[2025-10-07T16:06:49.251Z] [INFO   ] [Backend SUCCESS] Gmail webhook event processed successfully {
  "processed": true,
  "type": "gmail_new_message"
}
[2025-10-07T16:06:49.578Z] [INFO   ]  [37m[1m○[22m[39m Compiling /api/collaboration/leave ...
[2025-10-07T16:06:50.111Z] [INFO   ]  [32m[1m✓[22m[39m Compiled /api/collaboration/leave in 1059ms (7602 modules)
[2025-10-07T16:06:50.205Z] [INFO   ] 📍 [API /api/integrations] GET request received {
  "timestamp": "2025-10-07T16:06:50.205Z",
  "headers": {
    "referer": "check-console"
  }
}
[2025-10-07T16:06:50.351Z] [INFO   ] ✅ [API /api/integrations] User authenticated {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0"
}
[2025-10-07T16:06:50.493Z] [INFO   ] 📊 [API /api/integrations] Query result {
  "count": 19,
  "error": null,
  "firstFew": [
    {
      "provider": "notion",
      "status": "connected"
    },
    {
      "provider": "google-sheets",
      "status": "connected"
    }
  ]
}
[2025-10-07T16:07:01.806Z] [INFO   ]  [37m[1m○[22m[39m Compiling /api/presence/count ...
[2025-10-07T16:07:02.026Z] [INFO   ]  [32m[1m✓[22m[39m Compiled /api/presence/count in 721ms (6105 modules)
[2025-10-07T16:14:43.224Z] [INFO   ]  [32m[1m✓[22m[39m Compiled in 783ms (1513 modules)
[2025-10-07T16:14:43.789Z] [INFO   ] [Middleware] Username check: {
  path: '/workflows/builder',
  userId: 'a3e3a51a-175c-4b59-ad03-227ba12a18b0',
  provider: 'email',
  role: 'admin',
  username: 'nstoddard17',
  hasUsername: true,
  isBetaTester: false,
  isNewBetaUser: false,
  accountAge: 11286996389,
  profileError: undefined
}
[2025-10-07T16:14:44.004Z] [INFO   ] [Username Check] {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0",
  "email": "stoddard.nathaniel900@gmail.com",
  "provider": "email",
  "username": "nstoddard17",
  "hasUsername": true,
  "isGoogleUser": false
}
[2025-10-07T16:14:44.201Z] [INFO   ] 📍 [API /api/integrations] GET request received {
  "timestamp": "2025-10-07T16:14:44.201Z",
  "headers": {
    "referer": "check-console"
  }
}
[2025-10-07T16:14:44.357Z] [INFO   ] ✅ [API /api/integrations] User authenticated {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0"
}
[2025-10-07T16:14:44.558Z] [INFO   ] 📊 [API /api/integrations] Query result {
  "count": 19,
  "error": null,
  "firstFew": [
    {
      "provider": "notion",
      "status": "connected"
    },
    {
      "provider": "google-sheets",
      "status": "connected"
    }
  ]
}
[2025-10-07T16:15:02.603Z] [INFO   ]  [32m[1m✓[22m[39m Compiled in 407ms (1513 modules)
[2025-10-07T16:15:02.834Z] [INFO   ] [Middleware] Username check: {
  path: '/workflows/builder',
  userId: 'a3e3a51a-175c-4b59-ad03-227ba12a18b0',
  provider: 'email',
  role: 'admin',
  username: 'nstoddard17',
  hasUsername: true,
  isBetaTester: false,
  isNewBetaUser: false,
  accountAge: 11287015435,
  profileError: undefined
}
[2025-10-07T16:15:02.902Z] [INFO   ] [Username Check] {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0",
  "email": "stoddard.nathaniel900@gmail.com",
  "provider": "email",
  "username": "nstoddard17",
  "hasUsername": true,
  "isGoogleUser": false
}
[2025-10-07T16:15:03.102Z] [INFO   ] 📍 [API /api/integrations] GET request received {
  "timestamp": "2025-10-07T16:15:03.102Z",
  "headers": {
    "referer": "check-console"
  }
}
[2025-10-07T16:15:03.239Z] [INFO   ] ✅ [API /api/integrations] User authenticated {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0"
}
[2025-10-07T16:15:03.372Z] [INFO   ] 📊 [API /api/integrations] Query result {
  "count": 19,
  "error": null,
  "firstFew": [
    {
      "provider": "notion",
      "status": "connected"
    },
    {
      "provider": "google-sheets",
      "status": "connected"
    }
  ]
}
[2025-10-07T16:15:15.869Z] [INFO   ]  [32m[1m✓[22m[39m Compiled in 297ms (1513 modules)
[2025-10-07T16:15:16.128Z] [INFO   ] [Middleware] Username check: {
  path: '/workflows/builder',
  userId: 'a3e3a51a-175c-4b59-ad03-227ba12a18b0',
  provider: 'email',
  role: 'admin',
  username: 'nstoddard17',
  hasUsername: true,
  isBetaTester: false,
  isNewBetaUser: false,
  accountAge: 11287028729,
  profileError: undefined
}
[2025-10-07T16:15:16.194Z] [INFO   ] [Username Check] {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0",
  "email": "stoddard.nathaniel900@gmail.com",
  "provider": "email",
  "username": "nstoddard17",
  "hasUsername": true,
  "isGoogleUser": false
}
[2025-10-07T16:15:16.352Z] [INFO   ] 📍 [API /api/integrations] GET request received {
  "timestamp": "2025-10-07T16:15:16.352Z",
  "headers": {
    "referer": "check-console"
  }
}
[2025-10-07T16:15:16.459Z] [INFO   ] ✅ [API /api/integrations] User authenticated {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0"
}
[2025-10-07T16:15:16.605Z] [INFO   ] 📊 [API /api/integrations] Query result {
  "count": 19,
  "error": null,
  "firstFew": [
    {
      "provider": "notion",
      "status": "connected"
    },
    {
      "provider": "google-sheets",
      "status": "connected"
    }
  ]
}
[2025-10-07T16:15:47.797Z] [INFO   ]  [37m[1m○[22m[39m Compiling /api/collaboration/collaborators ...
[2025-10-07T16:15:48.353Z] [INFO   ]  [32m[1m✓[22m[39m Compiled /api/collaboration/collaborators in 1056ms (5593 modules)
[2025-10-07T16:17:01.802Z] [INFO   ]  [32m[1m✓[22m[39m Compiled /api/presence/count in 461ms (4089 modules)
[2025-10-07T17:17:58.694Z] [INFO   ]  [37m[1m○[22m[39m Compiling /api/webhooks/gmail ...
[2025-10-07T17:17:58.885Z] [INFO   ]  [32m[1m✓[22m[39m Compiled /api/webhooks/gmail in 749ms (6100 modules)
[2025-10-07T17:18:01.056Z] [INFO   ] 🔔🔔🔔 GMAIL WEBHOOK ENDPOINT HIT! 🔔🔔🔔
[2025-10-07T17:18:01.056Z] [INFO   ] 📋 Request headers: {
  "accept": "application/json",
  "accept-encoding": "gzip, deflate, br",
  "content-length": "373",
  "content-type": "application/json",
  "from": "noreply@google.com",
  "host": "9b7007881520.ngrok-free.app",
  "user-agent": "APIs-Google; (+https://developers.google.com/webmasters/APIs-Google.html)",
  "x-forwarded-for": "142.250.32.35",
  "x-forwarded-host": "9b7007881520.ngrok-free.app",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "https"
}
[2025-10-07T17:18:01.056Z] [INFO   ] 📨 [d7e9f2cd-2da5-4c7f-a703-ec513fcf0427] Gmail webhook request received at 2025-10-07T17:18:01.056Z
[2025-10-07T17:18:01.230Z] [INFO   ] 📝 [d7e9f2cd-2da5-4c7f-a703-ec513fcf0427] Raw body received: {"deliveryAttempt":1,"message":{"data":"eyJlbWFpbEFkZHJlc3MiOiJzdG9kZGFyZC5uYXRoYW5pZWw5MDBAZ21haWwuY29tIiwiaGlzdG9yeUlkIjo2Nzc3NjM0fQ==","messageId":"16440229942113721","message_id":"16440229942113721","publishTime":"2025-10-07T17:17:57.366Z","publish_time":"2025-10-07T17:17:57.366Z"},"subscription":"projects/chainreact-462214/subscriptions/gmail-webhook-subscription"}

[2025-10-07T17:18:01.232Z] [INFO   ] 📦 [d7e9f2cd-2da5-4c7f-a703-ec513fcf0427] Parsed body structure: {
  "hasMessage": true,
  "hasMessageData": true,
  "messageKeys": [
    "data",
    "messageId",
    "message_id",
    "publishTime",
    "publish_time"
  ],
  "subscription": "projects/chainreact-462214/subscriptions/gmail-webhook-subscription"
}
[2025-10-07T17:18:01.232Z] [INFO   ] [d7e9f2cd-2da5-4c7f-a703-ec513fcf0427] Received Pub/Sub message from Gmail
[2025-10-07T17:18:01.232Z] [INFO   ] 🔓 [d7e9f2cd-2da5-4c7f-a703-ec513fcf0427] Decoded Pub/Sub data: {"emailAddress":"stoddard.nathaniel900@gmail.com","historyId":6777634}
[2025-10-07T17:18:01.232Z] [INFO   ] [d7e9f2cd-2da5-4c7f-a703-ec513fcf0427] 📧 Gmail notification received: {
  "emailAddress": "stoddard.nathaniel900@gmail.com",
  "historyId": 6777634,
  "messageId": "16440229942113721",
  "publishTime": "2025-10-07T17:17:57.366Z"
}
[2025-10-07T17:18:01.232Z] [INFO   ] [d7e9f2cd-2da5-4c7f-a703-ec513fcf0427] 🔍 Processing Gmail webhook for email from: stoddard.nathaniel900@gmail.com
[2025-10-07T17:18:01.330Z] [INFO   ] 🔍 [Gmail Processor] Processing Gmail event: {
  "eventType": "gmail_new_email",
  "emailAddress": "stoddard.nathaniel900@gmail.com",
  "historyId": 6777634,
  "requestId": "d7e9f2cd-2da5-4c7f-a703-ec513fcf0427"
}
[2025-10-07T17:18:01.332Z] [INFO   ] [Backend INFO] Gmail webhook event received {
  "eventType": "gmail_new_email",
  "emailAddress": "stoddard.nathaniel900@gmail.com",
  "historyId": 6777634,
  "requestId": "d7e9f2cd-2da5-4c7f-a703-ec513fcf0427"
}
[2025-10-07T17:18:01.443Z] [INFO   ] 🚀 [Gmail Processor] Starting to find matching workflows for Gmail event
[2025-10-07T17:18:01.717Z] [INFO   ] Processing Gmail new message event
[2025-10-07T17:18:01.827Z] [INFO   ] [Task Queue] Queued gmail webhook task: undefined
[2025-10-07T17:18:01.829Z] [INFO   ] [Backend SUCCESS] Gmail webhook event processed successfully {
  "processed": true,
  "type": "gmail_new_message"
}
[2025-10-07T17:36:45.377Z] [INFO   ] 🔔🔔🔔 GMAIL WEBHOOK ENDPOINT HIT! 🔔🔔🔔
[2025-10-07T17:36:45.378Z] [INFO   ] 📋 Request headers: {
  "accept": "application/json",
  "accept-encoding": "gzip, deflate, br",
  "content-length": "373",
  "content-type": "application/json",
  "from": "noreply@google.com",
  "host": "9b7007881520.ngrok-free.app",
  "user-agent": "APIs-Google; (+https://developers.google.com/webmasters/APIs-Google.html)",
  "x-forwarded-for": "142.250.32.38",
  "x-forwarded-host": "9b7007881520.ngrok-free.app",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "https"
}
[2025-10-07T17:36:45.378Z] [INFO   ] 📨 [d9daec44-c0ec-44f6-bae1-395fae9d3632] Gmail webhook request received at 2025-10-07T17:36:45.378Z
[2025-10-07T17:36:45.532Z] [INFO   ] 📝 [d9daec44-c0ec-44f6-bae1-395fae9d3632] Raw body received: {"deliveryAttempt":1,"message":{"data":"eyJlbWFpbEFkZHJlc3MiOiJzdG9kZGFyZC5uYXRoYW5pZWw5MDBAZ21haWwuY29tIiwiaGlzdG9yeUlkIjo2Nzc3NzI5fQ==","messageId":"16439367975952993","message_id":"16439367975952993","publishTime":"2025-10-07T17:36:44.569Z","publish_time":"2025-10-07T17:36:44.569Z"},"subscription":"projects/chainreact-462214/subscriptions/gmail-webhook-subscription"}

[2025-10-07T17:36:45.535Z] [INFO   ] 📦 [d9daec44-c0ec-44f6-bae1-395fae9d3632] Parsed body structure: {
  "hasMessage": true,
  "hasMessageData": true,
  "messageKeys": [
    "data",
    "messageId",
    "message_id",
    "publishTime",
    "publish_time"
  ],
  "subscription": "projects/chainreact-462214/subscriptions/gmail-webhook-subscription"
}
[2025-10-07T17:36:45.535Z] [INFO   ] [d9daec44-c0ec-44f6-bae1-395fae9d3632] Received Pub/Sub message from Gmail
[2025-10-07T17:36:45.536Z] [INFO   ] 🔓 [d9daec44-c0ec-44f6-bae1-395fae9d3632] Decoded Pub/Sub data: {"emailAddress":"stoddard.nathaniel900@gmail.com","historyId":6777729}
[2025-10-07T17:36:45.536Z] [INFO   ] [d9daec44-c0ec-44f6-bae1-395fae9d3632] 📧 Gmail notification received: {
  "emailAddress": "stoddard.nathaniel900@gmail.com",
  "historyId": 6777729,
  "messageId": "16439367975952993",
  "publishTime": "2025-10-07T17:36:44.569Z"
}
[2025-10-07T17:36:45.536Z] [INFO   ] [d9daec44-c0ec-44f6-bae1-395fae9d3632] 🔍 Processing Gmail webhook for email from: stoddard.nathaniel900@gmail.com
[2025-10-07T17:36:45.623Z] [INFO   ] 🔍 [Gmail Processor] Processing Gmail event: {
  "eventType": "gmail_new_email",
  "emailAddress": "stoddard.nathaniel900@gmail.com",
  "historyId": 6777729,
  "requestId": "d9daec44-c0ec-44f6-bae1-395fae9d3632"
}
[2025-10-07T17:36:45.624Z] [INFO   ] [Backend INFO] Gmail webhook event received {
  "eventType": "gmail_new_email",
  "emailAddress": "stoddard.nathaniel900@gmail.com",
  "historyId": 6777729,
  "requestId": "d9daec44-c0ec-44f6-bae1-395fae9d3632"
}
[2025-10-07T17:36:45.731Z] [INFO   ] 🚀 [Gmail Processor] Starting to find matching workflows for Gmail event
[2025-10-07T17:36:45.983Z] [INFO   ] Processing Gmail new message event
[2025-10-07T17:36:46.078Z] [INFO   ] [Task Queue] Queued gmail webhook task: undefined
[2025-10-07T17:36:46.079Z] [INFO   ] [Backend SUCCESS] Gmail webhook event processed successfully {
  "processed": true,
  "type": "gmail_new_message"
}
[2025-10-07T18:00:37.690Z] [INFO   ]  [32m[1m✓[22m[39m Compiled in 572ms (1513 modules)
[2025-10-07T18:00:38.077Z] [INFO   ] [Middleware] Username check: {
  path: '/workflows/builder',
  userId: 'a3e3a51a-175c-4b59-ad03-227ba12a18b0',
  provider: 'email',
  role: 'admin',
  username: 'nstoddard17',
  hasUsername: true,
  isBetaTester: false,
  isNewBetaUser: false,
  accountAge: 11293350677,
  profileError: undefined
}
[2025-10-07T18:00:38.456Z] [INFO   ] [Username Check] {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0",
  "email": "stoddard.nathaniel900@gmail.com",
  "provider": "email",
  "username": "nstoddard17",
  "hasUsername": true,
  "isGoogleUser": false
}
[2025-10-07T18:00:39.123Z] [INFO   ]  [37m[1m○[22m[39m Compiling /api/integrations ...
[2025-10-07T18:00:39.315Z] [INFO   ]  [32m[1m✓[22m[39m Compiled /api/integrations in 750ms (4089 modules)
[2025-10-07T18:00:39.575Z] [INFO   ]  [32m[1m✓[22m[39m Compiled (4091 modules)
[2025-10-07T18:00:39.686Z] [INFO   ] 📍 [API /api/integrations] GET request received {
  "timestamp": "2025-10-07T18:00:39.685Z",
  "headers": {
    "referer": "check-console"
  }
}
[2025-10-07T18:00:39.875Z] [INFO   ] ✅ [API /api/integrations] User authenticated {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0"
}
[2025-10-07T18:00:39.993Z] [INFO   ] 📊 [API /api/integrations] Query result {
  "count": 19,
  "error": null,
  "firstFew": [
    {
      "provider": "notion",
      "status": "connected"
    },
    {
      "provider": "facebook",
      "status": "connected"
    }
  ]
}
[2025-10-07T18:02:32.290Z] [INFO   ]  [37m[1m○[22m[39m Compiling /api/presence/count ...
[2025-10-07T18:02:32.311Z] [INFO   ]  [32m[1m✓[22m[39m Compiled /api/presence/count in 807ms (4085 modules)
[2025-10-07T18:04:04.511Z] [INFO   ]  [32m[1m✓[22m[39m Compiled in 388ms (1513 modules)
[2025-10-07T18:04:04.973Z] [INFO   ] [Middleware] Username check: {
  path: '/workflows/builder',
  userId: 'a3e3a51a-175c-4b59-ad03-227ba12a18b0',
  provider: 'email',
  role: 'admin',
  username: 'nstoddard17',
  hasUsername: true,
  isBetaTester: false,
  isNewBetaUser: false,
  accountAge: 11293557573,
  profileError: undefined
}
[2025-10-07T18:04:05.176Z] [INFO   ] [Username Check] {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0",
  "email": "stoddard.nathaniel900@gmail.com",
  "provider": "email",
  "username": "nstoddard17",
  "hasUsername": true,
  "isGoogleUser": false
}
[2025-10-07T18:04:05.778Z] [INFO   ]  [37m[1m○[22m[39m Compiling /api/integrations ...
[2025-10-07T18:04:05.956Z] [INFO   ]  [32m[1m✓[22m[39m Compiled /api/integrations in 678ms (4087 modules)
[2025-10-07T18:04:06.149Z] [INFO   ]  [32m[1m✓[22m[39m Compiled (4089 modules)
[2025-10-07T18:04:06.193Z] [INFO   ] 📍 [API /api/integrations] GET request received {
  "timestamp": "2025-10-07T18:04:06.193Z",
  "headers": {
    "referer": "check-console"
  }
}
[2025-10-07T18:04:06.398Z] [INFO   ] ✅ [API /api/integrations] User authenticated {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0"
}
[2025-10-07T18:04:06.584Z] [INFO   ] 📊 [API /api/integrations] Query result {
  "count": 19,
  "error": null,
  "firstFew": [
    {
      "provider": "notion",
      "status": "connected"
    },
    {
      "provider": "facebook",
      "status": "connected"
    }
  ]
}
[2025-10-07T18:04:37.539Z] [INFO   ]  [32m[1m✓[22m[39m Compiled /api/collaboration/collaborators in 199ms (4092 modules)
[2025-10-07T18:04:53.562Z] [INFO   ]  [32m[1m✓[22m[39m Compiled in 256ms (1513 modules)
[2025-10-07T18:04:53.883Z] [INFO   ] [Middleware] Username check: {
  path: '/workflows/builder',
  userId: 'a3e3a51a-175c-4b59-ad03-227ba12a18b0',
  provider: 'email',
  role: 'admin',
  username: 'nstoddard17',
  hasUsername: true,
  isBetaTester: false,
  isNewBetaUser: false,
  accountAge: 11293606484,
  profileError: undefined
}
[2025-10-07T18:04:54.018Z] [INFO   ] [Username Check] {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0",
  "email": "stoddard.nathaniel900@gmail.com",
  "provider": "email",
  "username": "nstoddard17",
  "hasUsername": true,
  "isGoogleUser": false
}
[2025-10-07T18:04:54.387Z] [INFO   ]  [32m[1m✓[22m[39m Compiled /api/collaboration/leave in 289ms (4094 modules)
[2025-10-07T18:04:54.764Z] [INFO   ] 📍 [API /api/integrations] GET request received {
  "timestamp": "2025-10-07T18:04:54.763Z",
  "headers": {
    "referer": "check-console"
  }
}
[2025-10-07T18:04:54.906Z] [INFO   ] ✅ [API /api/integrations] User authenticated {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0"
}
[2025-10-07T18:04:55.054Z] [INFO   ] 📊 [API /api/integrations] Query result {
  "count": 19,
  "error": null,
  "firstFew": [
    {
      "provider": "notion",
      "status": "connected"
    },
    {
      "provider": "facebook",
      "status": "connected"
    }
  ]
}
[2025-10-07T18:05:24.270Z] [INFO   ]  [32m[1m✓[22m[39m Compiled in 286ms (1513 modules)
[2025-10-07T18:05:24.513Z] [INFO   ] [Middleware] Username check: {
  path: '/workflows/builder',
  userId: 'a3e3a51a-175c-4b59-ad03-227ba12a18b0',
  provider: 'email',
  role: 'admin',
  username: 'nstoddard17',
  hasUsername: true,
  isBetaTester: false,
  isNewBetaUser: false,
  accountAge: 11293637114,
  profileError: undefined
}
[2025-10-07T18:05:24.608Z] [INFO   ] [Username Check] {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0",
  "email": "stoddard.nathaniel900@gmail.com",
  "provider": "email",
  "username": "nstoddard17",
  "hasUsername": true,
  "isGoogleUser": false
}
[2025-10-07T18:05:24.752Z] [INFO   ] 📍 [API /api/integrations] GET request received {
  "timestamp": "2025-10-07T18:05:24.752Z",
  "headers": {
    "referer": "check-console"
  }
}
[2025-10-07T18:05:24.878Z] [INFO   ] ✅ [API /api/integrations] User authenticated {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0"
}
[2025-10-07T18:05:24.997Z] [INFO   ] 📊 [API /api/integrations] Query result {
  "count": 19,
  "error": null,
  "firstFew": [
    {
      "provider": "notion",
      "status": "connected"
    },
    {
      "provider": "facebook",
      "status": "connected"
    }
  ]
}
[2025-10-07T18:05:58.407Z] [INFO   ]  [32m[1m✓[22m[39m Compiled in 414ms (1513 modules)
[2025-10-07T18:05:58.667Z] [INFO   ] [Middleware] Username check: {
  path: '/workflows/builder',
  userId: 'a3e3a51a-175c-4b59-ad03-227ba12a18b0',
  provider: 'email',
  role: 'admin',
  username: 'nstoddard17',
  hasUsername: true,
  isBetaTester: false,
  isNewBetaUser: false,
  accountAge: 11293671268,
  profileError: undefined
}
[2025-10-07T18:05:58.729Z] [INFO   ] [Username Check] {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0",
  "email": "stoddard.nathaniel900@gmail.com",
  "provider": "email",
  "username": "nstoddard17",
  "hasUsername": true,
  "isGoogleUser": false
}
[2025-10-07T18:05:58.896Z] [INFO   ] 📍 [API /api/integrations] GET request received {
  "timestamp": "2025-10-07T18:05:58.896Z",
  "headers": {
    "referer": "check-console"
  }
}
[2025-10-07T18:05:59.048Z] [INFO   ] ✅ [API /api/integrations] User authenticated {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0"
}
[2025-10-07T18:05:59.197Z] [INFO   ] 📊 [API /api/integrations] Query result {
  "count": 19,
  "error": null,
  "firstFew": [
    {
      "provider": "notion",
      "status": "connected"
    },
    {
      "provider": "facebook",
      "status": "connected"
    }
  ]
}
[2025-10-07T18:06:32.258Z] [INFO   ]  [32m[1m✓[22m[39m Compiled in 294ms (1513 modules)
[2025-10-07T18:06:32.570Z] [INFO   ] [Middleware] Username check: {
  path: '/workflows/builder',
  userId: 'a3e3a51a-175c-4b59-ad03-227ba12a18b0',
  provider: 'email',
  role: 'admin',
  username: 'nstoddard17',
  hasUsername: true,
  isBetaTester: false,
  isNewBetaUser: false,
  accountAge: 11293705171,
  profileError: undefined
}
[2025-10-07T18:06:32.635Z] [INFO   ] [Username Check] {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0",
  "email": "stoddard.nathaniel900@gmail.com",
  "provider": "email",
  "username": "nstoddard17",
  "hasUsername": true,
  "isGoogleUser": false
}
[2025-10-07T18:06:32.786Z] [INFO   ] 📍 [API /api/integrations] GET request received {
  "timestamp": "2025-10-07T18:06:32.786Z",
  "headers": {
    "referer": "check-console"
  }
}
[2025-10-07T18:06:32.906Z] [INFO   ] ✅ [API /api/integrations] User authenticated {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0"
}
[2025-10-07T18:06:33.034Z] [INFO   ] 📊 [API /api/integrations] Query result {
  "count": 19,
  "error": null,
  "firstFew": [
    {
      "provider": "notion",
      "status": "connected"
    },
    {
      "provider": "facebook",
      "status": "connected"
    }
  ]
}
[2025-10-07T18:07:03.755Z] [INFO   ]  [32m[1m✓[22m[39m Compiled in 370ms (1513 modules)
[2025-10-07T18:07:04.107Z] [INFO   ] [Middleware] Username check: {
  path: '/workflows/builder',
  userId: 'a3e3a51a-175c-4b59-ad03-227ba12a18b0',
  provider: 'email',
  role: 'admin',
  username: 'nstoddard17',
  hasUsername: true,
  isBetaTester: false,
  isNewBetaUser: false,
  accountAge: 11293736707,
  profileError: undefined
}
[2025-10-07T18:07:04.172Z] [INFO   ] [Username Check] {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0",
  "email": "stoddard.nathaniel900@gmail.com",
  "provider": "email",
  "username": "nstoddard17",
  "hasUsername": true,
  "isGoogleUser": false
}
[2025-10-07T18:07:04.352Z] [INFO   ] 📍 [API /api/integrations] GET request received {
  "timestamp": "2025-10-07T18:07:04.352Z",
  "headers": {
    "referer": "check-console"
  }
}
[2025-10-07T18:07:04.737Z] [INFO   ] ✅ [API /api/integrations] User authenticated {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0"
}
[2025-10-07T18:07:04.855Z] [INFO   ]  [37m[1m○[22m[39m Compiling /api/presence/count ...
[2025-10-07T18:07:04.997Z] [INFO   ]  [32m[1m✓[22m[39m Compiled /api/presence/count in 645ms (4096 modules)
[2025-10-07T18:07:05.009Z] [INFO   ] 📊 [API /api/integrations] Query result {
  "count": 19,
  "error": null,
  "firstFew": [
    {
      "provider": "notion",
      "status": "connected"
    },
    {
      "provider": "facebook",
      "status": "connected"
    }
  ]
}
[2025-10-07T18:07:42.783Z] [INFO   ]  [32m[1m✓[22m[39m Compiled in 309ms (1513 modules)
[2025-10-07T18:07:43.035Z] [INFO   ] [Middleware] Username check: {
  path: '/workflows/builder',
  userId: 'a3e3a51a-175c-4b59-ad03-227ba12a18b0',
  provider: 'email',
  role: 'admin',
  username: 'nstoddard17',
  hasUsername: true,
  isBetaTester: false,
  isNewBetaUser: false,
  accountAge: 11293775636,
  profileError: undefined
}
[2025-10-07T18:07:43.190Z] [INFO   ] [Username Check] {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0",
  "email": "stoddard.nathaniel900@gmail.com",
  "provider": "email",
  "username": "nstoddard17",
  "hasUsername": true,
  "isGoogleUser": false
}
[2025-10-07T18:07:43.340Z] [INFO   ] 📍 [API /api/integrations] GET request received {
  "timestamp": "2025-10-07T18:07:43.340Z",
  "headers": {
    "referer": "check-console"
  }
}
[2025-10-07T18:07:43.479Z] [INFO   ] ✅ [API /api/integrations] User authenticated {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0"
}
[2025-10-07T18:07:43.630Z] [INFO   ] 📊 [API /api/integrations] Query result {
  "count": 19,
  "error": null,
  "firstFew": [
    {
      "provider": "notion",
      "status": "connected"
    },
    {
      "provider": "facebook",
      "status": "connected"
    }
  ]
}
[2025-10-07T18:08:10.952Z] [INFO   ]  [32m[1m✓[22m[39m Compiled in 377ms (1513 modules)
[2025-10-07T18:08:11.186Z] [INFO   ] [Middleware] Username check: {
  path: '/workflows/builder',
  userId: 'a3e3a51a-175c-4b59-ad03-227ba12a18b0',
  provider: 'email',
  role: 'admin',
  username: 'nstoddard17',
  hasUsername: true,
  isBetaTester: false,
  isNewBetaUser: false,
  accountAge: 11293803787,
  profileError: undefined
}
[2025-10-07T18:08:11.244Z] [INFO   ] [Username Check] {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0",
  "email": "stoddard.nathaniel900@gmail.com",
  "provider": "email",
  "username": "nstoddard17",
  "hasUsername": true,
  "isGoogleUser": false
}
[2025-10-07T18:08:11.403Z] [INFO   ] 📍 [API /api/integrations] GET request received {
  "timestamp": "2025-10-07T18:08:11.402Z",
  "headers": {
    "referer": "check-console"
  }
}
[2025-10-07T18:08:11.517Z] [INFO   ] ✅ [API /api/integrations] User authenticated {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0"
}
[2025-10-07T18:08:11.649Z] [INFO   ] 📊 [API /api/integrations] Query result {
  "count": 19,
  "error": null,
  "firstFew": [
    {
      "provider": "notion",
      "status": "connected"
    },
    {
      "provider": "facebook",
      "status": "connected"
    }
  ]
}
[2025-10-07T18:08:47.083Z] [INFO   ]  [32m[1m✓[22m[39m Compiled in 387ms (1513 modules)
[2025-10-07T18:08:47.383Z] [INFO   ] [Middleware] Username check: {
  path: '/workflows/builder',
  userId: 'a3e3a51a-175c-4b59-ad03-227ba12a18b0',
  provider: 'email',
  role: 'admin',
  username: 'nstoddard17',
  hasUsername: true,
  isBetaTester: false,
  isNewBetaUser: false,
  accountAge: 11293839983,
  profileError: undefined
}
[2025-10-07T18:08:47.449Z] [INFO   ] [Username Check] {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0",
  "email": "stoddard.nathaniel900@gmail.com",
  "provider": "email",
  "username": "nstoddard17",
  "hasUsername": true,
  "isGoogleUser": false
}
[2025-10-07T18:08:47.585Z] [INFO   ] 📍 [API /api/integrations] GET request received {
  "timestamp": "2025-10-07T18:08:47.585Z",
  "headers": {
    "referer": "check-console"
  }
}
[2025-10-07T18:08:47.719Z] [INFO   ] ✅ [API /api/integrations] User authenticated {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0"
}
[2025-10-07T18:08:47.840Z] [INFO   ] 📊 [API /api/integrations] Query result {
  "count": 19,
  "error": null,
  "firstFew": [
    {
      "provider": "notion",
      "status": "connected"
    },
    {
      "provider": "facebook",
      "status": "connected"
    }
  ]
}
[2025-10-07T18:09:21.612Z] [INFO   ]  [32m[1m✓[22m[39m Compiled in 374ms (1513 modules)
[2025-10-07T18:09:21.820Z] [INFO   ] [Middleware] Username check: {
  path: '/workflows/builder',
  userId: 'a3e3a51a-175c-4b59-ad03-227ba12a18b0',
  provider: 'email',
  role: 'admin',
  username: 'nstoddard17',
  hasUsername: true,
  isBetaTester: false,
  isNewBetaUser: false,
  accountAge: 11293874421,
  profileError: undefined
}
[2025-10-07T18:09:21.877Z] [INFO   ] [Username Check] {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0",
  "email": "stoddard.nathaniel900@gmail.com",
  "provider": "email",
  "username": "nstoddard17",
  "hasUsername": true,
  "isGoogleUser": false
}
[2025-10-07T18:09:22.037Z] [INFO   ] 📍 [API /api/integrations] GET request received {
  "timestamp": "2025-10-07T18:09:22.037Z",
  "headers": {
    "referer": "check-console"
  }
}
[2025-10-07T18:09:22.208Z] [INFO   ] ✅ [API /api/integrations] User authenticated {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0"
}
[2025-10-07T18:09:22.348Z] [INFO   ] 📊 [API /api/integrations] Query result {
  "count": 19,
  "error": null,
  "firstFew": [
    {
      "provider": "notion",
      "status": "connected"
    },
    {
      "provider": "facebook",
      "status": "connected"
    }
  ]
}
[2025-10-07T18:10:49.145Z] [INFO   ]  [32m[1m✓[22m[39m Compiled in 348ms (1513 modules)
[2025-10-07T18:10:49.412Z] [INFO   ] [Middleware] Username check: {
  path: '/workflows/builder',
  userId: 'a3e3a51a-175c-4b59-ad03-227ba12a18b0',
  provider: 'email',
  role: 'admin',
  username: 'nstoddard17',
  hasUsername: true,
  isBetaTester: false,
  isNewBetaUser: false,
  accountAge: 11293962013,
  profileError: undefined
}
[2025-10-07T18:10:49.474Z] [INFO   ] [Username Check] {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0",
  "email": "stoddard.nathaniel900@gmail.com",
  "provider": "email",
  "username": "nstoddard17",
  "hasUsername": true,
  "isGoogleUser": false
}
[2025-10-07T18:10:49.611Z] [INFO   ] 📍 [API /api/integrations] GET request received {
  "timestamp": "2025-10-07T18:10:49.611Z",
  "headers": {
    "referer": "check-console"
  }
}
[2025-10-07T18:10:49.732Z] [INFO   ] ✅ [API /api/integrations] User authenticated {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0"
}
[2025-10-07T18:10:49.858Z] [INFO   ] 📊 [API /api/integrations] Query result {
  "count": 19,
  "error": null,
  "firstFew": [
    {
      "provider": "notion",
      "status": "connected"
    },
    {
      "provider": "facebook",
      "status": "connected"
    }
  ]
}
[2025-10-07T18:58:27.965Z] [INFO   ]  [37m[1m○[22m[39m Compiling /api/webhooks/gmail ...
[2025-10-07T18:58:30.591Z] [INFO   ]  [32m[1m✓[22m[39m Compiled /api/webhooks/gmail in 3.2s (6100 modules)
[2025-10-07T18:58:32.468Z] [INFO   ] 🔔🔔🔔 GMAIL WEBHOOK ENDPOINT HIT! 🔔🔔🔔
[2025-10-07T18:58:32.468Z] [INFO   ] 📋 Request headers: {
  "accept": "application/json",
  "accept-encoding": "gzip, deflate, br",
  "content-length": "373",
  "content-type": "application/json",
  "from": "noreply@google.com",
  "host": "9b7007881520.ngrok-free.app",
  "user-agent": "APIs-Google; (+https://developers.google.com/webmasters/APIs-Google.html)",
  "x-forwarded-for": "142.250.32.32",
  "x-forwarded-host": "9b7007881520.ngrok-free.app",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "https"
}
[2025-10-07T18:58:32.468Z] [INFO   ] 📨 [c12622c0-0b65-4248-9ca9-2515669e85f0] Gmail webhook request received at 2025-10-07T18:58:32.468Z
[2025-10-07T18:58:32.723Z] [INFO   ] 📝 [c12622c0-0b65-4248-9ca9-2515669e85f0] Raw body received: {"deliveryAttempt":1,"message":{"data":"eyJlbWFpbEFkZHJlc3MiOiJzdG9kZGFyZC5uYXRoYW5pZWw5MDBAZ21haWwuY29tIiwiaGlzdG9yeUlkIjo2Nzc3Nzg1fQ==","messageId":"16440487657222649","message_id":"16440487657222649","publishTime":"2025-10-07T18:58:26.525Z","publish_time":"2025-10-07T18:58:26.525Z"},"subscription":"projects/chainreact-462214/subscriptions/gmail-webhook-subscription"}

[2025-10-07T18:58:32.724Z] [INFO   ] 📦 [c12622c0-0b65-4248-9ca9-2515669e85f0] Parsed body structure: {
  "hasMessage": true,
  "hasMessageData": true,
  "messageKeys": [
    "data",
    "messageId",
    "message_id",
    "publishTime",
    "publish_time"
  ],
  "subscription": "projects/chainreact-462214/subscriptions/gmail-webhook-subscription"
}
[2025-10-07T18:58:32.724Z] [INFO   ] [c12622c0-0b65-4248-9ca9-2515669e85f0] Received Pub/Sub message from Gmail
[2025-10-07T18:58:32.724Z] [INFO   ] 🔓 [c12622c0-0b65-4248-9ca9-2515669e85f0] Decoded Pub/Sub data: {"emailAddress":"stoddard.nathaniel900@gmail.com","historyId":6777785}
[2025-10-07T18:58:32.725Z] [INFO   ] [c12622c0-0b65-4248-9ca9-2515669e85f0] 📧 Gmail notification received: {
  "emailAddress": "stoddard.nathaniel900@gmail.com",
  "historyId": 6777785,
  "messageId": "16440487657222649",
  "publishTime": "2025-10-07T18:58:26.525Z"
}
[2025-10-07T18:58:32.725Z] [INFO   ] [c12622c0-0b65-4248-9ca9-2515669e85f0] 🔍 Processing Gmail webhook for email from: stoddard.nathaniel900@gmail.com
[2025-10-07T18:58:32.823Z] [INFO   ] 🔍 [Gmail Processor] Processing Gmail event: {
  "eventType": "gmail_new_email",
  "emailAddress": "stoddard.nathaniel900@gmail.com",
  "historyId": 6777785,
  "requestId": "c12622c0-0b65-4248-9ca9-2515669e85f0"
}
[2025-10-07T18:58:32.824Z] [INFO   ] [Backend INFO] Gmail webhook event received {
  "eventType": "gmail_new_email",
  "emailAddress": "stoddard.nathaniel900@gmail.com",
  "historyId": 6777785,
  "requestId": "c12622c0-0b65-4248-9ca9-2515669e85f0"
}
[2025-10-07T18:58:32.937Z] [INFO   ] 🚀 [Gmail Processor] Starting to find matching workflows for Gmail event
[2025-10-07T18:58:33.194Z] [INFO   ] Processing Gmail new message event
[2025-10-07T18:58:33.285Z] [INFO   ] [Task Queue] Queued gmail webhook task: undefined
[2025-10-07T18:58:33.286Z] [INFO   ] [Backend SUCCESS] Gmail webhook event processed successfully {
  "processed": true,
  "type": "gmail_new_message"
}
[2025-10-07T19:14:52.943Z] [INFO   ] 🔑 Using Discord bot token: MTM3ODU5NT...ElFqA
[2025-10-07T19:14:53.006Z] [INFO   ] Discord Gateway closed, persistent reconnect disabled
[2025-10-07T19:14:53.387Z] [INFO   ] Discord Gateway WebSocket connection established
[2025-10-07T19:14:53.390Z] [INFO   ] 🔑 Sending identify with intents: {
  "GUILDS": true,
  "GUILD_MEMBERS": true,
  "GUILD_INVITES": true,
  "GUILD_MESSAGES": true,
  "MESSAGE_CONTENT": true,
  "intentsValue": 33347
}
[2025-10-07T19:14:53.549Z] [INFO   ] 🎉 Discord bot ready! {
  "sessionId": "39167145c313e829be058c70d5cc4bfa",
  "username": "ChainReact-Bot",
  "userId": "1378595955212812308",
  "guildCount": 2
}
[2025-10-07T19:14:53.549Z] [INFO   ] 📋 Initializing invite cache...
[2025-10-07T19:14:53.559Z] [INFO   ] 📡 Discord event received: GUILD_CREATE
[2025-10-07T19:14:53.568Z] [INFO   ] 📡 Discord event received: GUILD_CREATE
[2025-10-07T19:14:53.719Z] [INFO   ] ✅ Cached 4 invites for guild 1378950884045623406
[2025-10-07T19:45:00.527Z] [INFO   ] 🔔🔔🔔 GMAIL WEBHOOK ENDPOINT HIT! 🔔🔔🔔
[2025-10-07T19:45:00.528Z] [INFO   ] 📋 Request headers: {
  "accept": "application/json",
  "accept-encoding": "gzip, deflate, br",
  "content-length": "373",
  "content-type": "application/json",
  "from": "noreply@google.com",
  "host": "9b7007881520.ngrok-free.app",
  "user-agent": "APIs-Google; (+https://developers.google.com/webmasters/APIs-Google.html)",
  "x-forwarded-for": "142.250.32.41",
  "x-forwarded-host": "9b7007881520.ngrok-free.app",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "https"
}
[2025-10-07T19:45:00.528Z] [INFO   ] 📨 [e1ba4e27-5da5-43b0-af20-c996b17ae66d] Gmail webhook request received at 2025-10-07T19:45:00.528Z
[2025-10-07T19:45:00.718Z] [INFO   ] 📝 [e1ba4e27-5da5-43b0-af20-c996b17ae66d] Raw body received: {"deliveryAttempt":1,"message":{"data":"eyJlbWFpbEFkZHJlc3MiOiJzdG9kZGFyZC5uYXRoYW5pZWw5MDBAZ21haWwuY29tIiwiaGlzdG9yeUlkIjo2Nzc3ODEwfQ==","messageId":"16439075304731707","message_id":"16439075304731707","publishTime":"2025-10-07T19:44:59.685Z","publish_time":"2025-10-07T19:44:59.685Z"},"subscription":"projects/chainreact-462214/subscriptions/gmail-webhook-subscription"}

[2025-10-07T19:45:00.720Z] [INFO   ] 📦 [e1ba4e27-5da5-43b0-af20-c996b17ae66d] Parsed body structure: {
  "hasMessage": true,
  "hasMessageData": true,
  "messageKeys": [
    "data",
    "messageId",
    "message_id",
    "publishTime",
    "publish_time"
  ],
  "subscription": "projects/chainreact-462214/subscriptions/gmail-webhook-subscription"
}
[2025-10-07T19:45:00.720Z] [INFO   ] [e1ba4e27-5da5-43b0-af20-c996b17ae66d] Received Pub/Sub message from Gmail
[2025-10-07T19:45:00.720Z] [INFO   ] 🔓 [e1ba4e27-5da5-43b0-af20-c996b17ae66d] Decoded Pub/Sub data: {"emailAddress":"stoddard.nathaniel900@gmail.com","historyId":6777810}
[2025-10-07T19:45:00.721Z] [INFO   ] [e1ba4e27-5da5-43b0-af20-c996b17ae66d] 📧 Gmail notification received: {
  "emailAddress": "stoddard.nathaniel900@gmail.com",
  "historyId": 6777810,
  "messageId": "16439075304731707",
  "publishTime": "2025-10-07T19:44:59.685Z"
}
[2025-10-07T19:45:00.721Z] [INFO   ] [e1ba4e27-5da5-43b0-af20-c996b17ae66d] 🔍 Processing Gmail webhook for email from: stoddard.nathaniel900@gmail.com
[2025-10-07T19:45:00.822Z] [INFO   ] 🔍 [Gmail Processor] Processing Gmail event: {
  "eventType": "gmail_new_email",
  "emailAddress": "stoddard.nathaniel900@gmail.com",
  "historyId": 6777810,
  "requestId": "e1ba4e27-5da5-43b0-af20-c996b17ae66d"
}
[2025-10-07T19:45:00.823Z] [INFO   ] [Backend INFO] Gmail webhook event received {
  "eventType": "gmail_new_email",
  "emailAddress": "stoddard.nathaniel900@gmail.com",
  "historyId": 6777810,
  "requestId": "e1ba4e27-5da5-43b0-af20-c996b17ae66d"
}
[2025-10-07T19:45:00.929Z] [INFO   ] 🚀 [Gmail Processor] Starting to find matching workflows for Gmail event
[2025-10-07T19:45:01.191Z] [INFO   ] Processing Gmail new message event
[2025-10-07T19:45:01.298Z] [INFO   ] [Task Queue] Queued gmail webhook task: undefined
[2025-10-07T19:45:01.299Z] [INFO   ] [Backend SUCCESS] Gmail webhook event processed successfully {
  "processed": true,
  "type": "gmail_new_message"
}
[2025-10-07T21:00:51.696Z] [INFO   ] 🔔🔔🔔 GMAIL WEBHOOK ENDPOINT HIT! 🔔🔔🔔
[2025-10-07T21:00:51.696Z] [INFO   ] 📋 Request headers: {
  "accept": "application/json",
  "accept-encoding": "gzip, deflate, br",
  "content-length": "373",
  "content-type": "application/json",
  "from": "noreply@google.com",
  "host": "9b7007881520.ngrok-free.app",
  "user-agent": "APIs-Google; (+https://developers.google.com/webmasters/APIs-Google.html)",
  "x-forwarded-for": "142.250.32.36",
  "x-forwarded-host": "9b7007881520.ngrok-free.app",
  "x-forwarded-port": "3000",
  "x-forwarded-proto": "https"
}
[2025-10-07T21:00:51.696Z] [INFO   ] 📨 [f7c513a7-5619-4689-ba69-5863386f82b6] Gmail webhook request received at 2025-10-07T21:00:51.696Z
[2025-10-07T21:00:51.838Z] [INFO   ] 📝 [f7c513a7-5619-4689-ba69-5863386f82b6] Raw body received: {"deliveryAttempt":1,"message":{"data":"eyJlbWFpbEFkZHJlc3MiOiJzdG9kZGFyZC5uYXRoYW5pZWw5MDBAZ21haWwuY29tIiwiaGlzdG9yeUlkIjo2Nzc3ODMyfQ==","messageId":"16440637118189673","message_id":"16440637118189673","publishTime":"2025-10-07T21:00:50.833Z","publish_time":"2025-10-07T21:00:50.833Z"},"subscription":"projects/chainreact-462214/subscriptions/gmail-webhook-subscription"}

[2025-10-07T21:00:51.842Z] [INFO   ] 📦 [f7c513a7-5619-4689-ba69-5863386f82b6] Parsed body structure: {
  "hasMessage": true,
  "hasMessageData": true,
  "messageKeys": [
    "data",
    "messageId",
    "message_id",
    "publishTime",
    "publish_time"
  ],
  "subscription": "projects/chainreact-462214/subscriptions/gmail-webhook-subscription"
}
[2025-10-07T21:00:51.842Z] [INFO   ] [f7c513a7-5619-4689-ba69-5863386f82b6] Received Pub/Sub message from Gmail
[2025-10-07T21:00:51.843Z] [INFO   ] 🔓 [f7c513a7-5619-4689-ba69-5863386f82b6] Decoded Pub/Sub data: {"emailAddress":"stoddard.nathaniel900@gmail.com","historyId":6777832}
[2025-10-07T21:00:51.844Z] [INFO   ] [f7c513a7-5619-4689-ba69-5863386f82b6] 📧 Gmail notification received: {
  "emailAddress": "stoddard.nathaniel900@gmail.com",
  "historyId": 6777832,
  "messageId": "16440637118189673",
  "publishTime": "2025-10-07T21:00:50.833Z"
}
[2025-10-07T21:00:51.844Z] [INFO   ] [f7c513a7-5619-4689-ba69-5863386f82b6] 🔍 Processing Gmail webhook for email from: stoddard.nathaniel900@gmail.com
[2025-10-07T21:00:51.933Z] [INFO   ] 🔍 [Gmail Processor] Processing Gmail event: {
  "eventType": "gmail_new_email",
  "emailAddress": "stoddard.nathaniel900@gmail.com",
  "historyId": 6777832,
  "requestId": "f7c513a7-5619-4689-ba69-5863386f82b6"
}
[2025-10-07T21:00:51.934Z] [INFO   ] [Backend INFO] Gmail webhook event received {
  "eventType": "gmail_new_email",
  "emailAddress": "stoddard.nathaniel900@gmail.com",
  "historyId": 6777832,
  "requestId": "f7c513a7-5619-4689-ba69-5863386f82b6"
}
[2025-10-07T21:00:52.048Z] [INFO   ] 🚀 [Gmail Processor] Starting to find matching workflows for Gmail event
[2025-10-07T21:00:52.274Z] [INFO   ] Processing Gmail new message event
[2025-10-07T21:00:52.366Z] [INFO   ] [Task Queue] Queued gmail webhook task: undefined
[2025-10-07T21:00:52.368Z] [INFO   ] [Backend SUCCESS] Gmail webhook event processed successfully {
  "processed": true,
  "type": "gmail_new_message"
}

=== Log Session Ended: 2025-10-07T21:01:28.939Z ===
