=== Log Session Started: 2025-11-27T05:26:38.555Z ===
Node Version: v23.7.0
Platform: darwin
Working Directory: /Users/nathanielstoddard/chainreact-app/chainreact-app-9e
================================================================================

[2025-11-27T05:26:38.555Z] [INFO   ] File logging initialized
[2025-11-27T05:26:38.555Z] [INFO   ] Log file: /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-11-26_23-26-38.log
[2025-11-27T05:26:38.556Z] [INFO   ] ğŸ“ File logging enabled
[2025-11-27T05:26:38.556Z] [INFO   ] ğŸ“ Logs will be written to: /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-11-26_23-26-38.log
[2025-11-27T05:26:38.557Z] [INFO   ] ğŸ’¡ To view logs in real-time: tail -f /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-11-26_23-26-38.log
[2025-11-27T05:26:38.557Z] [INFO   ] ğŸ’¡ To view all logs: cat /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-11-26_23-26-38.log
[2025-11-27T05:26:38.557Z] [INFO   ] ğŸ’¡ To share logs: Copy the file at /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-11-26_23-26-38.log
[2025-11-27T05:26:38.557Z] [INFO   ] --------------------------------------------------------------------------------
[2025-11-27T05:26:38.557Z] [DEBUG  ] ğŸ“ File logging system initialized
[2025-11-27T05:26:38.571Z] [INFO   ]  [32m[1mâœ“[22m[39m Ready in 8.3s
[2025-11-27T05:26:39.559Z] [INFO   ] 2025-11-27T05:26:39.559Z [DEBUG] ğŸ¤– Discord bot configured, initializing gateway connection in background...
[2025-11-27T05:26:41.644Z] [INFO   ] 2025-11-27T05:26:41.644Z [DEBUG] Initializing Discord Gateway connection (singleton)...
[2025-11-27T05:26:41.644Z] [INFO   ] 2025-11-27T05:26:41.644Z [DEBUG] ğŸ”‘ Discord bot token loaded
[2025-11-27T05:26:41.798Z] [INFO   ] 2025-11-27T05:26:41.798Z [DEBUG] Discord Gateway initialization complete
[2025-11-27T05:26:41.799Z] [INFO   ] 2025-11-27T05:26:41.799Z [DEBUG] âœ… Discord bot gateway connection initialized
[2025-11-27T05:26:42.601Z] [INFO   ] 2025-11-27T05:26:42.601Z [DEBUG] Discord Gateway WebSocket connection established
[2025-11-27T05:26:42.601Z] [INFO   ] 2025-11-27T05:26:42.601Z [DEBUG] ğŸ”‘ Sending identify with intents: {"GUILDS":true,"GUILD_MEMBERS":true,"GUILD_INVITES":true,"GUILD_MESSAGES":true,"MESSAGE_CONTENT":true,"intentsValue":33347}
[2025-11-27T05:27:06.412Z] [INFO   ]  [37m[1mâ—‹[22m[39m Compiling /api/workflows/test-trigger ...
[2025-11-27T05:27:11.918Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled /api/workflows/test-trigger in 6s (4534 modules)
[2025-11-27T05:27:12.100Z] [INFO   ] ğŸ§ª [test-trigger] POST request received
[2025-11-27T05:27:12.108Z] [INFO   ] ğŸ§ª [test-trigger] Supabase client created
[2025-11-27T05:27:12.370Z] [INFO   ] ğŸ§ª [test-trigger] Auth check: {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0"
}
[2025-11-27T05:27:12.371Z] [INFO   ] ğŸ§ª [test-trigger] Request body: {
  "workflowId": "82bf971e-2cac-4500-bbc1-00577a2ed9df",
  "nodeId": "gmail_trigger_new_email-66214e1d-8271-4843-af4a-9fb3748f4428"
}
[2025-11-27T05:27:12.371Z] [INFO   ] ğŸ§ª [test-trigger] Fetching workflow...
[2025-11-27T05:27:12.494Z] [INFO   ] ğŸ§ª [test-trigger] Workflow not found: JSON object requested, multiple (or no) rows returned
[2025-11-27T05:27:21.400Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled /middleware in 499ms (232 modules)
[2025-11-27T05:27:21.765Z] [INFO   ] 2025-11-27T05:27:21.765Z [DEBUG] [Middleware] Username check: {"path":"/workflows/builder/82bf971e-2cac-4500-bbc1-00577a2ed9df","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15654554366}
[2025-11-27T05:27:22.426Z] [INFO   ]  [37m[1mâ—‹[22m[39m Compiling /workflows/builder/[id] ...
[2025-11-27T05:27:32.448Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled /workflows/builder/[id] in 10.6s (8227 modules)
[2025-11-27T05:27:33.349Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled in 835ms (1846 modules)
[2025-11-27T05:27:34.775Z] [INFO   ] 2025-11-27T05:27:34.775Z [DEBUG] ğŸ’§ [AUTH] Rehydrating auth state from storage {"hasState":true,"hasUser":false,"initialized":false,"timestamp":"2025-11-27T05:27:34.775Z"}
[2025-11-27T05:27:34.792Z] [INFO   ] 2025-11-27T05:27:34.792Z [DEBUG] ğŸ’§ [AUTH] State hydrated and reset {"hasUser":false,"initialized":false,"timestamp":"2025-11-27T05:27:34.792Z"}
[2025-11-27T05:27:34.792Z] [INFO   ] 2025-11-27T05:27:34.792Z [DEBUG] â­ï¸ [AUTH] Skipping initialization {"hasState":true,"alreadyInitialized":false,"isClient":false,"timestamp":"2025-11-27T05:27:34.792Z"}
[2025-11-27T05:27:35.971Z] [INFO   ] 2025-11-27T05:27:35.970Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-11-27T05:27:37.204Z] [INFO   ] [PhantomEdgeOverlay] No nodes found
[2025-11-27T05:27:37.204Z] [INFO   ] [PhantomEdgeOverlay] Not rendering - no last node info
[2025-11-27T05:27:41.111Z] [INFO   ]  [37m[1mâ—‹[22m[39m Compiling /api/presence/count ...
[2025-11-27T05:27:42.157Z] [INFO   ] 2025-11-27T05:27:42.156Z [DEBUG] [Middleware] Username check: {"path":"/workflows/api/flows/82bf971e-2cac-4500-bbc1-00577a2ed9df/runs/latest","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15654574757}
[2025-11-27T05:27:47.195Z] [INFO   ] 2025-11-27T05:27:47.195Z [DEBUG] [Middleware] Username check: {"path":"/workflows/api/flows/82bf971e-2cac-4500-bbc1-00577a2ed9df/revisions","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15654579796}
[2025-11-27T05:27:48.601Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled /workflows/api/flows/[flowId]/revisions in 8s (8143 modules)
[2025-11-27T05:27:49.484Z] [INFO   ]  [37m[1mâ—‹[22m[39m Compiling /api/integrations ...
[2025-11-27T05:27:49.788Z] [INFO   ] 2025-11-27T05:27:49.788Z [DEBUG] [runs/latest] Flow not found {"flowId":"82bf971e-2cac-4500-bbc1-00577a2ed9df"}
[2025-11-27T05:27:50.701Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled /api/integrations in 1788ms (8150 modules)
[2025-11-27T05:27:50.822Z] [INFO   ] 2025-11-27T05:27:50.822Z [DEBUG] ğŸ“ [API /api/integrations] GET request received {"timestamp":"2025-11-27T05:27:50.822Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-27T05:27:50.823Z] [INFO   ] 2025-11-27T05:27:50.823Z [DEBUG] ğŸ“ [API /api/integrations] GET request received {"timestamp":"2025-11-27T05:27:50.823Z","url":"http://localhost:3000/api/integrations"}
[2025-11-27T05:27:50.913Z] [INFO   ] 2025-11-27T05:27:50.913Z [DEBUG] âœ… [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-27T05:27:50.914Z] [INFO   ] 2025-11-27T05:27:50.914Z [DEBUG] ğŸ  [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-27T05:27:50.925Z] [INFO   ] 2025-11-27T05:27:50.925Z [DEBUG] [API /api/workflows] GET request {"filterContext":"ALL (unified view)","workspaceId":null,"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-27T05:27:50.963Z] [INFO   ] 2025-11-27T05:27:50.963Z [DEBUG] âœ… [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-27T05:27:50.964Z] [INFO   ] 2025-11-27T05:27:50.963Z [DEBUG] ğŸ  [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-27T05:27:51.066Z] [INFO   ] 2025-11-27T05:27:51.066Z [DEBUG] ğŸ“Š [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":15,"permissionsCount":4,"integrationsError":null,"permissionsError":null}
[2025-11-27T05:27:51.066Z] [INFO   ] 2025-11-27T05:27:51.066Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"c61c89e4-4f78-4069-8bfe-d36dd81cf6fc","provider":"dropbox","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:51.067Z] [INFO   ] 2025-11-27T05:27:51.067Z [DEBUG] ğŸ“‹ [API /api/integrations] Using explicit permission {"integrationId":"580105eb-df9a-4b0a-a934-43e5a99f9bb8","provider":"discord","permission":"admin"}
[2025-11-27T05:27:51.067Z] [INFO   ] 2025-11-27T05:27:51.067Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"0e7c83e0-6c16-48f6-b7d8-77d3592dca01","provider":"github","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:51.067Z] [INFO   ] 2025-11-27T05:27:51.067Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"cb175247-1caa-430b-85c0-dd7ca5ca370b","provider":"google-drive","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:51.067Z] [INFO   ] 2025-11-27T05:27:51.067Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"f172e387-ab0c-4c6a-975e-1767b2fd37be","provider":"notion","permission":"admin","reason":"default"}
[2025-11-27T05:27:51.067Z] [INFO   ] 2025-11-27T05:27:51.067Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"f367c75b-b4ea-4d0e-96ba-76368f0525a6","provider":"slack","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:51.067Z] [INFO   ] 2025-11-27T05:27:51.067Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"f0476067-a30a-4ab4-b9fb-1f5a647a7be7","provider":"facebook","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:51.067Z] [INFO   ] 2025-11-27T05:27:51.067Z [DEBUG] ğŸ“‹ [API /api/integrations] Using explicit permission {"integrationId":"15a626c1-ecf2-4635-a287-1ddc3967a6ce","provider":"gmail","permission":"admin"}
[2025-11-27T05:27:51.067Z] [INFO   ] 2025-11-27T05:27:51.067Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"a6595fc9-22fe-43dc-82a9-a3301cb3b373","provider":"google-docs","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:51.067Z] [INFO   ] 2025-11-27T05:27:51.067Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"6f959e59-18c3-47f0-a20f-cc8a268ceb21","provider":"hubspot","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:51.067Z] [INFO   ] 2025-11-27T05:27:51.067Z [DEBUG] ğŸ“‹ [API /api/integrations] Using explicit permission {"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","provider":"google-sheets","permission":"admin"}
[2025-11-27T05:27:51.067Z] [INFO   ] 2025-11-27T05:27:51.067Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"dd542556-581b-4711-ae40-304c81619938","provider":"airtable","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:51.067Z] [INFO   ] 2025-11-27T05:27:51.067Z [DEBUG] ğŸ“‹ [API /api/integrations] Using explicit permission {"integrationId":"8ef5c519-18a9-4a81-829e-b7a48b58f668","provider":"gumroad","permission":"admin"}
[2025-11-27T05:27:51.067Z] [INFO   ] 2025-11-27T05:27:51.067Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"3d77fbe9-de84-47a8-ba84-a80981ffd516","provider":"google-calendar","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:51.067Z] [INFO   ] 2025-11-27T05:27:51.067Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"91c85768-928a-445d-89ae-28521f5ee7f2","provider":"google-analytics","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:51.067Z] [INFO   ] 2025-11-27T05:27:51.067Z [DEBUG] âœ… [API /api/integrations] Returning integrations {"count":15,"workspaceType":"personal"}
[2025-11-27T05:27:51.099Z] [INFO   ] 2025-11-27T05:27:51.099Z [DEBUG] [Middleware] Username check: {"path":"/workflows/api/flows/82bf971e-2cac-4500-bbc1-00577a2ed9df/revisions","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15654583700}
[2025-11-27T05:27:51.131Z] [INFO   ] 2025-11-27T05:27:51.131Z [DEBUG] ğŸ“Š [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":15,"permissionsCount":4,"integrationsError":null,"permissionsError":null}
[2025-11-27T05:27:51.131Z] [INFO   ] 2025-11-27T05:27:51.131Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"c61c89e4-4f78-4069-8bfe-d36dd81cf6fc","provider":"dropbox","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:51.131Z] [INFO   ] 2025-11-27T05:27:51.131Z [DEBUG] ğŸ“‹ [API /api/integrations] Using explicit permission {"integrationId":"580105eb-df9a-4b0a-a934-43e5a99f9bb8","provider":"discord","permission":"admin"}
[2025-11-27T05:27:51.131Z] [INFO   ] 2025-11-27T05:27:51.131Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"0e7c83e0-6c16-48f6-b7d8-77d3592dca01","provider":"github","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:51.131Z] [INFO   ] 2025-11-27T05:27:51.131Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"cb175247-1caa-430b-85c0-dd7ca5ca370b","provider":"google-drive","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:51.131Z] [INFO   ] 2025-11-27T05:27:51.131Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"f172e387-ab0c-4c6a-975e-1767b2fd37be","provider":"notion","permission":"admin","reason":"default"}
[2025-11-27T05:27:51.131Z] [INFO   ] 2025-11-27T05:27:51.131Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"f367c75b-b4ea-4d0e-96ba-76368f0525a6","provider":"slack","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:51.131Z] [INFO   ] 2025-11-27T05:27:51.131Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"f0476067-a30a-4ab4-b9fb-1f5a647a7be7","provider":"facebook","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:51.131Z] [INFO   ] 2025-11-27T05:27:51.131Z [DEBUG] ğŸ“‹ [API /api/integrations] Using explicit permission {"integrationId":"15a626c1-ecf2-4635-a287-1ddc3967a6ce","provider":"gmail","permission":"admin"}
[2025-11-27T05:27:51.131Z] [INFO   ] 2025-11-27T05:27:51.131Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"a6595fc9-22fe-43dc-82a9-a3301cb3b373","provider":"google-docs","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:51.131Z] [INFO   ] 2025-11-27T05:27:51.131Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"6f959e59-18c3-47f0-a20f-cc8a268ceb21","provider":"hubspot","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:51.131Z] [INFO   ] 2025-11-27T05:27:51.131Z [DEBUG] ğŸ“‹ [API /api/integrations] Using explicit permission {"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","provider":"google-sheets","permission":"admin"}
[2025-11-27T05:27:51.131Z] [INFO   ] 2025-11-27T05:27:51.131Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"dd542556-581b-4711-ae40-304c81619938","provider":"airtable","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:51.131Z] [INFO   ] 2025-11-27T05:27:51.131Z [DEBUG] ğŸ“‹ [API /api/integrations] Using explicit permission {"integrationId":"8ef5c519-18a9-4a81-829e-b7a48b58f668","provider":"gumroad","permission":"admin"}
[2025-11-27T05:27:51.132Z] [INFO   ] 2025-11-27T05:27:51.131Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"3d77fbe9-de84-47a8-ba84-a80981ffd516","provider":"google-calendar","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:51.132Z] [INFO   ] 2025-11-27T05:27:51.132Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"91c85768-928a-445d-89ae-28521f5ee7f2","provider":"google-analytics","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:51.132Z] [INFO   ] 2025-11-27T05:27:51.132Z [DEBUG] âœ… [API /api/integrations] Returning integrations {"count":15,"workspaceType":"personal"}
[2025-11-27T05:27:51.202Z] [INFO   ] 2025-11-27T05:27:51.202Z [DEBUG] ğŸ“ [API /api/integrations] GET request received {"timestamp":"2025-11-27T05:27:51.202Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-27T05:27:51.294Z] [INFO   ] 2025-11-27T05:27:51.294Z [DEBUG] ğŸ“ [API /api/integrations] GET request received {"timestamp":"2025-11-27T05:27:51.294Z","url":"http://localhost:3000/api/integrations"}
[2025-11-27T05:27:51.316Z] [INFO   ] 2025-11-27T05:27:51.316Z [DEBUG] âœ… [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-27T05:27:51.316Z] [INFO   ] 2025-11-27T05:27:51.316Z [DEBUG] ğŸ  [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-27T05:27:51.318Z] [INFO   ] 2025-11-27T05:27:51.318Z [DEBUG] [API /api/workflows] Query result {"filterContext":"ALL","count":0,"error":null}
[2025-11-27T05:27:51.372Z] [INFO   ] 2025-11-27T05:27:51.372Z [DEBUG] âœ… [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-27T05:27:51.372Z] [INFO   ] 2025-11-27T05:27:51.372Z [DEBUG] ğŸ  [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-27T05:27:51.414Z] [INFO   ] 2025-11-27T05:27:51.414Z [DEBUG] ğŸ“Š [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":15,"permissionsCount":4,"integrationsError":null,"permissionsError":null}
[2025-11-27T05:27:51.414Z] [INFO   ] 2025-11-27T05:27:51.414Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"c61c89e4-4f78-4069-8bfe-d36dd81cf6fc","provider":"dropbox","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:51.414Z] [INFO   ] 2025-11-27T05:27:51.414Z [DEBUG] ğŸ“‹ [API /api/integrations] Using explicit permission {"integrationId":"580105eb-df9a-4b0a-a934-43e5a99f9bb8","provider":"discord","permission":"admin"}
[2025-11-27T05:27:51.414Z] [INFO   ] 2025-11-27T05:27:51.414Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"0e7c83e0-6c16-48f6-b7d8-77d3592dca01","provider":"github","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:51.414Z] [INFO   ] 2025-11-27T05:27:51.414Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"cb175247-1caa-430b-85c0-dd7ca5ca370b","provider":"google-drive","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:51.414Z] [INFO   ] 2025-11-27T05:27:51.414Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"f172e387-ab0c-4c6a-975e-1767b2fd37be","provider":"notion","permission":"admin","reason":"default"}
[2025-11-27T05:27:51.414Z] [INFO   ] 2025-11-27T05:27:51.414Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"f367c75b-b4ea-4d0e-96ba-76368f0525a6","provider":"slack","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:51.414Z] [INFO   ] 2025-11-27T05:27:51.414Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"f0476067-a30a-4ab4-b9fb-1f5a647a7be7","provider":"facebook","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:51.414Z] [INFO   ] 2025-11-27T05:27:51.414Z [DEBUG] ğŸ“‹ [API /api/integrations] Using explicit permission {"integrationId":"15a626c1-ecf2-4635-a287-1ddc3967a6ce","provider":"gmail","permission":"admin"}
[2025-11-27T05:27:51.414Z] [INFO   ] 2025-11-27T05:27:51.414Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"a6595fc9-22fe-43dc-82a9-a3301cb3b373","provider":"google-docs","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:51.414Z] [INFO   ] 2025-11-27T05:27:51.414Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"6f959e59-18c3-47f0-a20f-cc8a268ceb21","provider":"hubspot","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:51.414Z] [INFO   ] 2025-11-27T05:27:51.414Z [DEBUG] ğŸ“‹ [API /api/integrations] Using explicit permission {"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","provider":"google-sheets","permission":"admin"}
[2025-11-27T05:27:51.415Z] [INFO   ] 2025-11-27T05:27:51.414Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"dd542556-581b-4711-ae40-304c81619938","provider":"airtable","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:51.415Z] [INFO   ] 2025-11-27T05:27:51.415Z [DEBUG] ğŸ“‹ [API /api/integrations] Using explicit permission {"integrationId":"8ef5c519-18a9-4a81-829e-b7a48b58f668","provider":"gumroad","permission":"admin"}
[2025-11-27T05:27:51.415Z] [INFO   ] 2025-11-27T05:27:51.415Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"3d77fbe9-de84-47a8-ba84-a80981ffd516","provider":"google-calendar","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:51.415Z] [INFO   ] 2025-11-27T05:27:51.415Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"91c85768-928a-445d-89ae-28521f5ee7f2","provider":"google-analytics","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:51.415Z] [INFO   ] 2025-11-27T05:27:51.415Z [DEBUG] âœ… [API /api/integrations] Returning integrations {"count":15,"workspaceType":"personal"}
[2025-11-27T05:27:51.469Z] [INFO   ] 2025-11-27T05:27:51.469Z [DEBUG] ğŸ“Š [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":15,"permissionsCount":4,"integrationsError":null,"permissionsError":null}
[2025-11-27T05:27:51.469Z] [INFO   ] 2025-11-27T05:27:51.469Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"c61c89e4-4f78-4069-8bfe-d36dd81cf6fc","provider":"dropbox","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:51.469Z] [INFO   ] 2025-11-27T05:27:51.469Z [DEBUG] ğŸ“‹ [API /api/integrations] Using explicit permission {"integrationId":"580105eb-df9a-4b0a-a934-43e5a99f9bb8","provider":"discord","permission":"admin"}
[2025-11-27T05:27:51.469Z] [INFO   ] 2025-11-27T05:27:51.469Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"0e7c83e0-6c16-48f6-b7d8-77d3592dca01","provider":"github","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:51.469Z] [INFO   ] 2025-11-27T05:27:51.469Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"cb175247-1caa-430b-85c0-dd7ca5ca370b","provider":"google-drive","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:51.469Z] [INFO   ] 2025-11-27T05:27:51.469Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"f172e387-ab0c-4c6a-975e-1767b2fd37be","provider":"notion","permission":"admin","reason":"default"}
[2025-11-27T05:27:51.469Z] [INFO   ] 2025-11-27T05:27:51.469Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"f367c75b-b4ea-4d0e-96ba-76368f0525a6","provider":"slack","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:51.469Z] [INFO   ] 2025-11-27T05:27:51.469Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"f0476067-a30a-4ab4-b9fb-1f5a647a7be7","provider":"facebook","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:51.469Z] [INFO   ] 2025-11-27T05:27:51.469Z [DEBUG] ğŸ“‹ [API /api/integrations] Using explicit permission {"integrationId":"15a626c1-ecf2-4635-a287-1ddc3967a6ce","provider":"gmail","permission":"admin"}
[2025-11-27T05:27:51.469Z] [INFO   ] 2025-11-27T05:27:51.469Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"a6595fc9-22fe-43dc-82a9-a3301cb3b373","provider":"google-docs","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:51.469Z] [INFO   ] 2025-11-27T05:27:51.469Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"6f959e59-18c3-47f0-a20f-cc8a268ceb21","provider":"hubspot","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:51.469Z] [INFO   ] 2025-11-27T05:27:51.469Z [DEBUG] ğŸ“‹ [API /api/integrations] Using explicit permission {"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","provider":"google-sheets","permission":"admin"}
[2025-11-27T05:27:51.469Z] [INFO   ] 2025-11-27T05:27:51.469Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"dd542556-581b-4711-ae40-304c81619938","provider":"airtable","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:51.469Z] [INFO   ] 2025-11-27T05:27:51.469Z [DEBUG] ğŸ“‹ [API /api/integrations] Using explicit permission {"integrationId":"8ef5c519-18a9-4a81-829e-b7a48b58f668","provider":"gumroad","permission":"admin"}
[2025-11-27T05:27:51.469Z] [INFO   ] 2025-11-27T05:27:51.469Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"3d77fbe9-de84-47a8-ba84-a80981ffd516","provider":"google-calendar","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:51.469Z] [INFO   ] 2025-11-27T05:27:51.469Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"91c85768-928a-445d-89ae-28521f5ee7f2","provider":"google-analytics","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:51.469Z] [INFO   ] 2025-11-27T05:27:51.469Z [DEBUG] âœ… [API /api/integrations] Returning integrations {"count":15,"workspaceType":"personal"}
[2025-11-27T05:27:51.686Z] [INFO   ] 2025-11-27T05:27:51.686Z [DEBUG] [Middleware] Username check: {"path":"/workflows/api/flows/82bf971e-2cac-4500-bbc1-00577a2ed9df/revisions","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15654584287}
[2025-11-27T05:27:51.746Z] [INFO   ] 2025-11-27T05:27:51.746Z [DEBUG] [Middleware] Username check: {"path":"/workflows/api/flows/82bf971e-2cac-4500-bbc1-00577a2ed9df/revisions/548c73c6-dcfd-4208-b1e9-93a5ce5c72cf","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15654584347}
[2025-11-27T05:27:52.355Z] [INFO   ]  [37m[1mâ—‹[22m[39m Compiling /workflows/api/flows/[flowId]/revisions/[revisionId] ...
[2025-11-27T05:27:52.361Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled /workflows/api/flows/[flowId]/revisions/[revisionId] in 576ms (8153 modules)
[2025-11-27T05:27:53.288Z] [INFO   ] 2025-11-27T05:27:53.288Z [DEBUG] [Middleware] Username check: {"path":"/workflows/api/flows/82bf971e-2cac-4500-bbc1-00577a2ed9df/runs/latest","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15654585889}
[2025-11-27T05:27:53.475Z] [INFO   ] 2025-11-27T05:27:53.475Z [DEBUG] ğŸ“ [API /api/integrations] GET request received {"timestamp":"2025-11-27T05:27:53.475Z","url":"http://localhost:3000/api/integrations"}
[2025-11-27T05:27:53.552Z] [INFO   ] 2025-11-27T05:27:53.552Z [DEBUG] âœ… [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-27T05:27:53.552Z] [INFO   ] 2025-11-27T05:27:53.552Z [DEBUG] ğŸ  [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-27T05:27:53.589Z] [INFO   ] 2025-11-27T05:27:53.589Z [DEBUG] [runs/latest] Flow not found {"flowId":"82bf971e-2cac-4500-bbc1-00577a2ed9df"}
[2025-11-27T05:27:53.643Z] [INFO   ] 2025-11-27T05:27:53.643Z [DEBUG] ğŸ“Š [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":15,"permissionsCount":4,"integrationsError":null,"permissionsError":null}
[2025-11-27T05:27:53.643Z] [INFO   ] 2025-11-27T05:27:53.643Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"c61c89e4-4f78-4069-8bfe-d36dd81cf6fc","provider":"dropbox","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:53.643Z] [INFO   ] 2025-11-27T05:27:53.643Z [DEBUG] ğŸ“‹ [API /api/integrations] Using explicit permission {"integrationId":"580105eb-df9a-4b0a-a934-43e5a99f9bb8","provider":"discord","permission":"admin"}
[2025-11-27T05:27:53.644Z] [INFO   ] 2025-11-27T05:27:53.644Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"0e7c83e0-6c16-48f6-b7d8-77d3592dca01","provider":"github","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:53.644Z] [INFO   ] 2025-11-27T05:27:53.644Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"cb175247-1caa-430b-85c0-dd7ca5ca370b","provider":"google-drive","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:53.644Z] [INFO   ] 2025-11-27T05:27:53.644Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"f172e387-ab0c-4c6a-975e-1767b2fd37be","provider":"notion","permission":"admin","reason":"default"}
[2025-11-27T05:27:53.644Z] [INFO   ] 2025-11-27T05:27:53.644Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"f367c75b-b4ea-4d0e-96ba-76368f0525a6","provider":"slack","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:53.644Z] [INFO   ] 2025-11-27T05:27:53.644Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"f0476067-a30a-4ab4-b9fb-1f5a647a7be7","provider":"facebook","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:53.644Z] [INFO   ] 2025-11-27T05:27:53.644Z [DEBUG] ğŸ“‹ [API /api/integrations] Using explicit permission {"integrationId":"15a626c1-ecf2-4635-a287-1ddc3967a6ce","provider":"gmail","permission":"admin"}
[2025-11-27T05:27:53.644Z] [INFO   ] 2025-11-27T05:27:53.644Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"a6595fc9-22fe-43dc-82a9-a3301cb3b373","provider":"google-docs","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:53.644Z] [INFO   ] 2025-11-27T05:27:53.644Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"6f959e59-18c3-47f0-a20f-cc8a268ceb21","provider":"hubspot","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:53.644Z] [INFO   ] 2025-11-27T05:27:53.644Z [DEBUG] ğŸ“‹ [API /api/integrations] Using explicit permission {"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","provider":"google-sheets","permission":"admin"}
[2025-11-27T05:27:53.644Z] [INFO   ] 2025-11-27T05:27:53.644Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"dd542556-581b-4711-ae40-304c81619938","provider":"airtable","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:53.644Z] [INFO   ] 2025-11-27T05:27:53.644Z [DEBUG] ğŸ“‹ [API /api/integrations] Using explicit permission {"integrationId":"8ef5c519-18a9-4a81-829e-b7a48b58f668","provider":"gumroad","permission":"admin"}
[2025-11-27T05:27:53.644Z] [INFO   ] 2025-11-27T05:27:53.644Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"3d77fbe9-de84-47a8-ba84-a80981ffd516","provider":"google-calendar","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:53.644Z] [INFO   ] 2025-11-27T05:27:53.644Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"91c85768-928a-445d-89ae-28521f5ee7f2","provider":"google-analytics","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:53.644Z] [INFO   ] 2025-11-27T05:27:53.644Z [DEBUG] âœ… [API /api/integrations] Returning integrations {"count":15,"workspaceType":"personal"}
[2025-11-27T05:27:53.696Z] [INFO   ] 2025-11-27T05:27:53.696Z [DEBUG] ğŸ“ [API /api/integrations] GET request received {"timestamp":"2025-11-27T05:27:53.696Z","url":"http://localhost:3000/api/integrations"}
[2025-11-27T05:27:53.775Z] [INFO   ] 2025-11-27T05:27:53.775Z [DEBUG] âœ… [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-27T05:27:53.775Z] [INFO   ] 2025-11-27T05:27:53.775Z [DEBUG] ğŸ  [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-27T05:27:53.866Z] [INFO   ] 2025-11-27T05:27:53.866Z [DEBUG] ğŸ“Š [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":15,"permissionsCount":4,"integrationsError":null,"permissionsError":null}
[2025-11-27T05:27:53.866Z] [INFO   ] 2025-11-27T05:27:53.866Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"c61c89e4-4f78-4069-8bfe-d36dd81cf6fc","provider":"dropbox","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:53.866Z] [INFO   ] 2025-11-27T05:27:53.866Z [DEBUG] ğŸ“‹ [API /api/integrations] Using explicit permission {"integrationId":"580105eb-df9a-4b0a-a934-43e5a99f9bb8","provider":"discord","permission":"admin"}
[2025-11-27T05:27:53.866Z] [INFO   ] 2025-11-27T05:27:53.866Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"0e7c83e0-6c16-48f6-b7d8-77d3592dca01","provider":"github","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:53.866Z] [INFO   ] 2025-11-27T05:27:53.866Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"cb175247-1caa-430b-85c0-dd7ca5ca370b","provider":"google-drive","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:53.866Z] [INFO   ] 2025-11-27T05:27:53.866Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"f172e387-ab0c-4c6a-975e-1767b2fd37be","provider":"notion","permission":"admin","reason":"default"}
[2025-11-27T05:27:53.867Z] [INFO   ] 2025-11-27T05:27:53.867Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"f367c75b-b4ea-4d0e-96ba-76368f0525a6","provider":"slack","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:53.867Z] [INFO   ] 2025-11-27T05:27:53.867Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"f0476067-a30a-4ab4-b9fb-1f5a647a7be7","provider":"facebook","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:53.867Z] [INFO   ] 2025-11-27T05:27:53.867Z [DEBUG] ğŸ“‹ [API /api/integrations] Using explicit permission {"integrationId":"15a626c1-ecf2-4635-a287-1ddc3967a6ce","provider":"gmail","permission":"admin"}
[2025-11-27T05:27:53.867Z] [INFO   ] 2025-11-27T05:27:53.867Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"a6595fc9-22fe-43dc-82a9-a3301cb3b373","provider":"google-docs","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:53.867Z] [INFO   ] 2025-11-27T05:27:53.867Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"6f959e59-18c3-47f0-a20f-cc8a268ceb21","provider":"hubspot","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:53.867Z] [INFO   ] 2025-11-27T05:27:53.867Z [DEBUG] ğŸ“‹ [API /api/integrations] Using explicit permission {"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","provider":"google-sheets","permission":"admin"}
[2025-11-27T05:27:53.867Z] [INFO   ] 2025-11-27T05:27:53.867Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"dd542556-581b-4711-ae40-304c81619938","provider":"airtable","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:53.867Z] [INFO   ] 2025-11-27T05:27:53.867Z [DEBUG] ğŸ“‹ [API /api/integrations] Using explicit permission {"integrationId":"8ef5c519-18a9-4a81-829e-b7a48b58f668","provider":"gumroad","permission":"admin"}
[2025-11-27T05:27:53.867Z] [INFO   ] 2025-11-27T05:27:53.867Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"3d77fbe9-de84-47a8-ba84-a80981ffd516","provider":"google-calendar","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:53.867Z] [INFO   ] 2025-11-27T05:27:53.867Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"91c85768-928a-445d-89ae-28521f5ee7f2","provider":"google-analytics","permission":"admin","reason":"connected_by"}
[2025-11-27T05:27:53.867Z] [INFO   ] 2025-11-27T05:27:53.867Z [DEBUG] âœ… [API /api/integrations] Returning integrations {"count":15,"workspaceType":"personal"}
[2025-11-27T05:28:02.468Z] [INFO   ] ğŸ§ª [test-trigger] POST request received
[2025-11-27T05:28:02.470Z] [INFO   ] ğŸ§ª [test-trigger] Supabase client created
[2025-11-27T05:28:02.659Z] [INFO   ] ğŸ§ª [test-trigger] Auth check: {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0"
}
[2025-11-27T05:28:02.660Z] [INFO   ] ğŸ§ª [test-trigger] Request body: {
  "workflowId": "82bf971e-2cac-4500-bbc1-00577a2ed9df",
  "nodeId": "gmail_trigger_new_email-66214e1d-8271-4843-af4a-9fb3748f4428"
}
[2025-11-27T05:28:02.660Z] [INFO   ] ğŸ§ª [test-trigger] Fetching workflow...
[2025-11-27T05:28:02.747Z] [INFO   ] ğŸ§ª [test-trigger] Workflow not found: JSON object requested, multiple (or no) rows returned
[2025-11-27T05:28:37.399Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled in 4s (8167 modules)
[2025-11-27T05:28:37.669Z] [INFO   ] 2025-11-27T05:28:37.669Z [DEBUG] [Middleware] Username check: {"path":"/workflows/builder/82bf971e-2cac-4500-bbc1-00577a2ed9df","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15654630270}
[2025-11-27T05:28:38.130Z] [INFO   ] 2025-11-27T05:28:38.129Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-11-27T05:32:00.532Z] [INFO   ] ğŸ§ª [test-trigger] POST request received
[2025-11-27T05:32:00.537Z] [INFO   ] ğŸ§ª [test-trigger] Supabase client created
[2025-11-27T05:32:00.774Z] [INFO   ] ğŸ§ª [test-trigger] Auth check: {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0"
}
[2025-11-27T05:32:00.775Z] [INFO   ] ğŸ§ª [test-trigger] Request body: {
  "workflowId": "82bf971e-2cac-4500-bbc1-00577a2ed9df",
  "nodeId": "gmail_trigger_new_email-66214e1d-8271-4843-af4a-9fb3748f4428"
}
[2025-11-27T05:32:00.776Z] [INFO   ] ğŸ§ª [test-trigger] Fetching workflow... {
  "workflowId": "82bf971e-2cac-4500-bbc1-00577a2ed9df",
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0"
}
[2025-11-27T05:32:00.895Z] [INFO   ] ğŸ§ª [test-trigger] Workflow lookup result: {
  "found": false,
  "requestUserId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0",
  "match": false
}
[2025-11-27T05:32:01.005Z] [INFO   ] ğŸ§ª [test-trigger] Workflow does not exist
[2025-11-27T05:33:10.991Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled in 1923ms (6941 modules)
[2025-11-27T05:33:11.457Z] [INFO   ] 2025-11-27T05:33:11.456Z [DEBUG] [Middleware] Username check: {"path":"/workflows/builder/82bf971e-2cac-4500-bbc1-00577a2ed9df","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15654904057}
[2025-11-27T05:33:11.912Z] [INFO   ] 2025-11-27T05:33:11.911Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-11-27T05:33:31.567Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled in 4.8s (6941 modules)
[2025-11-27T05:33:31.877Z] [INFO   ] 2025-11-27T05:33:31.876Z [DEBUG] [Middleware] Username check: {"path":"/workflows/builder/82bf971e-2cac-4500-bbc1-00577a2ed9df","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15654924477}
[2025-11-27T05:33:32.297Z] [INFO   ] 2025-11-27T05:33:32.297Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-11-27T05:33:32.319Z] [INFO   ] 2025-11-27T05:33:32.319Z [DEBUG] [Middleware] Username check: {"path":"/workflows/api/flows/82bf971e-2cac-4500-bbc1-00577a2ed9df/revisions","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15654924919}
[2025-11-27T05:33:33.194Z] [INFO   ]  [37m[1mâ—‹[22m[39m Compiling /workflows/api/flows/[flowId]/revisions ...
[2025-11-27T05:33:33.232Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled /workflows/api/flows/[flowId]/revisions in 883ms (5098 modules)
[2025-11-27T05:33:34.190Z] [INFO   ] 2025-11-27T05:33:34.190Z [DEBUG] [Middleware] Username check: {"path":"/workflows/api/flows/82bf971e-2cac-4500-bbc1-00577a2ed9df/revisions/548c73c6-dcfd-4208-b1e9-93a5ce5c72cf","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15654926791}
[2025-11-27T05:33:34.567Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled /workflows/api/flows/[flowId]/revisions/[revisionId] in 344ms (5101 modules)
[2025-11-27T05:33:35.153Z] [INFO   ] 2025-11-27T05:33:35.153Z [DEBUG] [Middleware] Username check: {"path":"/workflows/api/flows/82bf971e-2cac-4500-bbc1-00577a2ed9df/runs/latest","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15654927754}
[2025-11-27T05:33:35.381Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled /workflows/api/flows/[flowId]/runs/latest in 463ms (5103 modules)
[2025-11-27T05:33:35.747Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled (5111 modules)
[2025-11-27T05:33:36.144Z] [INFO   ] 2025-11-27T05:33:36.144Z [DEBUG] [runs/latest] Flow not found {"flowId":"82bf971e-2cac-4500-bbc1-00577a2ed9df"}
[2025-11-27T05:33:36.493Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled /api/integrations in 434ms (5114 modules)
[2025-11-27T05:33:36.581Z] [INFO   ] 2025-11-27T05:33:36.580Z [DEBUG] ğŸ“ [API /api/integrations] GET request received {"timestamp":"2025-11-27T05:33:36.580Z","url":"http://localhost:3000/api/integrations"}
[2025-11-27T05:33:36.707Z] [INFO   ] 2025-11-27T05:33:36.707Z [DEBUG] âœ… [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-27T05:33:36.708Z] [INFO   ] 2025-11-27T05:33:36.708Z [DEBUG] ğŸ  [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-27T05:33:36.866Z] [INFO   ] 2025-11-27T05:33:36.866Z [DEBUG] ğŸ“Š [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":15,"permissionsCount":4,"integrationsError":null,"permissionsError":null}
[2025-11-27T05:33:36.867Z] [INFO   ] 2025-11-27T05:33:36.867Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"c61c89e4-4f78-4069-8bfe-d36dd81cf6fc","provider":"dropbox","permission":"admin","reason":"connected_by"}
[2025-11-27T05:33:36.867Z] [INFO   ] 2025-11-27T05:33:36.867Z [DEBUG] ğŸ“‹ [API /api/integrations] Using explicit permission {"integrationId":"580105eb-df9a-4b0a-a934-43e5a99f9bb8","provider":"discord","permission":"admin"}
[2025-11-27T05:33:36.867Z] [INFO   ] 2025-11-27T05:33:36.867Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"0e7c83e0-6c16-48f6-b7d8-77d3592dca01","provider":"github","permission":"admin","reason":"connected_by"}
[2025-11-27T05:33:36.867Z] [INFO   ] 2025-11-27T05:33:36.867Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"cb175247-1caa-430b-85c0-dd7ca5ca370b","provider":"google-drive","permission":"admin","reason":"connected_by"}
[2025-11-27T05:33:36.867Z] [INFO   ] 2025-11-27T05:33:36.867Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"f172e387-ab0c-4c6a-975e-1767b2fd37be","provider":"notion","permission":"admin","reason":"default"}
[2025-11-27T05:33:36.867Z] [INFO   ] 2025-11-27T05:33:36.867Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"f367c75b-b4ea-4d0e-96ba-76368f0525a6","provider":"slack","permission":"admin","reason":"connected_by"}
[2025-11-27T05:33:36.867Z] [INFO   ] 2025-11-27T05:33:36.867Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"f0476067-a30a-4ab4-b9fb-1f5a647a7be7","provider":"facebook","permission":"admin","reason":"connected_by"}
[2025-11-27T05:33:36.867Z] [INFO   ] 2025-11-27T05:33:36.867Z [DEBUG] ğŸ“‹ [API /api/integrations] Using explicit permission {"integrationId":"15a626c1-ecf2-4635-a287-1ddc3967a6ce","provider":"gmail","permission":"admin"}
[2025-11-27T05:33:36.867Z] [INFO   ] 2025-11-27T05:33:36.867Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"a6595fc9-22fe-43dc-82a9-a3301cb3b373","provider":"google-docs","permission":"admin","reason":"connected_by"}
[2025-11-27T05:33:36.867Z] [INFO   ] 2025-11-27T05:33:36.867Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"6f959e59-18c3-47f0-a20f-cc8a268ceb21","provider":"hubspot","permission":"admin","reason":"connected_by"}
[2025-11-27T05:33:36.867Z] [INFO   ] 2025-11-27T05:33:36.867Z [DEBUG] ğŸ“‹ [API /api/integrations] Using explicit permission {"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","provider":"google-sheets","permission":"admin"}
[2025-11-27T05:33:36.867Z] [INFO   ] 2025-11-27T05:33:36.867Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"dd542556-581b-4711-ae40-304c81619938","provider":"airtable","permission":"admin","reason":"connected_by"}
[2025-11-27T05:33:36.867Z] [INFO   ] 2025-11-27T05:33:36.867Z [DEBUG] ğŸ“‹ [API /api/integrations] Using explicit permission {"integrationId":"8ef5c519-18a9-4a81-829e-b7a48b58f668","provider":"gumroad","permission":"admin"}
[2025-11-27T05:33:36.867Z] [INFO   ] 2025-11-27T05:33:36.867Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"3d77fbe9-de84-47a8-ba84-a80981ffd516","provider":"google-calendar","permission":"admin","reason":"connected_by"}
[2025-11-27T05:33:36.867Z] [INFO   ] 2025-11-27T05:33:36.867Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"91c85768-928a-445d-89ae-28521f5ee7f2","provider":"google-analytics","permission":"admin","reason":"connected_by"}
[2025-11-27T05:33:36.867Z] [INFO   ] 2025-11-27T05:33:36.867Z [DEBUG] âœ… [API /api/integrations] Returning integrations {"count":15,"workspaceType":"personal"}
[2025-11-27T05:33:36.929Z] [INFO   ] 2025-11-27T05:33:36.929Z [DEBUG] ğŸ“ [API /api/integrations] GET request received {"timestamp":"2025-11-27T05:33:36.929Z","url":"http://localhost:3000/api/integrations"}
[2025-11-27T05:33:37.006Z] [INFO   ] 2025-11-27T05:33:37.006Z [DEBUG] âœ… [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-27T05:33:37.006Z] [INFO   ] 2025-11-27T05:33:37.006Z [DEBUG] ğŸ  [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-27T05:33:37.119Z] [INFO   ] 2025-11-27T05:33:37.119Z [DEBUG] ğŸ“Š [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":15,"permissionsCount":4,"integrationsError":null,"permissionsError":null}
[2025-11-27T05:33:37.119Z] [INFO   ] 2025-11-27T05:33:37.119Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"c61c89e4-4f78-4069-8bfe-d36dd81cf6fc","provider":"dropbox","permission":"admin","reason":"connected_by"}
[2025-11-27T05:33:37.119Z] [INFO   ] 2025-11-27T05:33:37.119Z [DEBUG] ğŸ“‹ [API /api/integrations] Using explicit permission {"integrationId":"580105eb-df9a-4b0a-a934-43e5a99f9bb8","provider":"discord","permission":"admin"}
[2025-11-27T05:33:37.119Z] [INFO   ] 2025-11-27T05:33:37.119Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"0e7c83e0-6c16-48f6-b7d8-77d3592dca01","provider":"github","permission":"admin","reason":"connected_by"}
[2025-11-27T05:33:37.119Z] [INFO   ] 2025-11-27T05:33:37.119Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"cb175247-1caa-430b-85c0-dd7ca5ca370b","provider":"google-drive","permission":"admin","reason":"connected_by"}
[2025-11-27T05:33:37.119Z] [INFO   ] 2025-11-27T05:33:37.119Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"f172e387-ab0c-4c6a-975e-1767b2fd37be","provider":"notion","permission":"admin","reason":"default"}
[2025-11-27T05:33:37.119Z] [INFO   ] 2025-11-27T05:33:37.119Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"f367c75b-b4ea-4d0e-96ba-76368f0525a6","provider":"slack","permission":"admin","reason":"connected_by"}
[2025-11-27T05:33:37.119Z] [INFO   ] 2025-11-27T05:33:37.119Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"f0476067-a30a-4ab4-b9fb-1f5a647a7be7","provider":"facebook","permission":"admin","reason":"connected_by"}
[2025-11-27T05:33:37.119Z] [INFO   ] 2025-11-27T05:33:37.119Z [DEBUG] ğŸ“‹ [API /api/integrations] Using explicit permission {"integrationId":"15a626c1-ecf2-4635-a287-1ddc3967a6ce","provider":"gmail","permission":"admin"}
[2025-11-27T05:33:37.119Z] [INFO   ] 2025-11-27T05:33:37.119Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"a6595fc9-22fe-43dc-82a9-a3301cb3b373","provider":"google-docs","permission":"admin","reason":"connected_by"}
[2025-11-27T05:33:37.119Z] [INFO   ] 2025-11-27T05:33:37.119Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"6f959e59-18c3-47f0-a20f-cc8a268ceb21","provider":"hubspot","permission":"admin","reason":"connected_by"}
[2025-11-27T05:33:37.119Z] [INFO   ] 2025-11-27T05:33:37.119Z [DEBUG] ğŸ“‹ [API /api/integrations] Using explicit permission {"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","provider":"google-sheets","permission":"admin"}
[2025-11-27T05:33:37.120Z] [INFO   ] 2025-11-27T05:33:37.120Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"dd542556-581b-4711-ae40-304c81619938","provider":"airtable","permission":"admin","reason":"connected_by"}
[2025-11-27T05:33:37.120Z] [INFO   ] 2025-11-27T05:33:37.120Z [DEBUG] ğŸ“‹ [API /api/integrations] Using explicit permission {"integrationId":"8ef5c519-18a9-4a81-829e-b7a48b58f668","provider":"gumroad","permission":"admin"}
[2025-11-27T05:33:37.120Z] [INFO   ] 2025-11-27T05:33:37.120Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"3d77fbe9-de84-47a8-ba84-a80981ffd516","provider":"google-calendar","permission":"admin","reason":"connected_by"}
[2025-11-27T05:33:37.120Z] [INFO   ] 2025-11-27T05:33:37.120Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"91c85768-928a-445d-89ae-28521f5ee7f2","provider":"google-analytics","permission":"admin","reason":"connected_by"}
[2025-11-27T05:33:37.120Z] [INFO   ] 2025-11-27T05:33:37.120Z [DEBUG] âœ… [API /api/integrations] Returning integrations {"count":15,"workspaceType":"personal"}
[2025-11-27T05:33:39.589Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled in 1413ms (6960 modules)
[2025-11-27T05:33:39.755Z] [INFO   ] 2025-11-27T05:33:39.755Z [DEBUG] [Middleware] Username check: {"path":"/workflows/builder/82bf971e-2cac-4500-bbc1-00577a2ed9df","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15654932356}
[2025-11-27T05:33:40.135Z] [INFO   ] 2025-11-27T05:33:40.135Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-11-27T05:33:40.157Z] [INFO   ] 2025-11-27T05:33:40.157Z [DEBUG] [Middleware] Username check: {"path":"/workflows/api/flows/82bf971e-2cac-4500-bbc1-00577a2ed9df/revisions","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15654932758}
[2025-11-27T05:33:40.700Z] [INFO   ] 2025-11-27T05:33:40.699Z [DEBUG] [Middleware] Username check: {"path":"/workflows/api/flows/82bf971e-2cac-4500-bbc1-00577a2ed9df/revisions/548c73c6-dcfd-4208-b1e9-93a5ce5c72cf","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15654933300}
[2025-11-27T05:33:41.238Z] [INFO   ] 2025-11-27T05:33:41.237Z [DEBUG] [Middleware] Username check: {"path":"/workflows/api/flows/82bf971e-2cac-4500-bbc1-00577a2ed9df/runs/latest","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15654933838}
[2025-11-27T05:33:41.356Z] [INFO   ] 2025-11-27T05:33:41.356Z [DEBUG] ğŸ“ [API /api/integrations] GET request received {"timestamp":"2025-11-27T05:33:41.356Z","url":"http://localhost:3000/api/integrations"}
[2025-11-27T05:33:41.441Z] [INFO   ] 2025-11-27T05:33:41.441Z [DEBUG] âœ… [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-27T05:33:41.441Z] [INFO   ] 2025-11-27T05:33:41.441Z [DEBUG] ğŸ  [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-27T05:33:41.530Z] [INFO   ] 2025-11-27T05:33:41.530Z [DEBUG] ğŸ“Š [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":15,"permissionsCount":4,"integrationsError":null,"permissionsError":null}
[2025-11-27T05:33:41.530Z] [INFO   ] 2025-11-27T05:33:41.530Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"c61c89e4-4f78-4069-8bfe-d36dd81cf6fc","provider":"dropbox","permission":"admin","reason":"connected_by"}
[2025-11-27T05:33:41.530Z] [INFO   ] 2025-11-27T05:33:41.530Z [DEBUG] ğŸ“‹ [API /api/integrations] Using explicit permission {"integrationId":"580105eb-df9a-4b0a-a934-43e5a99f9bb8","provider":"discord","permission":"admin"}
[2025-11-27T05:33:41.530Z] [INFO   ] 2025-11-27T05:33:41.530Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"0e7c83e0-6c16-48f6-b7d8-77d3592dca01","provider":"github","permission":"admin","reason":"connected_by"}
[2025-11-27T05:33:41.531Z] [INFO   ] 2025-11-27T05:33:41.531Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"cb175247-1caa-430b-85c0-dd7ca5ca370b","provider":"google-drive","permission":"admin","reason":"connected_by"}
[2025-11-27T05:33:41.531Z] [INFO   ] 2025-11-27T05:33:41.531Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"f172e387-ab0c-4c6a-975e-1767b2fd37be","provider":"notion","permission":"admin","reason":"default"}
[2025-11-27T05:33:41.531Z] [INFO   ] 2025-11-27T05:33:41.531Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"f367c75b-b4ea-4d0e-96ba-76368f0525a6","provider":"slack","permission":"admin","reason":"connected_by"}
[2025-11-27T05:33:41.531Z] [INFO   ] 2025-11-27T05:33:41.531Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"f0476067-a30a-4ab4-b9fb-1f5a647a7be7","provider":"facebook","permission":"admin","reason":"connected_by"}
[2025-11-27T05:33:41.531Z] [INFO   ] 2025-11-27T05:33:41.531Z [DEBUG] ğŸ“‹ [API /api/integrations] Using explicit permission {"integrationId":"15a626c1-ecf2-4635-a287-1ddc3967a6ce","provider":"gmail","permission":"admin"}
[2025-11-27T05:33:41.531Z] [INFO   ] 2025-11-27T05:33:41.531Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"a6595fc9-22fe-43dc-82a9-a3301cb3b373","provider":"google-docs","permission":"admin","reason":"connected_by"}
[2025-11-27T05:33:41.531Z] [INFO   ] 2025-11-27T05:33:41.531Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"6f959e59-18c3-47f0-a20f-cc8a268ceb21","provider":"hubspot","permission":"admin","reason":"connected_by"}
[2025-11-27T05:33:41.531Z] [INFO   ] 2025-11-27T05:33:41.531Z [DEBUG] ğŸ“‹ [API /api/integrations] Using explicit permission {"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","provider":"google-sheets","permission":"admin"}
[2025-11-27T05:33:41.531Z] [INFO   ] 2025-11-27T05:33:41.531Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"dd542556-581b-4711-ae40-304c81619938","provider":"airtable","permission":"admin","reason":"connected_by"}
[2025-11-27T05:33:41.531Z] [INFO   ] 2025-11-27T05:33:41.531Z [DEBUG] ğŸ“‹ [API /api/integrations] Using explicit permission {"integrationId":"8ef5c519-18a9-4a81-829e-b7a48b58f668","provider":"gumroad","permission":"admin"}
[2025-11-27T05:33:41.531Z] [INFO   ] 2025-11-27T05:33:41.531Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"3d77fbe9-de84-47a8-ba84-a80981ffd516","provider":"google-calendar","permission":"admin","reason":"connected_by"}
[2025-11-27T05:33:41.531Z] [INFO   ] 2025-11-27T05:33:41.531Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"91c85768-928a-445d-89ae-28521f5ee7f2","provider":"google-analytics","permission":"admin","reason":"connected_by"}
[2025-11-27T05:33:41.531Z] [INFO   ] 2025-11-27T05:33:41.531Z [DEBUG] âœ… [API /api/integrations] Returning integrations {"count":15,"workspaceType":"personal"}
[2025-11-27T05:33:41.586Z] [INFO   ] 2025-11-27T05:33:41.586Z [DEBUG] ğŸ“ [API /api/integrations] GET request received {"timestamp":"2025-11-27T05:33:41.586Z","url":"http://localhost:3000/api/integrations"}
[2025-11-27T05:33:41.589Z] [INFO   ] 2025-11-27T05:33:41.589Z [DEBUG] [runs/latest] Flow not found {"flowId":"82bf971e-2cac-4500-bbc1-00577a2ed9df"}
[2025-11-27T05:33:41.670Z] [INFO   ] 2025-11-27T05:33:41.670Z [DEBUG] âœ… [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-27T05:33:41.671Z] [INFO   ] 2025-11-27T05:33:41.671Z [DEBUG] ğŸ  [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-27T05:33:41.769Z] [INFO   ] 2025-11-27T05:33:41.769Z [DEBUG] ğŸ“Š [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":15,"permissionsCount":4,"integrationsError":null,"permissionsError":null}
[2025-11-27T05:33:41.769Z] [INFO   ] 2025-11-27T05:33:41.769Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"c61c89e4-4f78-4069-8bfe-d36dd81cf6fc","provider":"dropbox","permission":"admin","reason":"connected_by"}
[2025-11-27T05:33:41.769Z] [INFO   ] 2025-11-27T05:33:41.769Z [DEBUG] ğŸ“‹ [API /api/integrations] Using explicit permission {"integrationId":"580105eb-df9a-4b0a-a934-43e5a99f9bb8","provider":"discord","permission":"admin"}
[2025-11-27T05:33:41.769Z] [INFO   ] 2025-11-27T05:33:41.769Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"0e7c83e0-6c16-48f6-b7d8-77d3592dca01","provider":"github","permission":"admin","reason":"connected_by"}
[2025-11-27T05:33:41.769Z] [INFO   ] 2025-11-27T05:33:41.769Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"cb175247-1caa-430b-85c0-dd7ca5ca370b","provider":"google-drive","permission":"admin","reason":"connected_by"}
[2025-11-27T05:33:41.769Z] [INFO   ] 2025-11-27T05:33:41.769Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"f172e387-ab0c-4c6a-975e-1767b2fd37be","provider":"notion","permission":"admin","reason":"default"}
[2025-11-27T05:33:41.769Z] [INFO   ] 2025-11-27T05:33:41.769Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"f367c75b-b4ea-4d0e-96ba-76368f0525a6","provider":"slack","permission":"admin","reason":"connected_by"}
[2025-11-27T05:33:41.769Z] [INFO   ] 2025-11-27T05:33:41.769Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"f0476067-a30a-4ab4-b9fb-1f5a647a7be7","provider":"facebook","permission":"admin","reason":"connected_by"}
[2025-11-27T05:33:41.769Z] [INFO   ] 2025-11-27T05:33:41.769Z [DEBUG] ğŸ“‹ [API /api/integrations] Using explicit permission {"integrationId":"15a626c1-ecf2-4635-a287-1ddc3967a6ce","provider":"gmail","permission":"admin"}
[2025-11-27T05:33:41.770Z] [INFO   ] 2025-11-27T05:33:41.769Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"a6595fc9-22fe-43dc-82a9-a3301cb3b373","provider":"google-docs","permission":"admin","reason":"connected_by"}
[2025-11-27T05:33:41.770Z] [INFO   ] 2025-11-27T05:33:41.770Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"6f959e59-18c3-47f0-a20f-cc8a268ceb21","provider":"hubspot","permission":"admin","reason":"connected_by"}
[2025-11-27T05:33:41.770Z] [INFO   ] 2025-11-27T05:33:41.770Z [DEBUG] ğŸ“‹ [API /api/integrations] Using explicit permission {"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","provider":"google-sheets","permission":"admin"}
[2025-11-27T05:33:41.770Z] [INFO   ] 2025-11-27T05:33:41.770Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"dd542556-581b-4711-ae40-304c81619938","provider":"airtable","permission":"admin","reason":"connected_by"}
[2025-11-27T05:33:41.770Z] [INFO   ] 2025-11-27T05:33:41.770Z [DEBUG] ğŸ“‹ [API /api/integrations] Using explicit permission {"integrationId":"8ef5c519-18a9-4a81-829e-b7a48b58f668","provider":"gumroad","permission":"admin"}
[2025-11-27T05:33:41.770Z] [INFO   ] 2025-11-27T05:33:41.770Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"3d77fbe9-de84-47a8-ba84-a80981ffd516","provider":"google-calendar","permission":"admin","reason":"connected_by"}
[2025-11-27T05:33:41.770Z] [INFO   ] 2025-11-27T05:33:41.770Z [DEBUG] ğŸ“‹ [API /api/integrations] Using implicit permission {"integrationId":"91c85768-928a-445d-89ae-28521f5ee7f2","provider":"google-analytics","permission":"admin","reason":"connected_by"}
[2025-11-27T05:33:41.770Z] [INFO   ] 2025-11-27T05:33:41.770Z [DEBUG] âœ… [API /api/integrations] Returning integrations {"count":15,"workspaceType":"personal"}
[2025-11-27T05:35:47.236Z] [INFO   ]  [37m[1mâ—‹[22m[39m Compiling /api/workflows/test-trigger ...
[2025-11-27T05:35:53.168Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled /api/workflows/test-trigger in 6.9s (6294 modules)
[2025-11-27T05:35:53.510Z] [INFO   ] ğŸ§ª [test-trigger] POST request received
[2025-11-27T05:35:53.518Z] [INFO   ] ğŸ§ª [test-trigger] Supabase client created
[2025-11-27T05:35:53.680Z] [INFO   ] ğŸ§ª [test-trigger] Auth check: {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0"
}
[2025-11-27T05:35:53.681Z] [INFO   ] ğŸ§ª [test-trigger] Request body: {
  "workflowId": "82bf971e-2cac-4500-bbc1-00577a2ed9df",
  "nodeId": "gmail_trigger_new_email-66214e1d-8271-4843-af4a-9fb3748f4428",
  "hasProvidedNodes": true,
  "providedNodesCount": 3
}
[2025-11-27T05:35:53.681Z] [INFO   ] ğŸ§ª [test-trigger] Using provided nodes (unsaved workflow)
[2025-11-27T05:35:53.681Z] [INFO   ] ğŸ§ª [test-trigger] Searching for trigger node in 3 nodes
[2025-11-27T05:35:53.681Z] [INFO   ] ğŸ§ª [test-trigger] Node 0: {
  "id": "gmail_trigger_new_email-66214e1d-8271-4843-af4a-9fb3748f4428",
  "type": "custom",
  "dataType": "gmail_trigger_new_email",
  "isTrigger": true,
  "providerId": "gmail"
}
[2025-11-27T05:35:53.681Z] [INFO   ] ğŸ§ª [test-trigger] Node 1: {
  "id": "ai_agent-485d88bb-197f-429b-8ef0-6ad7729de231",
  "type": "custom",
  "dataType": "ai_agent",
  "isTrigger": false,
  "providerId": "ai"
}
[2025-11-27T05:35:53.681Z] [INFO   ] ğŸ§ª [test-trigger] Node 2: {
  "id": "discord_action_send_message-a5deb258-ed70-47ea-aa22-5f2905ca82fb",
  "type": "custom",
  "dataType": "discord_action_send_message",
  "isTrigger": false,
  "providerId": "discord"
}
[2025-11-27T05:35:53.683Z] [INFO   ] ğŸ§ª [test-trigger] Trigger node details: {
  "nodeId": "gmail_trigger_new_email-66214e1d-8271-4843-af4a-9fb3748f4428",
  "providerId": "gmail",
  "triggerType": "gmail_trigger_new_email",
  "configKeys": [
    "from",
    "labelIds",
    "_label_from",
    "aiFailClosed",
    "hasAttachment",
    "_label_labelIds",
    "aiContentFilter",
    "subjectExactMatch",
    "aiFilterConfidence",
    "_label_hasAttachment",
    "aiUseEmbeddingPrefilter",
    "_label_aiFilterConfidence"
  ],
  "fullTriggerData": {
    "label": "New Email",
    "title": "New Email",
    "type": "gmail_trigger_new_email",
    "config": {
      "from": "stoddard.nathaniel@yahoo.com",
      "labelIds": [
        "INBOX"
      ],
      "_label_from": "Nathaniel Stoddard <stoddard.nathaniel@yahoo.com>",
      "aiFailClosed": "",
      "hasAttachment": "any",
      "_label_labelIds": "INBOX",
      "aiContentFilter": "",
      "subjectExactMatch": true,
      "aiFilterConfidence": "",
      "_label_hasAttachment": "any",
      "aiUseEmbeddingPrefilter": "",
      "_label_aiFilterConfidence": "Balanced (70%+ match)"
    },
    "description": "Triggers when a new email is received. Supports AI-powered semantic filtering to trigger on emails about specific topics.",
    "providerId": "gmail",
    "icon": {},
    "isTrigger": true,
    "agentHighlights": [
      "subjectExactMatch",
      "hasAttachment",
      "labelIds",
      "aiFilterConfidence",
      "aiFailClosed",
      "aiUseEmbeddingPrefilter",
      "from",
      "_label_hasAttachment",
      "_label_labelIds",
      "_label_aiFilterConfidence",
      "_label_from",
      "__dynamicOptions",
      "__validationState",
      "aiContentFilter"
    ],
    "costHint": 0
  }
}
[2025-11-27T05:35:53.684Z] [INFO   ] 2025-11-27T05:35:53.684Z [DEBUG] ğŸ§ª Testing trigger for workflow 82bf971e-2cac-4500-bbc1-00577a2ed9df {"nodeId":"gmail_trigger_new_email-66214e1d-8271-4843-af4a-9fb3748f4428","providerId":"gmail","triggerType":"gmail_trigger_new_email"}
[2025-11-27T05:35:53.684Z] [INFO   ] ğŸ§ª [test-trigger] Importing trigger lifecycle manager...
[2025-11-27T05:35:55.867Z] [INFO   ] 2025-11-27T05:35:55.866Z [DEBUG] ğŸ“ Registered trigger provider: microsoft
[2025-11-27T05:35:55.867Z] [INFO   ] 2025-11-27T05:35:55.867Z [DEBUG] ğŸ“ Registered trigger provider: microsoft-outlook
[2025-11-27T05:35:55.867Z] [INFO   ] 2025-11-27T05:35:55.867Z [DEBUG] ğŸ“ Registered trigger provider: microsoft-onenote
[2025-11-27T05:35:55.867Z] [INFO   ] 2025-11-27T05:35:55.867Z [DEBUG] ğŸ“ Registered trigger provider: microsoft-excel
[2025-11-27T05:35:55.868Z] [INFO   ] 2025-11-27T05:35:55.867Z [DEBUG] ğŸ“ Registered trigger provider: onedrive
[2025-11-27T05:35:55.868Z] [INFO   ] 2025-11-27T05:35:55.868Z [DEBUG] ğŸ“ Registered trigger provider: teams
[2025-11-27T05:35:55.868Z] [INFO   ] 2025-11-27T05:35:55.868Z [DEBUG] ğŸ“ Registered trigger provider: airtable
[2025-11-27T05:35:55.868Z] [INFO   ] 2025-11-27T05:35:55.868Z [DEBUG] ğŸ“ Registered trigger provider: discord
[2025-11-27T05:35:55.869Z] [INFO   ] 2025-11-27T05:35:55.869Z [DEBUG] ğŸ“ Registered trigger provider: slack
[2025-11-27T05:35:55.869Z] [INFO   ] 2025-11-27T05:35:55.869Z [DEBUG] ğŸ“ Registered trigger provider: gmail
[2025-11-27T05:35:55.869Z] [INFO   ] 2025-11-27T05:35:55.869Z [DEBUG] ğŸ“ Registered trigger provider: google-calendar
[2025-11-27T05:35:55.870Z] [INFO   ] 2025-11-27T05:35:55.869Z [DEBUG] ğŸ“ Registered trigger provider: google-drive
[2025-11-27T05:35:55.870Z] [INFO   ] 2025-11-27T05:35:55.870Z [DEBUG] ğŸ“ Registered trigger provider: google-sheets
[2025-11-27T05:35:55.870Z] [INFO   ] 2025-11-27T05:35:55.870Z [DEBUG] ğŸ“ Registered trigger provider: google-docs
[2025-11-27T05:35:55.871Z] [INFO   ] 2025-11-27T05:35:55.870Z [DEBUG] ğŸ“ Registered trigger provider: stripe
[2025-11-27T05:35:55.871Z] [INFO   ] 2025-11-27T05:35:55.871Z [DEBUG] ğŸ“ Registered trigger provider: shopify
[2025-11-27T05:35:55.871Z] [INFO   ] 2025-11-27T05:35:55.871Z [DEBUG] ğŸ“ Registered trigger provider: notion
[2025-11-27T05:35:55.871Z] [INFO   ] 2025-11-27T05:35:55.871Z [DEBUG] ğŸ“ Registered trigger provider: hubspot
[2025-11-27T05:35:55.871Z] [INFO   ] 2025-11-27T05:35:55.871Z [DEBUG] ğŸ“ Registered trigger provider: monday
[2025-11-27T05:35:55.871Z] [INFO   ] 2025-11-27T05:35:55.871Z [DEBUG] ğŸ“ Registered trigger provider: gumroad
[2025-11-27T05:35:55.871Z] [INFO   ] 2025-11-27T05:35:55.871Z [DEBUG] ğŸ“ Registered trigger provider: webhook
[2025-11-27T05:35:55.871Z] [INFO   ] 2025-11-27T05:35:55.871Z [DEBUG] âœ… Trigger lifecycle providers registered: ["microsoft","microsoft-outlook","microsoft-onenote","microsoft-excel","onedrive","teams","airtable","discord","slack","gmail","google-calendar","google-drive","google-sheets","google-docs","stripe","shopify","notion","hubspot","monday","gumroad","webhook"]
[2025-11-27T05:35:55.875Z] [INFO   ] ğŸ§ª [test-trigger] Registered providers: [
  "microsoft",
  "microsoft-outlook",
  "microsoft-onenote",
  "microsoft-excel",
  "onedrive",
  "teams",
  "airtable",
  "discord",
  "slack",
  "gmail",
  "google-calendar",
  "google-drive",
  "google-sheets",
  "google-docs",
  "stripe",
  "shopify",
  "notion",
  "hubspot",
  "monday",
  "gumroad",
  "webhook"
]
[2025-11-27T05:35:55.875Z] [INFO   ] ğŸ§ª [test-trigger] Is provider registered? {
  "providerId": "gmail",
  "isProviderRegistered": true
}
[2025-11-27T05:35:55.875Z] [INFO   ] ğŸ§ª [test-trigger] Activating trigger...
[2025-11-27T05:35:55.876Z] [INFO   ] ğŸ§ª [test-trigger] Trigger node being passed: {
  "id": "gmail_trigger_new_email-66214e1d-8271-4843-af4a-9fb3748f4428",
  "type": "custom",
  "position": {
    "x": 1020,
    "y": 120
  },
  "positionAbsolute": {
    "x": 1020,
    "y": 120
  },
  "data": {
    "label": "New Email",
    "title": "New Email",
    "type": "gmail_trigger_new_email",
    "config": {
      "from": "stoddard.nathaniel@yahoo.com",
      "labelIds": [
        "INBOX"
      ],
      "_label_from": "Nathaniel Stoddard <stoddard.nathaniel@yahoo.com>",
      "aiFailClosed": "",
      "hasAttachment": "any",
      "_label_labelIds": "INBOX",
      "aiContentFilter": "",
      "subjectExactMatch": true,
      "aiFilterConfidence": "",
      "_label_hasAttachment": "any",
      "aiUseEmbeddingPrefilter": "",
      "_label_aiFilterConfidence": "Balanced (70%+ match)"
    },
    "description": "Triggers when a new email is received. Supports AI-powered semantic filtering to trigger on emails about specific topics.",
    "providerId": "gmail",
    "icon": {},
    "isTrigger": true,
    "agentHighlights": [
      "subjectExactMatch",
      "hasAttachment",
      "labelIds",
      "aiFilterConfidence",
      "aiFailClosed",
      "aiUseEmbeddingPrefilter",
      "from",
      "_label_hasAttachment",
      "_label_labelIds",
      "_label_aiFilterConfidence",
      "_label_from",
      "__dynamicOptions",
      "__validationState",
      "aiContentFilter"
    ],
    "costHint": 0
  },
  "measured": {
    "width": 360,
    "height": 79
  }
}
[2025-11-27T05:35:55.876Z] [INFO   ] 2025-11-27T05:35:55.876Z [DEBUG] ğŸš€ Activating 1 triggers for workflow 82bf971e-2cac-4500-bbc1-00577a2ed9df
[2025-11-27T05:35:55.877Z] [INFO   ] 2025-11-27T05:35:55.877Z [DEBUG] ğŸ”” Activating Google API trigger for workflow 82bf971e-2cac-4500-bbc1-00577a2ed9df {"triggerType":"gmail_trigger_new_email","providerId":"gmail","config":{"from":"stoddard.nathaniel@yahoo.com","labelIds":["INBOX"],"_label_from":"Nathaniel Stoddard <stoddard.nathaniel@yahoo.com>","aiFailClosed":"","hasAttachment":"any","_label_labelIds":"INBOX","aiContentFilter":"","subjectExactMatch":true,"aiFilterConfidence":"","_label_hasAttachment":"any","aiUseEmbeddingPrefilter":"","_label_aiFilterConfidence":"Balanced (70%+ match)"}}
[2025-11-27T05:35:55.989Z] [INFO   ] 2025-11-27T05:35:55.989Z [DEBUG] ğŸ“¤ Creating Google push notification {"api":"gmail","resourceId":null,"channelId":"chainreact-82bf971e-2cac-4500-bbc1-00577a2ed9df-1764221755989","webhookUrl":"https://9b7007881520.ngrok-free.app/api/webhooks/google/gmail"}
[2025-11-27T05:35:55.990Z] [INFO   ] 2025-11-27T05:35:55.989Z [DEBUG] ğŸ“§ Creating Gmail watch with Pub/Sub topic: projects/chainreact-462214/topics/gmail-notifications {"labelIds":["INBOX"],"labelFilterAction":"include"}
[2025-11-27T05:35:56.076Z] [INFO   ] 2025-11-27T05:35:56.076Z [DEBUG] [Middleware] Username check: {"path":"/workflows/builder/82bf971e-2cac-4500-bbc1-00577a2ed9df","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15655068677}
[2025-11-27T05:35:56.408Z] [INFO   ] 2025-11-27T05:35:56.408Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-11-27T05:35:56.444Z] [INFO   ] 2025-11-27T05:35:56.444Z [DEBUG] âœ… Gmail watch created - historyId: 6878304 {"watchingFolders":"INBOX"}
[2025-11-27T05:35:56.632Z] [INFO   ] 2025-11-27T05:35:56.632Z [DEBUG] âœ… Google gmail push notification created: chainreact-82bf971e-2cac-4500-bbc1-00577a2ed9df-1764221755989
[2025-11-27T05:35:56.632Z] [INFO   ] 2025-11-27T05:35:56.632Z [DEBUG] âœ… Activated trigger: gmail/gmail_trigger_new_email for workflow 82bf971e-2cac-4500-bbc1-00577a2ed9df
[2025-11-27T05:35:56.632Z] [INFO   ] ğŸ§ª [test-trigger] âœ… Trigger activated successfully!
[2025-11-27T05:35:56.632Z] [INFO   ] 2025-11-27T05:35:56.632Z [DEBUG] âœ… Trigger activated for testing, polling for events...
[2025-11-27T05:35:56.739Z] [INFO   ] ğŸ§ª [test-trigger] Created trigger resources: []
[2025-11-27T05:35:56.739Z] [INFO   ] ğŸ§ª [test-trigger] Starting to poll for events...
[2025-11-27T05:35:56.739Z] [INFO   ] ğŸ§ª [test-trigger] Poll #1 (0s elapsed)
[2025-11-27T05:35:58.929Z] [INFO   ] ğŸ§ª [test-trigger] Poll #2 (2s elapsed)
[2025-11-27T05:36:01.104Z] [INFO   ] ğŸ§ª [test-trigger] Poll #3 (4s elapsed)
[2025-11-27T05:36:03.266Z] [INFO   ] ğŸ§ª [test-trigger] Poll #4 (7s elapsed)
[2025-11-27T05:36:05.421Z] [INFO   ] ğŸ§ª [test-trigger] Poll #5 (9s elapsed)
[2025-11-27T05:36:07.959Z] [INFO   ] ğŸ§ª [test-trigger] Poll #6 (11s elapsed)
[2025-11-27T05:36:10.132Z] [INFO   ] ğŸ§ª [test-trigger] Poll #7 (13s elapsed)
[2025-11-27T05:36:12.301Z] [INFO   ] ğŸ§ª [test-trigger] Poll #8 (16s elapsed)
[2025-11-27T05:36:14.480Z] [INFO   ] ğŸ§ª [test-trigger] Poll #9 (18s elapsed)
[2025-11-27T05:36:16.642Z] [INFO   ] ğŸ§ª [test-trigger] Poll #10 (20s elapsed)
[2025-11-27T05:36:18.811Z] [INFO   ] ğŸ§ª [test-trigger] Poll #11 (22s elapsed)
[2025-11-27T05:36:20.982Z] [INFO   ] ğŸ§ª [test-trigger] Poll #12 (24s elapsed)
[2025-11-27T05:36:23.158Z] [INFO   ] ğŸ§ª [test-trigger] Poll #13 (26s elapsed)
[2025-11-27T05:36:25.323Z] [INFO   ] ğŸ§ª [test-trigger] Poll #14 (29s elapsed)
[2025-11-27T05:36:27.481Z] [INFO   ] ğŸ§ª [test-trigger] Poll #15 (31s elapsed)
[2025-11-27T05:36:29.639Z] [INFO   ] ğŸ§ª [test-trigger] Poll #16 (33s elapsed)
[2025-11-27T05:36:31.793Z] [INFO   ] ğŸ§ª [test-trigger] Poll #17 (35s elapsed)
[2025-11-27T05:36:33.953Z] [INFO   ] ğŸ§ª [test-trigger] Poll #18 (37s elapsed)
[2025-11-27T05:36:36.113Z] [INFO   ] ğŸ§ª [test-trigger] Poll #19 (39s elapsed)
[2025-11-27T05:36:38.271Z] [INFO   ] ğŸ§ª [test-trigger] Poll #20 (42s elapsed)
[2025-11-27T05:36:40.436Z] [INFO   ] ğŸ§ª [test-trigger] Poll #21 (44s elapsed)
[2025-11-27T05:36:42.590Z] [INFO   ] ğŸ§ª [test-trigger] Poll #22 (46s elapsed)
[2025-11-27T05:36:44.755Z] [INFO   ] ğŸ§ª [test-trigger] Poll #23 (48s elapsed)
[2025-11-27T05:36:46.917Z] [INFO   ] ğŸ§ª [test-trigger] Poll #24 (50s elapsed)
[2025-11-27T05:36:49.091Z] [INFO   ] ğŸ§ª [test-trigger] Poll #25 (52s elapsed)
[2025-11-27T05:36:51.245Z] [INFO   ] ğŸ§ª [test-trigger] Poll #26 (55s elapsed)
[2025-11-27T05:36:53.572Z] [INFO   ] ğŸ§ª [test-trigger] Poll #27 (57s elapsed)
[2025-11-27T05:36:56.968Z] [INFO   ] ğŸ§ª [test-trigger] Deactivating trigger...
[2025-11-27T05:36:57.108Z] [INFO   ] 2025-11-27T05:36:57.108Z [DEBUG] â„¹ï¸ No trigger resources found for workflow 82bf971e-2cac-4500-bbc1-00577a2ed9df
[2025-11-27T05:36:57.109Z] [INFO   ] ğŸ§ª [test-trigger] ğŸ›‘ Trigger deactivated
[2025-11-27T05:36:57.109Z] [INFO   ] 2025-11-27T05:36:57.109Z [DEBUG] ğŸ›‘ Test trigger deactivated
[2025-11-27T05:36:57.189Z] [INFO   ] ğŸ§ª [test-trigger] No event received, returning timeout response
[2025-11-27T05:37:41.850Z] [INFO   ]  [37m[1mâ—‹[22m[39m Compiling /api/presence/count ...
[2025-11-27T05:37:42.333Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled /api/presence/count in 1653ms (5095 modules)
[2025-11-27T05:38:07.522Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled in 670ms (1846 modules)
[2025-11-27T05:38:07.793Z] [INFO   ] 2025-11-27T05:38:07.793Z [DEBUG] [Middleware] Username check: {"path":"/workflows/builder/82bf971e-2cac-4500-bbc1-00577a2ed9df","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15655200394}
[2025-11-27T05:38:08.087Z] [INFO   ] 2025-11-27T05:38:08.087Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-11-27T05:38:19.767Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled in 497ms (1846 modules)
[2025-11-27T05:38:20.040Z] [INFO   ] 2025-11-27T05:38:20.040Z [DEBUG] [Middleware] Username check: {"path":"/workflows/builder/82bf971e-2cac-4500-bbc1-00577a2ed9df","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15655212641}
[2025-11-27T05:38:20.171Z] [INFO   ] 2025-11-27T05:38:20.170Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-11-27T05:38:28.739Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled in 511ms (1846 modules)
[2025-11-27T05:38:28.973Z] [INFO   ] 2025-11-27T05:38:28.973Z [DEBUG] [Middleware] Username check: {"path":"/workflows/builder/82bf971e-2cac-4500-bbc1-00577a2ed9df","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15655221574}
[2025-11-27T05:38:29.084Z] [INFO   ] 2025-11-27T05:38:29.084Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-11-27T07:33:07.386Z] [INFO   ] 2025-11-27T07:33:07.384Z [DEBUG] ğŸ”‘ Discord bot token loaded
[2025-11-27T07:33:07.444Z] [INFO   ] 2025-11-27T07:33:07.443Z [DEBUG] Discord Gateway closed, persistent reconnect disabled
[2025-11-27T07:33:07.795Z] [INFO   ] 2025-11-27T07:33:07.795Z [DEBUG] Discord Gateway WebSocket connection established
[2025-11-27T07:33:07.799Z] [INFO   ] 2025-11-27T07:33:07.798Z [DEBUG] ğŸ”‘ Sending identify with intents: {"GUILDS":true,"GUILD_MEMBERS":true,"GUILD_INVITES":true,"GUILD_MESSAGES":true,"MESSAGE_CONTENT":true,"intentsValue":33347}
[2025-11-27T10:01:15.604Z] [INFO   ] 2025-11-27T10:01:15.603Z [DEBUG] ğŸ”‘ Discord bot token loaded
[2025-11-27T10:01:15.658Z] [INFO   ] 2025-11-27T10:01:15.658Z [DEBUG] Discord Gateway closed, persistent reconnect disabled
[2025-11-27T10:01:15.997Z] [INFO   ] 2025-11-27T10:01:15.997Z [DEBUG] Discord Gateway WebSocket connection established
[2025-11-27T10:01:16.001Z] [INFO   ] 2025-11-27T10:01:16.000Z [DEBUG] ğŸ”‘ Sending identify with intents: {"GUILDS":true,"GUILD_MEMBERS":true,"GUILD_INVITES":true,"GUILD_MESSAGES":true,"MESSAGE_CONTENT":true,"intentsValue":33347}
[2025-11-27T12:07:18.971Z] [INFO   ] 2025-11-27T12:07:18.966Z [DEBUG] ğŸ”‘ Discord bot token loaded
[2025-11-27T12:07:19.033Z] [INFO   ] 2025-11-27T12:07:19.033Z [DEBUG] Discord Gateway closed, persistent reconnect disabled
[2025-11-27T12:07:19.371Z] [INFO   ] 2025-11-27T12:07:19.370Z [DEBUG] Discord Gateway WebSocket connection established
[2025-11-27T12:07:19.375Z] [INFO   ] 2025-11-27T12:07:19.374Z [DEBUG] ğŸ”‘ Sending identify with intents: {"GUILDS":true,"GUILD_MEMBERS":true,"GUILD_INVITES":true,"GUILD_MESSAGES":true,"MESSAGE_CONTENT":true,"intentsValue":33347}
[2025-11-27T14:16:41.548Z] [INFO   ] 2025-11-27T14:16:41.545Z [DEBUG] ğŸ”‘ Discord bot token loaded
[2025-11-27T14:16:41.603Z] [INFO   ] 2025-11-27T14:16:41.603Z [DEBUG] Discord Gateway closed, persistent reconnect disabled
[2025-11-27T14:16:41.975Z] [INFO   ] 2025-11-27T14:16:41.974Z [DEBUG] Discord Gateway WebSocket connection established
[2025-11-27T14:16:41.978Z] [INFO   ] 2025-11-27T14:16:41.978Z [DEBUG] ğŸ”‘ Sending identify with intents: {"GUILDS":true,"GUILD_MEMBERS":true,"GUILD_INVITES":true,"GUILD_MESSAGES":true,"MESSAGE_CONTENT":true,"intentsValue":33347}
[2025-11-27T16:49:52.440Z] [INFO   ]  [37m[1mâ—‹[22m[39m Compiling /api/workflows/test-trigger ...
[2025-11-27T16:49:55.238Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled /api/workflows/test-trigger in 3.3s (6294 modules)
[2025-11-27T16:49:55.417Z] [INFO   ] ğŸ§ª [test-trigger] POST request received
[2025-11-27T16:49:55.423Z] [INFO   ] ğŸ§ª [test-trigger] Supabase client created
[2025-11-27T16:49:55.967Z] [INFO   ] ğŸ§ª [test-trigger] Auth check: {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0"
}
[2025-11-27T16:49:55.973Z] [INFO   ] ğŸ§ª [test-trigger] Request body: {
  "workflowId": "82bf971e-2cac-4500-bbc1-00577a2ed9df",
  "nodeId": "gmail_trigger_new_email-66214e1d-8271-4843-af4a-9fb3748f4428",
  "hasProvidedNodes": true,
  "providedNodesCount": 3
}
[2025-11-27T16:49:55.973Z] [INFO   ] ğŸ§ª [test-trigger] Using provided nodes (unsaved workflow)
[2025-11-27T16:49:55.973Z] [INFO   ] ğŸ§ª [test-trigger] Searching for trigger node in 3 nodes
[2025-11-27T16:49:55.973Z] [INFO   ] ğŸ§ª [test-trigger] Node 0: {
  "id": "gmail_trigger_new_email-66214e1d-8271-4843-af4a-9fb3748f4428",
  "type": "custom",
  "dataType": "gmail_trigger_new_email",
  "isTrigger": true,
  "providerId": "gmail"
}
[2025-11-27T16:49:55.973Z] [INFO   ] ğŸ§ª [test-trigger] Node 1: {
  "id": "ai_agent-485d88bb-197f-429b-8ef0-6ad7729de231",
  "type": "custom",
  "dataType": "ai_agent",
  "isTrigger": false,
  "providerId": "ai"
}
[2025-11-27T16:49:55.973Z] [INFO   ] ğŸ§ª [test-trigger] Node 2: {
  "id": "discord_action_send_message-a5deb258-ed70-47ea-aa22-5f2905ca82fb",
  "type": "custom",
  "dataType": "discord_action_send_message",
  "isTrigger": false,
  "providerId": "discord"
}
[2025-11-27T16:49:55.974Z] [INFO   ] ğŸ§ª [test-trigger] Trigger node details: {
  "nodeId": "gmail_trigger_new_email-66214e1d-8271-4843-af4a-9fb3748f4428",
  "providerId": "gmail",
  "triggerType": "gmail_trigger_new_email",
  "configKeys": [
    "from",
    "labelIds",
    "_label_from",
    "aiFailClosed",
    "hasAttachment",
    "_label_labelIds",
    "aiContentFilter",
    "subjectExactMatch",
    "aiFilterConfidence",
    "_label_hasAttachment",
    "aiUseEmbeddingPrefilter",
    "_label_aiFilterConfidence"
  ],
  "fullTriggerData": {
    "label": "New Email",
    "title": "New Email",
    "type": "gmail_trigger_new_email",
    "config": {
      "from": "stoddard.nathaniel@yahoo.com",
      "labelIds": [
        "INBOX"
      ],
      "_label_from": "Nathaniel Stoddard <stoddard.nathaniel@yahoo.com>",
      "aiFailClosed": "",
      "hasAttachment": "any",
      "_label_labelIds": "INBOX",
      "aiContentFilter": "",
      "subjectExactMatch": true,
      "aiFilterConfidence": "",
      "_label_hasAttachment": "any",
      "aiUseEmbeddingPrefilter": "",
      "_label_aiFilterConfidence": "Balanced (70%+ match)"
    },
    "description": "Triggers when a new email is received. Supports AI-powered semantic filtering to trigger on emails about specific topics.",
    "providerId": "gmail",
    "icon": {},
    "isTrigger": true,
    "agentHighlights": [
      "subjectExactMatch",
      "hasAttachment",
      "labelIds",
      "aiFilterConfidence",
      "aiFailClosed",
      "aiUseEmbeddingPrefilter",
      "from",
      "_label_hasAttachment",
      "_label_labelIds",
      "_label_aiFilterConfidence",
      "_label_from",
      "__dynamicOptions",
      "__validationState",
      "aiContentFilter"
    ],
    "costHint": 0
  }
}
[2025-11-27T16:49:55.975Z] [INFO   ] 2025-11-27T16:49:55.975Z [DEBUG] ğŸ§ª Testing trigger for workflow 82bf971e-2cac-4500-bbc1-00577a2ed9df {"nodeId":"gmail_trigger_new_email-66214e1d-8271-4843-af4a-9fb3748f4428","providerId":"gmail","triggerType":"gmail_trigger_new_email"}
[2025-11-27T16:49:55.975Z] [INFO   ] ğŸ§ª [test-trigger] Importing trigger lifecycle manager...
[2025-11-27T16:49:59.400Z] [INFO   ] 2025-11-27T16:49:59.399Z [DEBUG] ğŸ“ Registered trigger provider: microsoft
[2025-11-27T16:49:59.401Z] [INFO   ] 2025-11-27T16:49:59.401Z [DEBUG] ğŸ“ Registered trigger provider: microsoft-outlook
[2025-11-27T16:49:59.402Z] [INFO   ] 2025-11-27T16:49:59.402Z [DEBUG] ğŸ“ Registered trigger provider: microsoft-onenote
[2025-11-27T16:49:59.402Z] [INFO   ] 2025-11-27T16:49:59.402Z [DEBUG] ğŸ“ Registered trigger provider: microsoft-excel
[2025-11-27T16:49:59.402Z] [INFO   ] 2025-11-27T16:49:59.402Z [DEBUG] ğŸ“ Registered trigger provider: onedrive
[2025-11-27T16:49:59.402Z] [INFO   ] 2025-11-27T16:49:59.402Z [DEBUG] ğŸ“ Registered trigger provider: teams
[2025-11-27T16:49:59.402Z] [INFO   ] 2025-11-27T16:49:59.402Z [DEBUG] ğŸ“ Registered trigger provider: airtable
[2025-11-27T16:49:59.402Z] [INFO   ] 2025-11-27T16:49:59.402Z [DEBUG] ğŸ“ Registered trigger provider: discord
[2025-11-27T16:49:59.402Z] [INFO   ] 2025-11-27T16:49:59.402Z [DEBUG] ğŸ“ Registered trigger provider: slack
[2025-11-27T16:49:59.402Z] [INFO   ] 2025-11-27T16:49:59.402Z [DEBUG] ğŸ“ Registered trigger provider: gmail
[2025-11-27T16:49:59.402Z] [INFO   ] 2025-11-27T16:49:59.402Z [DEBUG] ğŸ“ Registered trigger provider: google-calendar
[2025-11-27T16:49:59.402Z] [INFO   ] 2025-11-27T16:49:59.402Z [DEBUG] ğŸ“ Registered trigger provider: google-drive
[2025-11-27T16:49:59.403Z] [INFO   ] 2025-11-27T16:49:59.403Z [DEBUG] ğŸ“ Registered trigger provider: google-sheets
[2025-11-27T16:49:59.403Z] [INFO   ] 2025-11-27T16:49:59.403Z [DEBUG] ğŸ“ Registered trigger provider: google-docs
[2025-11-27T16:49:59.403Z] [INFO   ] 2025-11-27T16:49:59.403Z [DEBUG] ğŸ“ Registered trigger provider: stripe
[2025-11-27T16:49:59.403Z] [INFO   ] 2025-11-27T16:49:59.403Z [DEBUG] ğŸ“ Registered trigger provider: shopify
[2025-11-27T16:49:59.403Z] [INFO   ] 2025-11-27T16:49:59.403Z [DEBUG] ğŸ“ Registered trigger provider: notion
[2025-11-27T16:49:59.403Z] [INFO   ] 2025-11-27T16:49:59.403Z [DEBUG] ğŸ“ Registered trigger provider: hubspot
[2025-11-27T16:49:59.403Z] [INFO   ] 2025-11-27T16:49:59.403Z [DEBUG] ğŸ“ Registered trigger provider: monday
[2025-11-27T16:49:59.404Z] [INFO   ] 2025-11-27T16:49:59.404Z [DEBUG] ğŸ“ Registered trigger provider: gumroad
[2025-11-27T16:49:59.404Z] [INFO   ] 2025-11-27T16:49:59.404Z [DEBUG] ğŸ“ Registered trigger provider: webhook
[2025-11-27T16:49:59.404Z] [INFO   ] 2025-11-27T16:49:59.404Z [DEBUG] âœ… Trigger lifecycle providers registered: ["microsoft","microsoft-outlook","microsoft-onenote","microsoft-excel","onedrive","teams","airtable","discord","slack","gmail","google-calendar","google-drive","google-sheets","google-docs","stripe","shopify","notion","hubspot","monday","gumroad","webhook"]
[2025-11-27T16:49:59.407Z] [INFO   ] ğŸ§ª [test-trigger] Registered providers: [
  "microsoft",
  "microsoft-outlook",
  "microsoft-onenote",
  "microsoft-excel",
  "onedrive",
  "teams",
  "airtable",
  "discord",
  "slack",
  "gmail",
  "google-calendar",
  "google-drive",
  "google-sheets",
  "google-docs",
  "stripe",
  "shopify",
  "notion",
  "hubspot",
  "monday",
  "gumroad",
  "webhook"
]
[2025-11-27T16:49:59.408Z] [INFO   ] ğŸ§ª [test-trigger] Is provider registered? {
  "providerId": "gmail",
  "isProviderRegistered": true
}
[2025-11-27T16:49:59.408Z] [INFO   ] ğŸ§ª [test-trigger] Activating trigger...
[2025-11-27T16:49:59.408Z] [INFO   ] ğŸ§ª [test-trigger] Trigger node being passed: {
  "id": "gmail_trigger_new_email-66214e1d-8271-4843-af4a-9fb3748f4428",
  "type": "custom",
  "position": {
    "x": 1020,
    "y": 120
  },
  "positionAbsolute": {
    "x": 1020,
    "y": 120
  },
  "data": {
    "label": "New Email",
    "title": "New Email",
    "type": "gmail_trigger_new_email",
    "config": {
      "from": "stoddard.nathaniel@yahoo.com",
      "labelIds": [
        "INBOX"
      ],
      "_label_from": "Nathaniel Stoddard <stoddard.nathaniel@yahoo.com>",
      "aiFailClosed": "",
      "hasAttachment": "any",
      "_label_labelIds": "INBOX",
      "aiContentFilter": "",
      "subjectExactMatch": true,
      "aiFilterConfidence": "",
      "_label_hasAttachment": "any",
      "aiUseEmbeddingPrefilter": "",
      "_label_aiFilterConfidence": "Balanced (70%+ match)"
    },
    "description": "Triggers when a new email is received. Supports AI-powered semantic filtering to trigger on emails about specific topics.",
    "providerId": "gmail",
    "icon": {},
    "isTrigger": true,
    "agentHighlights": [
      "subjectExactMatch",
      "hasAttachment",
      "labelIds",
      "aiFilterConfidence",
      "aiFailClosed",
      "aiUseEmbeddingPrefilter",
      "from",
      "_label_hasAttachment",
      "_label_labelIds",
      "_label_aiFilterConfidence",
      "_label_from",
      "__dynamicOptions",
      "__validationState",
      "aiContentFilter"
    ],
    "costHint": 0
  },
  "measured": {
    "width": 360,
    "height": 79
  }
}
[2025-11-27T16:49:59.408Z] [INFO   ] 2025-11-27T16:49:59.408Z [DEBUG] ğŸš€ Activating 1 triggers for workflow 82bf971e-2cac-4500-bbc1-00577a2ed9df
[2025-11-27T16:49:59.409Z] [INFO   ] 2025-11-27T16:49:59.409Z [DEBUG] ğŸ”” Activating Google API trigger for workflow 82bf971e-2cac-4500-bbc1-00577a2ed9df {"triggerType":"gmail_trigger_new_email","providerId":"gmail","config":{"from":"stoddard.nathaniel@yahoo.com","labelIds":["INBOX"],"_label_from":"Nathaniel Stoddard <stoddard.nathaniel@yahoo.com>","aiFailClosed":"","hasAttachment":"any","_label_labelIds":"INBOX","aiContentFilter":"","subjectExactMatch":true,"aiFilterConfidence":"","_label_hasAttachment":"any","aiUseEmbeddingPrefilter":"","_label_aiFilterConfidence":"Balanced (70%+ match)"}}
[2025-11-27T16:49:59.540Z] [INFO   ] 2025-11-27T16:49:59.540Z [DEBUG] ğŸ“¤ Creating Google push notification {"api":"gmail","resourceId":null,"channelId":"chainreact-82bf971e-2cac-4500-bbc1-00577a2ed9df-1764262199540","webhookUrl":"https://9b7007881520.ngrok-free.app/api/webhooks/google"}
[2025-11-27T16:49:59.541Z] [INFO   ] 2025-11-27T16:49:59.541Z [DEBUG] ğŸ“§ Creating Gmail watch with Pub/Sub topic: projects/chainreact-462214/topics/gmail-notifications {"labelIds":["INBOX"],"labelFilterAction":"include"}
[2025-11-27T16:49:59.890Z] [INFO   ] 2025-11-27T16:49:59.890Z [DEBUG] âœ… Gmail watch created - historyId: 6878501 {"watchingFolders":"INBOX"}
[2025-11-27T16:49:59.891Z] [INFO   ] 2025-11-27T16:49:59.891Z [DEBUG] ğŸ“ Storing trigger resource: {"workflow_id":"82bf971e-2cac-4500-bbc1-00577a2ed9df","user_id":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider_id":"gmail","trigger_type":"gmail_trigger_new_email","node_id":"gmail_trigger_new_email-66214e1d-8271-4843-af4a-9fb3748f4428","resource_type":"subscription","external_id":"chainreact-82bf971e-2cac-4500-bbc1-00577a2ed9df-1764262199540","config":{"from":"stoddard.nathaniel@yahoo.com","labelIds":["INBOX"],"_label_from":"Nathaniel Stoddard <stoddard.nathaniel@yahoo.com>","aiFailClosed":"","hasAttachment":"any","_label_labelIds":"INBOX","aiContentFilter":"","subjectExactMatch":true,"aiFilterConfidence":"","_label_hasAttachment":"any","aiUseEmbeddingPrefilter":"","_label_aiFilterConfidence":"Balanced (70%+ match)","channelId":"chainreact-82bf971e-2cac-4500-bbc1-00577a2ed9df-1764262199540","resourceId":"6878501","api":"gmail","events":["message"],"webhookUrl":"https://9b7007881520.ngrok-free.app/api/webhooks/google"},"status":"active","expires_at":"2025-12-04T16:49:59.833Z"}
[2025-11-27T16:49:59.980Z] [ERROR  ] 2025-11-27T16:49:59.980Z [ERROR] âŒ Failed to store trigger resource: {"code":"PGRST204","details":null,"hint":null,"message":"Could not find the 'config' column of 'trigger_resources' in the schema cache"}
[2025-11-27T16:49:59.981Z] [ERROR  ] 2025-11-27T16:49:59.981Z [ERROR] âŒ Failed to activate gmail/gmail_trigger_new_email: Failed to store trigger resource: Could not find the 'config' column of 'trigger_resources' in the schema cache
[2025-11-27T16:49:59.982Z] [INFO   ] ğŸ§ª [test-trigger] âœ… Trigger activated successfully!
[2025-11-27T16:49:59.982Z] [INFO   ] 2025-11-27T16:49:59.982Z [DEBUG] âœ… Trigger activated for testing, polling for events...
[2025-11-27T16:50:00.167Z] [INFO   ] ğŸ§ª [test-trigger] Created trigger resources: []
[2025-11-27T16:50:00.167Z] [INFO   ] ğŸ§ª [test-trigger] Starting to poll for events...
[2025-11-27T16:50:00.167Z] [INFO   ] ğŸ§ª [test-trigger] Poll #1 (0s elapsed)
[2025-11-27T16:50:02.395Z] [INFO   ] ğŸ§ª [test-trigger] Poll #2 (2s elapsed)
[2025-11-27T16:50:04.584Z] [INFO   ] ğŸ§ª [test-trigger] Poll #3 (4s elapsed)
[2025-11-27T16:50:06.763Z] [INFO   ] ğŸ§ª [test-trigger] Poll #4 (7s elapsed)
[2025-11-27T16:50:08.932Z] [INFO   ] ğŸ§ª [test-trigger] Poll #5 (9s elapsed)
[2025-11-27T16:50:11.116Z] [INFO   ] ğŸ§ª [test-trigger] Poll #6 (11s elapsed)
[2025-11-27T16:50:13.293Z] [INFO   ] ğŸ§ª [test-trigger] Poll #7 (13s elapsed)
[2025-11-27T16:50:15.477Z] [INFO   ] ğŸ§ª [test-trigger] Poll #8 (15s elapsed)
[2025-11-27T16:50:17.220Z] [INFO   ]  [37m[1mâ—‹[22m[39m Compiling /api/webhooks/gmail ...
[2025-11-27T16:50:17.661Z] [INFO   ] ğŸ§ª [test-trigger] Poll #9 (17s elapsed)
[2025-11-27T16:50:21.381Z] [INFO   ] ğŸ§ª [test-trigger] Poll #10 (21s elapsed)
[2025-11-27T16:50:23.734Z] [INFO   ] ğŸ§ª [test-trigger] Poll #11 (24s elapsed)
[2025-11-27T16:50:26.411Z] [INFO   ] ğŸ§ª [test-trigger] Poll #12 (26s elapsed)
[2025-11-27T16:50:29.086Z] [INFO   ] ğŸ§ª [test-trigger] Poll #13 (29s elapsed)
[2025-11-27T16:50:31.199Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled /api/webhooks/gmail in 14.5s (9745 modules)
[2025-11-27T16:50:34.443Z] [INFO   ] 2025-11-27T16:50:34.442Z [DEBUG] ğŸ””ğŸ””ğŸ”” GMAIL WEBHOOK ENDPOINT HIT! ğŸ””ğŸ””ğŸ””
[2025-11-27T16:50:34.445Z] [INFO   ] 2025-11-27T16:50:34.445Z [DEBUG] ğŸ“‹ Request headers: {"accept":"application/json","accept-encoding":"gzip, deflate, br","content-length":"373","content-type":"application/json","from":"noreply@google.com","host":"850c3f4d3ca5.ngrok-free.app","user-agent":"APIs-Google; (+https://developers.google.com/webmasters/APIs-Google.html)","x-forwarded-for":"66.249.93.137","x-forwarded-host":"850c3f4d3ca5.ngrok-free.app","x-forwarded-port":"3000","x-forwarded-proto":"https"}
[2025-11-27T16:50:34.446Z] [INFO   ] 2025-11-27T16:50:34.446Z [DEBUG] ğŸ“¨ [0ed81b36-5a9f-4105-bb11-6fe85de2b511] Gmail webhook request received at 2025-11-27T16:50:34.446Z
[2025-11-27T16:50:34.452Z] [INFO   ] ğŸ§ª [test-trigger] Poll #14 (34s elapsed)
[2025-11-27T16:50:34.531Z] [INFO   ] 2025-11-27T16:50:34.531Z [DEBUG] ğŸ“ [0ed81b36-5a9f-4105-bb11-6fe85de2b511] Raw body received: 
[2025-11-27T16:50:34.532Z] [WARN   ] 2025-11-27T16:50:34.532Z [WARN] âš ï¸ [0ed81b36-5a9f-4105-bb11-6fe85de2b511] Empty request body received, possibly aborted connection
[2025-11-27T16:50:36.736Z] [INFO   ] ğŸ§ª [test-trigger] Poll #15 (37s elapsed)
[2025-11-27T16:50:39.251Z] [INFO   ] ğŸ§ª [test-trigger] Poll #16 (39s elapsed)
[2025-11-27T16:50:41.233Z] [INFO   ] 2025-11-27T16:50:41.233Z [DEBUG] ğŸ””ğŸ””ğŸ”” GMAIL WEBHOOK ENDPOINT HIT! ğŸ””ğŸ””ğŸ””
[2025-11-27T16:50:41.234Z] [INFO   ] 2025-11-27T16:50:41.234Z [DEBUG] ğŸ“‹ Request headers: {"accept":"application/json","accept-encoding":"gzip, deflate, br","content-length":"373","content-type":"application/json","from":"noreply@google.com","host":"850c3f4d3ca5.ngrok-free.app","user-agent":"APIs-Google; (+https://developers.google.com/webmasters/APIs-Google.html)","x-forwarded-for":"66.249.93.137","x-forwarded-host":"850c3f4d3ca5.ngrok-free.app","x-forwarded-port":"3000","x-forwarded-proto":"https"}
[2025-11-27T16:50:41.234Z] [INFO   ] 2025-11-27T16:50:41.234Z [DEBUG] ğŸ“¨ [c98746be-904e-45e0-b39c-0be21c84371b] Gmail webhook request received at 2025-11-27T16:50:41.234Z
[2025-11-27T16:50:41.319Z] [INFO   ] 2025-11-27T16:50:41.319Z [DEBUG] ğŸ“ [c98746be-904e-45e0-b39c-0be21c84371b] Raw body received: {"deliveryAttempt":2,"message":{"data":"eyJlbWFpbEFkZHJlc3MiOiJzdG9kZGFyZC5uYXRoYW5pZWw5MDBAZ21haWwuY29tIiwiaGlzdG9yeUlkIjo2ODc4NTUyfQ==","messageId":"17138208537564737","message_id":"17138208537564737","publishTime":"2025-11-27T16:50:15.697Z","publish_time":"2025-11-27T16:50:15.697Z"},"subscription":"projects/chainreact-462214/subscriptions/gmail-webhook-subscription"}

[2025-11-27T16:50:41.320Z] [INFO   ] 2025-11-27T16:50:41.320Z [DEBUG] ğŸ“¦ [c98746be-904e-45e0-b39c-0be21c84371b] Parsed body structure: {"hasMessage":true,"hasMessageData":true,"messageKeys":["data","messageId","message_id","publishTime","publish_time"],"subscription":"projects/chainreact-462214/subscriptions/gmail-webhook-subscription"}
[2025-11-27T16:50:41.320Z] [INFO   ] 2025-11-27T16:50:41.320Z [DEBUG] [c98746be-904e-45e0-b39c-0be21c84371b] Received Pub/Sub message from Gmail
[2025-11-27T16:50:41.320Z] [INFO   ] 2025-11-27T16:50:41.320Z [DEBUG] ğŸ”“ [c98746be-904e-45e0-b39c-0be21c84371b] Decoded Pub/Sub data: {"emailAddress":"stoddard.nathaniel900@gmail.com","historyId":6878552}
[2025-11-27T16:50:41.321Z] [INFO   ] 2025-11-27T16:50:41.321Z [DEBUG] [c98746be-904e-45e0-b39c-0be21c84371b] ğŸ“§ Gmail notification received: {"emailAddress":"stoddard.nathaniel900@gmail.com","historyId":6878552,"messageId":"17138208537564737","publishTime":"2025-11-27T16:50:15.697Z"}
[2025-11-27T16:50:41.321Z] [INFO   ] 2025-11-27T16:50:41.321Z [DEBUG] [c98746be-904e-45e0-b39c-0be21c84371b] ğŸ” Processing Gmail webhook, historyId: 6878552
[2025-11-27T16:50:41.400Z] [INFO   ] 2025-11-27T16:50:41.400Z [DEBUG] ğŸ” [Gmail Processor] Processing Gmail event: {"eventType":"gmail_new_email","emailAddress":"stoddard.nathaniel900@gmail.com","historyId":6878552,"requestId":"c98746be-904e-45e0-b39c-0be21c84371b"}
[2025-11-27T16:50:41.401Z] [INFO   ] [Backend INFO] Gmail webhook event received {
  "eventType": "gmail_new_email",
  "emailAddress": "stoddard.nathaniel900@gmail.com",
  "historyId": 6878552,
  "requestId": "c98746be-904e-45e0-b39c-0be21c84371b"
}
[2025-11-27T16:50:41.433Z] [INFO   ] ğŸ§ª [test-trigger] Poll #17 (41s elapsed)
[2025-11-27T16:50:41.487Z] [ERROR  ] 2025-11-27T16:50:41.487Z [ERROR] Failed to store Gmail webhook event: {"code":"PGRST204","details":null,"hint":null,"message":"Could not find the 'event_data' column of 'webhook_events' in the schema cache"}
[2025-11-27T16:50:41.488Z] [INFO   ] 2025-11-27T16:50:41.488Z [DEBUG] ğŸš€ [Gmail Processor] Starting to find matching workflows for Gmail event
[2025-11-27T16:50:41.780Z] [ERROR  ] 2025-11-27T16:50:41.779Z [ERROR] Failed to fetch workflows: {"code":"42703","details":null,"hint":null,"message":"column workflows.nodes does not exist"}
[2025-11-27T16:50:41.780Z] [INFO   ] 2025-11-27T16:50:41.780Z [DEBUG] Processing Gmail new message event
[2025-11-27T16:50:41.861Z] [INFO   ] 2025-11-27T16:50:41.861Z [DEBUG] [Task Queue] Queued gmail webhook task:
[2025-11-27T16:50:41.861Z] [INFO   ] [Backend SUCCESS] Gmail webhook event processed successfully {
  "processed": true,
  "type": "gmail_new_message"
}
[2025-11-27T16:50:43.755Z] [INFO   ] ğŸ§ª [test-trigger] Poll #18 (44s elapsed)
[2025-11-27T16:50:45.928Z] [INFO   ] ğŸ§ª [test-trigger] Poll #19 (46s elapsed)
[2025-11-27T16:50:48.103Z] [INFO   ] ğŸ§ª [test-trigger] Poll #20 (48s elapsed)
[2025-11-27T16:50:50.288Z] [INFO   ] ğŸ§ª [test-trigger] Poll #21 (50s elapsed)
[2025-11-27T16:50:52.469Z] [INFO   ] ğŸ§ª [test-trigger] Poll #22 (52s elapsed)
[2025-11-27T16:50:54.646Z] [INFO   ] ğŸ§ª [test-trigger] Poll #23 (54s elapsed)
[2025-11-27T16:50:56.886Z] [INFO   ] ğŸ§ª [test-trigger] Poll #24 (57s elapsed)
[2025-11-27T16:50:59.068Z] [INFO   ] ğŸ§ª [test-trigger] Poll #25 (59s elapsed)
[2025-11-27T16:51:01.244Z] [INFO   ] ğŸ§ª [test-trigger] Deactivating trigger...
[2025-11-27T16:51:01.332Z] [INFO   ] 2025-11-27T16:51:01.332Z [DEBUG] â„¹ï¸ No trigger resources found for workflow 82bf971e-2cac-4500-bbc1-00577a2ed9df
[2025-11-27T16:51:01.333Z] [INFO   ] ğŸ§ª [test-trigger] ğŸ›‘ Trigger deactivated
[2025-11-27T16:51:01.333Z] [INFO   ] 2025-11-27T16:51:01.333Z [DEBUG] ğŸ›‘ Test trigger deactivated
[2025-11-27T16:51:01.410Z] [INFO   ] ğŸ§ª [test-trigger] No event received, returning timeout response
[2025-11-27T16:52:24.629Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled in 1395ms (1846 modules)
[2025-11-27T16:52:25.770Z] [INFO   ] 2025-11-27T16:52:25.769Z [DEBUG] [Middleware] Username check: {"path":"/workflows/builder/82bf971e-2cac-4500-bbc1-00577a2ed9df","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15695658370}
[2025-11-27T16:52:26.835Z] [INFO   ] 2025-11-27T16:52:26.834Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-11-27T16:52:41.786Z] [INFO   ]  [37m[1mâ—‹[22m[39m Compiling /api/presence/count ...
[2025-11-27T16:52:42.153Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled /api/presence/count in 1210ms (5095 modules)
[2025-11-27T16:56:14.370Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled in 1500ms (1846 modules)
[2025-11-27T16:56:14.708Z] [INFO   ] 2025-11-27T16:56:14.707Z [DEBUG] [Middleware] Username check: {"path":"/workflows/builder/82bf971e-2cac-4500-bbc1-00577a2ed9df","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15695887307}
[2025-11-27T16:56:15.114Z] [INFO   ] 2025-11-27T16:56:15.114Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-11-27T16:57:18.831Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled in 787ms (1846 modules)
[2025-11-27T16:57:19.106Z] [INFO   ] 2025-11-27T16:57:19.105Z [DEBUG] [Middleware] Username check: {"path":"/workflows/builder/82bf971e-2cac-4500-bbc1-00577a2ed9df","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15695951706}
[2025-11-27T16:57:19.244Z] [INFO   ] 2025-11-27T16:57:19.244Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-11-27T16:58:30.215Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled in 648ms (1846 modules)
[2025-11-27T16:58:30.460Z] [INFO   ] 2025-11-27T16:58:30.460Z [DEBUG] [Middleware] Username check: {"path":"/workflows/builder/82bf971e-2cac-4500-bbc1-00577a2ed9df","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15696023061}
[2025-11-27T16:58:30.574Z] [INFO   ] 2025-11-27T16:58:30.574Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-11-27T16:58:40.364Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled in 508ms (1846 modules)
[2025-11-27T16:58:40.606Z] [INFO   ] 2025-11-27T16:58:40.606Z [DEBUG] [Middleware] Username check: {"path":"/workflows/builder/82bf971e-2cac-4500-bbc1-00577a2ed9df","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15696033207}
[2025-11-27T16:58:40.739Z] [INFO   ] 2025-11-27T16:58:40.738Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-11-27T16:58:55.831Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled in 559ms (1846 modules)
[2025-11-27T16:58:56.090Z] [INFO   ] 2025-11-27T16:58:56.090Z [DEBUG] [Middleware] Username check: {"path":"/workflows/builder/82bf971e-2cac-4500-bbc1-00577a2ed9df","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15696048691}
[2025-11-27T16:58:56.189Z] [INFO   ] 2025-11-27T16:58:56.189Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-11-27T16:59:04.597Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled in 420ms (1846 modules)
[2025-11-27T16:59:04.821Z] [INFO   ] 2025-11-27T16:59:04.821Z [DEBUG] [Middleware] Username check: {"path":"/workflows/builder/82bf971e-2cac-4500-bbc1-00577a2ed9df","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15696057422}
[2025-11-27T16:59:04.939Z] [INFO   ] 2025-11-27T16:59:04.939Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-11-27T17:31:20.073Z] [INFO   ]  [37m[1mâ—‹[22m[39m Compiling /api/workflows/test-trigger ...
[2025-11-27T17:31:22.259Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled /api/workflows/test-trigger in 2.7s (6294 modules)
[2025-11-27T17:31:22.708Z] [INFO   ] ğŸ§ª [test-trigger] POST request received
[2025-11-27T17:31:22.715Z] [INFO   ] ğŸ§ª [test-trigger] Supabase client created
[2025-11-27T17:31:23.233Z] [INFO   ] ğŸ§ª [test-trigger] Auth check: {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0"
}
[2025-11-27T17:31:23.236Z] [INFO   ] ğŸ§ª [test-trigger] Request body: {
  "workflowId": "82bf971e-2cac-4500-bbc1-00577a2ed9df",
  "nodeId": "gmail_trigger_new_email-66214e1d-8271-4843-af4a-9fb3748f4428",
  "hasProvidedNodes": true,
  "providedNodesCount": 3
}
[2025-11-27T17:31:23.236Z] [INFO   ] ğŸ§ª [test-trigger] Using provided nodes (unsaved workflow)
[2025-11-27T17:31:23.236Z] [INFO   ] ğŸ§ª [test-trigger] Searching for trigger node in 3 nodes
[2025-11-27T17:31:23.236Z] [INFO   ] ğŸ§ª [test-trigger] Node 0: {
  "id": "gmail_trigger_new_email-66214e1d-8271-4843-af4a-9fb3748f4428",
  "type": "custom",
  "dataType": "gmail_trigger_new_email",
  "isTrigger": true,
  "providerId": "gmail"
}
[2025-11-27T17:31:23.236Z] [INFO   ] ğŸ§ª [test-trigger] Node 1: {
  "id": "ai_agent-485d88bb-197f-429b-8ef0-6ad7729de231",
  "type": "custom",
  "dataType": "ai_agent",
  "isTrigger": false,
  "providerId": "ai"
}
[2025-11-27T17:31:23.236Z] [INFO   ] ğŸ§ª [test-trigger] Node 2: {
  "id": "discord_action_send_message-a5deb258-ed70-47ea-aa22-5f2905ca82fb",
  "type": "custom",
  "dataType": "discord_action_send_message",
  "isTrigger": false,
  "providerId": "discord"
}
[2025-11-27T17:31:23.237Z] [INFO   ] ğŸ§ª [test-trigger] Trigger node details: {
  "nodeId": "gmail_trigger_new_email-66214e1d-8271-4843-af4a-9fb3748f4428",
  "providerId": "gmail",
  "triggerType": "gmail_trigger_new_email",
  "configKeys": [
    "from",
    "labelIds",
    "_label_from",
    "aiFailClosed",
    "hasAttachment",
    "_label_labelIds",
    "aiContentFilter",
    "subjectExactMatch",
    "aiFilterConfidence",
    "_label_hasAttachment",
    "aiUseEmbeddingPrefilter",
    "_label_aiFilterConfidence"
  ],
  "fullTriggerData": {
    "label": "New Email",
    "title": "New Email",
    "type": "gmail_trigger_new_email",
    "config": {
      "from": "stoddard.nathaniel@yahoo.com",
      "labelIds": [
        "INBOX"
      ],
      "_label_from": "Nathaniel Stoddard <stoddard.nathaniel@yahoo.com>",
      "aiFailClosed": "",
      "hasAttachment": "any",
      "_label_labelIds": "INBOX",
      "aiContentFilter": "",
      "subjectExactMatch": true,
      "aiFilterConfidence": "",
      "_label_hasAttachment": "any",
      "aiUseEmbeddingPrefilter": "",
      "_label_aiFilterConfidence": "Balanced (70%+ match)"
    },
    "description": "Triggers when a new email is received. Supports AI-powered semantic filtering to trigger on emails about specific topics.",
    "providerId": "gmail",
    "icon": {},
    "isTrigger": true,
    "agentHighlights": [
      "subjectExactMatch",
      "hasAttachment",
      "labelIds",
      "aiFilterConfidence",
      "aiFailClosed",
      "aiUseEmbeddingPrefilter",
      "from",
      "_label_hasAttachment",
      "_label_labelIds",
      "_label_aiFilterConfidence",
      "_label_from",
      "__dynamicOptions",
      "__validationState",
      "aiContentFilter"
    ],
    "costHint": 0
  }
}
[2025-11-27T17:31:23.238Z] [INFO   ] 2025-11-27T17:31:23.237Z [DEBUG] ğŸ§ª Testing trigger for workflow 82bf971e-2cac-4500-bbc1-00577a2ed9df {"nodeId":"gmail_trigger_new_email-66214e1d-8271-4843-af4a-9fb3748f4428","providerId":"gmail","triggerType":"gmail_trigger_new_email"}
[2025-11-27T17:31:23.238Z] [INFO   ] ğŸ§ª [test-trigger] Importing trigger lifecycle manager...
[2025-11-27T17:31:30.197Z] [INFO   ] 2025-11-27T17:31:30.196Z [DEBUG] ğŸ“ Registered trigger provider: microsoft
[2025-11-27T17:31:30.197Z] [INFO   ] 2025-11-27T17:31:30.197Z [DEBUG] ğŸ“ Registered trigger provider: microsoft-outlook
[2025-11-27T17:31:30.197Z] [INFO   ] 2025-11-27T17:31:30.197Z [DEBUG] ğŸ“ Registered trigger provider: microsoft-onenote
[2025-11-27T17:31:30.197Z] [INFO   ] 2025-11-27T17:31:30.197Z [DEBUG] ğŸ“ Registered trigger provider: microsoft-excel
[2025-11-27T17:31:30.197Z] [INFO   ] 2025-11-27T17:31:30.197Z [DEBUG] ğŸ“ Registered trigger provider: onedrive
[2025-11-27T17:31:30.197Z] [INFO   ] 2025-11-27T17:31:30.197Z [DEBUG] ğŸ“ Registered trigger provider: teams
[2025-11-27T17:31:30.197Z] [INFO   ] 2025-11-27T17:31:30.197Z [DEBUG] ğŸ“ Registered trigger provider: airtable
[2025-11-27T17:31:30.197Z] [INFO   ] 2025-11-27T17:31:30.197Z [DEBUG] ğŸ“ Registered trigger provider: discord
[2025-11-27T17:31:30.197Z] [INFO   ] 2025-11-27T17:31:30.197Z [DEBUG] ğŸ“ Registered trigger provider: slack
[2025-11-27T17:31:30.197Z] [INFO   ] 2025-11-27T17:31:30.197Z [DEBUG] ğŸ“ Registered trigger provider: gmail
[2025-11-27T17:31:30.197Z] [INFO   ] 2025-11-27T17:31:30.197Z [DEBUG] ğŸ“ Registered trigger provider: google-calendar
[2025-11-27T17:31:30.197Z] [INFO   ] 2025-11-27T17:31:30.197Z [DEBUG] ğŸ“ Registered trigger provider: google-drive
[2025-11-27T17:31:30.197Z] [INFO   ] 2025-11-27T17:31:30.197Z [DEBUG] ğŸ“ Registered trigger provider: google-sheets
[2025-11-27T17:31:30.197Z] [INFO   ] 2025-11-27T17:31:30.197Z [DEBUG] ğŸ“ Registered trigger provider: google-docs
[2025-11-27T17:31:30.197Z] [INFO   ] 2025-11-27T17:31:30.197Z [DEBUG] ğŸ“ Registered trigger provider: stripe
[2025-11-27T17:31:30.197Z] [INFO   ] 2025-11-27T17:31:30.197Z [DEBUG] ğŸ“ Registered trigger provider: shopify
[2025-11-27T17:31:30.197Z] [INFO   ] 2025-11-27T17:31:30.197Z [DEBUG] ğŸ“ Registered trigger provider: notion
[2025-11-27T17:31:30.197Z] [INFO   ] 2025-11-27T17:31:30.197Z [DEBUG] ğŸ“ Registered trigger provider: hubspot
[2025-11-27T17:31:30.197Z] [INFO   ] 2025-11-27T17:31:30.197Z [DEBUG] ğŸ“ Registered trigger provider: monday
[2025-11-27T17:31:30.197Z] [INFO   ] 2025-11-27T17:31:30.197Z [DEBUG] ğŸ“ Registered trigger provider: gumroad
[2025-11-27T17:31:30.197Z] [INFO   ] 2025-11-27T17:31:30.197Z [DEBUG] ğŸ“ Registered trigger provider: webhook
[2025-11-27T17:31:30.197Z] [INFO   ] 2025-11-27T17:31:30.197Z [DEBUG] âœ… Trigger lifecycle providers registered: ["microsoft","microsoft-outlook","microsoft-onenote","microsoft-excel","onedrive","teams","airtable","discord","slack","gmail","google-calendar","google-drive","google-sheets","google-docs","stripe","shopify","notion","hubspot","monday","gumroad","webhook"]
[2025-11-27T17:31:30.198Z] [INFO   ] ğŸ§ª [test-trigger] Registered providers: [
  "microsoft",
  "microsoft-outlook",
  "microsoft-onenote",
  "microsoft-excel",
  "onedrive",
  "teams",
  "airtable",
  "discord",
  "slack",
  "gmail",
  "google-calendar",
  "google-drive",
  "google-sheets",
  "google-docs",
  "stripe",
  "shopify",
  "notion",
  "hubspot",
  "monday",
  "gumroad",
  "webhook"
]
[2025-11-27T17:31:30.199Z] [INFO   ] ğŸ§ª [test-trigger] Is provider registered? {
  "providerId": "gmail",
  "isProviderRegistered": true
}
[2025-11-27T17:31:30.199Z] [INFO   ] ğŸ§ª [test-trigger] Activating trigger...
[2025-11-27T17:31:30.199Z] [INFO   ] ğŸ§ª [test-trigger] Trigger node being passed: {
  "id": "gmail_trigger_new_email-66214e1d-8271-4843-af4a-9fb3748f4428",
  "type": "custom",
  "position": {
    "x": 1020,
    "y": 120
  },
  "positionAbsolute": {
    "x": 1020,
    "y": 120
  },
  "data": {
    "label": "New Email",
    "title": "New Email",
    "type": "gmail_trigger_new_email",
    "config": {
      "from": "stoddard.nathaniel@yahoo.com",
      "labelIds": [
        "INBOX"
      ],
      "_label_from": "Nathaniel Stoddard <stoddard.nathaniel@yahoo.com>",
      "aiFailClosed": "",
      "hasAttachment": "any",
      "_label_labelIds": "INBOX",
      "aiContentFilter": "",
      "subjectExactMatch": true,
      "aiFilterConfidence": "",
      "_label_hasAttachment": "any",
      "aiUseEmbeddingPrefilter": "",
      "_label_aiFilterConfidence": "Balanced (70%+ match)"
    },
    "description": "Triggers when a new email is received. Supports AI-powered semantic filtering to trigger on emails about specific topics.",
    "providerId": "gmail",
    "icon": {},
    "isTrigger": true,
    "agentHighlights": [
      "subjectExactMatch",
      "hasAttachment",
      "labelIds",
      "aiFilterConfidence",
      "aiFailClosed",
      "aiUseEmbeddingPrefilter",
      "from",
      "_label_hasAttachment",
      "_label_labelIds",
      "_label_aiFilterConfidence",
      "_label_from",
      "__dynamicOptions",
      "__validationState",
      "aiContentFilter"
    ],
    "costHint": 0
  },
  "measured": {
    "width": 360,
    "height": 79
  }
}
[2025-11-27T17:31:30.199Z] [INFO   ] 2025-11-27T17:31:30.199Z [DEBUG] ğŸš€ Activating 1 triggers for workflow 82bf971e-2cac-4500-bbc1-00577a2ed9df
[2025-11-27T17:31:30.199Z] [INFO   ] 2025-11-27T17:31:30.199Z [DEBUG] ğŸ”” Activating Google API trigger for workflow 82bf971e-2cac-4500-bbc1-00577a2ed9df {"triggerType":"gmail_trigger_new_email","providerId":"gmail","config":{"from":"stoddard.nathaniel@yahoo.com","labelIds":["INBOX"],"_label_from":"Nathaniel Stoddard <stoddard.nathaniel@yahoo.com>","aiFailClosed":"","hasAttachment":"any","_label_labelIds":"INBOX","aiContentFilter":"","subjectExactMatch":true,"aiFilterConfidence":"","_label_hasAttachment":"any","aiUseEmbeddingPrefilter":"","_label_aiFilterConfidence":"Balanced (70%+ match)"}}
[2025-11-27T17:31:30.320Z] [INFO   ] 2025-11-27T17:31:30.320Z [DEBUG] ğŸ“¤ Creating Google push notification {"api":"gmail","resourceId":null,"channelId":"chainreact-82bf971e-2cac-4500-bbc1-00577a2ed9df-1764264690320","webhookUrl":"https://9b7007881520.ngrok-free.app/api/webhooks/google"}
[2025-11-27T17:31:30.321Z] [INFO   ] 2025-11-27T17:31:30.321Z [DEBUG] ğŸ“§ Creating Gmail watch with Pub/Sub topic: projects/chainreact-462214/topics/gmail-notifications {"labelIds":["INBOX"],"labelFilterAction":"include"}
[2025-11-27T17:31:30.744Z] [INFO   ] 2025-11-27T17:31:30.744Z [DEBUG] âœ… Gmail watch created - historyId: 6878608 {"watchingFolders":"INBOX"}
[2025-11-27T17:31:30.745Z] [INFO   ] 2025-11-27T17:31:30.745Z [DEBUG] ğŸ“ Storing trigger resource: {"workflow_id":"82bf971e-2cac-4500-bbc1-00577a2ed9df","user_id":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider_id":"gmail","trigger_type":"gmail_trigger_new_email","node_id":"gmail_trigger_new_email-66214e1d-8271-4843-af4a-9fb3748f4428","resource_type":"subscription","external_id":"chainreact-82bf971e-2cac-4500-bbc1-00577a2ed9df-1764264690320","config":{"from":"stoddard.nathaniel@yahoo.com","labelIds":["INBOX"],"_label_from":"Nathaniel Stoddard <stoddard.nathaniel@yahoo.com>","aiFailClosed":"","hasAttachment":"any","_label_labelIds":"INBOX","aiContentFilter":"","subjectExactMatch":true,"aiFilterConfidence":"","_label_hasAttachment":"any","aiUseEmbeddingPrefilter":"","_label_aiFilterConfidence":"Balanced (70%+ match)","channelId":"chainreact-82bf971e-2cac-4500-bbc1-00577a2ed9df-1764264690320","resourceId":"6878608","api":"gmail","events":["message"],"webhookUrl":"https://9b7007881520.ngrok-free.app/api/webhooks/google"},"status":"active","expires_at":"2025-12-04T17:31:30.600Z"}
[2025-11-27T17:31:31.261Z] [INFO   ]  [37m[1mâ—‹[22m[39m Compiling /api/webhooks/gmail ...
[2025-11-27T17:31:31.429Z] [ERROR  ] 2025-11-27T17:31:31.428Z [ERROR] âŒ Failed to store trigger resource: {"code":"PGRST204","details":null,"hint":null,"message":"Could not find the 'external_id' column of 'trigger_resources' in the schema cache"}
[2025-11-27T17:31:31.430Z] [ERROR  ] 2025-11-27T17:31:31.429Z [ERROR] âŒ Failed to activate gmail/gmail_trigger_new_email: Failed to store trigger resource: Could not find the 'external_id' column of 'trigger_resources' in the schema cache
[2025-11-27T17:31:31.430Z] [INFO   ] ğŸ§ª [test-trigger] âœ… Trigger activated successfully!
[2025-11-27T17:31:31.430Z] [INFO   ] 2025-11-27T17:31:31.430Z [DEBUG] âœ… Trigger activated for testing, polling for events...
[2025-11-27T17:31:31.848Z] [INFO   ] ğŸ§ª [test-trigger] Created trigger resources: []
[2025-11-27T17:31:31.849Z] [INFO   ] ğŸ§ª [test-trigger] Starting to poll for events...
[2025-11-27T17:31:31.849Z] [INFO   ] ğŸ§ª [test-trigger] Poll #1 (0s elapsed)
[2025-11-27T17:31:32.171Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled /api/webhooks/gmail in 1809ms (7913 modules)
[2025-11-27T17:31:35.659Z] [INFO   ] 2025-11-27T17:31:35.657Z [DEBUG] ğŸ””ğŸ””ğŸ”” GMAIL WEBHOOK ENDPOINT HIT! ğŸ””ğŸ””ğŸ””
[2025-11-27T17:31:35.660Z] [INFO   ] 2025-11-27T17:31:35.660Z [DEBUG] ğŸ“‹ Request headers: {"accept":"application/json","accept-encoding":"gzip, deflate, br","content-length":"373","content-type":"application/json","from":"noreply@google.com","host":"850c3f4d3ca5.ngrok-free.app","user-agent":"APIs-Google; (+https://developers.google.com/webmasters/APIs-Google.html)","x-forwarded-for":"66.249.93.138","x-forwarded-host":"850c3f4d3ca5.ngrok-free.app","x-forwarded-port":"3000","x-forwarded-proto":"https"}
[2025-11-27T17:31:35.661Z] [INFO   ] 2025-11-27T17:31:35.661Z [DEBUG] ğŸ“¨ [8b4e88f6-4df1-4c6c-b499-bca55f991267] Gmail webhook request received at 2025-11-27T17:31:35.661Z
[2025-11-27T17:31:35.664Z] [INFO   ] ğŸ§ª [test-trigger] Poll #2 (4s elapsed)
[2025-11-27T17:31:35.762Z] [INFO   ] 2025-11-27T17:31:35.762Z [DEBUG] ğŸ“ [8b4e88f6-4df1-4c6c-b499-bca55f991267] Raw body received: {"deliveryAttempt":1,"message":{"data":"eyJlbWFpbEFkZHJlc3MiOiJzdG9kZGFyZC5uYXRoYW5pZWw5MDBAZ21haWwuY29tIiwiaGlzdG9yeUlkIjo2ODc4NjA4fQ==","messageId":"17140678580481852","message_id":"17140678580481852","publishTime":"2025-11-27T17:31:27.499Z","publish_time":"2025-11-27T17:31:27.499Z"},"subscription":"projects/chainreact-462214/subscriptions/gmail-webhook-subscription"}

[2025-11-27T17:31:35.762Z] [INFO   ] 2025-11-27T17:31:35.762Z [DEBUG] ğŸ“¦ [8b4e88f6-4df1-4c6c-b499-bca55f991267] Parsed body structure: {"hasMessage":true,"hasMessageData":true,"messageKeys":["data","messageId","message_id","publishTime","publish_time"],"subscription":"projects/chainreact-462214/subscriptions/gmail-webhook-subscription"}
[2025-11-27T17:31:35.763Z] [INFO   ] 2025-11-27T17:31:35.763Z [DEBUG] [8b4e88f6-4df1-4c6c-b499-bca55f991267] Received Pub/Sub message from Gmail
[2025-11-27T17:31:35.763Z] [INFO   ] 2025-11-27T17:31:35.763Z [DEBUG] ğŸ”“ [8b4e88f6-4df1-4c6c-b499-bca55f991267] Decoded Pub/Sub data: {"emailAddress":"stoddard.nathaniel900@gmail.com","historyId":6878608}
[2025-11-27T17:31:35.763Z] [INFO   ] 2025-11-27T17:31:35.763Z [DEBUG] [8b4e88f6-4df1-4c6c-b499-bca55f991267] ğŸ“§ Gmail notification received: {"emailAddress":"stoddard.nathaniel900@gmail.com","historyId":6878608,"messageId":"17140678580481852","publishTime":"2025-11-27T17:31:27.499Z"}
[2025-11-27T17:31:35.763Z] [INFO   ] 2025-11-27T17:31:35.763Z [DEBUG] [8b4e88f6-4df1-4c6c-b499-bca55f991267] ğŸ” Processing Gmail webhook, historyId: 6878608
[2025-11-27T17:31:35.841Z] [INFO   ] 2025-11-27T17:31:35.841Z [DEBUG] ğŸ” [Gmail Processor] Processing Gmail event: {"eventType":"gmail_new_email","emailAddress":"stoddard.nathaniel900@gmail.com","historyId":6878608,"requestId":"8b4e88f6-4df1-4c6c-b499-bca55f991267"}
[2025-11-27T17:31:35.842Z] [INFO   ] [Backend INFO] Gmail webhook event received {
  "eventType": "gmail_new_email",
  "emailAddress": "stoddard.nathaniel900@gmail.com",
  "historyId": 6878608,
  "requestId": "8b4e88f6-4df1-4c6c-b499-bca55f991267"
}
[2025-11-27T17:31:35.927Z] [ERROR  ] 2025-11-27T17:31:35.927Z [ERROR] Failed to store Gmail webhook event: {"code":"PGRST204","details":null,"hint":null,"message":"Could not find the 'provider' column of 'webhook_events' in the schema cache"}
[2025-11-27T17:31:35.928Z] [INFO   ] 2025-11-27T17:31:35.928Z [DEBUG] ğŸš€ [Gmail Processor] Starting to find matching workflows for Gmail event
[2025-11-27T17:31:36.143Z] [INFO   ] 2025-11-27T17:31:36.142Z [DEBUG] Processing Gmail new message event
[2025-11-27T17:31:36.233Z] [INFO   ] 2025-11-27T17:31:36.233Z [DEBUG] [Task Queue] Queued gmail webhook task:
[2025-11-27T17:31:36.234Z] [INFO   ] [Backend SUCCESS] Gmail webhook event processed successfully {
  "processed": true,
  "type": "gmail_new_message"
}
[2025-11-27T17:31:37.880Z] [INFO   ] ğŸ§ª [test-trigger] Poll #3 (6s elapsed)
[2025-11-27T17:31:40.062Z] [INFO   ] ğŸ§ª [test-trigger] Poll #4 (8s elapsed)
[2025-11-27T17:31:42.298Z] [INFO   ] ğŸ§ª [test-trigger] Poll #5 (10s elapsed)
[2025-11-27T17:31:44.472Z] [INFO   ] ğŸ§ª [test-trigger] Poll #6 (13s elapsed)
[2025-11-27T17:31:46.629Z] [INFO   ] ğŸ§ª [test-trigger] Poll #7 (15s elapsed)
[2025-11-27T17:31:48.798Z] [INFO   ] ğŸ§ª [test-trigger] Poll #8 (17s elapsed)
[2025-11-27T17:31:50.957Z] [INFO   ] ğŸ§ª [test-trigger] Poll #9 (19s elapsed)
[2025-11-27T17:31:53.144Z] [INFO   ] ğŸ§ª [test-trigger] Poll #10 (21s elapsed)
[2025-11-27T17:31:55.330Z] [INFO   ] ğŸ§ª [test-trigger] Poll #11 (23s elapsed)
[2025-11-27T17:31:57.498Z] [INFO   ] ğŸ§ª [test-trigger] Poll #12 (26s elapsed)
[2025-11-27T17:31:59.668Z] [INFO   ] ğŸ§ª [test-trigger] Poll #13 (28s elapsed)
[2025-11-27T17:32:01.848Z] [INFO   ] ğŸ§ª [test-trigger] Poll #14 (30s elapsed)
[2025-11-27T17:32:04.043Z] [INFO   ] ğŸ§ª [test-trigger] Poll #15 (32s elapsed)
[2025-11-27T17:32:06.219Z] [INFO   ] ğŸ§ª [test-trigger] Poll #16 (34s elapsed)
[2025-11-27T17:32:08.384Z] [INFO   ] ğŸ§ª [test-trigger] Poll #17 (37s elapsed)
[2025-11-27T17:32:10.556Z] [INFO   ] ğŸ§ª [test-trigger] Poll #18 (39s elapsed)
[2025-11-27T17:32:12.724Z] [INFO   ] ğŸ§ª [test-trigger] Poll #19 (41s elapsed)
[2025-11-27T17:32:14.892Z] [INFO   ] ğŸ§ª [test-trigger] Poll #20 (43s elapsed)
[2025-11-27T17:32:17.055Z] [INFO   ] ğŸ§ª [test-trigger] Poll #21 (45s elapsed)
[2025-11-27T17:32:19.313Z] [INFO   ] ğŸ§ª [test-trigger] Poll #22 (47s elapsed)
[2025-11-27T17:32:21.477Z] [INFO   ] ğŸ§ª [test-trigger] Poll #23 (50s elapsed)
[2025-11-27T17:32:23.670Z] [INFO   ] ğŸ§ª [test-trigger] Poll #24 (52s elapsed)
[2025-11-27T17:32:25.830Z] [INFO   ] ğŸ§ª [test-trigger] Poll #25 (54s elapsed)
[2025-11-27T17:32:28.001Z] [INFO   ] ğŸ§ª [test-trigger] Poll #26 (56s elapsed)
[2025-11-27T17:32:30.164Z] [INFO   ] ğŸ§ª [test-trigger] Poll #27 (58s elapsed)
[2025-11-27T17:32:33.434Z] [INFO   ] ğŸ§ª [test-trigger] Deactivating trigger...
[2025-11-27T17:32:33.509Z] [INFO   ] 2025-11-27T17:32:33.509Z [DEBUG] â„¹ï¸ No trigger resources found for workflow 82bf971e-2cac-4500-bbc1-00577a2ed9df
[2025-11-27T17:32:33.510Z] [INFO   ] ğŸ§ª [test-trigger] ğŸ›‘ Trigger deactivated
[2025-11-27T17:32:33.510Z] [INFO   ] 2025-11-27T17:32:33.510Z [DEBUG] ğŸ›‘ Test trigger deactivated
[2025-11-27T17:32:33.594Z] [INFO   ] ğŸ§ª [test-trigger] No event received, returning timeout response
[2025-11-27T17:32:42.135Z] [INFO   ]  [37m[1mâ—‹[22m[39m Compiling /api/presence/count ...
[2025-11-27T17:32:42.364Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled /api/presence/count in 1397ms (5095 modules)
[2025-11-27T17:32:48.868Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled in 1337ms (1846 modules)
[2025-11-27T17:32:49.165Z] [INFO   ] 2025-11-27T17:32:49.164Z [DEBUG] [Middleware] Username check: {"path":"/workflows/builder/82bf971e-2cac-4500-bbc1-00577a2ed9df","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15698081765}
[2025-11-27T17:32:49.592Z] [INFO   ] 2025-11-27T17:32:49.592Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-11-27T17:33:07.682Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled in 571ms (1846 modules)
[2025-11-27T17:33:07.955Z] [INFO   ] 2025-11-27T17:33:07.954Z [DEBUG] [Middleware] Username check: {"path":"/workflows/builder/82bf971e-2cac-4500-bbc1-00577a2ed9df","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15698100555}
[2025-11-27T17:33:08.102Z] [INFO   ] 2025-11-27T17:33:08.101Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-11-27T17:33:17.169Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled in 611ms (1846 modules)
[2025-11-27T17:33:17.422Z] [INFO   ] 2025-11-27T17:33:17.422Z [DEBUG] [Middleware] Username check: {"path":"/workflows/builder/82bf971e-2cac-4500-bbc1-00577a2ed9df","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15698110023}
[2025-11-27T17:33:17.575Z] [INFO   ] 2025-11-27T17:33:17.575Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-11-27T17:35:21.443Z] [INFO   ]  [37m[1mâ—‹[22m[39m Compiling /api/webhooks/gmail ...
[2025-11-27T17:35:22.471Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled /api/webhooks/gmail in 2.5s (7743 modules)
[2025-11-27T17:35:26.413Z] [INFO   ] 2025-11-27T17:35:26.413Z [DEBUG] ğŸ””ğŸ””ğŸ”” GMAIL WEBHOOK ENDPOINT HIT! ğŸ””ğŸ””ğŸ””
[2025-11-27T17:35:26.414Z] [INFO   ] 2025-11-27T17:35:26.414Z [DEBUG] ğŸ“‹ Request headers: {"accept":"application/json","accept-encoding":"gzip, deflate, br","content-length":"373","content-type":"application/json","from":"noreply@google.com","host":"850c3f4d3ca5.ngrok-free.app","user-agent":"APIs-Google; (+https://developers.google.com/webmasters/APIs-Google.html)","x-forwarded-for":"66.249.93.141","x-forwarded-host":"850c3f4d3ca5.ngrok-free.app","x-forwarded-port":"3000","x-forwarded-proto":"https"}
[2025-11-27T17:35:26.414Z] [INFO   ] 2025-11-27T17:35:26.414Z [DEBUG] ğŸ“¨ [96a994b7-157f-4e69-a015-de8543670153] Gmail webhook request received at 2025-11-27T17:35:26.414Z
[2025-11-27T17:35:26.648Z] [INFO   ] 2025-11-27T17:35:26.648Z [DEBUG] ğŸ“ [96a994b7-157f-4e69-a015-de8543670153] Raw body received: {"deliveryAttempt":1,"message":{"data":"eyJlbWFpbEFkZHJlc3MiOiJzdG9kZGFyZC5uYXRoYW5pZWw5MDBAZ21haWwuY29tIiwiaGlzdG9yeUlkIjo2ODc4NjU2fQ==","messageId":"17140790665665243","message_id":"17140790665665243","publishTime":"2025-11-27T17:35:19.052Z","publish_time":"2025-11-27T17:35:19.052Z"},"subscription":"projects/chainreact-462214/subscriptions/gmail-webhook-subscription"}

[2025-11-27T17:35:26.649Z] [INFO   ] 2025-11-27T17:35:26.648Z [DEBUG] ğŸ“¦ [96a994b7-157f-4e69-a015-de8543670153] Parsed body structure: {"hasMessage":true,"hasMessageData":true,"messageKeys":["data","messageId","message_id","publishTime","publish_time"],"subscription":"projects/chainreact-462214/subscriptions/gmail-webhook-subscription"}
[2025-11-27T17:35:26.649Z] [INFO   ] 2025-11-27T17:35:26.649Z [DEBUG] [96a994b7-157f-4e69-a015-de8543670153] Received Pub/Sub message from Gmail
[2025-11-27T17:35:26.649Z] [INFO   ] 2025-11-27T17:35:26.649Z [DEBUG] ğŸ”“ [96a994b7-157f-4e69-a015-de8543670153] Decoded Pub/Sub data: {"emailAddress":"stoddard.nathaniel900@gmail.com","historyId":6878656}
[2025-11-27T17:35:26.649Z] [INFO   ] 2025-11-27T17:35:26.649Z [DEBUG] [96a994b7-157f-4e69-a015-de8543670153] ğŸ“§ Gmail notification received: {"emailAddress":"stoddard.nathaniel900@gmail.com","historyId":6878656,"messageId":"17140790665665243","publishTime":"2025-11-27T17:35:19.052Z"}
[2025-11-27T17:35:26.649Z] [INFO   ] 2025-11-27T17:35:26.649Z [DEBUG] [96a994b7-157f-4e69-a015-de8543670153] ğŸ” Processing Gmail webhook, historyId: 6878656
[2025-11-27T17:35:26.732Z] [INFO   ] 2025-11-27T17:35:26.732Z [DEBUG] ğŸ” [Gmail Processor] Processing Gmail event: {"eventType":"gmail_new_email","emailAddress":"stoddard.nathaniel900@gmail.com","historyId":6878656,"requestId":"96a994b7-157f-4e69-a015-de8543670153"}
[2025-11-27T17:35:26.733Z] [INFO   ] [Backend INFO] Gmail webhook event received {
  "eventType": "gmail_new_email",
  "emailAddress": "stoddard.nathaniel900@gmail.com",
  "historyId": 6878656,
  "requestId": "96a994b7-157f-4e69-a015-de8543670153"
}
[2025-11-27T17:35:26.848Z] [ERROR  ] 2025-11-27T17:35:26.848Z [ERROR] Failed to store Gmail webhook event: {"code":"23502","details":"Failing row contains (4d13dcd1-d865-4591-b7d2-b2880dd3115c, null, null, null, f, 2025-11-27 17:35:26.796904+00, {\"type\": \"gmail_new_email\", \"historyId\": 6878656, \"messageId\": \"..., gmail, gmail, 96a994b7-157f-4e69-a015-de8543670153, received, 2025-11-27 17:35:26.733+00).","hint":null,"message":"null value in column \"event_type\" of relation \"webhook_events\" violates not-null constraint"}
[2025-11-27T17:35:26.849Z] [INFO   ] 2025-11-27T17:35:26.849Z [DEBUG] ğŸš€ [Gmail Processor] Starting to find matching workflows for Gmail event
[2025-11-27T17:35:27.142Z] [INFO   ] 2025-11-27T17:35:27.141Z [DEBUG] Processing Gmail new message event
[2025-11-27T17:35:27.224Z] [INFO   ] 2025-11-27T17:35:27.224Z [DEBUG] [Task Queue] Queued gmail webhook task:
[2025-11-27T17:35:27.226Z] [INFO   ] [Backend SUCCESS] Gmail webhook event processed successfully {
  "processed": true,
  "type": "gmail_new_message"
}
[2025-11-27T17:35:34.852Z] [INFO   ]  [37m[1mâ—‹[22m[39m Compiling /api/workflows/test-trigger ...
[2025-11-27T17:35:35.153Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled /api/workflows/test-trigger in 1230ms (7913 modules)
[2025-11-27T17:35:35.352Z] [INFO   ] ğŸ§ª [test-trigger] POST request received
[2025-11-27T17:35:35.360Z] [INFO   ] ğŸ§ª [test-trigger] Supabase client created
[2025-11-27T17:35:35.642Z] [INFO   ] ğŸ§ª [test-trigger] Auth check: {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0"
}
[2025-11-27T17:35:35.646Z] [INFO   ] ğŸ§ª [test-trigger] Request body: {
  "workflowId": "82bf971e-2cac-4500-bbc1-00577a2ed9df",
  "nodeId": "gmail_trigger_new_email-66214e1d-8271-4843-af4a-9fb3748f4428",
  "hasProvidedNodes": true,
  "providedNodesCount": 3
}
[2025-11-27T17:35:35.646Z] [INFO   ] ğŸ§ª [test-trigger] Using provided nodes (unsaved workflow)
[2025-11-27T17:35:35.646Z] [INFO   ] ğŸ§ª [test-trigger] Searching for trigger node in 3 nodes
[2025-11-27T17:35:35.647Z] [INFO   ] ğŸ§ª [test-trigger] Node 0: {
  "id": "gmail_trigger_new_email-66214e1d-8271-4843-af4a-9fb3748f4428",
  "type": "custom",
  "dataType": "gmail_trigger_new_email",
  "isTrigger": true,
  "providerId": "gmail"
}
[2025-11-27T17:35:35.648Z] [INFO   ] ğŸ§ª [test-trigger] Node 1: {
  "id": "ai_agent-485d88bb-197f-429b-8ef0-6ad7729de231",
  "type": "custom",
  "dataType": "ai_agent",
  "isTrigger": false,
  "providerId": "ai"
}
[2025-11-27T17:35:35.648Z] [INFO   ] ğŸ§ª [test-trigger] Node 2: {
  "id": "discord_action_send_message-a5deb258-ed70-47ea-aa22-5f2905ca82fb",
  "type": "custom",
  "dataType": "discord_action_send_message",
  "isTrigger": false,
  "providerId": "discord"
}
[2025-11-27T17:35:35.650Z] [INFO   ] ğŸ§ª [test-trigger] Trigger node details: {
  "nodeId": "gmail_trigger_new_email-66214e1d-8271-4843-af4a-9fb3748f4428",
  "providerId": "gmail",
  "triggerType": "gmail_trigger_new_email",
  "configKeys": [
    "from",
    "labelIds",
    "_label_from",
    "aiFailClosed",
    "hasAttachment",
    "_label_labelIds",
    "aiContentFilter",
    "subjectExactMatch",
    "aiFilterConfidence",
    "_label_hasAttachment",
    "aiUseEmbeddingPrefilter",
    "_label_aiFilterConfidence"
  ],
  "fullTriggerData": {
    "label": "New Email",
    "title": "New Email",
    "type": "gmail_trigger_new_email",
    "config": {
      "from": "stoddard.nathaniel@yahoo.com",
      "labelIds": [
        "INBOX"
      ],
      "_label_from": "Nathaniel Stoddard <stoddard.nathaniel@yahoo.com>",
      "aiFailClosed": "",
      "hasAttachment": "any",
      "_label_labelIds": "INBOX",
      "aiContentFilter": "",
      "subjectExactMatch": true,
      "aiFilterConfidence": "",
      "_label_hasAttachment": "any",
      "aiUseEmbeddingPrefilter": "",
      "_label_aiFilterConfidence": "Balanced (70%+ match)"
    },
    "description": "Triggers when a new email is received. Supports AI-powered semantic filtering to trigger on emails about specific topics.",
    "providerId": "gmail",
    "icon": {},
    "isTrigger": true,
    "agentHighlights": [
      "subjectExactMatch",
      "hasAttachment",
      "labelIds",
      "aiFilterConfidence",
      "aiFailClosed",
      "aiUseEmbeddingPrefilter",
      "from",
      "_label_hasAttachment",
      "_label_labelIds",
      "_label_aiFilterConfidence",
      "_label_from",
      "__dynamicOptions",
      "__validationState",
      "aiContentFilter"
    ],
    "costHint": 0
  }
}
[2025-11-27T17:35:35.651Z] [INFO   ] 2025-11-27T17:35:35.651Z [DEBUG] ğŸ§ª Testing trigger for workflow 82bf971e-2cac-4500-bbc1-00577a2ed9df {"nodeId":"gmail_trigger_new_email-66214e1d-8271-4843-af4a-9fb3748f4428","providerId":"gmail","triggerType":"gmail_trigger_new_email"}
[2025-11-27T17:35:35.651Z] [INFO   ] ğŸ§ª [test-trigger] Importing trigger lifecycle manager...
[2025-11-27T17:35:37.050Z] [INFO   ] 2025-11-27T17:35:37.050Z [DEBUG] ğŸ“ Registered trigger provider: microsoft
[2025-11-27T17:35:37.050Z] [INFO   ] 2025-11-27T17:35:37.050Z [DEBUG] ğŸ“ Registered trigger provider: microsoft-outlook
[2025-11-27T17:35:37.050Z] [INFO   ] 2025-11-27T17:35:37.050Z [DEBUG] ğŸ“ Registered trigger provider: microsoft-onenote
[2025-11-27T17:35:37.050Z] [INFO   ] 2025-11-27T17:35:37.050Z [DEBUG] ğŸ“ Registered trigger provider: microsoft-excel
[2025-11-27T17:35:37.050Z] [INFO   ] 2025-11-27T17:35:37.050Z [DEBUG] ğŸ“ Registered trigger provider: onedrive
[2025-11-27T17:35:37.050Z] [INFO   ] 2025-11-27T17:35:37.050Z [DEBUG] ğŸ“ Registered trigger provider: teams
[2025-11-27T17:35:37.050Z] [INFO   ] 2025-11-27T17:35:37.050Z [DEBUG] ğŸ“ Registered trigger provider: airtable
[2025-11-27T17:35:37.050Z] [INFO   ] 2025-11-27T17:35:37.050Z [DEBUG] ğŸ“ Registered trigger provider: discord
[2025-11-27T17:35:37.050Z] [INFO   ] 2025-11-27T17:35:37.050Z [DEBUG] ğŸ“ Registered trigger provider: slack
[2025-11-27T17:35:37.050Z] [INFO   ] 2025-11-27T17:35:37.050Z [DEBUG] ğŸ“ Registered trigger provider: gmail
[2025-11-27T17:35:37.050Z] [INFO   ] 2025-11-27T17:35:37.050Z [DEBUG] ğŸ“ Registered trigger provider: google-calendar
[2025-11-27T17:35:37.050Z] [INFO   ] 2025-11-27T17:35:37.050Z [DEBUG] ğŸ“ Registered trigger provider: google-drive
[2025-11-27T17:35:37.050Z] [INFO   ] 2025-11-27T17:35:37.050Z [DEBUG] ğŸ“ Registered trigger provider: google-sheets
[2025-11-27T17:35:37.050Z] [INFO   ] 2025-11-27T17:35:37.050Z [DEBUG] ğŸ“ Registered trigger provider: google-docs
[2025-11-27T17:35:37.050Z] [INFO   ] 2025-11-27T17:35:37.050Z [DEBUG] ğŸ“ Registered trigger provider: stripe
[2025-11-27T17:35:37.050Z] [INFO   ] 2025-11-27T17:35:37.050Z [DEBUG] ğŸ“ Registered trigger provider: shopify
[2025-11-27T17:35:37.050Z] [INFO   ] 2025-11-27T17:35:37.050Z [DEBUG] ğŸ“ Registered trigger provider: notion
[2025-11-27T17:35:37.050Z] [INFO   ] 2025-11-27T17:35:37.050Z [DEBUG] ğŸ“ Registered trigger provider: hubspot
[2025-11-27T17:35:37.050Z] [INFO   ] 2025-11-27T17:35:37.050Z [DEBUG] ğŸ“ Registered trigger provider: monday
[2025-11-27T17:35:37.050Z] [INFO   ] 2025-11-27T17:35:37.050Z [DEBUG] ğŸ“ Registered trigger provider: gumroad
[2025-11-27T17:35:37.050Z] [INFO   ] 2025-11-27T17:35:37.050Z [DEBUG] ğŸ“ Registered trigger provider: webhook
[2025-11-27T17:35:37.050Z] [INFO   ] 2025-11-27T17:35:37.050Z [DEBUG] âœ… Trigger lifecycle providers registered: ["microsoft","microsoft-outlook","microsoft-onenote","microsoft-excel","onedrive","teams","airtable","discord","slack","gmail","google-calendar","google-drive","google-sheets","google-docs","stripe","shopify","notion","hubspot","monday","gumroad","webhook"]
[2025-11-27T17:35:37.051Z] [INFO   ] ğŸ§ª [test-trigger] Registered providers: [
  "microsoft",
  "microsoft-outlook",
  "microsoft-onenote",
  "microsoft-excel",
  "onedrive",
  "teams",
  "airtable",
  "discord",
  "slack",
  "gmail",
  "google-calendar",
  "google-drive",
  "google-sheets",
  "google-docs",
  "stripe",
  "shopify",
  "notion",
  "hubspot",
  "monday",
  "gumroad",
  "webhook"
]
[2025-11-27T17:35:37.051Z] [INFO   ] ğŸ§ª [test-trigger] Is provider registered? {
  "providerId": "gmail",
  "isProviderRegistered": true
}
[2025-11-27T17:35:37.051Z] [INFO   ] ğŸ§ª [test-trigger] Activating trigger...
[2025-11-27T17:35:37.051Z] [INFO   ] ğŸ§ª [test-trigger] Trigger node being passed: {
  "id": "gmail_trigger_new_email-66214e1d-8271-4843-af4a-9fb3748f4428",
  "type": "custom",
  "position": {
    "x": 1020,
    "y": 120
  },
  "positionAbsolute": {
    "x": 1020,
    "y": 120
  },
  "data": {
    "label": "New Email",
    "title": "New Email",
    "type": "gmail_trigger_new_email",
    "config": {
      "from": "stoddard.nathaniel@yahoo.com",
      "labelIds": [
        "INBOX"
      ],
      "_label_from": "Nathaniel Stoddard <stoddard.nathaniel@yahoo.com>",
      "aiFailClosed": "",
      "hasAttachment": "any",
      "_label_labelIds": "INBOX",
      "aiContentFilter": "",
      "subjectExactMatch": true,
      "aiFilterConfidence": "",
      "_label_hasAttachment": "any",
      "aiUseEmbeddingPrefilter": "",
      "_label_aiFilterConfidence": "Balanced (70%+ match)"
    },
    "description": "Triggers when a new email is received. Supports AI-powered semantic filtering to trigger on emails about specific topics.",
    "providerId": "gmail",
    "icon": {},
    "isTrigger": true,
    "agentHighlights": [
      "subjectExactMatch",
      "hasAttachment",
      "labelIds",
      "aiFilterConfidence",
      "aiFailClosed",
      "aiUseEmbeddingPrefilter",
      "from",
      "_label_hasAttachment",
      "_label_labelIds",
      "_label_aiFilterConfidence",
      "_label_from",
      "__dynamicOptions",
      "__validationState",
      "aiContentFilter"
    ],
    "costHint": 0
  },
  "measured": {
    "width": 360,
    "height": 79
  }
}
[2025-11-27T17:35:37.051Z] [INFO   ] 2025-11-27T17:35:37.051Z [DEBUG] ğŸš€ Activating 1 triggers for workflow 82bf971e-2cac-4500-bbc1-00577a2ed9df
[2025-11-27T17:35:37.051Z] [INFO   ] 2025-11-27T17:35:37.051Z [DEBUG] ğŸ”” Activating Google API trigger for workflow 82bf971e-2cac-4500-bbc1-00577a2ed9df {"triggerType":"gmail_trigger_new_email","providerId":"gmail","config":{"from":"stoddard.nathaniel@yahoo.com","labelIds":["INBOX"],"_label_from":"Nathaniel Stoddard <stoddard.nathaniel@yahoo.com>","aiFailClosed":"","hasAttachment":"any","_label_labelIds":"INBOX","aiContentFilter":"","subjectExactMatch":true,"aiFilterConfidence":"","_label_hasAttachment":"any","aiUseEmbeddingPrefilter":"","_label_aiFilterConfidence":"Balanced (70%+ match)"}}
[2025-11-27T17:35:37.149Z] [INFO   ] 2025-11-27T17:35:37.149Z [DEBUG] ğŸ“¤ Creating Google push notification {"api":"gmail","resourceId":null,"channelId":"chainreact-82bf971e-2cac-4500-bbc1-00577a2ed9df-1764264937149","webhookUrl":"https://9b7007881520.ngrok-free.app/api/webhooks/google"}
[2025-11-27T17:35:37.150Z] [INFO   ] 2025-11-27T17:35:37.150Z [DEBUG] ğŸ“§ Creating Gmail watch with Pub/Sub topic: projects/chainreact-462214/topics/gmail-notifications {"labelIds":["INBOX"],"labelFilterAction":"include"}
[2025-11-27T17:35:37.435Z] [INFO   ] 2025-11-27T17:35:37.435Z [DEBUG] âœ… Gmail watch created - historyId: 6878656 {"watchingFolders":"INBOX"}
[2025-11-27T17:35:37.436Z] [INFO   ] 2025-11-27T17:35:37.436Z [DEBUG] ğŸ“ Storing trigger resource: {"workflow_id":"82bf971e-2cac-4500-bbc1-00577a2ed9df","user_id":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider_id":"gmail","trigger_type":"gmail_trigger_new_email","node_id":"gmail_trigger_new_email-66214e1d-8271-4843-af4a-9fb3748f4428","resource_type":"subscription","external_id":"chainreact-82bf971e-2cac-4500-bbc1-00577a2ed9df-1764264937149","config":{"from":"stoddard.nathaniel@yahoo.com","labelIds":["INBOX"],"_label_from":"Nathaniel Stoddard <stoddard.nathaniel@yahoo.com>","aiFailClosed":"","hasAttachment":"any","_label_labelIds":"INBOX","aiContentFilter":"","subjectExactMatch":true,"aiFilterConfidence":"","_label_hasAttachment":"any","aiUseEmbeddingPrefilter":"","_label_aiFilterConfidence":"Balanced (70%+ match)","channelId":"chainreact-82bf971e-2cac-4500-bbc1-00577a2ed9df-1764264937149","resourceId":"6878656","api":"gmail","events":["message"],"webhookUrl":"https://9b7007881520.ngrok-free.app/api/webhooks/google"},"status":"active","expires_at":"2025-12-04T17:35:37.366Z"}
[2025-11-27T17:35:37.519Z] [ERROR  ] 2025-11-27T17:35:37.519Z [ERROR] âŒ Failed to store trigger resource: {"code":"PGRST204","details":null,"hint":null,"message":"Could not find the 'node_id' column of 'trigger_resources' in the schema cache"}
[2025-11-27T17:35:37.519Z] [ERROR  ] 2025-11-27T17:35:37.519Z [ERROR] âŒ Failed to activate gmail/gmail_trigger_new_email: Failed to store trigger resource: Could not find the 'node_id' column of 'trigger_resources' in the schema cache
[2025-11-27T17:35:37.519Z] [INFO   ] ğŸ§ª [test-trigger] âœ… Trigger activated successfully!
[2025-11-27T17:35:37.519Z] [INFO   ] 2025-11-27T17:35:37.519Z [DEBUG] âœ… Trigger activated for testing, polling for events...
[2025-11-27T17:35:37.619Z] [INFO   ] ğŸ§ª [test-trigger] Created trigger resources: []
[2025-11-27T17:35:37.619Z] [INFO   ] ğŸ§ª [test-trigger] Starting to poll for events...
[2025-11-27T17:35:37.619Z] [INFO   ] ğŸ§ª [test-trigger] Poll #1 (0s elapsed)
[2025-11-27T17:35:39.782Z] [INFO   ] ğŸ§ª [test-trigger] Poll #2 (2s elapsed)
[2025-11-27T17:35:41.975Z] [INFO   ] ğŸ§ª [test-trigger] Poll #3 (4s elapsed)
[2025-11-27T17:35:44.394Z] [INFO   ] 2025-11-27T17:35:44.394Z [DEBUG] ğŸ””ğŸ””ğŸ”” GMAIL WEBHOOK ENDPOINT HIT! ğŸ””ğŸ””ğŸ””
[2025-11-27T17:35:44.395Z] [INFO   ] 2025-11-27T17:35:44.395Z [DEBUG] ğŸ“‹ Request headers: {"accept":"application/json","accept-encoding":"gzip, deflate, br","content-length":"373","content-type":"application/json","from":"noreply@google.com","host":"850c3f4d3ca5.ngrok-free.app","user-agent":"APIs-Google; (+https://developers.google.com/webmasters/APIs-Google.html)","x-forwarded-for":"66.249.93.130","x-forwarded-host":"850c3f4d3ca5.ngrok-free.app","x-forwarded-port":"3000","x-forwarded-proto":"https"}
[2025-11-27T17:35:44.395Z] [INFO   ] 2025-11-27T17:35:44.395Z [DEBUG] ğŸ“¨ [1e5999c7-6132-4944-913d-d3269e7a4458] Gmail webhook request received at 2025-11-27T17:35:44.395Z
[2025-11-27T17:35:44.402Z] [INFO   ] ğŸ§ª [test-trigger] Poll #4 (7s elapsed)
[2025-11-27T17:35:44.465Z] [INFO   ] 2025-11-27T17:35:44.465Z [DEBUG] ğŸ“ [1e5999c7-6132-4944-913d-d3269e7a4458] Raw body received: {"deliveryAttempt":1,"message":{"data":"eyJlbWFpbEFkZHJlc3MiOiJzdG9kZGFyZC5uYXRoYW5pZWw5MDBAZ21haWwuY29tIiwiaGlzdG9yeUlkIjo2ODc4NzA1fQ==","messageId":"17140811809905508","message_id":"17140811809905508","publishTime":"2025-11-27T17:35:43.058Z","publish_time":"2025-11-27T17:35:43.058Z"},"subscription":"projects/chainreact-462214/subscriptions/gmail-webhook-subscription"}

[2025-11-27T17:35:44.465Z] [INFO   ] 2025-11-27T17:35:44.465Z [DEBUG] ğŸ“¦ [1e5999c7-6132-4944-913d-d3269e7a4458] Parsed body structure: {"hasMessage":true,"hasMessageData":true,"messageKeys":["data","messageId","message_id","publishTime","publish_time"],"subscription":"projects/chainreact-462214/subscriptions/gmail-webhook-subscription"}
[2025-11-27T17:35:44.465Z] [INFO   ] 2025-11-27T17:35:44.465Z [DEBUG] [1e5999c7-6132-4944-913d-d3269e7a4458] Received Pub/Sub message from Gmail
[2025-11-27T17:35:44.465Z] [INFO   ] 2025-11-27T17:35:44.465Z [DEBUG] ğŸ”“ [1e5999c7-6132-4944-913d-d3269e7a4458] Decoded Pub/Sub data: {"emailAddress":"stoddard.nathaniel900@gmail.com","historyId":6878705}
[2025-11-27T17:35:44.465Z] [INFO   ] 2025-11-27T17:35:44.465Z [DEBUG] [1e5999c7-6132-4944-913d-d3269e7a4458] ğŸ“§ Gmail notification received: {"emailAddress":"stoddard.nathaniel900@gmail.com","historyId":6878705,"messageId":"17140811809905508","publishTime":"2025-11-27T17:35:43.058Z"}
[2025-11-27T17:35:44.465Z] [INFO   ] 2025-11-27T17:35:44.465Z [DEBUG] [1e5999c7-6132-4944-913d-d3269e7a4458] ğŸ” Processing Gmail webhook, historyId: 6878705
[2025-11-27T17:35:44.545Z] [INFO   ] 2025-11-27T17:35:44.545Z [DEBUG] ğŸ” [Gmail Processor] Processing Gmail event: {"eventType":"gmail_new_email","emailAddress":"stoddard.nathaniel900@gmail.com","historyId":6878705,"requestId":"1e5999c7-6132-4944-913d-d3269e7a4458"}
[2025-11-27T17:35:44.546Z] [INFO   ] [Backend INFO] Gmail webhook event received {
  "eventType": "gmail_new_email",
  "emailAddress": "stoddard.nathaniel900@gmail.com",
  "historyId": 6878705,
  "requestId": "1e5999c7-6132-4944-913d-d3269e7a4458"
}
[2025-11-27T17:35:44.634Z] [ERROR  ] 2025-11-27T17:35:44.633Z [ERROR] Failed to store Gmail webhook event: {"code":"23502","details":"Failing row contains (28cd6455-52f6-4630-bfa8-e150998915d7, null, null, null, f, 2025-11-27 17:35:44.607116+00, {\"type\": \"gmail_new_email\", \"historyId\": 6878705, \"messageId\": \"..., gmail, gmail, 1e5999c7-6132-4944-913d-d3269e7a4458, received, 2025-11-27 17:35:44.547+00).","hint":null,"message":"null value in column \"event_type\" of relation \"webhook_events\" violates not-null constraint"}
[2025-11-27T17:35:44.635Z] [INFO   ] 2025-11-27T17:35:44.635Z [DEBUG] ğŸš€ [Gmail Processor] Starting to find matching workflows for Gmail event
[2025-11-27T17:35:44.822Z] [INFO   ] 2025-11-27T17:35:44.821Z [DEBUG] Processing Gmail new message event
[2025-11-27T17:35:44.909Z] [INFO   ] 2025-11-27T17:35:44.909Z [DEBUG] [Task Queue] Queued gmail webhook task:
[2025-11-27T17:35:44.911Z] [INFO   ] [Backend SUCCESS] Gmail webhook event processed successfully {
  "processed": true,
  "type": "gmail_new_message"
}
[2025-11-27T17:35:46.648Z] [INFO   ] ğŸ§ª [test-trigger] Poll #5 (9s elapsed)
[2025-11-27T17:35:48.813Z] [INFO   ] ğŸ§ª [test-trigger] Poll #6 (11s elapsed)
[2025-11-27T17:35:50.997Z] [INFO   ] ğŸ§ª [test-trigger] Poll #7 (13s elapsed)
[2025-11-27T17:35:53.175Z] [INFO   ] ğŸ§ª [test-trigger] Poll #8 (16s elapsed)
[2025-11-27T17:35:55.343Z] [INFO   ] ğŸ§ª [test-trigger] Poll #9 (18s elapsed)
[2025-11-27T17:35:57.516Z] [INFO   ] ğŸ§ª [test-trigger] Poll #10 (20s elapsed)
[2025-11-27T17:35:59.714Z] [INFO   ] ğŸ§ª [test-trigger] Poll #11 (22s elapsed)
[2025-11-27T17:36:01.883Z] [INFO   ] ğŸ§ª [test-trigger] Poll #12 (24s elapsed)
[2025-11-27T17:36:04.053Z] [INFO   ] ğŸ§ª [test-trigger] Poll #13 (26s elapsed)
[2025-11-27T17:36:06.233Z] [INFO   ] ğŸ§ª [test-trigger] Poll #14 (29s elapsed)
[2025-11-27T17:36:08.468Z] [INFO   ] ğŸ§ª [test-trigger] Poll #15 (31s elapsed)
[2025-11-27T17:36:10.629Z] [INFO   ] ğŸ§ª [test-trigger] Poll #16 (33s elapsed)
[2025-11-27T17:36:12.787Z] [INFO   ] ğŸ§ª [test-trigger] Poll #17 (35s elapsed)
[2025-11-27T17:36:14.948Z] [INFO   ] ğŸ§ª [test-trigger] Poll #18 (37s elapsed)
[2025-11-27T17:36:17.119Z] [INFO   ] ğŸ§ª [test-trigger] Poll #19 (39s elapsed)
[2025-11-27T17:36:19.297Z] [INFO   ] ğŸ§ª [test-trigger] Poll #20 (42s elapsed)
[2025-11-27T17:36:21.461Z] [INFO   ] ğŸ§ª [test-trigger] Poll #21 (44s elapsed)
[2025-11-27T17:36:23.630Z] [INFO   ] ğŸ§ª [test-trigger] Poll #22 (46s elapsed)
[2025-11-27T17:36:25.790Z] [INFO   ] ğŸ§ª [test-trigger] Poll #23 (48s elapsed)
[2025-11-27T17:36:27.989Z] [INFO   ] ğŸ§ª [test-trigger] Poll #24 (50s elapsed)
[2025-11-27T17:36:30.157Z] [INFO   ] ğŸ§ª [test-trigger] Poll #25 (53s elapsed)
[2025-11-27T17:36:32.352Z] [INFO   ] ğŸ§ª [test-trigger] Poll #26 (55s elapsed)
[2025-11-27T17:36:34.525Z] [INFO   ] ğŸ§ª [test-trigger] Poll #27 (57s elapsed)
[2025-11-27T17:36:37.190Z] [INFO   ] ğŸ§ª [test-trigger] Poll #28 (60s elapsed)
[2025-11-27T17:36:40.374Z] [INFO   ] ğŸ§ª [test-trigger] Deactivating trigger...
[2025-11-27T17:36:40.456Z] [INFO   ] 2025-11-27T17:36:40.456Z [DEBUG] â„¹ï¸ No trigger resources found for workflow 82bf971e-2cac-4500-bbc1-00577a2ed9df
[2025-11-27T17:36:40.456Z] [INFO   ] ğŸ§ª [test-trigger] ğŸ›‘ Trigger deactivated
[2025-11-27T17:36:40.456Z] [INFO   ] 2025-11-27T17:36:40.456Z [DEBUG] ğŸ›‘ Test trigger deactivated
[2025-11-27T17:36:40.537Z] [INFO   ] ğŸ§ª [test-trigger] No event received, returning timeout response
[2025-11-27T17:36:47.065Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled in 1019ms (1846 modules)
[2025-11-27T17:36:47.591Z] [INFO   ] 2025-11-27T17:36:47.590Z [DEBUG] [Middleware] Username check: {"path":"/workflows/builder/82bf971e-2cac-4500-bbc1-00577a2ed9df","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15698320191}
[2025-11-27T17:36:48.178Z] [INFO   ] 2025-11-27T17:36:48.177Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-11-27T17:37:03.506Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled in 1623ms (6935 modules)
[2025-11-27T17:37:03.839Z] [INFO   ] 2025-11-27T17:37:03.839Z [DEBUG] [Middleware] Username check: {"path":"/workflows/builder/82bf971e-2cac-4500-bbc1-00577a2ed9df","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15698336440}
[2025-11-27T17:37:04.464Z] [INFO   ] 2025-11-27T17:37:04.464Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-11-27T17:37:11.900Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled in 687ms (1846 modules)
[2025-11-27T17:37:12.158Z] [INFO   ] 2025-11-27T17:37:12.157Z [DEBUG] [Middleware] Username check: {"path":"/workflows/builder/82bf971e-2cac-4500-bbc1-00577a2ed9df","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15698344758}
[2025-11-27T17:37:12.281Z] [INFO   ] 2025-11-27T17:37:12.280Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-11-27T17:37:20.192Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled in 538ms (1846 modules)
[2025-11-27T17:37:20.454Z] [INFO   ] 2025-11-27T17:37:20.454Z [DEBUG] [Middleware] Username check: {"path":"/workflows/builder/82bf971e-2cac-4500-bbc1-00577a2ed9df","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15698353055}
[2025-11-27T17:37:20.616Z] [INFO   ] 2025-11-27T17:37:20.616Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-11-27T17:37:42.394Z] [INFO   ]  [37m[1mâ—‹[22m[39m Compiling /api/presence/count ...
[2025-11-27T17:37:42.489Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled /api/presence/count in 1496ms (5095 modules)
[2025-11-27T17:38:19.886Z] [INFO   ]  [37m[1mâ—‹[22m[39m Compiling /api/workflows/test-trigger ...
[2025-11-27T17:38:21.452Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled /api/workflows/test-trigger in 2.3s (6296 modules)
[2025-11-27T17:38:21.709Z] [INFO   ] ğŸ§ª [test-trigger] POST request received
[2025-11-27T17:38:21.713Z] [INFO   ] ğŸ§ª [test-trigger] Supabase client created
[2025-11-27T17:38:21.866Z] [INFO   ] ğŸ§ª [test-trigger] Auth check: {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0"
}
[2025-11-27T17:38:21.868Z] [INFO   ] ğŸ§ª [test-trigger] Request body: {
  "workflowId": "82bf971e-2cac-4500-bbc1-00577a2ed9df",
  "nodeId": "gmail_trigger_new_email-66214e1d-8271-4843-af4a-9fb3748f4428",
  "hasProvidedNodes": true,
  "providedNodesCount": 3
}
[2025-11-27T17:38:21.868Z] [INFO   ] ğŸ§ª [test-trigger] Using provided nodes (unsaved workflow)
[2025-11-27T17:38:21.868Z] [INFO   ] ğŸ§ª [test-trigger] Searching for trigger node in 3 nodes
[2025-11-27T17:38:21.868Z] [INFO   ] ğŸ§ª [test-trigger] Node 0: {
  "id": "gmail_trigger_new_email-66214e1d-8271-4843-af4a-9fb3748f4428",
  "type": "custom",
  "dataType": "gmail_trigger_new_email",
  "isTrigger": true,
  "providerId": "gmail"
}
[2025-11-27T17:38:21.868Z] [INFO   ] ğŸ§ª [test-trigger] Node 1: {
  "id": "ai_agent-485d88bb-197f-429b-8ef0-6ad7729de231",
  "type": "custom",
  "dataType": "ai_agent",
  "isTrigger": false,
  "providerId": "ai"
}
[2025-11-27T17:38:21.868Z] [INFO   ] ğŸ§ª [test-trigger] Node 2: {
  "id": "discord_action_send_message-a5deb258-ed70-47ea-aa22-5f2905ca82fb",
  "type": "custom",
  "dataType": "discord_action_send_message",
  "isTrigger": false,
  "providerId": "discord"
}
[2025-11-27T17:38:21.868Z] [INFO   ] ğŸ§ª [test-trigger] Trigger node details: {
  "nodeId": "gmail_trigger_new_email-66214e1d-8271-4843-af4a-9fb3748f4428",
  "providerId": "gmail",
  "triggerType": "gmail_trigger_new_email",
  "configKeys": [
    "from",
    "labelIds",
    "_label_from",
    "aiFailClosed",
    "hasAttachment",
    "_label_labelIds",
    "aiContentFilter",
    "subjectExactMatch",
    "aiFilterConfidence",
    "_label_hasAttachment",
    "aiUseEmbeddingPrefilter",
    "_label_aiFilterConfidence"
  ],
  "fullTriggerData": {
    "label": "New Email",
    "title": "New Email",
    "type": "gmail_trigger_new_email",
    "config": {
      "from": "stoddard.nathaniel@yahoo.com",
      "labelIds": [
        "INBOX"
      ],
      "_label_from": "Nathaniel Stoddard <stoddard.nathaniel@yahoo.com>",
      "aiFailClosed": "",
      "hasAttachment": "any",
      "_label_labelIds": "INBOX",
      "aiContentFilter": "",
      "subjectExactMatch": true,
      "aiFilterConfidence": "",
      "_label_hasAttachment": "any",
      "aiUseEmbeddingPrefilter": "",
      "_label_aiFilterConfidence": "Balanced (70%+ match)"
    },
    "description": "Triggers when a new email is received. Supports AI-powered semantic filtering to trigger on emails about specific topics.",
    "providerId": "gmail",
    "icon": {},
    "isTrigger": true,
    "agentHighlights": [
      "subjectExactMatch",
      "hasAttachment",
      "labelIds",
      "aiFilterConfidence",
      "aiFailClosed",
      "aiUseEmbeddingPrefilter",
      "from",
      "_label_hasAttachment",
      "_label_labelIds",
      "_label_aiFilterConfidence",
      "_label_from",
      "__dynamicOptions",
      "__validationState",
      "aiContentFilter"
    ],
    "costHint": 0
  }
}
[2025-11-27T17:38:21.869Z] [INFO   ] 2025-11-27T17:38:21.869Z [DEBUG] ğŸ§ª Testing trigger for workflow 82bf971e-2cac-4500-bbc1-00577a2ed9df {"nodeId":"gmail_trigger_new_email-66214e1d-8271-4843-af4a-9fb3748f4428","providerId":"gmail","triggerType":"gmail_trigger_new_email"}
[2025-11-27T17:38:21.869Z] [INFO   ] ğŸ§ª [test-trigger] Importing trigger lifecycle manager...
[2025-11-27T17:38:24.547Z] [INFO   ] 2025-11-27T17:38:24.546Z [DEBUG] ğŸ“ Registered trigger provider: microsoft
[2025-11-27T17:38:24.547Z] [INFO   ] 2025-11-27T17:38:24.547Z [DEBUG] ğŸ“ Registered trigger provider: microsoft-outlook
[2025-11-27T17:38:24.547Z] [INFO   ] 2025-11-27T17:38:24.547Z [DEBUG] ğŸ“ Registered trigger provider: microsoft-onenote
[2025-11-27T17:38:24.547Z] [INFO   ] 2025-11-27T17:38:24.547Z [DEBUG] ğŸ“ Registered trigger provider: microsoft-excel
[2025-11-27T17:38:24.547Z] [INFO   ] 2025-11-27T17:38:24.547Z [DEBUG] ğŸ“ Registered trigger provider: onedrive
[2025-11-27T17:38:24.547Z] [INFO   ] 2025-11-27T17:38:24.547Z [DEBUG] ğŸ“ Registered trigger provider: teams
[2025-11-27T17:38:24.547Z] [INFO   ] 2025-11-27T17:38:24.547Z [DEBUG] ğŸ“ Registered trigger provider: airtable
[2025-11-27T17:38:24.547Z] [INFO   ] 2025-11-27T17:38:24.547Z [DEBUG] ğŸ“ Registered trigger provider: discord
[2025-11-27T17:38:24.547Z] [INFO   ] 2025-11-27T17:38:24.547Z [DEBUG] ğŸ“ Registered trigger provider: slack
[2025-11-27T17:38:24.547Z] [INFO   ] 2025-11-27T17:38:24.547Z [DEBUG] ğŸ“ Registered trigger provider: gmail
[2025-11-27T17:38:24.547Z] [INFO   ] 2025-11-27T17:38:24.547Z [DEBUG] ğŸ“ Registered trigger provider: google-calendar
[2025-11-27T17:38:24.548Z] [INFO   ] 2025-11-27T17:38:24.547Z [DEBUG] ğŸ“ Registered trigger provider: google-drive
[2025-11-27T17:38:24.548Z] [INFO   ] 2025-11-27T17:38:24.548Z [DEBUG] ğŸ“ Registered trigger provider: google-sheets
[2025-11-27T17:38:24.548Z] [INFO   ] 2025-11-27T17:38:24.548Z [DEBUG] ğŸ“ Registered trigger provider: google-docs
[2025-11-27T17:38:24.548Z] [INFO   ] 2025-11-27T17:38:24.548Z [DEBUG] ğŸ“ Registered trigger provider: stripe
[2025-11-27T17:38:24.548Z] [INFO   ] 2025-11-27T17:38:24.548Z [DEBUG] ğŸ“ Registered trigger provider: shopify
[2025-11-27T17:38:24.548Z] [INFO   ] 2025-11-27T17:38:24.548Z [DEBUG] ğŸ“ Registered trigger provider: notion
[2025-11-27T17:38:24.548Z] [INFO   ] 2025-11-27T17:38:24.548Z [DEBUG] ğŸ“ Registered trigger provider: hubspot
[2025-11-27T17:38:24.548Z] [INFO   ] 2025-11-27T17:38:24.548Z [DEBUG] ğŸ“ Registered trigger provider: monday
[2025-11-27T17:38:24.548Z] [INFO   ] 2025-11-27T17:38:24.548Z [DEBUG] ğŸ“ Registered trigger provider: gumroad
[2025-11-27T17:38:24.548Z] [INFO   ] 2025-11-27T17:38:24.548Z [DEBUG] ğŸ“ Registered trigger provider: webhook
[2025-11-27T17:38:24.548Z] [INFO   ] 2025-11-27T17:38:24.548Z [DEBUG] âœ… Trigger lifecycle providers registered: ["microsoft","microsoft-outlook","microsoft-onenote","microsoft-excel","onedrive","teams","airtable","discord","slack","gmail","google-calendar","google-drive","google-sheets","google-docs","stripe","shopify","notion","hubspot","monday","gumroad","webhook"]
[2025-11-27T17:38:24.549Z] [INFO   ] ğŸ§ª [test-trigger] Registered providers: [
  "microsoft",
  "microsoft-outlook",
  "microsoft-onenote",
  "microsoft-excel",
  "onedrive",
  "teams",
  "airtable",
  "discord",
  "slack",
  "gmail",
  "google-calendar",
  "google-drive",
  "google-sheets",
  "google-docs",
  "stripe",
  "shopify",
  "notion",
  "hubspot",
  "monday",
  "gumroad",
  "webhook"
]
[2025-11-27T17:38:24.549Z] [INFO   ] ğŸ§ª [test-trigger] Is provider registered? {
  "providerId": "gmail",
  "isProviderRegistered": true
}
[2025-11-27T17:38:24.549Z] [INFO   ] ğŸ§ª [test-trigger] Activating trigger...
[2025-11-27T17:38:24.549Z] [INFO   ] ğŸ§ª [test-trigger] Trigger node being passed: {
  "id": "gmail_trigger_new_email-66214e1d-8271-4843-af4a-9fb3748f4428",
  "type": "custom",
  "position": {
    "x": 1020,
    "y": 120
  },
  "positionAbsolute": {
    "x": 1020,
    "y": 120
  },
  "data": {
    "label": "New Email",
    "title": "New Email",
    "type": "gmail_trigger_new_email",
    "config": {
      "from": "stoddard.nathaniel@yahoo.com",
      "labelIds": [
        "INBOX"
      ],
      "_label_from": "Nathaniel Stoddard <stoddard.nathaniel@yahoo.com>",
      "aiFailClosed": "",
      "hasAttachment": "any",
      "_label_labelIds": "INBOX",
      "aiContentFilter": "",
      "subjectExactMatch": true,
      "aiFilterConfidence": "",
      "_label_hasAttachment": "any",
      "aiUseEmbeddingPrefilter": "",
      "_label_aiFilterConfidence": "Balanced (70%+ match)"
    },
    "description": "Triggers when a new email is received. Supports AI-powered semantic filtering to trigger on emails about specific topics.",
    "providerId": "gmail",
    "icon": {},
    "isTrigger": true,
    "agentHighlights": [
      "subjectExactMatch",
      "hasAttachment",
      "labelIds",
      "aiFilterConfidence",
      "aiFailClosed",
      "aiUseEmbeddingPrefilter",
      "from",
      "_label_hasAttachment",
      "_label_labelIds",
      "_label_aiFilterConfidence",
      "_label_from",
      "__dynamicOptions",
      "__validationState",
      "aiContentFilter"
    ],
    "costHint": 0
  },
  "measured": {
    "width": 360,
    "height": 79
  }
}
[2025-11-27T17:38:24.549Z] [INFO   ] 2025-11-27T17:38:24.549Z [DEBUG] ğŸš€ Activating 1 triggers for workflow 82bf971e-2cac-4500-bbc1-00577a2ed9df
[2025-11-27T17:38:24.550Z] [INFO   ] 2025-11-27T17:38:24.550Z [DEBUG] ğŸ”” Activating Google API trigger for workflow 82bf971e-2cac-4500-bbc1-00577a2ed9df {"triggerType":"gmail_trigger_new_email","providerId":"gmail","config":{"from":"stoddard.nathaniel@yahoo.com","labelIds":["INBOX"],"_label_from":"Nathaniel Stoddard <stoddard.nathaniel@yahoo.com>","aiFailClosed":"","hasAttachment":"any","_label_labelIds":"INBOX","aiContentFilter":"","subjectExactMatch":true,"aiFilterConfidence":"","_label_hasAttachment":"any","aiUseEmbeddingPrefilter":"","_label_aiFilterConfidence":"Balanced (70%+ match)"}}
[2025-11-27T17:38:24.756Z] [INFO   ] 2025-11-27T17:38:24.756Z [DEBUG] ğŸ“¤ Creating Google push notification {"api":"gmail","resourceId":null,"channelId":"chainreact-82bf971e-2cac-4500-bbc1-00577a2ed9df-1764265104756","webhookUrl":"https://9b7007881520.ngrok-free.app/api/webhooks/google"}
[2025-11-27T17:38:24.758Z] [INFO   ] 2025-11-27T17:38:24.758Z [DEBUG] ğŸ“§ Creating Gmail watch with Pub/Sub topic: projects/chainreact-462214/topics/gmail-notifications {"labelIds":["INBOX"],"labelFilterAction":"include"}
[2025-11-27T17:38:25.091Z] [INFO   ] 2025-11-27T17:38:25.091Z [DEBUG] âœ… Gmail watch created - historyId: 6878752 {"watchingFolders":"INBOX"}
[2025-11-27T17:38:25.092Z] [INFO   ] 2025-11-27T17:38:25.091Z [DEBUG] ğŸ“ Storing trigger resource: {"workflow_id":"82bf971e-2cac-4500-bbc1-00577a2ed9df","user_id":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider_id":"gmail","trigger_type":"gmail_trigger_new_email","node_id":"gmail_trigger_new_email-66214e1d-8271-4843-af4a-9fb3748f4428","resource_type":"subscription","external_id":"chainreact-82bf971e-2cac-4500-bbc1-00577a2ed9df-1764265104756","config":{"from":"stoddard.nathaniel@yahoo.com","labelIds":["INBOX"],"_label_from":"Nathaniel Stoddard <stoddard.nathaniel@yahoo.com>","aiFailClosed":"","hasAttachment":"any","_label_labelIds":"INBOX","aiContentFilter":"","subjectExactMatch":true,"aiFilterConfidence":"","_label_hasAttachment":"any","aiUseEmbeddingPrefilter":"","_label_aiFilterConfidence":"Balanced (70%+ match)","channelId":"chainreact-82bf971e-2cac-4500-bbc1-00577a2ed9df-1764265104756","resourceId":"6878752","api":"gmail","events":["message"],"webhookUrl":"https://9b7007881520.ngrok-free.app/api/webhooks/google"},"status":"active","expires_at":"2025-12-04T17:38:25.050Z"}
[2025-11-27T17:38:25.179Z] [ERROR  ] 2025-11-27T17:38:25.178Z [ERROR] âŒ Failed to store trigger resource: {"code":"23502","details":"Failing row contains (0ea30141-d067-4d93-b585-e25b64496b10, 82bf971e-2cac-4500-bbc1-00577a2ed9df, a3e3a51a-175c-4b59-ad03-227ba12a18b0, null, subscription, null, {}, active, 2025-12-04 17:38:25.05+00, 2025-11-27 17:38:25.176249+00, 2025-11-27 17:38:25.176249+00, {\"api\": \"gmail\", \"from\": \"stoddard.nathaniel@yahoo.com\", \"events..., chainreact-82bf971e-2cac-4500-bbc1-00577a2ed9df-1764265104756, gmail_trigger_new_email-66214e1d-8271-4843-af4a-9fb3748f4428, gmail_trigger_new_email, gmail).","hint":null,"message":"null value in column \"provider\" of relation \"trigger_resources\" violates not-null constraint"}
[2025-11-27T17:38:25.180Z] [ERROR  ] 2025-11-27T17:38:25.180Z [ERROR] âŒ Failed to activate gmail/gmail_trigger_new_email: Failed to store trigger resource: null value in column "provider" of relation "trigger_resources" violates not-null constraint
[2025-11-27T17:38:25.180Z] [INFO   ] ğŸ§ª [test-trigger] âœ… Trigger activated successfully!
[2025-11-27T17:38:25.181Z] [INFO   ] 2025-11-27T17:38:25.181Z [DEBUG] âœ… Trigger activated for testing, polling for events...
[2025-11-27T17:38:25.259Z] [INFO   ] ğŸ§ª [test-trigger] Created trigger resources: []
[2025-11-27T17:38:25.259Z] [INFO   ] ğŸ§ª [test-trigger] Starting to poll for events...
[2025-11-27T17:38:25.259Z] [INFO   ] ğŸ§ª [test-trigger] Poll #1 (0s elapsed)
[2025-11-27T17:38:26.517Z] [INFO   ]  [37m[1mâ—‹[22m[39m Compiling /api/webhooks/gmail ...
[2025-11-27T17:38:28.657Z] [INFO   ] ğŸ§ª [test-trigger] Poll #2 (3s elapsed)
[2025-11-27T17:38:33.942Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled /api/webhooks/gmail in 8s (7915 modules)
[2025-11-27T17:38:37.313Z] [INFO   ] 2025-11-27T17:38:37.313Z [DEBUG] ğŸ””ğŸ””ğŸ”” GMAIL WEBHOOK ENDPOINT HIT! ğŸ””ğŸ””ğŸ””
[2025-11-27T17:38:37.314Z] [INFO   ] 2025-11-27T17:38:37.314Z [DEBUG] ğŸ“‹ Request headers: {"accept":"application/json","accept-encoding":"gzip, deflate, br","content-length":"373","content-type":"application/json","from":"noreply@google.com","host":"850c3f4d3ca5.ngrok-free.app","user-agent":"APIs-Google; (+https://developers.google.com/webmasters/APIs-Google.html)","x-forwarded-for":"66.249.93.140","x-forwarded-host":"850c3f4d3ca5.ngrok-free.app","x-forwarded-port":"3000","x-forwarded-proto":"https"}
[2025-11-27T17:38:37.314Z] [INFO   ] 2025-11-27T17:38:37.314Z [DEBUG] ğŸ“¨ [c85ec60d-efef-45a1-996b-1b64fbc442f0] Gmail webhook request received at 2025-11-27T17:38:37.314Z
[2025-11-27T17:38:37.317Z] [INFO   ] ğŸ§ª [test-trigger] Poll #3 (12s elapsed)
[2025-11-27T17:38:37.514Z] [ERROR  ] requestId is not defined
ReferenceError: requestId is not defined
    at POST (webpack-internal:///(rsc)/./app/api/webhooks/gmail/route.ts:133:79)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async AppRouteRouteModule.do (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38696)
    at async AppRouteRouteModule.handle (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45978)
    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Fgmail%2Froute&page=%2Fapi%2Fwebhooks%2Fgmail%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Fgmail%2Froute.ts&appDir=%2FUsers%2Fnathanielstoddard%2Fchainreact-app%2Fchainreact-app-9e%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fnathanielstoddard%2Fchainreact-app%2Fchainreact-app-9e&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)
    at async AppRouteRouteModule.handleResponse (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:187565)
    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Fgmail%2Froute&page=%2Fapi%2Fwebhooks%2Fgmail%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Fgmail%2Froute.ts&appDir=%2FUsers%2Fnathanielstoddard%2Fchainreact-app%2Fchainreact-app-9e%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fnathanielstoddard%2Fchainreact-app%2Fchainreact-app-9e&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)
    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fwebhooks%2Fgmail%2Froute&page=%2Fapi%2Fwebhooks%2Fgmail%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Fgmail%2Froute.ts&appDir=%2FUsers%2Fnathanielstoddard%2Fchainreact-app%2Fchainreact-app-9e%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fnathanielstoddard%2Fchainreact-app%2Fchainreact-app-9e&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)
    at async DevServer.renderToResponseWithComponentsImpl (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/base-server.js:1422:9)
    at async DevServer.renderPageComponent (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/base-server.js:1474:24)
    at async DevServer.renderToResponseImpl (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/base-server.js:1514:32)
    at async DevServer.pipeImpl (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/base-server.js:1025:25)
    at async NextNodeServer.handleCatchallRenderRequest (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/next-server.js:393:17)
    at async DevServer.handleRequestImpl (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/base-server.js:916:17)
    at async /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/dev/next-dev-server.js:399:20
    at async Span.traceAsyncFn (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/trace/trace.js:157:20)
    at async DevServer.handleRequest (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/dev/next-dev-server.js:395:24)
    at async invokeRender (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/lib/router-server.js:240:21)
    at async handleRequest (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/lib/router-server.js:437:24)
    at async requestHandlerImpl (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/lib/router-server.js:485:13)
    at async Server.requestListener (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/lib/start-server.js:226:13)
[2025-11-27T17:38:37.617Z] [INFO   ] 2025-11-27T17:38:37.617Z [DEBUG] [Middleware] Username check: {"path":"/workflows/builder/82bf971e-2cac-4500-bbc1-00577a2ed9df","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15698430218}
[2025-11-27T17:38:38.437Z] [INFO   ] 2025-11-27T17:38:38.436Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-11-27T17:38:39.601Z] [INFO   ] ğŸ§ª [test-trigger] Poll #4 (14s elapsed)
[2025-11-27T17:38:41.786Z] [INFO   ] ğŸ§ª [test-trigger] Poll #5 (17s elapsed)
[2025-11-27T17:38:43.968Z] [INFO   ] ğŸ§ª [test-trigger] Poll #6 (19s elapsed)
[2025-11-27T17:38:46.147Z] [INFO   ] ğŸ§ª [test-trigger] Poll #7 (21s elapsed)
[2025-11-27T17:38:48.308Z] [INFO   ] ğŸ§ª [test-trigger] Poll #8 (23s elapsed)
[2025-11-27T17:38:50.527Z] [INFO   ] ğŸ§ª [test-trigger] Poll #9 (25s elapsed)
[2025-11-27T17:38:50.643Z] [INFO   ] 2025-11-27T17:38:50.643Z [DEBUG] ğŸ””ğŸ””ğŸ”” GMAIL WEBHOOK ENDPOINT HIT! ğŸ””ğŸ””ğŸ””
[2025-11-27T17:38:50.643Z] [INFO   ] 2025-11-27T17:38:50.643Z [DEBUG] ğŸ“‹ Request headers: {"accept":"application/json","accept-encoding":"gzip, deflate, br","content-length":"373","content-type":"application/json","from":"noreply@google.com","host":"850c3f4d3ca5.ngrok-free.app","user-agent":"APIs-Google; (+https://developers.google.com/webmasters/APIs-Google.html)","x-forwarded-for":"66.249.93.141","x-forwarded-host":"850c3f4d3ca5.ngrok-free.app","x-forwarded-port":"3000","x-forwarded-proto":"https"}
[2025-11-27T17:38:50.643Z] [INFO   ] 2025-11-27T17:38:50.643Z [DEBUG] ğŸ“¨ [8f94bd1f-6e56-42ea-a5dd-99b95576e69d] Gmail webhook request received at 2025-11-27T17:38:50.643Z
[2025-11-27T17:38:50.768Z] [INFO   ] 2025-11-27T17:38:50.768Z [DEBUG] ğŸ“ [8f94bd1f-6e56-42ea-a5dd-99b95576e69d] Raw body received: {"deliveryAttempt":2,"message":{"data":"eyJlbWFpbEFkZHJlc3MiOiJzdG9kZGFyZC5uYXRoYW5pZWw5MDBAZ21haWwuY29tIiwiaGlzdG9yeUlkIjo2ODc4NzUyfQ==","messageId":"17143346719191215","message_id":"17143346719191215","publishTime":"2025-11-27T17:38:25.184Z","publish_time":"2025-11-27T17:38:25.184Z"},"subscription":"projects/chainreact-462214/subscriptions/gmail-webhook-subscription"}

[2025-11-27T17:38:50.769Z] [INFO   ] 2025-11-27T17:38:50.769Z [DEBUG] ğŸ“¦ [8f94bd1f-6e56-42ea-a5dd-99b95576e69d] Parsed body structure: {"hasMessage":true,"hasMessageData":true,"messageKeys":["data","messageId","message_id","publishTime","publish_time"],"subscription":"projects/chainreact-462214/subscriptions/gmail-webhook-subscription"}
[2025-11-27T17:38:50.769Z] [INFO   ] 2025-11-27T17:38:50.769Z [DEBUG] [8f94bd1f-6e56-42ea-a5dd-99b95576e69d] Received Pub/Sub message from Gmail
[2025-11-27T17:38:50.769Z] [INFO   ] 2025-11-27T17:38:50.769Z [DEBUG] ğŸ”“ [8f94bd1f-6e56-42ea-a5dd-99b95576e69d] Decoded Pub/Sub data: {"emailAddress":"stoddard.nathaniel900@gmail.com","historyId":6878752}
[2025-11-27T17:38:50.769Z] [INFO   ] 2025-11-27T17:38:50.769Z [DEBUG] [8f94bd1f-6e56-42ea-a5dd-99b95576e69d] ğŸ“§ Gmail notification received: {"emailAddress":"stoddard.nathaniel900@gmail.com","historyId":6878752,"messageId":"17143346719191215","publishTime":"2025-11-27T17:38:25.184Z"}
[2025-11-27T17:38:50.769Z] [INFO   ] 2025-11-27T17:38:50.769Z [DEBUG] [8f94bd1f-6e56-42ea-a5dd-99b95576e69d] ğŸ” Processing Gmail webhook, historyId: 6878752
[2025-11-27T17:38:50.842Z] [INFO   ] 2025-11-27T17:38:50.842Z [DEBUG] ğŸ” [Gmail Processor] Processing Gmail event: {"eventType":"gmail_new_email","emailAddress":"stoddard.nathaniel900@gmail.com","historyId":6878752,"requestId":"8f94bd1f-6e56-42ea-a5dd-99b95576e69d"}
[2025-11-27T17:38:50.843Z] [INFO   ] [Backend INFO] Gmail webhook event received {
  "eventType": "gmail_new_email",
  "emailAddress": "stoddard.nathaniel900@gmail.com",
  "historyId": 6878752,
  "requestId": "8f94bd1f-6e56-42ea-a5dd-99b95576e69d"
}
[2025-11-27T17:38:50.949Z] [INFO   ] 2025-11-27T17:38:50.948Z [DEBUG] ğŸš€ [Gmail Processor] Starting to find matching workflows for Gmail event
[2025-11-27T17:38:51.122Z] [INFO   ] 2025-11-27T17:38:51.122Z [DEBUG] Processing Gmail new message event
[2025-11-27T17:38:51.198Z] [INFO   ] 2025-11-27T17:38:51.198Z [DEBUG] [Task Queue] Queued gmail webhook task:
[2025-11-27T17:38:51.198Z] [INFO   ] [Backend SUCCESS] Gmail webhook event processed successfully {
  "processed": true,
  "type": "gmail_new_message"
}
[2025-11-27T17:38:52.715Z] [INFO   ] ğŸ§ª [test-trigger] Poll #10 (27s elapsed)
[2025-11-27T17:38:54.868Z] [INFO   ] ğŸ§ª [test-trigger] Poll #11 (30s elapsed)
[2025-11-27T17:38:57.050Z] [INFO   ] ğŸ§ª [test-trigger] Poll #12 (32s elapsed)
[2025-11-27T17:38:59.230Z] [INFO   ] ğŸ§ª [test-trigger] Poll #13 (34s elapsed)
[2025-11-27T17:39:01.392Z] [INFO   ] ğŸ§ª [test-trigger] Poll #14 (36s elapsed)
[2025-11-27T17:39:03.558Z] [INFO   ] ğŸ§ª [test-trigger] Poll #15 (38s elapsed)
[2025-11-27T17:39:05.716Z] [INFO   ] ğŸ§ª [test-trigger] Poll #16 (40s elapsed)
[2025-11-27T17:39:07.865Z] [INFO   ] ğŸ§ª [test-trigger] Poll #17 (43s elapsed)
[2025-11-27T17:39:10.024Z] [INFO   ] ğŸ§ª [test-trigger] Poll #18 (45s elapsed)
[2025-11-27T17:39:12.173Z] [INFO   ] ğŸ§ª [test-trigger] Poll #19 (47s elapsed)
[2025-11-27T17:39:14.323Z] [INFO   ] ğŸ§ª [test-trigger] Poll #20 (49s elapsed)
[2025-11-27T17:39:16.474Z] [INFO   ] ğŸ§ª [test-trigger] Poll #21 (51s elapsed)
[2025-11-27T17:39:18.632Z] [INFO   ] ğŸ§ª [test-trigger] Poll #22 (53s elapsed)
[2025-11-27T17:39:20.791Z] [INFO   ] ğŸ§ª [test-trigger] Poll #23 (56s elapsed)
[2025-11-27T17:39:22.999Z] [INFO   ] ğŸ§ª [test-trigger] Poll #24 (58s elapsed)
[2025-11-27T17:39:25.178Z] [INFO   ] ğŸ§ª [test-trigger] Poll #25 (60s elapsed)
[2025-11-27T17:39:27.342Z] [INFO   ] ğŸ§ª [test-trigger] Deactivating trigger...
[2025-11-27T17:39:27.424Z] [INFO   ] 2025-11-27T17:39:27.424Z [DEBUG] â„¹ï¸ No trigger resources found for workflow 82bf971e-2cac-4500-bbc1-00577a2ed9df
[2025-11-27T17:39:27.425Z] [INFO   ] ğŸ§ª [test-trigger] ğŸ›‘ Trigger deactivated
[2025-11-27T17:39:27.425Z] [INFO   ] 2025-11-27T17:39:27.425Z [DEBUG] ğŸ›‘ Test trigger deactivated
[2025-11-27T17:39:27.503Z] [INFO   ] ğŸ§ª [test-trigger] No event received, returning timeout response
[2025-11-27T17:39:46.946Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled in 1737ms (1846 modules)
[2025-11-27T17:39:47.276Z] [INFO   ] 2025-11-27T17:39:47.276Z [DEBUG] [Middleware] Username check: {"path":"/workflows/builder/82bf971e-2cac-4500-bbc1-00577a2ed9df","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15698499877}
[2025-11-27T17:39:47.382Z] [INFO   ] 2025-11-27T17:39:47.382Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-11-27T17:40:16.176Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled in 1853ms (6935 modules)
[2025-11-27T17:40:16.495Z] [INFO   ] 2025-11-27T17:40:16.494Z [DEBUG] [Middleware] Username check: {"path":"/workflows/builder/82bf971e-2cac-4500-bbc1-00577a2ed9df","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15698529095}
[2025-11-27T17:40:17.180Z] [INFO   ] 2025-11-27T17:40:17.179Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-11-27T17:40:21.048Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled in 518ms (1846 modules)
[2025-11-27T17:40:21.278Z] [INFO   ] 2025-11-27T17:40:21.278Z [DEBUG] [Middleware] Username check: {"path":"/workflows/builder/82bf971e-2cac-4500-bbc1-00577a2ed9df","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15698533879}
[2025-11-27T17:40:21.371Z] [INFO   ] 2025-11-27T17:40:21.371Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-11-27T17:40:54.980Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled in 667ms (1846 modules)
[2025-11-27T17:40:55.233Z] [INFO   ] 2025-11-27T17:40:55.233Z [DEBUG] [Middleware] Username check: {"path":"/workflows/builder/82bf971e-2cac-4500-bbc1-00577a2ed9df","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15698567833}
[2025-11-27T17:40:55.420Z] [INFO   ] 2025-11-27T17:40:55.419Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-11-27T17:41:09.966Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled in 431ms (1846 modules)
[2025-11-27T17:41:10.208Z] [INFO   ] 2025-11-27T17:41:10.208Z [DEBUG] [Middleware] Username check: {"path":"/workflows/builder/82bf971e-2cac-4500-bbc1-00577a2ed9df","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15698582809}
[2025-11-27T17:41:10.322Z] [INFO   ] 2025-11-27T17:41:10.322Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-11-27T17:41:27.641Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled in 483ms (1846 modules)
[2025-11-27T17:41:27.865Z] [INFO   ] 2025-11-27T17:41:27.864Z [DEBUG] [Middleware] Username check: {"path":"/workflows/builder/82bf971e-2cac-4500-bbc1-00577a2ed9df","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15698600465}
[2025-11-27T17:41:27.988Z] [INFO   ] 2025-11-27T17:41:27.988Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-11-27T17:41:39.630Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled in 438ms (1846 modules)
[2025-11-27T17:41:39.866Z] [INFO   ] 2025-11-27T17:41:39.866Z [DEBUG] [Middleware] Username check: {"path":"/workflows/builder/82bf971e-2cac-4500-bbc1-00577a2ed9df","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15698612467}
[2025-11-27T17:41:39.982Z] [INFO   ] 2025-11-27T17:41:39.981Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-11-27T17:41:55.157Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled in 413ms (1846 modules)
[2025-11-27T17:41:55.384Z] [INFO   ] 2025-11-27T17:41:55.384Z [DEBUG] [Middleware] Username check: {"path":"/workflows/builder/82bf971e-2cac-4500-bbc1-00577a2ed9df","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":15698627985}
[2025-11-27T17:41:55.504Z] [INFO   ] 2025-11-27T17:41:55.504Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-11-27T17:42:42.241Z] [INFO   ]  [37m[1mâ—‹[22m[39m Compiling /api/presence/count ...
[2025-11-27T17:42:42.305Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled /api/presence/count in 1307ms (5095 modules)
[2025-11-27T17:56:08.121Z] [INFO   ]  [37m[1mâ—‹[22m[39m Compiling /api/workflows/test-trigger ...
[2025-11-27T17:56:10.920Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled /api/workflows/test-trigger in 3.4s (6294 modules)
[2025-11-27T17:56:11.233Z] [INFO   ] ğŸ§ª [test-trigger] POST request received
[2025-11-27T17:56:11.239Z] [INFO   ] ğŸ§ª [test-trigger] Supabase client created
[2025-11-27T17:56:11.420Z] [INFO   ] ğŸ§ª [test-trigger] Auth check: {
  "userId": "a3e3a51a-175c-4b59-ad03-227ba12a18b0"
}
[2025-11-27T17:56:11.421Z] [INFO   ] ğŸ§ª [test-trigger] Request body: {
  "workflowId": "82bf971e-2cac-4500-bbc1-00577a2ed9df",
  "nodeId": "gmail_trigger_new_email-66214e1d-8271-4843-af4a-9fb3748f4428",
  "hasProvidedNodes": true,
  "providedNodesCount": 3
}
[2025-11-27T17:56:11.421Z] [INFO   ] ğŸ§ª [test-trigger] Using provided nodes (unsaved workflow)
[2025-11-27T17:56:11.421Z] [INFO   ] ğŸ§ª [test-trigger] Searching for trigger node in 3 nodes
[2025-11-27T17:56:11.421Z] [INFO   ] ğŸ§ª [test-trigger] Node 0: {
  "id": "gmail_trigger_new_email-66214e1d-8271-4843-af4a-9fb3748f4428",
  "type": "custom",
  "dataType": "gmail_trigger_new_email",
  "isTrigger": true,
  "providerId": "gmail"
}
[2025-11-27T17:56:11.421Z] [INFO   ] ğŸ§ª [test-trigger] Node 1: {
  "id": "ai_agent-485d88bb-197f-429b-8ef0-6ad7729de231",
  "type": "custom",
  "dataType": "ai_agent",
  "isTrigger": false,
  "providerId": "ai"
}
[2025-11-27T17:56:11.421Z] [INFO   ] ğŸ§ª [test-trigger] Node 2: {
  "id": "discord_action_send_message-a5deb258-ed70-47ea-aa22-5f2905ca82fb",
  "type": "custom",
  "dataType": "discord_action_send_message",
  "isTrigger": false,
  "providerId": "discord"
}
[2025-11-27T17:56:11.422Z] [INFO   ] ğŸ§ª [test-trigger] Trigger node details: {
  "nodeId": "gmail_trigger_new_email-66214e1d-8271-4843-af4a-9fb3748f4428",
  "providerId": "gmail",
  "triggerType": "gmail_trigger_new_email",
  "configKeys": [
    "from",
    "labelIds",
    "_label_from",
    "aiFailClosed",
    "hasAttachment",
    "_label_labelIds",
    "aiContentFilter",
    "subjectExactMatch",
    "aiFilterConfidence",
    "_label_hasAttachment",
    "aiUseEmbeddingPrefilter",
    "_label_aiFilterConfidence"
  ],
  "fullTriggerData": {
    "label": "New Email",
    "title": "New Email",
    "type": "gmail_trigger_new_email",
    "config": {
      "from": "stoddard.nathaniel@yahoo.com",
      "labelIds": [
        "INBOX"
      ],
      "_label_from": "Nathaniel Stoddard <stoddard.nathaniel@yahoo.com>",
      "aiFailClosed": "",
      "hasAttachment": "any",
      "_label_labelIds": "INBOX",
      "aiContentFilter": "",
      "subjectExactMatch": true,
      "aiFilterConfidence": "",
      "_label_hasAttachment": "any",
      "aiUseEmbeddingPrefilter": "",
      "_label_aiFilterConfidence": "Balanced (70%+ match)"
    },
    "description": "Triggers when a new email is received. Supports AI-powered semantic filtering to trigger on emails about specific topics.",
    "providerId": "gmail",
    "icon": {},
    "isTrigger": true,
    "agentHighlights": [
      "subjectExactMatch",
      "hasAttachment",
      "labelIds",
      "aiFilterConfidence",
      "aiFailClosed",
      "aiUseEmbeddingPrefilter",
      "from",
      "_label_hasAttachment",
      "_label_labelIds",
      "_label_aiFilterConfidence",
      "_label_from",
      "__dynamicOptions",
      "__validationState",
      "aiContentFilter"
    ],
    "costHint": 0
  }
}
[2025-11-27T17:56:11.422Z] [INFO   ] 2025-11-27T17:56:11.422Z [DEBUG] ğŸ§ª Testing trigger for workflow 82bf971e-2cac-4500-bbc1-00577a2ed9df {"nodeId":"gmail_trigger_new_email-66214e1d-8271-4843-af4a-9fb3748f4428","providerId":"gmail","triggerType":"gmail_trigger_new_email"}
[2025-11-27T17:56:11.422Z] [INFO   ] ğŸ§ª [test-trigger] Importing trigger lifecycle manager...
[2025-11-27T17:56:19.749Z] [INFO   ] 2025-11-27T17:56:19.749Z [DEBUG] ğŸ“ Registered trigger provider: microsoft
[2025-11-27T17:56:19.749Z] [INFO   ] 2025-11-27T17:56:19.749Z [DEBUG] ğŸ“ Registered trigger provider: microsoft-outlook
[2025-11-27T17:56:19.749Z] [INFO   ] 2025-11-27T17:56:19.749Z [DEBUG] ğŸ“ Registered trigger provider: microsoft-onenote
[2025-11-27T17:56:19.749Z] [INFO   ] 2025-11-27T17:56:19.749Z [DEBUG] ğŸ“ Registered trigger provider: microsoft-excel
[2025-11-27T17:56:19.749Z] [INFO   ] 2025-11-27T17:56:19.749Z [DEBUG] ğŸ“ Registered trigger provider: onedrive
[2025-11-27T17:56:19.750Z] [INFO   ] 2025-11-27T17:56:19.750Z [DEBUG] ğŸ“ Registered trigger provider: teams
[2025-11-27T17:56:19.750Z] [INFO   ] 2025-11-27T17:56:19.750Z [DEBUG] ğŸ“ Registered trigger provider: airtable
[2025-11-27T17:56:19.750Z] [INFO   ] 2025-11-27T17:56:19.750Z [DEBUG] ğŸ“ Registered trigger provider: discord
[2025-11-27T17:56:19.750Z] [INFO   ] 2025-11-27T17:56:19.750Z [DEBUG] ğŸ“ Registered trigger provider: slack
[2025-11-27T17:56:19.750Z] [INFO   ] 2025-11-27T17:56:19.750Z [DEBUG] ğŸ“ Registered trigger provider: gmail
[2025-11-27T17:56:19.750Z] [INFO   ] 2025-11-27T17:56:19.750Z [DEBUG] ğŸ“ Registered trigger provider: google-calendar
[2025-11-27T17:56:19.750Z] [INFO   ] 2025-11-27T17:56:19.750Z [DEBUG] ğŸ“ Registered trigger provider: google-drive
[2025-11-27T17:56:19.750Z] [INFO   ] 2025-11-27T17:56:19.750Z [DEBUG] ğŸ“ Registered trigger provider: google-sheets
[2025-11-27T17:56:19.750Z] [INFO   ] 2025-11-27T17:56:19.750Z [DEBUG] ğŸ“ Registered trigger provider: google-docs
[2025-11-27T17:56:19.750Z] [INFO   ] 2025-11-27T17:56:19.750Z [DEBUG] ğŸ“ Registered trigger provider: stripe
[2025-11-27T17:56:19.750Z] [INFO   ] 2025-11-27T17:56:19.750Z [DEBUG] ğŸ“ Registered trigger provider: shopify
[2025-11-27T17:56:19.750Z] [INFO   ] 2025-11-27T17:56:19.750Z [DEBUG] ğŸ“ Registered trigger provider: notion
[2025-11-27T17:56:19.750Z] [INFO   ] 2025-11-27T17:56:19.750Z [DEBUG] ğŸ“ Registered trigger provider: hubspot
[2025-11-27T17:56:19.750Z] [INFO   ] 2025-11-27T17:56:19.750Z [DEBUG] ğŸ“ Registered trigger provider: monday
[2025-11-27T17:56:19.750Z] [INFO   ] 2025-11-27T17:56:19.750Z [DEBUG] ğŸ“ Registered trigger provider: gumroad
[2025-11-27T17:56:19.750Z] [INFO   ] 2025-11-27T17:56:19.750Z [DEBUG] ğŸ“ Registered trigger provider: webhook
[2025-11-27T17:56:19.750Z] [INFO   ] 2025-11-27T17:56:19.750Z [DEBUG] âœ… Trigger lifecycle providers registered: ["microsoft","microsoft-outlook","microsoft-onenote","microsoft-excel","onedrive","teams","airtable","discord","slack","gmail","google-calendar","google-drive","google-sheets","google-docs","stripe","shopify","notion","hubspot","monday","gumroad","webhook"]
[2025-11-27T17:56:19.751Z] [INFO   ] ğŸ§ª [test-trigger] Registered providers: [
  "microsoft",
  "microsoft-outlook",
  "microsoft-onenote",
  "microsoft-excel",
  "onedrive",
  "teams",
  "airtable",
  "discord",
  "slack",
  "gmail",
  "google-calendar",
  "google-drive",
  "google-sheets",
  "google-docs",
  "stripe",
  "shopify",
  "notion",
  "hubspot",
  "monday",
  "gumroad",
  "webhook"
]
[2025-11-27T17:56:19.751Z] [INFO   ] ğŸ§ª [test-trigger] Is provider registered? {
  "providerId": "gmail",
  "isProviderRegistered": true
}
[2025-11-27T17:56:19.751Z] [INFO   ] ğŸ§ª [test-trigger] Activating trigger...
[2025-11-27T17:56:19.752Z] [INFO   ] ğŸ§ª [test-trigger] Trigger node being passed: {
  "id": "gmail_trigger_new_email-66214e1d-8271-4843-af4a-9fb3748f4428",
  "type": "custom",
  "position": {
    "x": 1020,
    "y": 120
  },
  "positionAbsolute": {
    "x": 1020,
    "y": 120
  },
  "data": {
    "label": "New Email",
    "title": "New Email",
    "type": "gmail_trigger_new_email",
    "config": {
      "from": "stoddard.nathaniel@yahoo.com",
      "labelIds": [
        "INBOX"
      ],
      "_label_from": "Nathaniel Stoddard <stoddard.nathaniel@yahoo.com>",
      "aiFailClosed": "",
      "hasAttachment": "any",
      "_label_labelIds": "INBOX",
      "aiContentFilter": "",
      "subjectExactMatch": true,
      "aiFilterConfidence": "",
      "_label_hasAttachment": "any",
      "aiUseEmbeddingPrefilter": "",
      "_label_aiFilterConfidence": "Balanced (70%+ match)"
    },
    "description": "Triggers when a new email is received. Supports AI-powered semantic filtering to trigger on emails about specific topics.",
    "providerId": "gmail",
    "icon": {},
    "isTrigger": true,
    "agentHighlights": [
      "subjectExactMatch",
      "hasAttachment",
      "labelIds",
      "aiFilterConfidence",
      "aiFailClosed",
      "aiUseEmbeddingPrefilter",
      "from",
      "_label_hasAttachment",
      "_label_labelIds",
      "_label_aiFilterConfidence",
      "_label_from",
      "__dynamicOptions",
      "__validationState",
      "aiContentFilter"
    ],
    "costHint": 0
  },
  "measured": {
    "width": 360,
    "height": 79
  }
}
[2025-11-27T17:56:19.752Z] [INFO   ] 2025-11-27T17:56:19.752Z [DEBUG] ğŸš€ Activating 1 triggers for workflow 82bf971e-2cac-4500-bbc1-00577a2ed9df
[2025-11-27T17:56:19.752Z] [INFO   ] 2025-11-27T17:56:19.752Z [DEBUG] ğŸ”” Activating Google API trigger for workflow 82bf971e-2cac-4500-bbc1-00577a2ed9df {"triggerType":"gmail_trigger_new_email","providerId":"gmail","config":{"from":"stoddard.nathaniel@yahoo.com","labelIds":["INBOX"],"_label_from":"Nathaniel Stoddard <stoddard.nathaniel@yahoo.com>","aiFailClosed":"","hasAttachment":"any","_label_labelIds":"INBOX","aiContentFilter":"","subjectExactMatch":true,"aiFilterConfidence":"","_label_hasAttachment":"any","aiUseEmbeddingPrefilter":"","_label_aiFilterConfidence":"Balanced (70%+ match)"}}
[2025-11-27T17:56:19.891Z] [INFO   ] 2025-11-27T17:56:19.891Z [DEBUG] ğŸ“¤ Creating Google push notification {"api":"gmail","resourceId":null,"channelId":"chainreact-82bf971e-2cac-4500-bbc1-00577a2ed9df-1764266179891","webhookUrl":"https://9b7007881520.ngrok-free.app/api/webhooks/google"}
[2025-11-27T17:56:19.892Z] [INFO   ] 2025-11-27T17:56:19.892Z [DEBUG] ğŸ“§ Creating Gmail watch with Pub/Sub topic: projects/chainreact-462214/topics/gmail-notifications {"labelIds":["INBOX"],"labelFilterAction":"include"}
[2025-11-27T17:56:20.990Z] [INFO   ]  [37m[1mâ—‹[22m[39m Compiling /api/webhooks/gmail ...
[2025-11-27T17:56:21.143Z] [INFO   ] 2025-11-27T17:56:21.143Z [DEBUG] âœ… Gmail watch created - historyId: 6878801 {"watchingFolders":"INBOX"}
[2025-11-27T17:56:21.143Z] [INFO   ] 2025-11-27T17:56:21.143Z [DEBUG] ğŸ“ Storing trigger resource: {"workflow_id":"82bf971e-2cac-4500-bbc1-00577a2ed9df","user_id":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"gmail","provider_id":"gmail","trigger_type":"gmail_trigger_new_email","node_id":"gmail_trigger_new_email-66214e1d-8271-4843-af4a-9fb3748f4428","resource_type":"subscription","external_id":"chainreact-82bf971e-2cac-4500-bbc1-00577a2ed9df-1764266179891","config":{"from":"stoddard.nathaniel@yahoo.com","labelIds":["INBOX"],"_label_from":"Nathaniel Stoddard <stoddard.nathaniel@yahoo.com>","aiFailClosed":"","hasAttachment":"any","_label_labelIds":"INBOX","aiContentFilter":"","subjectExactMatch":true,"aiFilterConfidence":"","_label_hasAttachment":"any","aiUseEmbeddingPrefilter":"","_label_aiFilterConfidence":"Balanced (70%+ match)","channelId":"chainreact-82bf971e-2cac-4500-bbc1-00577a2ed9df-1764266179891","resourceId":"6878801","api":"gmail","events":["message"],"webhookUrl":"https://9b7007881520.ngrok-free.app/api/webhooks/google"},"status":"active","expires_at":"2025-12-04T17:56:20.396Z"}
[2025-11-27T17:56:21.325Z] [ERROR  ] 2025-11-27T17:56:21.325Z [ERROR] âŒ Failed to store trigger resource: {"code":"23502","details":"Failing row contains (df7a7ab3-a5ec-4ad8-a699-0fc279bf7809, 82bf971e-2cac-4500-bbc1-00577a2ed9df, a3e3a51a-175c-4b59-ad03-227ba12a18b0, gmail, subscription, null, {}, active, 2025-12-04 17:56:20.396+00, 2025-11-27 17:56:21.279489+00, 2025-11-27 17:56:21.279489+00, {\"api\": \"gmail\", \"from\": \"stoddard.nathaniel@yahoo.com\", \"events..., chainreact-82bf971e-2cac-4500-bbc1-00577a2ed9df-1764266179891, gmail_trigger_new_email-66214e1d-8271-4843-af4a-9fb3748f4428, gmail_trigger_new_email, gmail).","hint":null,"message":"null value in column \"resource_id\" of relation \"trigger_resources\" violates not-null constraint"}
[2025-11-27T17:56:21.325Z] [ERROR  ] 2025-11-27T17:56:21.325Z [ERROR] âŒ Failed to activate gmail/gmail_trigger_new_email: Failed to store trigger resource: null value in column "resource_id" of relation "trigger_resources" violates not-null constraint
[2025-11-27T17:56:21.325Z] [INFO   ] ğŸ§ª [test-trigger] âœ… Trigger activated successfully!
[2025-11-27T17:56:21.325Z] [INFO   ] 2025-11-27T17:56:21.325Z [DEBUG] âœ… Trigger activated for testing, polling for events...
[2025-11-27T17:56:22.040Z] [INFO   ] ğŸ§ª [test-trigger] Created trigger resources: []
[2025-11-27T17:56:22.040Z] [INFO   ] ğŸ§ª [test-trigger] Starting to poll for events...
[2025-11-27T17:56:22.040Z] [INFO   ] ğŸ§ª [test-trigger] Poll #1 (0s elapsed)
[2025-11-27T17:56:23.301Z] [INFO   ]  [32m[1mâœ“[22m[39m Compiled /api/webhooks/gmail in 3.5s (7913 modules)
[2025-11-27T17:56:27.980Z] [INFO   ] 2025-11-27T17:56:27.980Z [DEBUG] ğŸ””ğŸ””ğŸ”” GMAIL WEBHOOK ENDPOINT HIT! ğŸ””ğŸ””ğŸ””
[2025-11-27T17:56:27.981Z] [INFO   ] 2025-11-27T17:56:27.981Z [DEBUG] ğŸ“‹ Request headers: {"accept":"application/json","accept-encoding":"gzip, deflate, br","content-length":"373","content-type":"application/json","from":"noreply@google.com","host":"850c3f4d3ca5.ngrok-free.app","user-agent":"APIs-Google; (+https://developers.google.com/webmasters/APIs-Google.html)","x-forwarded-for":"66.249.93.136","x-forwarded-host":"850c3f4d3ca5.ngrok-free.app","x-forwarded-port":"3000","x-forwarded-proto":"https"}
[2025-11-27T17:56:28.002Z] [INFO   ] 2025-11-27T17:56:28.002Z [DEBUG] ğŸ“¨ [2cdc5abe-287f-4d76-8964-82771858a431] Gmail webhook request received at 2025-11-27T17:56:28.002Z
[2025-11-27T17:56:28.008Z] [INFO   ] ğŸ§ª [test-trigger] Poll #2 (6s elapsed)
[2025-11-27T17:56:28.084Z] [WARN   ] 2025-11-27T17:56:28.084Z [WARN] âš ï¸ [2cdc5abe-287f-4d76-8964-82771858a431] Connection reset/aborted during webhook processing
