=== Log Session Started: 2025-11-10T18:55:46.894Z ===
Node Version: v23.7.0
Platform: darwin
Working Directory: /Users/nathanielstoddard/chainreact-app/chainreact-app-9e
================================================================================

[2025-11-10T18:55:46.895Z] [INFO   ] File logging initialized
[2025-11-10T18:55:46.895Z] [INFO   ] Log file: /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-11-10_12-55-46.log
[2025-11-10T18:55:46.896Z] [INFO   ] üìÅ File logging enabled
[2025-11-10T18:55:46.896Z] [INFO   ] üìù Logs will be written to: /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-11-10_12-55-46.log
[2025-11-10T18:55:46.896Z] [INFO   ] üí° To view logs in real-time: tail -f /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-11-10_12-55-46.log
[2025-11-10T18:55:46.896Z] [INFO   ] üí° To view all logs: cat /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-11-10_12-55-46.log
[2025-11-10T18:55:46.896Z] [INFO   ] üí° To share logs: Copy the file at /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-11-10_12-55-46.log
[2025-11-10T18:55:46.896Z] [INFO   ] --------------------------------------------------------------------------------
[2025-11-10T18:55:46.896Z] [DEBUG  ] üìÅ File logging system initialized
[2025-11-10T18:55:46.916Z] [INFO   ]  [32m[1m‚úì[22m[39m Ready in 3.9s
[2025-11-10T18:55:47.435Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /test/nodes ...
[2025-11-10T18:55:47.908Z] [INFO   ] 2025-11-10T18:55:47.908Z [DEBUG] ü§ñ Discord bot configured, initializing gateway connection in background...
[2025-11-10T18:55:50.179Z] [INFO   ] 2025-11-10T18:55:50.179Z [DEBUG] Initializing Discord Gateway connection (singleton)...
[2025-11-10T18:55:50.179Z] [INFO   ] 2025-11-10T18:55:50.179Z [DEBUG] üîë Discord bot token loaded
[2025-11-10T18:55:50.479Z] [INFO   ] 2025-11-10T18:55:50.479Z [DEBUG] Discord Gateway initialization complete
[2025-11-10T18:55:50.481Z] [INFO   ] 2025-11-10T18:55:50.480Z [DEBUG] ‚úÖ Discord bot gateway connection initialized
[2025-11-10T18:55:50.771Z] [INFO   ] 2025-11-10T18:55:50.771Z [DEBUG] Discord Gateway WebSocket connection established
[2025-11-10T18:55:50.771Z] [INFO   ] 2025-11-10T18:55:50.771Z [DEBUG] üîë Sending identify with intents: {"GUILDS":true,"GUILD_MEMBERS":true,"GUILD_INVITES":true,"GUILD_MESSAGES":true,"MESSAGE_CONTENT":true,"intentsValue":33347}
[2025-11-10T18:55:51.347Z] [INFO   ] 2025-11-10T18:55:51.347Z [DEBUG] üéâ Discord bot ready! {"sessionId":"8dc201c6d2092570602ee4425b10506b","username":"ChainReact-Bot","userId":"1378595955212812308","guildCount":2}
[2025-11-10T18:55:51.348Z] [INFO   ] 2025-11-10T18:55:51.348Z [DEBUG] üìã Initializing invite cache...
[2025-11-10T18:55:51.348Z] [INFO   ] 2025-11-10T18:55:51.348Z [DEBUG] üì° Discord event received: GUILD_CREATE
[2025-11-10T18:55:51.349Z] [INFO   ] 2025-11-10T18:55:51.349Z [DEBUG] üì° Discord event received: GUILD_CREATE
[2025-11-10T18:55:51.545Z] [INFO   ] 2025-11-10T18:55:51.545Z [DEBUG] ‚úÖ Cached 3 invites for guild 1378950884045623406
[2025-11-10T18:55:55.698Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /test/nodes in 8.8s (5300 modules)
[2025-11-10T18:55:56.289Z] [INFO   ] 2025-11-10T18:55:56.289Z [DEBUG] üíß [AUTH] Rehydrating auth state from storage {"hasState":true,"hasUser":false,"initialized":false,"timestamp":"2025-11-10T18:55:56.289Z"}
[2025-11-10T18:55:56.302Z] [INFO   ] 2025-11-10T18:55:56.302Z [DEBUG] üíß [AUTH] State hydrated and reset {"hasUser":false,"initialized":false,"timestamp":"2025-11-10T18:55:56.302Z"}
[2025-11-10T18:55:56.302Z] [INFO   ] 2025-11-10T18:55:56.302Z [DEBUG] ‚è≠Ô∏è [AUTH] Skipping initialization {"hasState":true,"alreadyInitialized":false,"isClient":false,"timestamp":"2025-11-10T18:55:56.302Z"}
[2025-11-10T18:55:57.012Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1295ms (1166 modules)
[2025-11-10T18:55:58.217Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/auth/profile ...
[2025-11-10T18:55:59.894Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/auth/profile in 2.2s (4150 modules)
[2025-11-10T18:56:00.788Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 667ms (1153 modules)
[2025-11-10T18:56:04.809Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations in 484ms (5417 modules)
[2025-11-10T18:56:05.109Z] [INFO   ] 2025-11-10T18:56:05.109Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-10T18:56:05.108Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-10T18:56:05.210Z] [INFO   ] 2025-11-10T18:56:05.210Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-10T18:56:05.210Z] [INFO   ] 2025-11-10T18:56:05.210Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-10T18:56:05.366Z] [INFO   ] 2025-11-10T18:56:05.366Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":1,"permissionsCount":1,"integrationsError":null,"permissionsError":null}
[2025-11-10T18:56:05.366Z] [INFO   ] 2025-11-10T18:56:05.366Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","provider":"google-sheets","permission":"admin"}
[2025-11-10T18:56:05.366Z] [INFO   ] 2025-11-10T18:56:05.366Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":1,"workspaceType":"personal"}
[2025-11-10T18:56:11.868Z] [INFO   ] 2025-11-10T18:56:11.868Z [DEBUG] üíß [AUTH] Rehydrating auth state from storage {"hasState":true,"hasUser":false,"initialized":false,"timestamp":"2025-11-10T18:56:11.868Z"}
[2025-11-10T18:56:11.881Z] [INFO   ] 2025-11-10T18:56:11.881Z [DEBUG] üíß [AUTH] State hydrated and reset {"hasUser":false,"initialized":false,"timestamp":"2025-11-10T18:56:11.881Z"}
[2025-11-10T18:56:11.881Z] [INFO   ] 2025-11-10T18:56:11.881Z [DEBUG] ‚è≠Ô∏è [AUTH] Skipping initialization {"hasState":true,"alreadyInitialized":false,"isClient":false,"timestamp":"2025-11-10T18:56:11.881Z"}
[2025-11-10T18:56:13.260Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/presence/count ...
[2025-11-10T18:56:13.666Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/presence/count in 967ms (5652 modules)
[2025-11-10T18:56:13.864Z] [INFO   ] 2025-11-10T18:56:13.864Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-10T18:56:13.864Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-10T18:56:14.039Z] [INFO   ] 2025-11-10T18:56:14.039Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-10T18:56:14.039Z] [INFO   ] 2025-11-10T18:56:14.039Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-10T18:56:14.160Z] [INFO   ] 2025-11-10T18:56:14.160Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":1,"permissionsCount":1,"integrationsError":null,"permissionsError":null}
[2025-11-10T18:56:14.161Z] [INFO   ] 2025-11-10T18:56:14.161Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","provider":"google-sheets","permission":"admin"}
[2025-11-10T18:56:14.161Z] [INFO   ] 2025-11-10T18:56:14.161Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":1,"workspaceType":"personal"}
[2025-11-10T18:56:50.630Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/fetch-user-data ...
[2025-11-10T18:56:50.712Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/fetch-user-data in 593ms (5422 modules)
[2025-11-10T18:56:50.797Z] [INFO   ] 2025-11-10T18:56:50.797Z [DEBUG] üöÄ [SERVER] fetch-user-data API route called
[2025-11-10T18:56:50.798Z] [INFO   ] 2025-11-10T18:56:50.798Z [DEBUG] üîç [SERVER] fetch-user-data request parsed: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_spreadsheets","options":{}}
[2025-11-10T18:56:50.965Z] [INFO   ] 2025-11-10T18:56:50.965Z [DEBUG] üîÑ [SERVER] Routing Google request to dedicated API: google-sheets_spreadsheets (provider: google-sheets)
[2025-11-10T18:56:51.469Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/google/data in 473ms (5458 modules)
[2025-11-10T18:56:51.576Z] [INFO   ] 2025-11-10T18:56:51.576Z [DEBUG] üöÄ [Google Data API] POST handler invoked
[2025-11-10T18:56:51.577Z] [INFO   ] 2025-11-10T18:56:51.577Z [DEBUG] üîç [Google Data API] Request received: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_spreadsheets","options":{},"fullRequestBody":{"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_spreadsheets","options":{}}}
[2025-11-10T18:56:51.673Z] [INFO   ] 2025-11-10T18:56:51.673Z [DEBUG] üìä [Google API] Integration provider check: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","actualProvider":"google-sheets","dataType":"google-sheets_spreadsheets","providerLowerCase":"google-sheets"}
[2025-11-10T18:56:51.674Z] [INFO   ] 2025-11-10T18:56:51.674Z [DEBUG] üîç [Google API] Processing request: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_spreadsheets","provider":"google-sheets","status":"connected","hasToken":true}
[2025-11-10T18:56:51.674Z] [INFO   ] 2025-11-10T18:56:51.674Z [DEBUG] üìä [Google Sheets] Fetching spreadsheets
[2025-11-10T18:56:52.353Z] [INFO   ] 2025-11-10T18:56:52.353Z [DEBUG] ‚úÖ [Google Sheets] Retrieved 21 spreadsheets
[2025-11-10T18:56:52.353Z] [INFO   ] 2025-11-10T18:56:52.353Z [DEBUG] ‚úÖ [Google API] Successfully processed google-sheets_spreadsheets: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","resultCount":21}
[2025-11-10T18:56:52.355Z] [INFO   ] 2025-11-10T18:56:52.355Z [DEBUG] ‚úÖ [SERVER] Google API completed for google-sheets_spreadsheets, result length: 21
[2025-11-10T18:56:54.519Z] [INFO   ] 2025-11-10T18:56:54.519Z [DEBUG] üöÄ [SERVER] fetch-user-data API route called
[2025-11-10T18:56:54.520Z] [INFO   ] 2025-11-10T18:56:54.520Z [DEBUG] üîç [SERVER] fetch-user-data request parsed: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_sheets","options":{"spreadsheetId":"13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI"}}
[2025-11-10T18:56:54.638Z] [INFO   ] 2025-11-10T18:56:54.638Z [DEBUG] üîÑ [SERVER] Routing Google request to dedicated API: google-sheets_sheets (provider: google-sheets)
[2025-11-10T18:56:54.703Z] [INFO   ] 2025-11-10T18:56:54.703Z [DEBUG] üöÄ [Google Data API] POST handler invoked
[2025-11-10T18:56:54.703Z] [INFO   ] 2025-11-10T18:56:54.703Z [DEBUG] üîç [Google Data API] Request received: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_sheets","options":{"spreadsheetId":"13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI"},"fullRequestBody":{"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_sheets","options":{"spreadsheetId":"13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI"}}}
[2025-11-10T18:56:54.821Z] [INFO   ] 2025-11-10T18:56:54.821Z [DEBUG] üìä [Google API] Integration provider check: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","actualProvider":"google-sheets","dataType":"google-sheets_sheets","providerLowerCase":"google-sheets"}
[2025-11-10T18:56:54.822Z] [INFO   ] 2025-11-10T18:56:54.822Z [DEBUG] üîç [Google API] Processing request: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_sheets","provider":"google-sheets","status":"connected","hasToken":true}
[2025-11-10T18:56:54.822Z] [INFO   ] 2025-11-10T18:56:54.822Z [DEBUG] üìä [Google Sheets] Fetching sheets for spreadsheet: 13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI
[2025-11-10T18:56:55.828Z] [INFO   ] 2025-11-10T18:56:55.828Z [DEBUG] ‚úÖ [Google Sheets] Retrieved 4 sheets
[2025-11-10T18:56:55.829Z] [INFO   ] 2025-11-10T18:56:55.829Z [DEBUG] ‚úÖ [Google API] Successfully processed google-sheets_sheets: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","resultCount":4}
[2025-11-10T18:56:55.837Z] [INFO   ] 2025-11-10T18:56:55.837Z [DEBUG] ‚úÖ [SERVER] Google API completed for google-sheets_sheets, result length: 4
[2025-11-10T18:56:57.512Z] [INFO   ] 2025-11-10T18:56:57.512Z [DEBUG] üöÄ [SERVER] fetch-user-data API route called
[2025-11-10T18:56:57.512Z] [INFO   ] 2025-11-10T18:56:57.512Z [DEBUG] üîç [SERVER] fetch-user-data request parsed: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_columns","options":{"sheetName":"Monthly Budget","spreadsheetId":"13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI"}}
[2025-11-10T18:56:57.615Z] [INFO   ] 2025-11-10T18:56:57.615Z [DEBUG] üîÑ [SERVER] Routing Google request to dedicated API: google-sheets_columns (provider: google-sheets)
[2025-11-10T18:56:57.679Z] [INFO   ] 2025-11-10T18:56:57.679Z [DEBUG] üöÄ [Google Data API] POST handler invoked
[2025-11-10T18:56:57.680Z] [INFO   ] 2025-11-10T18:56:57.680Z [DEBUG] üîç [Google Data API] Request received: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_columns","options":{"sheetName":"Monthly Budget","spreadsheetId":"13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI"},"fullRequestBody":{"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_columns","options":{"sheetName":"Monthly Budget","spreadsheetId":"13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI"}}}
[2025-11-10T18:56:57.766Z] [INFO   ] 2025-11-10T18:56:57.766Z [DEBUG] üìä [Google API] Integration provider check: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","actualProvider":"google-sheets","dataType":"google-sheets_columns","providerLowerCase":"google-sheets"}
[2025-11-10T18:56:57.767Z] [INFO   ] 2025-11-10T18:56:57.767Z [DEBUG] üîç [Google API] Processing request: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_columns","provider":"google-sheets","status":"connected","hasToken":true}
[2025-11-10T18:56:57.767Z] [INFO   ] 2025-11-10T18:56:57.767Z [DEBUG] üìä [Google Sheets] Fetching columns for: 13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI/Monthly Budget
[2025-11-10T18:56:58.019Z] [INFO   ] 2025-11-10T18:56:58.019Z [DEBUG] ‚úÖ [Google Sheets] Retrieved 26 columns
[2025-11-10T18:56:58.020Z] [INFO   ] 2025-11-10T18:56:58.020Z [DEBUG] ‚úÖ [Google API] Successfully processed google-sheets_columns: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","resultCount":26}
[2025-11-10T18:56:58.022Z] [INFO   ] 2025-11-10T18:56:58.022Z [DEBUG] ‚úÖ [SERVER] Google API completed for google-sheets_columns, result length: 26
[2025-11-10T18:57:45.103Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1994ms (5444 modules)
[2025-11-10T18:58:11.304Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 350ms (1167 modules)
[2025-11-10T18:58:56.202Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 973ms (5301 modules)
[2025-11-10T18:59:03.608Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 753ms (5301 modules)
[2025-11-10T19:01:13.500Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/presence/count in 441ms (4257 modules)
[2025-11-10T19:03:18.278Z] [INFO   ] 2025-11-10T19:03:18.278Z [DEBUG] üíß [AUTH] Rehydrating auth state from storage {"hasState":true,"hasUser":false,"initialized":false,"timestamp":"2025-11-10T19:03:18.278Z"}
[2025-11-10T19:03:18.291Z] [INFO   ] 2025-11-10T19:03:18.291Z [DEBUG] üíß [AUTH] State hydrated and reset {"hasUser":false,"initialized":false,"timestamp":"2025-11-10T19:03:18.291Z"}
[2025-11-10T19:03:18.291Z] [INFO   ] 2025-11-10T19:03:18.291Z [DEBUG] ‚è≠Ô∏è [AUTH] Skipping initialization {"hasState":true,"alreadyInitialized":false,"isClient":false,"timestamp":"2025-11-10T19:03:18.291Z"}
[2025-11-10T19:03:19.494Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /icon.png ...
[2025-11-10T19:03:20.092Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations in 1111ms (4150 modules)
[2025-11-10T19:03:20.581Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled (4266 modules)
[2025-11-10T19:03:20.796Z] [INFO   ] 2025-11-10T19:03:20.796Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-10T19:03:20.796Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-10T19:03:21.016Z] [INFO   ] 2025-11-10T19:03:21.016Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-10T19:03:21.016Z] [INFO   ] 2025-11-10T19:03:21.016Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-10T19:03:21.173Z] [INFO   ] 2025-11-10T19:03:21.173Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":1,"permissionsCount":1,"integrationsError":null,"permissionsError":null}
[2025-11-10T19:03:21.284Z] [INFO   ] 2025-11-10T19:03:21.283Z [DEBUG] ‚è∞ [API /api/integrations] Updated 1 expired integrations
[2025-11-10T19:03:21.284Z] [INFO   ] 2025-11-10T19:03:21.284Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","provider":"google-sheets","permission":"admin"}
[2025-11-10T19:03:21.284Z] [INFO   ] 2025-11-10T19:03:21.284Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":1,"workspaceType":"personal"}
[2025-11-10T19:03:21.358Z] [INFO   ] 2025-11-10T19:03:21.357Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-10T19:03:21.357Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-10T19:03:21.456Z] [INFO   ] 2025-11-10T19:03:21.456Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-10T19:03:21.457Z] [INFO   ] 2025-11-10T19:03:21.457Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-10T19:03:21.620Z] [INFO   ] 2025-11-10T19:03:21.620Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":1,"permissionsCount":1,"integrationsError":null,"permissionsError":null}
[2025-11-10T19:03:21.621Z] [INFO   ] 2025-11-10T19:03:21.621Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","provider":"google-sheets","permission":"admin"}
[2025-11-10T19:03:21.621Z] [INFO   ] 2025-11-10T19:03:21.621Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":1,"workspaceType":"personal"}
[2025-11-10T19:03:24.325Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/auth/generate-url ...
[2025-11-10T19:03:24.367Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/auth/generate-url in 624ms (5423 modules)
[2025-11-10T19:03:27.696Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/google-sheets/callback ...
[2025-11-10T19:03:28.158Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/google-sheets/callback in 1272ms (5431 modules)
[2025-11-10T19:03:28.237Z] [INFO   ] 2025-11-10T19:03:28.237Z [DEBUG] üîç google-sheets callback called: {"url":"http://localhost:3000/api/integrations/google-sheets/callback?state=eyJ1c2VySWQiOiJhM2UzYTUxYS0xNzVjLTRiNTktYWQwMy0yMjdiYTEyYTE4YjAiLCJwcm92aWRlciI6Imdvb2dsZS1zaGVldHMiLCJyZWNvbm5lY3QiOmZhbHNlLCJ0aW1lc3RhbXAiOjE3NjI4MDE0MDQ1OTgsIndvcmtzcGFjZVR5cGUiOiJwZXJzb25hbCJ9&code=4%2F0Ab32j92Xy4vcgAJmtsXloroHoFMqH3CaNBYf-g51ahqv4KEHELEhKFac05qkoGQpR92jmw&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgmail.settings.sharing+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fanalytics.edit+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdocuments+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fanalytics.readonly+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fcalendar+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fspreadsheets+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fcontacts.readonly+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgmail.settings.basic+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgmail.modify+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+openid+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive.readonly&authuser=0&prompt=none","hasCode":true,"hasState":true,"error":null,"userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36"}
[2025-11-10T19:03:28.237Z] [INFO   ] 2025-11-10T19:03:28.237Z [DEBUG] google-sheets OAuth callback state: {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"google-sheets","reconnect":false,"workspaceType":"personal"}
[2025-11-10T19:03:28.529Z] [ERROR  ] 2025-11-10T19:03:28.528Z [ERROR] Error inserting integration: {"code":"23505","details":"Key (user_id, provider)=(a3e3a51a-175c-4b59-ad03-227ba12a18b0, google-sheets) already exists.","hint":null,"message":"duplicate key value violates unique constraint \"integrations_user_id_provider_key\""}
[2025-11-10T19:03:28.529Z] [ERROR  ] 2025-11-10T19:03:28.529Z [ERROR] Error during google-sheets OAuth callback: {}
[2025-11-10T19:03:28.531Z] [INFO   ] 2025-11-10T19:03:28.531Z [DEBUG] üîÑ Creating popup response: type=error, provider=google-sheets, displayName=Google Sheets, message=Database Error: duplicate key value violates unique constraint "integrations_user_id_provider_key"
[2025-11-10T19:03:28.594Z] [INFO   ] 2025-11-10T19:03:28.594Z [DEBUG] ‚úÖ Google Sheets user info fetched: {"email":"stoddard.nathaniel900@gmail.com","name":"nathaniel stoddard"}

=== Log Session Ended: 2025-11-10T19:04:30.812Z ===
