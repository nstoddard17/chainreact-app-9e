=== Log Session Started: 2025-11-10T22:34:53.279Z ===
Node Version: v23.7.0
Platform: darwin
Working Directory: /Users/nathanielstoddard/chainreact-app/chainreact-app-9e
================================================================================

[2025-11-10T22:34:53.279Z] [INFO   ] File logging initialized
[2025-11-10T22:34:53.280Z] [INFO   ] Log file: /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-11-10_16-34-53.log
[2025-11-10T22:34:53.283Z] [INFO   ] Deleted old log file: workflow_2025-11-03_15-44-10.log
[2025-11-10T22:34:53.284Z] [INFO   ] Deleted old log file: workflow_2025-11-03_15-32-53.log
[2025-11-10T22:34:53.284Z] [INFO   ] üìÅ File logging enabled
[2025-11-10T22:34:53.284Z] [INFO   ] üìù Logs will be written to: /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-11-10_16-34-53.log
[2025-11-10T22:34:53.284Z] [INFO   ] üí° To view logs in real-time: tail -f /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-11-10_16-34-53.log
[2025-11-10T22:34:53.284Z] [INFO   ] üí° To view all logs: cat /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-11-10_16-34-53.log
[2025-11-10T22:34:53.284Z] [INFO   ] üí° To share logs: Copy the file at /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-11-10_16-34-53.log
[2025-11-10T22:34:53.284Z] [INFO   ] --------------------------------------------------------------------------------
[2025-11-10T22:34:53.284Z] [DEBUG  ] üìÅ File logging system initialized
[2025-11-10T22:34:53.298Z] [INFO   ]  [32m[1m‚úì[22m[39m Ready in 4s
[2025-11-10T22:34:53.815Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /test/nodes ...
[2025-11-10T22:34:54.313Z] [INFO   ] 2025-11-10T22:34:54.313Z [DEBUG] ü§ñ Discord bot configured, initializing gateway connection in background...
[2025-11-10T22:34:56.402Z] [INFO   ] 2025-11-10T22:34:56.402Z [DEBUG] Initializing Discord Gateway connection (singleton)...
[2025-11-10T22:34:56.403Z] [INFO   ] 2025-11-10T22:34:56.403Z [DEBUG] üîë Discord bot token loaded
[2025-11-10T22:34:57.097Z] [INFO   ] 2025-11-10T22:34:57.097Z [DEBUG] Discord Gateway initialization complete
[2025-11-10T22:34:57.099Z] [INFO   ] 2025-11-10T22:34:57.099Z [DEBUG] ‚úÖ Discord bot gateway connection initialized
[2025-11-10T22:34:57.347Z] [INFO   ] 2025-11-10T22:34:57.347Z [DEBUG] Discord Gateway WebSocket connection established
[2025-11-10T22:34:57.348Z] [INFO   ] 2025-11-10T22:34:57.348Z [DEBUG] üîë Sending identify with intents: {"GUILDS":true,"GUILD_MEMBERS":true,"GUILD_INVITES":true,"GUILD_MESSAGES":true,"MESSAGE_CONTENT":true,"intentsValue":33347}
[2025-11-10T22:34:57.625Z] [INFO   ] 2025-11-10T22:34:57.625Z [DEBUG] üéâ Discord bot ready! {"sessionId":"b6fb493a4316f3f5ee12c1b20e522d0d","username":"ChainReact-Bot","userId":"1378595955212812308","guildCount":2}
[2025-11-10T22:34:57.626Z] [INFO   ] 2025-11-10T22:34:57.626Z [DEBUG] üìã Initializing invite cache...
[2025-11-10T22:34:57.627Z] [INFO   ] 2025-11-10T22:34:57.627Z [DEBUG] üì° Discord event received: GUILD_CREATE
[2025-11-10T22:34:57.632Z] [INFO   ] 2025-11-10T22:34:57.632Z [DEBUG] üì° Discord event received: GUILD_CREATE
[2025-11-10T22:34:57.838Z] [INFO   ] 2025-11-10T22:34:57.838Z [DEBUG] ‚úÖ Cached 3 invites for guild 1378950884045623406
[2025-11-10T22:35:02.963Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /test/nodes in 9.6s (5346 modules)
[2025-11-10T22:35:03.725Z] [INFO   ] 2025-11-10T22:35:03.724Z [DEBUG] üíß [AUTH] Rehydrating auth state from storage {"hasState":true,"hasUser":false,"initialized":false,"timestamp":"2025-11-10T22:35:03.724Z"}
[2025-11-10T22:35:03.738Z] [INFO   ] 2025-11-10T22:35:03.738Z [DEBUG] üíß [AUTH] State hydrated and reset {"hasUser":false,"initialized":false,"timestamp":"2025-11-10T22:35:03.738Z"}
[2025-11-10T22:35:03.738Z] [INFO   ] 2025-11-10T22:35:03.738Z [DEBUG] ‚è≠Ô∏è [AUTH] Skipping initialization {"hasState":true,"alreadyInitialized":false,"isClient":false,"timestamp":"2025-11-10T22:35:03.738Z"}
[2025-11-10T22:35:05.455Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /middleware ...
[2025-11-10T22:35:06.303Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /middleware in 3.3s (5695 modules)
[2025-11-10T22:35:07.157Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations ...
[2025-11-10T22:35:07.474Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations in 819ms (5465 modules)
[2025-11-10T22:35:07.588Z] [INFO   ] 2025-11-10T22:35:07.588Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-10T22:35:07.588Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-10T22:35:07.888Z] [INFO   ] 2025-11-10T22:35:07.888Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-10T22:35:07.888Z] [INFO   ] 2025-11-10T22:35:07.888Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-10T22:35:08.017Z] [INFO   ] 2025-11-10T22:35:08.017Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":3,"permissionsCount":3,"integrationsError":null,"permissionsError":null}
[2025-11-10T22:35:08.017Z] [INFO   ] 2025-11-10T22:35:08.017Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"95193e01-54c3-47b4-b9cd-f9e4fb18a37a","provider":"hubspot","permission":"admin"}
[2025-11-10T22:35:08.017Z] [INFO   ] 2025-11-10T22:35:08.017Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","provider":"google-sheets","permission":"admin"}
[2025-11-10T22:35:08.017Z] [INFO   ] 2025-11-10T22:35:08.017Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"8ef5c519-18a9-4a81-829e-b7a48b58f668","provider":"gumroad","permission":"admin"}
[2025-11-10T22:35:08.017Z] [INFO   ] 2025-11-10T22:35:08.017Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":3,"workspaceType":"personal"}
[2025-11-10T22:35:08.076Z] [INFO   ] 2025-11-10T22:35:08.076Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-10T22:35:08.076Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-10T22:35:08.186Z] [INFO   ] 2025-11-10T22:35:08.186Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-10T22:35:08.186Z] [INFO   ] 2025-11-10T22:35:08.186Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-10T22:35:08.284Z] [INFO   ] 2025-11-10T22:35:08.284Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":3,"permissionsCount":3,"integrationsError":null,"permissionsError":null}
[2025-11-10T22:35:08.284Z] [INFO   ] 2025-11-10T22:35:08.284Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"95193e01-54c3-47b4-b9cd-f9e4fb18a37a","provider":"hubspot","permission":"admin"}
[2025-11-10T22:35:08.284Z] [INFO   ] 2025-11-10T22:35:08.284Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","provider":"google-sheets","permission":"admin"}
[2025-11-10T22:35:08.284Z] [INFO   ] 2025-11-10T22:35:08.284Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"8ef5c519-18a9-4a81-829e-b7a48b58f668","provider":"gumroad","permission":"admin"}
[2025-11-10T22:35:08.285Z] [INFO   ] 2025-11-10T22:35:08.285Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":3,"workspaceType":"personal"}
[2025-11-10T22:36:18.770Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/hubspot/data ...
[2025-11-10T22:36:19.283Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/hubspot/data in 1016ms (5461 modules)
[2025-11-10T22:36:19.487Z] [INFO   ] 2025-11-10T22:36:19.487Z [DEBUG] üì• [HubSpot API] Received request: {"integrationId":"95193e01-54c3-47b4-b9cd-f9e4fb18a37a","dataType":"hubspot_owners","options":{}}
[2025-11-10T22:36:19.641Z] [INFO   ] 2025-11-10T22:36:19.641Z [DEBUG] üîç [HubSpot API] Processing request: {"integrationId":"95193e01-54c3-47b4-b9cd-f9e4fb18a37a","dataType":"hubspot_owners","status":"connected","hasToken":true}
[2025-11-10T22:36:19.859Z] [ERROR  ] 2025-11-10T22:36:19.859Z [ERROR] Error fetching HubSpot owners: {}
[2025-11-10T22:36:19.860Z] [ERROR  ] 2025-11-10T22:36:19.860Z [ERROR] ‚ùå [HubSpot API] Handler execution failed: {"dataType":"hubspot_owners","error":"HubSpot API error: 403","stack":"Error: HubSpot API error: 403\n    at getHubSpotOwners (webpack-internal:///(rsc)/./app/api/integrations/hubspot/data/handlers/owners.ts:40:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async POST (webpack-internal:///(rsc)/./app/api/integrations/hubspot/data/route.ts:85:20)\n    at async AppRouteRouteModule.do (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:38696)\n    at async AppRouteRouteModule.handle (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:5:45978)\n    at async responseGenerator (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fintegrations%2Fhubspot%2Fdata%2Froute&page=%2Fapi%2Fintegrations%2Fhubspot%2Fdata%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fintegrations%2Fhubspot%2Fdata%2Froute.ts&appDir=%2FUsers%2Fnathanielstoddard%2Fchainreact-app%2Fchainreact-app-9e%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fnathanielstoddard%2Fchainreact-app%2Fchainreact-app-9e&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:203:38)\n    at async AppRouteRouteModule.handleResponse (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:1:187565)\n    at async handleResponse (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fintegrations%2Fhubspot%2Fdata%2Froute&page=%2Fapi%2Fintegrations%2Fhubspot%2Fdata%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fintegrations%2Fhubspot%2Fdata%2Froute.ts&appDir=%2FUsers%2Fnathanielstoddard%2Fchainreact-app%2Fchainreact-app-9e%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fnathanielstoddard%2Fchainreact-app%2Fchainreact-app-9e&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:265:32)\n    at async handler (webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fintegrations%2Fhubspot%2Fdata%2Froute&page=%2Fapi%2Fintegrations%2Fhubspot%2Fdata%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fintegrations%2Fhubspot%2Fdata%2Froute.ts&appDir=%2FUsers%2Fnathanielstoddard%2Fchainreact-app%2Fchainreact-app-9e%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fnathanielstoddard%2Fchainreact-app%2Fchainreact-app-9e&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!:317:13)\n    at async DevServer.renderToResponseWithComponentsImpl (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/base-server.js:1422:9)\n    at async DevServer.renderPageComponent (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/base-server.js:1474:24)\n    at async DevServer.renderToResponseImpl (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/base-server.js:1514:32)\n    at async DevServer.pipeImpl (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/base-server.js:1025:25)\n    at async NextNodeServer.handleCatchallRenderRequest (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/next-server.js:393:17)\n    at async DevServer.handleRequestImpl (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/base-server.js:916:17)\n    at async /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/dev/next-dev-server.js:399:20\n    at async Span.traceAsyncFn (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/trace/trace.js:157:20)\n    at async DevServer.handleRequest (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/dev/next-dev-server.js:395:24)\n    at async invokeRender (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/lib/router-server.js:240:21)\n    at async handleRequest (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/lib/router-server.js:437:24)\n    at async requestHandlerImpl (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/lib/router-server.js:485:13)\n    at async Server.requestListener (/Users/nathanielstoddard/chainreact-app/chainreact-app-9e/node_modules/next/dist/server/lib/start-server.js:226:13)","integrationId":"95193e01-54c3-47b4-b9cd-f9e4fb18a37a"}
[2025-11-10T22:36:22.509Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/[id] ...
[2025-11-10T22:36:22.636Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/[id] in 650ms (5479 modules)
[2025-11-10T22:36:23.641Z] [INFO   ] 2025-11-10T22:36:23.640Z [INFO] üîê [DELETE /api/integrations/95193e01-54c3-47b4-b9cd-f9e4fb18a37a] Revoking OAuth token for hubspot
[2025-11-10T22:36:23.641Z] [INFO   ] 2025-11-10T22:36:23.641Z [DEBUG] Revoking hubspot OAuth token... {"endpoint":"https://api.hubapi.com/oauth/v1/refresh-tokens/na2-37b6-1df5-4c9e-8b1b-47efc42a4f9a","method":"DELETE","auth":"bearer"}
[2025-11-10T22:36:23.835Z] [INFO   ] 2025-11-10T22:36:23.834Z [INFO] ‚úÖ [DELETE /api/integrations/95193e01-54c3-47b4-b9cd-f9e4fb18a37a] Integration hubspot disconnected by user a3e3a51a-175c-4b59-ad03-227ba12a18b0
[2025-11-10T22:36:23.860Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/auth/generate-url ...
[2025-11-10T22:36:23.951Z] [INFO   ] 2025-11-10T22:36:23.950Z [INFO] ‚úÖ Successfully revoked hubspot OAuth token
[2025-11-10T22:36:23.951Z] [INFO   ] 2025-11-10T22:36:23.951Z [INFO] ‚úÖ Background revocation successful for hubspot
[2025-11-10T22:36:24.356Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations in 1010ms (5492 modules)
[2025-11-10T22:36:24.520Z] [INFO   ] 2025-11-10T22:36:24.520Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-10T22:36:24.520Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-10T22:36:24.841Z] [INFO   ] 2025-11-10T22:36:24.841Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-10T22:36:24.842Z] [INFO   ] 2025-11-10T22:36:24.842Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-10T22:36:24.945Z] [INFO   ] 2025-11-10T22:36:24.945Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":2,"permissionsCount":2,"integrationsError":null,"permissionsError":null}
[2025-11-10T22:36:24.945Z] [INFO   ] 2025-11-10T22:36:24.945Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","provider":"google-sheets","permission":"admin"}
[2025-11-10T22:36:24.945Z] [INFO   ] 2025-11-10T22:36:24.945Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"8ef5c519-18a9-4a81-829e-b7a48b58f668","provider":"gumroad","permission":"admin"}
[2025-11-10T22:36:24.945Z] [INFO   ] 2025-11-10T22:36:24.945Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":2,"workspaceType":"personal"}
[2025-11-10T22:37:04.900Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/gumroad/data ...
[2025-11-10T22:37:04.973Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/gumroad/data in 587ms (5497 modules)
[2025-11-10T22:37:05.377Z] [INFO   ] 2025-11-10T22:37:05.377Z [DEBUG] üîç [Gumroad API] Processing request: {"integrationId":"8ef5c519-18a9-4a81-829e-b7a48b58f668","dataType":"gumroad_products","status":"connected","hasToken":true}
[2025-11-10T22:37:05.379Z] [INFO   ] 2025-11-10T22:37:05.378Z [DEBUG] üîç Gumroad products fetcher called with integration: {"id":"8ef5c519-18a9-4a81-829e-b7a48b58f668","provider":"gumroad","hasToken":true,"tokenLength":129}
[2025-11-10T22:37:05.379Z] [INFO   ] 2025-11-10T22:37:05.379Z [DEBUG] üîç Validating Gumroad token...
[2025-11-10T22:37:05.379Z] [INFO   ] 2025-11-10T22:37:05.379Z [DEBUG] üîç Fetching Gumroad products...
[2025-11-10T22:37:05.639Z] [INFO   ] 2025-11-10T22:37:05.639Z [DEBUG] ‚úÖ Gumroad products fetched successfully: 1 products
[2025-11-10T22:37:05.639Z] [INFO   ] 2025-11-10T22:37:05.639Z [DEBUG] ‚úÖ [Gumroad API] Successfully processed gumroad_products: {"integrationId":"8ef5c519-18a9-4a81-829e-b7a48b58f668","resultCount":1}
[2025-11-10T22:37:23.241Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1133ms (1177 modules)
[2025-11-10T22:37:50.788Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 540ms (1177 modules)
[2025-11-10T22:38:00.794Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 383ms (1177 modules)
[2025-11-10T22:38:16.292Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1903ms (5347 modules)
[2025-11-10T22:38:28.643Z] [WARN   ]  [33m[1m‚ö†[22m[39m ./lib/workflows/actions/registry.ts
Attempted import error: 'formatGoogleSheetsRange' is not exported from './googleSheets' (imported as 'formatGoogleSheetsRange').

Import trace for requested module:
./lib/workflows/actions/registry.ts
./lib/workflows/executeNode.ts
./lib/execution/advancedExecutionEngine.ts
./lib/integrations/discordGateway.ts

./lib/workflows/actions/registry.ts
Attempted import error: 'batchUpdateGoogleSheets' is not exported from './googleSheets' (imported as 'batchUpdateGoogleSheets').

Import trace for requested module:
./lib/workflows/actions/registry.ts
./lib/workflows/executeNode.ts
./lib/execution/advancedExecutionEngine.ts
./lib/integrations/discordGateway.ts
[2025-11-10T22:38:47.455Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 603ms (5349 modules)
[2025-11-10T22:39:15.889Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/auth/generate-url in 473ms (4299 modules)
[2025-11-10T22:39:44.073Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/fetch-user-data ...
[2025-11-10T22:39:44.611Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/fetch-user-data in 1151ms (5465 modules)
[2025-11-10T22:39:44.715Z] [INFO   ] 2025-11-10T22:39:44.715Z [DEBUG] üöÄ [SERVER] fetch-user-data API route called
[2025-11-10T22:39:44.716Z] [INFO   ] 2025-11-10T22:39:44.716Z [DEBUG] üîç [SERVER] fetch-user-data request parsed: {"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","dataType":"google-sheets_spreadsheets","options":{}}
[2025-11-10T22:39:44.879Z] [INFO   ] 2025-11-10T22:39:44.879Z [DEBUG] üîÑ [SERVER] Routing Google request to dedicated API: google-sheets_spreadsheets (provider: google-sheets)
[2025-11-10T22:39:45.425Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/google/data ...
[2025-11-10T22:39:45.523Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/google/data in 602ms (5499 modules)
[2025-11-10T22:39:45.622Z] [INFO   ] 2025-11-10T22:39:45.622Z [DEBUG] üöÄ [Google Data API] POST handler invoked
[2025-11-10T22:39:45.623Z] [INFO   ] 2025-11-10T22:39:45.623Z [DEBUG] üîç [Google Data API] Request received: {"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","dataType":"google-sheets_spreadsheets","options":{},"fullRequestBody":{"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","dataType":"google-sheets_spreadsheets","options":{}}}
[2025-11-10T22:39:45.716Z] [INFO   ] 2025-11-10T22:39:45.716Z [DEBUG] üìä [Google API] Integration provider check: {"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","actualProvider":"google-sheets","dataType":"google-sheets_spreadsheets","providerLowerCase":"google-sheets"}
[2025-11-10T22:39:45.717Z] [INFO   ] 2025-11-10T22:39:45.717Z [DEBUG] üîç [Google API] Processing request: {"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","dataType":"google-sheets_spreadsheets","provider":"google-sheets","status":"connected","hasToken":true}
[2025-11-10T22:39:45.717Z] [INFO   ] 2025-11-10T22:39:45.717Z [DEBUG] üìä [Google Sheets] Fetching spreadsheets
[2025-11-10T22:39:46.178Z] [INFO   ] 2025-11-10T22:39:46.178Z [DEBUG] ‚úÖ [Google Sheets] Retrieved 21 spreadsheets
[2025-11-10T22:39:46.179Z] [INFO   ] 2025-11-10T22:39:46.179Z [DEBUG] ‚úÖ [Google API] Successfully processed google-sheets_spreadsheets: {"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","resultCount":21}
[2025-11-10T22:39:46.189Z] [INFO   ] 2025-11-10T22:39:46.188Z [DEBUG] ‚úÖ [SERVER] Google API completed for google-sheets_spreadsheets, result length: 21
[2025-11-10T22:39:47.967Z] [INFO   ] 2025-11-10T22:39:47.967Z [DEBUG] üöÄ [SERVER] fetch-user-data API route called
[2025-11-10T22:39:47.968Z] [INFO   ] 2025-11-10T22:39:47.968Z [DEBUG] üîç [SERVER] fetch-user-data request parsed: {"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","dataType":"google-sheets_sheets","options":{"spreadsheetId":"13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI"}}
[2025-11-10T22:39:48.098Z] [INFO   ] 2025-11-10T22:39:48.098Z [DEBUG] üîÑ [SERVER] Routing Google request to dedicated API: google-sheets_sheets (provider: google-sheets)
[2025-11-10T22:39:48.165Z] [INFO   ] 2025-11-10T22:39:48.165Z [DEBUG] üöÄ [Google Data API] POST handler invoked
[2025-11-10T22:39:48.166Z] [INFO   ] 2025-11-10T22:39:48.166Z [DEBUG] üîç [Google Data API] Request received: {"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","dataType":"google-sheets_sheets","options":{"spreadsheetId":"13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI"},"fullRequestBody":{"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","dataType":"google-sheets_sheets","options":{"spreadsheetId":"13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI"}}}
[2025-11-10T22:39:48.252Z] [INFO   ] 2025-11-10T22:39:48.252Z [DEBUG] üìä [Google API] Integration provider check: {"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","actualProvider":"google-sheets","dataType":"google-sheets_sheets","providerLowerCase":"google-sheets"}
[2025-11-10T22:39:48.252Z] [INFO   ] 2025-11-10T22:39:48.252Z [DEBUG] üîç [Google API] Processing request: {"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","dataType":"google-sheets_sheets","provider":"google-sheets","status":"connected","hasToken":true}
[2025-11-10T22:39:48.252Z] [INFO   ] 2025-11-10T22:39:48.252Z [DEBUG] üìä [Google Sheets] Fetching sheets for spreadsheet: 13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI
[2025-11-10T22:39:48.906Z] [INFO   ] 2025-11-10T22:39:48.905Z [DEBUG] ‚úÖ [Google Sheets] Retrieved 4 sheets
[2025-11-10T22:39:48.907Z] [INFO   ] 2025-11-10T22:39:48.907Z [DEBUG] ‚úÖ [Google API] Successfully processed google-sheets_sheets: {"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","resultCount":4}
[2025-11-10T22:39:48.913Z] [INFO   ] 2025-11-10T22:39:48.913Z [DEBUG] ‚úÖ [SERVER] Google API completed for google-sheets_sheets, result length: 4
[2025-11-10T22:40:05.467Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/presence/count ...
[2025-11-10T22:40:05.496Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/presence/count in 534ms (4338 modules)
[2025-11-10T22:43:34.207Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1552ms (5349 modules)
[2025-11-10T22:43:34.320Z] [WARN   ]  [33m[1m‚ö†[22m[39m Fast Refresh had to perform a full reload. Read more: https://nextjs.org/docs/messages/fast-refresh-reload
[2025-11-10T22:43:34.932Z] [INFO   ] 2025-11-10T22:43:34.932Z [DEBUG] üíß [AUTH] Rehydrating auth state from storage {"hasState":true,"hasUser":false,"initialized":false,"timestamp":"2025-11-10T22:43:34.932Z"}
[2025-11-10T22:43:34.946Z] [INFO   ] 2025-11-10T22:43:34.946Z [DEBUG] üíß [AUTH] State hydrated and reset {"hasUser":false,"initialized":false,"timestamp":"2025-11-10T22:43:34.946Z"}
[2025-11-10T22:43:34.946Z] [INFO   ] 2025-11-10T22:43:34.946Z [DEBUG] ‚è≠Ô∏è [AUTH] Skipping initialization {"hasState":true,"alreadyInitialized":false,"isClient":false,"timestamp":"2025-11-10T22:43:34.946Z"}
[2025-11-10T22:43:37.215Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations ...
[2025-11-10T22:43:37.248Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations in 599ms (4188 modules)
[2025-11-10T22:43:37.766Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled (4304 modules)
[2025-11-10T22:43:38.381Z] [INFO   ] 2025-11-10T22:43:38.381Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-10T22:43:38.381Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-10T22:43:38.701Z] [INFO   ] 2025-11-10T22:43:38.701Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-10T22:43:38.701Z] [INFO   ] 2025-11-10T22:43:38.701Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-10T22:43:38.835Z] [INFO   ] 2025-11-10T22:43:38.835Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":2,"permissionsCount":2,"integrationsError":null,"permissionsError":null}
[2025-11-10T22:43:38.835Z] [INFO   ] 2025-11-10T22:43:38.835Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","provider":"google-sheets","permission":"admin"}
[2025-11-10T22:43:38.835Z] [INFO   ] 2025-11-10T22:43:38.835Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"8ef5c519-18a9-4a81-829e-b7a48b58f668","provider":"gumroad","permission":"admin"}
[2025-11-10T22:43:38.835Z] [INFO   ] 2025-11-10T22:43:38.835Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":2,"workspaceType":"personal"}
[2025-11-10T22:43:45.215Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1912ms (5481 modules)
[2025-11-10T22:43:49.184Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1683ms (5481 modules)
[2025-11-10T22:43:50.279Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/auth/generate-url ...
[2025-11-10T22:43:50.287Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/auth/generate-url in 509ms (4308 modules)
[2025-11-10T22:43:59.844Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/hubspot/callback ...
[2025-11-10T22:43:59.981Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/hubspot/callback in 659ms (5479 modules)
[2025-11-10T22:44:00.054Z] [INFO   ] 2025-11-10T22:44:00.054Z [DEBUG] üîç hubspot callback called: {"url":"http://localhost:3000/api/integrations/hubspot/callback?code=na2-d2f1-77a6-486e-ac6d-8274af4118e5&state=eyJ1c2VySWQiOiJhM2UzYTUxYS0xNzVjLTRiNTktYWQwMy0yMjdiYTEyYTE4YjAiLCJwcm92aWRlciI6Imh1YnNwb3QiLCJyZWNvbm5lY3QiOmZhbHNlLCJ0aW1lc3RhbXAiOjE3NjI4MTQ2MzA1MzQsIndvcmtzcGFjZVR5cGUiOiJwZXJzb25hbCJ9","hasCode":true,"hasState":true,"error":null,"userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36"}
[2025-11-10T22:44:00.054Z] [INFO   ] 2025-11-10T22:44:00.054Z [DEBUG] hubspot OAuth callback state: {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"hubspot","reconnect":false,"workspaceType":"personal"}
[2025-11-10T22:44:00.536Z] [INFO   ] 2025-11-10T22:44:00.536Z [TRACE] üîç Raw HubSpot API response: {"portalId":242959065,"timeZone":"US/Eastern","accountType":"STANDARD","currency":"USD","utcOffset":"-05:00","utcOffsetMilliseconds":-18000000}
[2025-11-10T22:44:00.537Z] [INFO   ] 2025-11-10T22:44:00.537Z [DEBUG] ‚úÖ HubSpot account info fetched: {"allFields":["portalId","timeZone","accountType","currency","utcOffset","utcOffsetMilliseconds"]}
[2025-11-10T22:44:00.706Z] [INFO   ] 2025-11-10T22:44:00.706Z [DEBUG] ‚úÖ Created new integration: a4b6e286-eafc-43c1-a39e-6371c712c87d
[2025-11-10T22:44:00.707Z] [INFO   ] 2025-11-10T22:44:00.707Z [DEBUG] Granting permissions for workspace context: {"type":"personal"}
[2025-11-10T22:44:00.822Z] [INFO   ] 2025-11-10T22:44:00.822Z [INFO] Granted admin permission to user a3e3a51a-175c-4b59-ad03-227ba12a18b0 for integration a4b6e286-eafc-43c1-a39e-6371c712c87d
[2025-11-10T22:44:00.823Z] [INFO   ] 2025-11-10T22:44:00.823Z [INFO] Personal integration a4b6e286-eafc-43c1-a39e-6371c712c87d - granted admin to a3e3a51a-175c-4b59-ad03-227ba12a18b0
[2025-11-10T22:44:00.823Z] [INFO   ] 2025-11-10T22:44:00.823Z [DEBUG] ‚úÖ Permissions granted successfully
[2025-11-10T22:44:00.823Z] [INFO   ] 2025-11-10T22:44:00.823Z [DEBUG] ‚úÖ hubspot integration successfully saved
[2025-11-10T22:44:00.823Z] [INFO   ] 2025-11-10T22:44:00.823Z [DEBUG] üîÑ Creating popup response: type=success, provider=hubspot, displayName=HubSpot, message=hubspot connected successfully!
[2025-11-10T22:44:14.539Z] [INFO   ] 2025-11-10T22:44:14.539Z [DEBUG] üíß [AUTH] Rehydrating auth state from storage {"hasState":true,"hasUser":false,"initialized":false,"timestamp":"2025-11-10T22:44:14.539Z"}
[2025-11-10T22:44:14.554Z] [INFO   ] 2025-11-10T22:44:14.553Z [DEBUG] üíß [AUTH] State hydrated and reset {"hasUser":false,"initialized":false,"timestamp":"2025-11-10T22:44:14.553Z"}
[2025-11-10T22:44:14.554Z] [INFO   ] 2025-11-10T22:44:14.554Z [DEBUG] ‚è≠Ô∏è [AUTH] Skipping initialization {"hasState":true,"alreadyInitialized":false,"isClient":false,"timestamp":"2025-11-10T22:44:14.554Z"}
[2025-11-10T22:44:15.922Z] [INFO   ] 2025-11-10T22:44:15.922Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-10T22:44:15.922Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-10T22:44:16.057Z] [INFO   ] 2025-11-10T22:44:16.056Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-10T22:44:16.057Z] [INFO   ] 2025-11-10T22:44:16.057Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-10T22:44:16.225Z] [INFO   ] 2025-11-10T22:44:16.225Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":3,"permissionsCount":3,"integrationsError":null,"permissionsError":null}
[2025-11-10T22:44:16.226Z] [INFO   ] 2025-11-10T22:44:16.226Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"a4b6e286-eafc-43c1-a39e-6371c712c87d","provider":"hubspot","permission":"admin"}
[2025-11-10T22:44:16.226Z] [INFO   ] 2025-11-10T22:44:16.226Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","provider":"google-sheets","permission":"admin"}
[2025-11-10T22:44:16.226Z] [INFO   ] 2025-11-10T22:44:16.226Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"8ef5c519-18a9-4a81-829e-b7a48b58f668","provider":"gumroad","permission":"admin"}
[2025-11-10T22:44:16.226Z] [INFO   ] 2025-11-10T22:44:16.226Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":3,"workspaceType":"personal"}
[2025-11-10T22:44:17.404Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/hubspot/data ...
[2025-11-10T22:44:17.712Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/hubspot/data in 857ms (4339 modules)
[2025-11-10T22:44:17.779Z] [INFO   ] 2025-11-10T22:44:17.779Z [DEBUG] üì• [HubSpot API] Received request: {"integrationId":"a4b6e286-eafc-43c1-a39e-6371c712c87d","dataType":"hubspot_owners","options":{}}
[2025-11-10T22:44:17.880Z] [INFO   ] 2025-11-10T22:44:17.880Z [DEBUG] üîç [HubSpot API] Processing request: {"integrationId":"a4b6e286-eafc-43c1-a39e-6371c712c87d","dataType":"hubspot_owners","status":"connected","hasToken":true}
[2025-11-10T22:44:18.078Z] [INFO   ] 2025-11-10T22:44:18.077Z [DEBUG] ‚úÖ Fetched 1 owners
[2025-11-10T22:44:18.079Z] [INFO   ] 2025-11-10T22:44:18.078Z [DEBUG] ‚úÖ [HubSpot API] Successfully processed hubspot_owners: {"integrationId":"a4b6e286-eafc-43c1-a39e-6371c712c87d","resultCount":1}
[2025-11-10T22:44:44.317Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1349ms (5516 modules)
[2025-11-10T22:46:08.743Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/[id] ...
[2025-11-10T22:46:09.245Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/auth/generate-url in 1152ms (4295 modules)
[2025-11-10T22:46:09.503Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled (4306 modules)
[2025-11-10T22:46:10.233Z] [INFO   ] 2025-11-10T22:46:10.232Z [INFO] üîê [DELETE /api/integrations/a4b6e286-eafc-43c1-a39e-6371c712c87d] Revoking OAuth token for hubspot
[2025-11-10T22:46:10.233Z] [INFO   ] 2025-11-10T22:46:10.233Z [DEBUG] Revoking hubspot OAuth token... {"endpoint":"https://api.hubapi.com/oauth/v1/refresh-tokens/na2-4b8e-7bc1-4f32-84e1-e30a7aafb0dd","method":"DELETE","auth":"bearer"}
[2025-11-10T22:46:10.341Z] [INFO   ] 2025-11-10T22:46:10.341Z [INFO] ‚úÖ [DELETE /api/integrations/a4b6e286-eafc-43c1-a39e-6371c712c87d] Integration hubspot disconnected by user a3e3a51a-175c-4b59-ad03-227ba12a18b0
[2025-11-10T22:46:10.808Z] [INFO   ] 2025-11-10T22:46:10.808Z [INFO] ‚úÖ Successfully revoked hubspot OAuth token
[2025-11-10T22:46:10.810Z] [INFO   ] 2025-11-10T22:46:10.810Z [INFO] ‚úÖ Background revocation successful for hubspot
[2025-11-10T22:46:11.638Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations in 459ms (4308 modules)
[2025-11-10T22:46:11.740Z] [INFO   ] 2025-11-10T22:46:11.740Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-10T22:46:11.740Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-10T22:46:11.866Z] [INFO   ] 2025-11-10T22:46:11.866Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-10T22:46:11.866Z] [INFO   ] 2025-11-10T22:46:11.866Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-10T22:46:11.964Z] [INFO   ] 2025-11-10T22:46:11.964Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":2,"permissionsCount":2,"integrationsError":null,"permissionsError":null}
[2025-11-10T22:46:11.965Z] [INFO   ] 2025-11-10T22:46:11.965Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","provider":"google-sheets","permission":"admin"}
[2025-11-10T22:46:11.966Z] [INFO   ] 2025-11-10T22:46:11.966Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"8ef5c519-18a9-4a81-829e-b7a48b58f668","provider":"gumroad","permission":"admin"}
[2025-11-10T22:46:11.966Z] [INFO   ] 2025-11-10T22:46:11.966Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":2,"workspaceType":"personal"}
[2025-11-10T22:46:18.108Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/hubspot/callback ...
[2025-11-10T22:46:18.137Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/hubspot/callback in 719ms (4313 modules)
[2025-11-10T22:46:18.193Z] [INFO   ] 2025-11-10T22:46:18.193Z [DEBUG] üîç hubspot callback called: {"url":"http://localhost:3000/api/integrations/hubspot/callback?code=na2-57e6-ecd2-4bdd-9ea0-4260bcc6f459&state=eyJ1c2VySWQiOiJhM2UzYTUxYS0xNzVjLTRiNTktYWQwMy0yMjdiYTEyYTE4YjAiLCJwcm92aWRlciI6Imh1YnNwb3QiLCJyZWNvbm5lY3QiOmZhbHNlLCJ0aW1lc3RhbXAiOjE3NjI4MTQ3NzAwMTAsIndvcmtzcGFjZVR5cGUiOiJwZXJzb25hbCJ9","hasCode":true,"hasState":true,"error":null,"userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36"}
[2025-11-10T22:46:18.193Z] [INFO   ] 2025-11-10T22:46:18.193Z [DEBUG] hubspot OAuth callback state: {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"hubspot","reconnect":false,"workspaceType":"personal"}
[2025-11-10T22:46:18.636Z] [INFO   ] 2025-11-10T22:46:18.636Z [TRACE] üîç Raw HubSpot API response: {"portalId":242959065,"timeZone":"US/Eastern","accountType":"STANDARD","currency":"USD","utcOffset":"-05:00","utcOffsetMilliseconds":-18000000}
[2025-11-10T22:46:18.637Z] [INFO   ] 2025-11-10T22:46:18.637Z [DEBUG] ‚úÖ HubSpot account info fetched: {"allFields":["portalId","timeZone","accountType","currency","utcOffset","utcOffsetMilliseconds"]}
[2025-11-10T22:46:18.803Z] [INFO   ] 2025-11-10T22:46:18.803Z [DEBUG] ‚úÖ Created new integration: a0b0b3ec-dd14-4925-8b83-10c5b07b6482
[2025-11-10T22:46:18.804Z] [INFO   ] 2025-11-10T22:46:18.804Z [DEBUG] Granting permissions for workspace context: {"type":"personal"}
[2025-11-10T22:46:18.912Z] [INFO   ] 2025-11-10T22:46:18.911Z [INFO] Granted admin permission to user a3e3a51a-175c-4b59-ad03-227ba12a18b0 for integration a0b0b3ec-dd14-4925-8b83-10c5b07b6482
[2025-11-10T22:46:18.912Z] [INFO   ] 2025-11-10T22:46:18.912Z [INFO] Personal integration a0b0b3ec-dd14-4925-8b83-10c5b07b6482 - granted admin to a3e3a51a-175c-4b59-ad03-227ba12a18b0
[2025-11-10T22:46:18.912Z] [INFO   ] 2025-11-10T22:46:18.912Z [DEBUG] ‚úÖ Permissions granted successfully
[2025-11-10T22:46:18.912Z] [INFO   ] 2025-11-10T22:46:18.912Z [DEBUG] ‚úÖ hubspot integration successfully saved
[2025-11-10T22:46:18.913Z] [INFO   ] 2025-11-10T22:46:18.913Z [DEBUG] üîÑ Creating popup response: type=success, provider=hubspot, displayName=HubSpot, message=hubspot connected successfully!
[2025-11-10T22:46:19.114Z] [INFO   ] 2025-11-10T22:46:19.114Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-10T22:46:19.114Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-10T22:46:19.219Z] [INFO   ] 2025-11-10T22:46:19.219Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-10T22:46:19.219Z] [INFO   ] 2025-11-10T22:46:19.219Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-10T22:46:19.364Z] [INFO   ] 2025-11-10T22:46:19.363Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":3,"permissionsCount":3,"integrationsError":null,"permissionsError":null}
[2025-11-10T22:46:19.365Z] [INFO   ] 2025-11-10T22:46:19.365Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"a0b0b3ec-dd14-4925-8b83-10c5b07b6482","provider":"hubspot","permission":"admin"}
[2025-11-10T22:46:19.365Z] [INFO   ] 2025-11-10T22:46:19.365Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","provider":"google-sheets","permission":"admin"}
[2025-11-10T22:46:19.365Z] [INFO   ] 2025-11-10T22:46:19.365Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"8ef5c519-18a9-4a81-829e-b7a48b58f668","provider":"gumroad","permission":"admin"}
[2025-11-10T22:46:19.365Z] [INFO   ] 2025-11-10T22:46:19.365Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":3,"workspaceType":"personal"}
[2025-11-10T22:48:02.026Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/fetch-user-data ...
[2025-11-10T22:48:02.541Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/fetch-user-data in 1339ms (4279 modules)
[2025-11-10T22:48:02.757Z] [INFO   ] 2025-11-10T22:48:02.757Z [DEBUG] üöÄ [SERVER] fetch-user-data API route called
[2025-11-10T22:48:02.758Z] [INFO   ] 2025-11-10T22:48:02.758Z [DEBUG] üîç [SERVER] fetch-user-data request parsed: {"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","dataType":"google-sheets_spreadsheets","options":{}}
[2025-11-10T22:48:02.991Z] [INFO   ] 2025-11-10T22:48:02.991Z [DEBUG] üîÑ [SERVER] Routing Google request to dedicated API: google-sheets_spreadsheets (provider: google-sheets)
[2025-11-10T22:48:03.578Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/google/data ...
[2025-11-10T22:48:03.614Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/google/data in 595ms (4315 modules)
[2025-11-10T22:48:03.709Z] [INFO   ] 2025-11-10T22:48:03.709Z [DEBUG] üöÄ [Google Data API] POST handler invoked
[2025-11-10T22:48:03.709Z] [INFO   ] 2025-11-10T22:48:03.709Z [DEBUG] üîç [Google Data API] Request received: {"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","dataType":"google-sheets_spreadsheets","options":{},"fullRequestBody":{"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","dataType":"google-sheets_spreadsheets","options":{}}}
[2025-11-10T22:48:03.816Z] [INFO   ] 2025-11-10T22:48:03.816Z [DEBUG] üìä [Google API] Integration provider check: {"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","actualProvider":"google-sheets","dataType":"google-sheets_spreadsheets","providerLowerCase":"google-sheets"}
[2025-11-10T22:48:03.816Z] [INFO   ] 2025-11-10T22:48:03.816Z [DEBUG] üîç [Google API] Processing request: {"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","dataType":"google-sheets_spreadsheets","provider":"google-sheets","status":"connected","hasToken":true}
[2025-11-10T22:48:03.817Z] [INFO   ] 2025-11-10T22:48:03.817Z [DEBUG] üìä [Google Sheets] Fetching spreadsheets
[2025-11-10T22:48:04.243Z] [INFO   ] 2025-11-10T22:48:04.243Z [DEBUG] ‚úÖ [Google Sheets] Retrieved 21 spreadsheets
[2025-11-10T22:48:04.244Z] [INFO   ] 2025-11-10T22:48:04.244Z [DEBUG] ‚úÖ [Google API] Successfully processed google-sheets_spreadsheets: {"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","resultCount":21}
[2025-11-10T22:48:04.250Z] [INFO   ] 2025-11-10T22:48:04.249Z [DEBUG] ‚úÖ [SERVER] Google API completed for google-sheets_spreadsheets, result length: 21
[2025-11-10T22:48:05.282Z] [INFO   ] 2025-11-10T22:48:05.282Z [DEBUG] üöÄ [SERVER] fetch-user-data API route called
[2025-11-10T22:48:05.282Z] [INFO   ] 2025-11-10T22:48:05.282Z [DEBUG] üîç [SERVER] fetch-user-data request parsed: {"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","dataType":"google-sheets_sheets","options":{"spreadsheetId":"13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI"}}
[2025-11-10T22:48:05.389Z] [INFO   ] 2025-11-10T22:48:05.389Z [DEBUG] üîÑ [SERVER] Routing Google request to dedicated API: google-sheets_sheets (provider: google-sheets)
[2025-11-10T22:48:05.447Z] [INFO   ] 2025-11-10T22:48:05.447Z [DEBUG] üöÄ [Google Data API] POST handler invoked
[2025-11-10T22:48:05.448Z] [INFO   ] 2025-11-10T22:48:05.447Z [DEBUG] üîç [Google Data API] Request received: {"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","dataType":"google-sheets_sheets","options":{"spreadsheetId":"13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI"},"fullRequestBody":{"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","dataType":"google-sheets_sheets","options":{"spreadsheetId":"13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI"}}}
[2025-11-10T22:48:05.537Z] [INFO   ] 2025-11-10T22:48:05.537Z [DEBUG] üìä [Google API] Integration provider check: {"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","actualProvider":"google-sheets","dataType":"google-sheets_sheets","providerLowerCase":"google-sheets"}
[2025-11-10T22:48:05.537Z] [INFO   ] 2025-11-10T22:48:05.537Z [DEBUG] üîç [Google API] Processing request: {"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","dataType":"google-sheets_sheets","provider":"google-sheets","status":"connected","hasToken":true}
[2025-11-10T22:48:05.537Z] [INFO   ] 2025-11-10T22:48:05.537Z [DEBUG] üìä [Google Sheets] Fetching sheets for spreadsheet: 13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI
[2025-11-10T22:48:06.229Z] [INFO   ] 2025-11-10T22:48:06.229Z [DEBUG] ‚úÖ [Google Sheets] Retrieved 4 sheets
[2025-11-10T22:48:06.230Z] [INFO   ] 2025-11-10T22:48:06.230Z [DEBUG] ‚úÖ [Google API] Successfully processed google-sheets_sheets: {"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","resultCount":4}
[2025-11-10T22:48:06.232Z] [INFO   ] 2025-11-10T22:48:06.232Z [DEBUG] ‚úÖ [SERVER] Google API completed for google-sheets_sheets, result length: 4
[2025-11-10T22:48:34.133Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 3.1s (5492 modules)
[2025-11-10T22:48:34.394Z] [WARN   ]  [33m[1m‚ö†[22m[39m Fast Refresh had to perform a full reload. Read more: https://nextjs.org/docs/messages/fast-refresh-reload
[2025-11-10T22:48:34.771Z] [INFO   ] 2025-11-10T22:48:34.770Z [DEBUG] üíß [AUTH] Rehydrating auth state from storage {"hasState":true,"hasUser":false,"initialized":false,"timestamp":"2025-11-10T22:48:34.770Z"}
[2025-11-10T22:48:34.783Z] [INFO   ] 2025-11-10T22:48:34.783Z [DEBUG] üíß [AUTH] State hydrated and reset {"hasUser":false,"initialized":false,"timestamp":"2025-11-10T22:48:34.783Z"}
[2025-11-10T22:48:34.783Z] [INFO   ] 2025-11-10T22:48:34.783Z [DEBUG] ‚è≠Ô∏è [AUTH] Skipping initialization {"hasState":true,"alreadyInitialized":false,"isClient":false,"timestamp":"2025-11-10T22:48:34.783Z"}
[2025-11-10T22:48:37.480Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations ...
[2025-11-10T22:48:37.997Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations in 1085ms (4317 modules)
[2025-11-10T22:48:40.062Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1589ms (5520 modules)
[2025-11-10T22:48:40.720Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 0ms (4343 modules)
[2025-11-10T22:48:41.213Z] [INFO   ] 2025-11-10T22:48:41.213Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-10T22:48:41.212Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-10T22:48:41.547Z] [INFO   ] 2025-11-10T22:48:41.547Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-10T22:48:41.548Z] [INFO   ] 2025-11-10T22:48:41.548Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-10T22:48:41.756Z] [INFO   ] 2025-11-10T22:48:41.755Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":3,"permissionsCount":3,"integrationsError":null,"permissionsError":null}
[2025-11-10T22:48:41.756Z] [INFO   ] 2025-11-10T22:48:41.756Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"a0b0b3ec-dd14-4925-8b83-10c5b07b6482","provider":"hubspot","permission":"admin"}
[2025-11-10T22:48:41.756Z] [INFO   ] 2025-11-10T22:48:41.756Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","provider":"google-sheets","permission":"admin"}
[2025-11-10T22:48:41.756Z] [INFO   ] 2025-11-10T22:48:41.756Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"8ef5c519-18a9-4a81-829e-b7a48b58f668","provider":"gumroad","permission":"admin"}
[2025-11-10T22:48:41.756Z] [INFO   ] 2025-11-10T22:48:41.756Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":3,"workspaceType":"personal"}
[2025-11-10T22:48:47.799Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1167ms (5520 modules)
[2025-11-10T22:48:48.788Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/gumroad/data ...
[2025-11-10T22:48:48.826Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/gumroad/data in 651ms (4348 modules)
[2025-11-10T22:48:49.450Z] [INFO   ] 2025-11-10T22:48:49.450Z [DEBUG] üîç [Gumroad API] Processing request: {"integrationId":"8ef5c519-18a9-4a81-829e-b7a48b58f668","dataType":"gumroad_products","status":"connected","hasToken":true}
[2025-11-10T22:48:49.451Z] [INFO   ] 2025-11-10T22:48:49.451Z [DEBUG] üîç Gumroad products fetcher called with integration: {"id":"8ef5c519-18a9-4a81-829e-b7a48b58f668","provider":"gumroad","hasToken":true,"tokenLength":129}
[2025-11-10T22:48:49.451Z] [INFO   ] 2025-11-10T22:48:49.451Z [DEBUG] üîç Validating Gumroad token...
[2025-11-10T22:48:49.452Z] [INFO   ] 2025-11-10T22:48:49.452Z [DEBUG] üîç Fetching Gumroad products...
[2025-11-10T22:48:49.455Z] [INFO   ] 2025-11-10T22:48:49.455Z [DEBUG] üîç [Gumroad API] Processing request: {"integrationId":"8ef5c519-18a9-4a81-829e-b7a48b58f668","dataType":"gumroad_products","status":"connected","hasToken":true}
[2025-11-10T22:48:49.455Z] [INFO   ] 2025-11-10T22:48:49.455Z [DEBUG] üîç Gumroad products fetcher called with integration: {"id":"8ef5c519-18a9-4a81-829e-b7a48b58f668","provider":"gumroad","hasToken":true,"tokenLength":129}
[2025-11-10T22:48:49.455Z] [INFO   ] 2025-11-10T22:48:49.455Z [DEBUG] üîç Validating Gumroad token...
[2025-11-10T22:48:49.455Z] [INFO   ] 2025-11-10T22:48:49.455Z [DEBUG] üîç Fetching Gumroad products...
[2025-11-10T22:48:49.698Z] [INFO   ] 2025-11-10T22:48:49.698Z [DEBUG] ‚úÖ Gumroad products fetched successfully: 1 products
[2025-11-10T22:48:49.700Z] [INFO   ] 2025-11-10T22:48:49.699Z [DEBUG] ‚úÖ [Gumroad API] Successfully processed gumroad_products: {"integrationId":"8ef5c519-18a9-4a81-829e-b7a48b58f668","resultCount":1}
[2025-11-10T22:48:49.710Z] [INFO   ] 2025-11-10T22:48:49.709Z [DEBUG] ‚úÖ Gumroad products fetched successfully: 1 products
[2025-11-10T22:48:49.710Z] [INFO   ] 2025-11-10T22:48:49.710Z [DEBUG] ‚úÖ [Gumroad API] Successfully processed gumroad_products: {"integrationId":"8ef5c519-18a9-4a81-829e-b7a48b58f668","resultCount":1}
[2025-11-10T22:48:57.210Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1007ms (5525 modules)
[2025-11-10T22:49:13.216Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1582ms (5487 modules)
[2025-11-10T22:51:39.130Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/hubspot/data ...
[2025-11-10T22:51:39.679Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/hubspot/data in 1454ms (4300 modules)
[2025-11-10T22:51:39.810Z] [INFO   ] 2025-11-10T22:51:39.810Z [DEBUG] üì• [HubSpot API] Received request: {"integrationId":"a0b0b3ec-dd14-4925-8b83-10c5b07b6482","dataType":"hubspot_contact_properties","options":{}}
[2025-11-10T22:51:40.069Z] [INFO   ] 2025-11-10T22:51:40.069Z [DEBUG] üîç [HubSpot API] Processing request: {"integrationId":"a0b0b3ec-dd14-4925-8b83-10c5b07b6482","dataType":"hubspot_contact_properties","status":"connected","hasToken":true}
[2025-11-10T22:51:40.070Z] [INFO   ] 2025-11-10T22:51:40.070Z [DEBUG] üîç HubSpot contact properties fetcher called with integration: {"id":"a0b0b3ec-dd14-4925-8b83-10c5b07b6482","provider":"hubspot","hasToken":true,"tokenLength":481}
[2025-11-10T22:51:40.070Z] [INFO   ] 2025-11-10T22:51:40.070Z [DEBUG] üîç Validating HubSpot token...
[2025-11-10T22:51:40.071Z] [INFO   ] 2025-11-10T22:51:40.071Z [DEBUG] üîç Fetching HubSpot contact properties from API...
[2025-11-10T22:51:40.360Z] [INFO   ] 2025-11-10T22:51:40.360Z [DEBUG] ‚úÖ HubSpot contact properties fetched successfully: 357 properties
[2025-11-10T22:51:40.360Z] [INFO   ] 2025-11-10T22:51:40.360Z [DEBUG] ‚úÖ [HubSpot API] Successfully processed hubspot_contact_properties: {"integrationId":"a0b0b3ec-dd14-4925-8b83-10c5b07b6482","resultCount":357}
[2025-11-10T22:52:20.927Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 3.4s (5477 modules)
[2025-11-10T22:52:31.054Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 836ms (5477 modules)
[2025-11-10T22:53:06.817Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1575ms (5349 modules)
[2025-11-10T22:53:37.499Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/presence/count ...
[2025-11-10T22:53:38.047Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/presence/count in 1061ms (4295 modules)
[2025-11-10T23:23:14.868Z] [INFO   ] 2025-11-10T23:23:14.868Z [DEBUG] üíß [AUTH] Rehydrating auth state from storage {"hasState":true,"hasUser":false,"initialized":false,"timestamp":"2025-11-10T23:23:14.867Z"}
[2025-11-10T23:23:14.883Z] [INFO   ] 2025-11-10T23:23:14.883Z [DEBUG] üíß [AUTH] State hydrated and reset {"hasUser":false,"initialized":false,"timestamp":"2025-11-10T23:23:14.883Z"}
[2025-11-10T23:23:14.883Z] [INFO   ] 2025-11-10T23:23:14.883Z [DEBUG] ‚è≠Ô∏è [AUTH] Skipping initialization {"hasState":true,"alreadyInitialized":false,"isClient":false,"timestamp":"2025-11-10T23:23:14.883Z"}
[2025-11-10T23:23:17.595Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/auth/profile ...
[2025-11-10T23:23:18.164Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations in 1495ms (4188 modules)
[2025-11-10T23:23:18.812Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled (4304 modules)
[2025-11-10T23:23:19.013Z] [INFO   ] 2025-11-10T23:23:19.013Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-10T23:23:19.013Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-10T23:23:19.516Z] [INFO   ] 2025-11-10T23:23:19.516Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-10T23:23:19.517Z] [INFO   ] 2025-11-10T23:23:19.517Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-10T23:23:19.738Z] [INFO   ] 2025-11-10T23:23:19.738Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":3,"permissionsCount":3,"integrationsError":null,"permissionsError":null}
[2025-11-10T23:23:19.834Z] [INFO   ] 2025-11-10T23:23:19.833Z [DEBUG] ‚è∞ [API /api/integrations] Updated 1 expired integrations
[2025-11-10T23:23:19.835Z] [INFO   ] 2025-11-10T23:23:19.835Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"a0b0b3ec-dd14-4925-8b83-10c5b07b6482","provider":"hubspot","permission":"admin"}
[2025-11-10T23:23:19.835Z] [INFO   ] 2025-11-10T23:23:19.835Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","provider":"google-sheets","permission":"admin"}
[2025-11-10T23:23:19.835Z] [INFO   ] 2025-11-10T23:23:19.835Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"8ef5c519-18a9-4a81-829e-b7a48b58f668","provider":"gumroad","permission":"admin"}
[2025-11-10T23:23:19.835Z] [INFO   ] 2025-11-10T23:23:19.835Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":3,"workspaceType":"personal"}
[2025-11-10T23:23:23.782Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/auth/generate-url ...
[2025-11-10T23:23:23.809Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/auth/generate-url in 601ms (4308 modules)
[2025-11-10T23:23:30.701Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/hubspot/callback ...
[2025-11-10T23:23:32.530Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/hubspot/callback in 2.3s (4316 modules)
[2025-11-10T23:23:32.628Z] [INFO   ] 2025-11-10T23:23:32.628Z [DEBUG] üîç hubspot callback called: {"url":"http://localhost:3000/api/integrations/hubspot/callback?code=na2-8055-9384-4687-a315-76e4ca8efd12&state=eyJ1c2VySWQiOiJhM2UzYTUxYS0xNzVjLTRiNTktYWQwMy0yMjdiYTEyYTE4YjAiLCJwcm92aWRlciI6Imh1YnNwb3QiLCJyZWNvbm5lY3QiOmZhbHNlLCJ0aW1lc3RhbXAiOjE3NjI4MTcwMDQwODcsIndvcmtzcGFjZVR5cGUiOiJwZXJzb25hbCJ9","hasCode":true,"hasState":true,"error":null,"userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36"}
[2025-11-10T23:23:32.629Z] [INFO   ] 2025-11-10T23:23:32.629Z [DEBUG] hubspot OAuth callback state: {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"hubspot","reconnect":false,"workspaceType":"personal"}
[2025-11-10T23:23:32.630Z] [INFO   ] 2025-11-10T23:23:32.630Z [DEBUG] üîç hubspot callback called: {"url":"http://localhost:3000/api/integrations/hubspot/callback?code=na2-2099-b360-4669-83e7-8583a5e6f6a3&state=eyJ1c2VySWQiOiJhM2UzYTUxYS0xNzVjLTRiNTktYWQwMy0yMjdiYTEyYTE4YjAiLCJwcm92aWRlciI6Imh1YnNwb3QiLCJyZWNvbm5lY3QiOmZhbHNlLCJ0aW1lc3RhbXAiOjE3NjI4MTcwMDQwODcsIndvcmtzcGFjZVR5cGUiOiJwZXJzb25hbCJ9","hasCode":true,"hasState":true,"error":null,"userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36"}
[2025-11-10T23:23:32.630Z] [INFO   ] 2025-11-10T23:23:32.630Z [DEBUG] hubspot OAuth callback state: {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"hubspot","reconnect":false,"workspaceType":"personal"}
[2025-11-10T23:23:33.116Z] [INFO   ] 2025-11-10T23:23:33.116Z [INFO] üîç [HubSpot] Starting account info fetch with access token
[2025-11-10T23:23:33.117Z] [INFO   ] 2025-11-10T23:23:33.117Z [DEBUG] üîç [HubSpot] Trying primary endpoint: /oauth/v1/access-tokens
[2025-11-10T23:23:33.125Z] [INFO   ] 2025-11-10T23:23:33.124Z [INFO] üîç [HubSpot] Starting account info fetch with access token
[2025-11-10T23:23:33.125Z] [INFO   ] 2025-11-10T23:23:33.125Z [DEBUG] üîç [HubSpot] Trying primary endpoint: /oauth/v1/access-tokens
[2025-11-10T23:23:33.239Z] [INFO   ] 2025-11-10T23:23:33.239Z [INFO] ‚úÖ [HubSpot] Primary endpoint success: {"hasEmail":true,"hasHubId":true,"hasHubDomain":true,"allFields":["token","user","hub_domain","scopes","signed_access_token","token_type","user_id","app_id","hub_id","is_private_distribution","expires_in"]}
[2025-11-10T23:23:33.273Z] [INFO   ] 2025-11-10T23:23:33.273Z [INFO] ‚úÖ [HubSpot] Primary endpoint success: {"hasEmail":true,"hasHubId":true,"hasHubDomain":true,"allFields":["token","user","hub_domain","scopes","signed_access_token","token_type","user_id","app_id","hub_id","is_private_distribution","expires_in"]}
[2025-11-10T23:23:33.498Z] [INFO   ] 2025-11-10T23:23:33.497Z [DEBUG] ‚úÖ Created new integration: 759dc5d5-1fce-4f46-afb2-f7b7c64fc339
[2025-11-10T23:23:33.499Z] [INFO   ] 2025-11-10T23:23:33.499Z [DEBUG] Granting permissions for workspace context: {"type":"personal"}
[2025-11-10T23:23:33.524Z] [ERROR  ] 2025-11-10T23:23:33.524Z [ERROR] Error inserting integration: {"code":"23505","details":"Key (user_id, provider, email, workspace_type)=(a3e3a51a-175c-4b59-ad03-227ba12a18b0, hubspot, chainreactapp@gmail.com, personal) already exists.","hint":null,"message":"duplicate key value violates unique constraint \"integrations_user_provider_email_workspace_key\""}
[2025-11-10T23:23:33.525Z] [ERROR  ] 2025-11-10T23:23:33.525Z [ERROR] Error during hubspot OAuth callback: {}
[2025-11-10T23:23:33.527Z] [INFO   ] 2025-11-10T23:23:33.527Z [DEBUG] üîÑ Creating popup response: type=error, provider=hubspot, displayName=HubSpot, message=Database Error: duplicate key value violates unique constraint "integrations_user_provider_email_workspace_key"
[2025-11-10T23:23:33.655Z] [INFO   ] 2025-11-10T23:23:33.655Z [INFO] Granted admin permission to user a3e3a51a-175c-4b59-ad03-227ba12a18b0 for integration 759dc5d5-1fce-4f46-afb2-f7b7c64fc339
[2025-11-10T23:23:33.656Z] [INFO   ] 2025-11-10T23:23:33.656Z [INFO] Personal integration 759dc5d5-1fce-4f46-afb2-f7b7c64fc339 - granted admin to a3e3a51a-175c-4b59-ad03-227ba12a18b0
[2025-11-10T23:23:33.656Z] [INFO   ] 2025-11-10T23:23:33.656Z [DEBUG] ‚úÖ Permissions granted successfully
[2025-11-10T23:23:33.656Z] [INFO   ] 2025-11-10T23:23:33.656Z [DEBUG] ‚úÖ hubspot integration successfully saved
[2025-11-10T23:23:33.656Z] [INFO   ] 2025-11-10T23:23:33.656Z [DEBUG] üîÑ Creating popup response: type=success, provider=hubspot, displayName=HubSpot, message=hubspot connected successfully!
[2025-11-10T23:23:41.689Z] [INFO   ] 2025-11-10T23:23:41.689Z [DEBUG] üíß [AUTH] Rehydrating auth state from storage {"hasState":true,"hasUser":false,"initialized":false,"timestamp":"2025-11-10T23:23:41.689Z"}
[2025-11-10T23:23:41.710Z] [INFO   ] 2025-11-10T23:23:41.710Z [DEBUG] üíß [AUTH] State hydrated and reset {"hasUser":false,"initialized":false,"timestamp":"2025-11-10T23:23:41.710Z"}
[2025-11-10T23:23:41.710Z] [INFO   ] 2025-11-10T23:23:41.710Z [DEBUG] ‚è≠Ô∏è [AUTH] Skipping initialization {"hasState":true,"alreadyInitialized":false,"isClient":false,"timestamp":"2025-11-10T23:23:41.710Z"}
[2025-11-10T23:23:43.643Z] [INFO   ] 2025-11-10T23:23:43.643Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-10T23:23:43.643Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-10T23:23:43.811Z] [INFO   ] 2025-11-10T23:23:43.811Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-10T23:23:43.811Z] [INFO   ] 2025-11-10T23:23:43.811Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-10T23:23:43.982Z] [INFO   ] 2025-11-10T23:23:43.981Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":4,"permissionsCount":4,"integrationsError":null,"permissionsError":null}
[2025-11-10T23:23:43.982Z] [INFO   ] 2025-11-10T23:23:43.982Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"759dc5d5-1fce-4f46-afb2-f7b7c64fc339","provider":"hubspot","permission":"admin"}
[2025-11-10T23:23:43.982Z] [INFO   ] 2025-11-10T23:23:43.982Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"a0b0b3ec-dd14-4925-8b83-10c5b07b6482","provider":"hubspot","permission":"admin"}
[2025-11-10T23:23:43.982Z] [INFO   ] 2025-11-10T23:23:43.982Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"dc6cd712-ac50-45b5-86b6-4ff9963c7aa8","provider":"google-sheets","permission":"admin"}
[2025-11-10T23:23:43.982Z] [INFO   ] 2025-11-10T23:23:43.982Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"8ef5c519-18a9-4a81-829e-b7a48b58f668","provider":"gumroad","permission":"admin"}
[2025-11-10T23:23:43.982Z] [INFO   ] 2025-11-10T23:23:43.982Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":4,"workspaceType":"personal"}

=== Log Session Ended: 2025-11-10T23:23:45.692Z ===
