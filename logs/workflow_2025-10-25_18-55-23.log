=== Log Session Started: 2025-10-25T23:55:23.547Z ===
Node Version: v23.7.0
Platform: darwin
Working Directory: /Users/nathanielstoddard/chainreact-app/chainreact-app-9e
================================================================================

[2025-10-25T23:55:23.548Z] [INFO   ] File logging initialized
[2025-10-25T23:55:23.548Z] [INFO   ] Log file: /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-10-25_18-55-23.log
[2025-10-25T23:55:23.570Z] [INFO   ] Deleted old log file: workflow_2025-10-18_18-29-47.log
[2025-10-25T23:55:23.589Z] [INFO   ] Deleted old log file: workflow_2025-10-18_15-43-10.log
[2025-10-25T23:55:23.589Z] [INFO   ] üìÅ File logging enabled
[2025-10-25T23:55:23.589Z] [INFO   ] üìù Logs will be written to: /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-10-25_18-55-23.log
[2025-10-25T23:55:23.589Z] [INFO   ] üí° To view logs in real-time: tail -f /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-10-25_18-55-23.log
[2025-10-25T23:55:23.589Z] [INFO   ] üí° To view all logs: cat /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-10-25_18-55-23.log
[2025-10-25T23:55:23.589Z] [INFO   ] üí° To share logs: Copy the file at /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-10-25_18-55-23.log
[2025-10-25T23:55:23.589Z] [INFO   ] --------------------------------------------------------------------------------
[2025-10-25T23:55:23.589Z] [DEBUG  ] üìÅ File logging system initialized
[2025-10-25T23:55:23.603Z] [INFO   ]  [32m[1m‚úì[22m[39m Ready in 2.7s
[2025-10-25T23:55:24.594Z] [INFO   ] 2025-10-25T23:55:24.594Z [DEBUG] ü§ñ Discord bot configured, initializing gateway connection in background...
[2025-10-25T23:55:26.249Z] [INFO   ] 2025-10-25T23:55:26.249Z [DEBUG] Initializing Discord Gateway connection (singleton)...
[2025-10-25T23:55:26.249Z] [INFO   ] 2025-10-25T23:55:26.249Z [DEBUG] üîë Discord bot token loaded
[2025-10-25T23:55:26.488Z] [INFO   ] 2025-10-25T23:55:26.488Z [DEBUG] Discord Gateway initialization complete
[2025-10-25T23:55:26.490Z] [INFO   ] 2025-10-25T23:55:26.490Z [DEBUG] ‚úÖ Discord bot gateway connection initialized
[2025-10-25T23:55:26.605Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /middleware in 280ms (233 modules)
[2025-10-25T23:55:26.722Z] [INFO   ] 2025-10-25T23:55:26.722Z [DEBUG] Discord Gateway WebSocket connection established
[2025-10-25T23:55:26.722Z] [INFO   ] 2025-10-25T23:55:26.722Z [DEBUG] üîë Sending identify with intents: {"GUILDS":true,"GUILD_MEMBERS":true,"GUILD_INVITES":true,"GUILD_MESSAGES":true,"MESSAGE_CONTENT":true,"intentsValue":33347}
[2025-10-25T23:55:26.910Z] [INFO   ] 2025-10-25T23:55:26.910Z [DEBUG] üéâ Discord bot ready! {"sessionId":"21252ab04e62588cbefc30237b9b70fb","username":"ChainReact-Bot","userId":"1378595955212812308","guildCount":2}
[2025-10-25T23:55:26.910Z] [INFO   ] 2025-10-25T23:55:26.910Z [DEBUG] üìã Initializing invite cache...
[2025-10-25T23:55:26.921Z] [INFO   ] 2025-10-25T23:55:26.921Z [DEBUG] üì° Discord event received: GUILD_CREATE
[2025-10-25T23:55:26.922Z] [INFO   ] 2025-10-25T23:55:26.922Z [DEBUG] üì° Discord event received: GUILD_CREATE
[2025-10-25T23:55:27.284Z] [INFO   ] 2025-10-25T23:55:27.284Z [DEBUG] [Middleware] Username check: {"path":"/workflows/ai-agent","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":12869839885}
[2025-10-25T23:55:27.516Z] [INFO   ] 2025-10-25T23:55:27.516Z [DEBUG] ‚úÖ Cached 3 invites for guild 1378950884045623406
[2025-10-25T23:55:27.814Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /workflows/ai-agent ...
[2025-10-25T23:55:30.670Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /workflows/ai-agent in 3.4s (3725 modules)
[2025-10-25T23:55:31.061Z] [INFO   ] 2025-10-25T23:55:31.061Z [DEBUG] üíß [AUTH] Rehydrating auth state from storage {"hasState":true,"hasUser":false,"initialized":false,"timestamp":"2025-10-25T23:55:31.061Z"}
[2025-10-25T23:55:31.064Z] [INFO   ] 2025-10-25T23:55:31.064Z [DEBUG] üíß [AUTH] State hydrated and reset {"hasUser":false,"initialized":false,"timestamp":"2025-10-25T23:55:31.064Z"}
[2025-10-25T23:55:31.064Z] [INFO   ] 2025-10-25T23:55:31.064Z [DEBUG] ‚è≠Ô∏è [AUTH] Skipping initialization {"hasState":true,"alreadyInitialized":false,"isClient":false,"timestamp":"2025-10-25T23:55:31.064Z"}
[2025-10-25T23:55:31.897Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1212ms (597 modules)
[2025-10-25T23:55:31.930Z] [INFO   ] 2025-10-25T23:55:31.929Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-10-25T23:55:33.287Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/presence/count ...
[2025-10-25T23:55:34.168Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/presence/count in 1451ms (3732 modules)
[2025-10-25T23:55:38.045Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations in 245ms (3734 modules)
[2025-10-25T23:55:38.139Z] [INFO   ] 2025-10-25T23:55:38.139Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-10-25T23:55:38.139Z","headers":{"referer":"check-console"}}
[2025-10-25T23:55:38.349Z] [INFO   ] 2025-10-25T23:55:38.349Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-10-25T23:55:38.518Z] [INFO   ] 2025-10-25T23:55:38.518Z [DEBUG] üìä [API /api/integrations] Query result {"count":14,"error":null,"firstFew":[{"provider":"notion","status":"connected"},{"provider":"mailchimp","status":"connected"}]}
[2025-10-25T23:55:41.617Z] [INFO   ] 2025-10-25T23:55:41.616Z [DEBUG] [Middleware] Username check: {"path":"/workflows/builder/b4077c49-07cc-4190-bd0e-316018f4a986","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":12869854217}
[2025-10-25T23:55:42.228Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /workflows/builder/[id] ...
[2025-10-25T23:55:44.563Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /workflows/builder/[id] in 2.9s (5925 modules)
[2025-10-25T23:55:45.658Z] [INFO   ] 2025-10-25T23:55:45.658Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-10-25T23:55:46.702Z] [INFO   ] 2025-10-25T23:55:46.701Z [DEBUG] [Middleware] Username check: {"path":"/workflows/builder/b4077c49-07cc-4190-bd0e-316018f4a986","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":12869859302}
[2025-10-25T23:55:46.911Z] [INFO   ] 2025-10-25T23:55:46.911Z [DEBUG] üíß [AUTH] Rehydrating auth state from storage {"hasState":true,"hasUser":false,"initialized":false,"timestamp":"2025-10-25T23:55:46.911Z"}
[2025-10-25T23:55:46.924Z] [INFO   ] 2025-10-25T23:55:46.924Z [DEBUG] üíß [AUTH] State hydrated and reset {"hasUser":false,"initialized":false,"timestamp":"2025-10-25T23:55:46.924Z"}
[2025-10-25T23:55:46.924Z] [INFO   ] 2025-10-25T23:55:46.924Z [DEBUG] ‚è≠Ô∏è [AUTH] Skipping initialization {"hasState":true,"alreadyInitialized":false,"isClient":false,"timestamp":"2025-10-25T23:55:46.924Z"}
[2025-10-25T23:55:47.212Z] [INFO   ] 2025-10-25T23:55:47.212Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-10-25T23:55:47.962Z] [INFO   ] 2025-10-25T23:55:47.962Z [INFO] [NewWorkflowBuilderContent] URL params: {"aiChat":"true","hasInitialPrompt":true,"initialPrompt":"when I get an email send it to slack"}
[2025-10-25T23:55:49.253Z] [INFO   ] 2025-10-25T23:55:49.253Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-10-25T23:55:49.253Z","headers":{"referer":"check-console"}}
[2025-10-25T23:55:49.416Z] [INFO   ] 2025-10-25T23:55:49.416Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-10-25T23:55:49.530Z] [INFO   ] 2025-10-25T23:55:49.530Z [DEBUG] üìä [API /api/integrations] Query result {"count":14,"error":null,"firstFew":[{"provider":"notion","status":"connected"},{"provider":"mailchimp","status":"connected"}]}
[2025-10-25T23:55:49.806Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/collaboration/join ...
[2025-10-25T23:55:49.924Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/collaboration/join in 618ms (5928 modules)
[2025-10-25T23:55:50.996Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/ai/analyze-request in 448ms (5930 modules)
[2025-10-25T23:55:51.186Z] [INFO   ] 2025-10-25T23:55:51.186Z [INFO] [ANALYZE] Analyzing user request: {"prompt":"when I get an email send it to slack","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-10-25T23:55:53.108Z] [INFO   ] 2025-10-25T23:55:53.108Z [INFO] [ANALYZE] Analysis complete: {"needsClarification":true,"questions":[{"id":"slack_channel","question":"Which Slack channel would you like to send messages to?","fieldType":"dropdown","dataEndpoint":"/api/integrations/slack/channels","nodeType":"slack_action_send_message","configField":"channel","required":true}],"inferredData":{"email_source":"gmail","reasoning":"User has only Gmail connected"}}
[2025-10-25T23:55:53.781Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/slack/channels ...
[2025-10-25T23:55:54.761Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/slack/channels in 1480ms (5933 modules)
[2025-10-25T23:55:55.253Z] [INFO   ] 2025-10-25T23:55:55.253Z [INFO] [SLACK CHANNELS] Fetched channels: {"count":3}
[2025-10-25T23:55:55.588Z] [INFO   ] 2025-10-25T23:55:55.588Z [INFO] [SLACK CHANNELS] Fetched channels: {"count":3}
[2025-10-25T23:56:04.558Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/ai/stream-workflow ...
[2025-10-25T23:56:04.702Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/ai/stream-workflow in 673ms (2465 modules)
[2025-10-25T23:56:07.158Z] [INFO   ] [Prerequisite Check] Required apps: [ 'gmail', 'slack' ]
[2025-10-25T23:56:07.160Z] [INFO   ] [Prerequisite Check] Connected integrations: [
  'notion',
  'mailchimp',
  'gmail',
  'google-sheets',
  'facebook',
  'trello',
  'slack',
  'google-docs',
  'dropbox',
  'google-drive',
  'twitter',
  'google-calendar',
  'airtable',
  'google_calendar'
]
[2025-10-25T23:56:07.161Z] [INFO   ] [Prerequisite Check] Normalized connected: [
  'notion',
  'mailchimp',
  'gmail',
  'google-sheets',
  'facebook',
  'trello',
  'slack',
  'google-docs',
  'dropbox',
  'google-drive',
  'twitter',
  'google-calendar',
  'airtable',
  'google_calendar'
]
[2025-10-25T23:56:07.161Z] [INFO   ] [Prerequisite Check] Checking gmail (normalized: gmail): CONNECTED
[2025-10-25T23:56:07.161Z] [INFO   ] [Prerequisite Check] Checking slack (normalized: slack): CONNECTED
[2025-10-25T23:56:20.935Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/collaboration/collaborators in 459ms (5935 modules)
[2025-10-25T23:56:24.965Z] [INFO   ] [STREAM] Phase 2: Starting node creation, plan: {
  understanding: 'The user wants to automatically send received emails to a Slack channel.',
  nodes: [
  {
  type: 'gmail_trigger_new_email',
  title: 'Trigger on New Email',
  description: 'This node triggers the workflow whenever a new email is received in Gmail.',
  reasoning: 'This is the starting point of the workflow, as it captures incoming emails.'
},
  {
  type: 'slack_action_send_message',
  title: 'Send Message to Slack',
  description: 'This node sends a message to a specified Slack channel.',
  reasoning: 'This action is needed to relay the content of the received email to the Slack channel.'
}
],
  connections: 'The workflow starts with the \'gmail_trigger_new_email\' node, which triggers the \'slack_action_send_message\' node to send the email content to Slack.'
}
[2025-10-25T23:56:24.966Z] [INFO   ] [STREAM] Plan nodes: [
  {
  type: 'gmail_trigger_new_email',
  title: 'Trigger on New Email',
  description: 'This node triggers the workflow whenever a new email is received in Gmail.',
  reasoning: 'This is the starting point of the workflow, as it captures incoming emails.'
},
  {
  type: 'slack_action_send_message',
  title: 'Send Message to Slack',
  description: 'This node sends a message to a specified Slack channel.',
  reasoning: 'This action is needed to relay the content of the received email to the Slack channel.'
}
]
[2025-10-25T23:56:24.966Z] [INFO   ] [POSITION] Node 0 : {
  viewport: { width: 909, height: 1211, zoom: 0.75, chatPanelWidth: 1000 },
  effectiveViewportWidth: 2545.3333333333335,
  builderViewportWidth: 1212,
  visibleHeight: 1614.6666666666667,
  availableWidth: 1132,
  nodesPerRow: 1,
  row: 0,
  col: 0,
  position: { x: 381, y: 80 }
}
[2025-10-25T23:56:25.068Z] [INFO   ] [POSITION] Node 1 : {
  viewport: { width: 909, height: 1211, zoom: 0.75, chatPanelWidth: 1000 },
  effectiveViewportWidth: 2545.3333333333335,
  builderViewportWidth: 1212,
  visibleHeight: 1614.6666666666667,
  availableWidth: 1132,
  nodesPerRow: 1,
  row: 1,
  col: 0,
  position: { x: 381, y: 480 }
}
[2025-10-25T23:56:26.092Z] [INFO   ] [STREAM] Preparing Trigger on New Email (node-1761436584966-0)
[2025-10-25T23:56:26.895Z] [INFO   ] [STREAM] Starting configuration for Trigger on New Email (node-1761436584966-0)
[2025-10-25T23:56:27.397Z] [INFO   ] [STREAM] Calling generateNodeConfig for Trigger on New Email...
[2025-10-25T23:56:33.110Z] [INFO   ] [STREAM] generateNodeConfig completed in 5712ms for Trigger on New Email
[2025-10-25T23:56:33.111Z] [INFO   ] [STREAM] Config result: {
  success: true,
  hasConfig: true,
  configKeys: [ 'node_type', 'trigger', 'options' ],
  finalConfigKeys: [ 'node_type', 'trigger', 'options', 'from' ],
  fallbackFields: [ 'from' ]
}
[2025-10-25T23:56:33.112Z] [INFO   ] [STREAM] Configuring 4 fields for Trigger on New Email: node_type, trigger, options, from
[2025-10-25T23:56:33.112Z] [INFO   ] [STREAM] Setting field node_type = gmail_trigger_new_email for Trigger on New Email
[2025-10-25T23:56:33.415Z] [INFO   ] [STREAM] Setting field trigger = [object Object] for Trigger on New Email
[2025-10-25T23:56:33.718Z] [INFO   ] [STREAM] Setting field options = [object Object] for Trigger on New Email
[2025-10-25T23:56:34.021Z] [INFO   ] [STREAM] Setting field from = inbox@placeholder.com for Trigger on New Email
[2025-10-25T23:56:34.826Z] [INFO   ] [STREAM] Skipping test for trigger Trigger on New Email
[2025-10-25T23:56:36.330Z] [INFO   ] [STREAM] Trigger complete, continuing to next node (loop iteration 0 of 1)
[2025-10-25T23:56:36.634Z] [INFO   ] [STREAM] Completed node 1 of 2, moving to next iteration
[2025-10-25T23:56:36.636Z] [INFO   ] [STREAM] Preparing Send Message to Slack (node-1761436585068-1)
[2025-10-25T23:56:37.438Z] [INFO   ] [STREAM] Starting configuration for Send Message to Slack (node-1761436585068-1)
[2025-10-25T23:56:37.940Z] [INFO   ] [STREAM] Calling generateNodeConfig for Send Message to Slack...
[2025-10-25T23:57:07.948Z] [ERROR  ] 2025-10-25T23:57:07.948Z [ERROR] AI call failed: {}
[2025-10-25T23:57:07.949Z] [INFO   ] [STREAM] generateNodeConfig completed in 30008ms for Send Message to Slack
[2025-10-25T23:57:07.960Z] [INFO   ] [STREAM] Config result: {
  success: false,
  hasConfig: false,
  configKeys: [],
  finalConfigKeys: [ 'channel', 'message' ],
  fallbackFields: [ 'channel', 'message' ]
}
[2025-10-25T23:57:07.960Z] [INFO   ] [STREAM] Configuring 2 fields for Send Message to Slack: channel, message
[2025-10-25T23:57:07.960Z] [INFO   ] [STREAM] Setting field channel = Select a channel for Send Message to Slack
[2025-10-25T23:57:08.262Z] [INFO   ] [STREAM] Setting field message =  for Send Message to Slack
[2025-10-25T23:57:16.961Z] [INFO   ] [STREAM] Completed node 2 of 2, moving to next iteration
[2025-10-25T23:57:16.962Z] [INFO   ] [STREAM] All nodes configured and tested, sending workflow_complete event
