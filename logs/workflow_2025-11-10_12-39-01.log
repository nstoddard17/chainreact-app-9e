=== Log Session Started: 2025-11-10T18:39:01.153Z ===
Node Version: v23.7.0
Platform: darwin
Working Directory: /Users/nathanielstoddard/chainreact-app/chainreact-app-9e
================================================================================

[2025-11-10T18:39:01.153Z] [INFO   ] File logging initialized
[2025-11-10T18:39:01.153Z] [INFO   ] Log file: /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-11-10_12-39-01.log
[2025-11-10T18:39:01.155Z] [INFO   ] üìÅ File logging enabled
[2025-11-10T18:39:01.155Z] [INFO   ] üìù Logs will be written to: /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-11-10_12-39-01.log
[2025-11-10T18:39:01.155Z] [INFO   ] üí° To view logs in real-time: tail -f /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-11-10_12-39-01.log
[2025-11-10T18:39:01.155Z] [INFO   ] üí° To view all logs: cat /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-11-10_12-39-01.log
[2025-11-10T18:39:01.155Z] [INFO   ] üí° To share logs: Copy the file at /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-11-10_12-39-01.log
[2025-11-10T18:39:01.155Z] [INFO   ] --------------------------------------------------------------------------------
[2025-11-10T18:39:01.155Z] [DEBUG  ] üìÅ File logging system initialized
[2025-11-10T18:39:01.174Z] [INFO   ]  [32m[1m‚úì[22m[39m Ready in 4.1s
[2025-11-10T18:39:02.079Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /test/nodes ...
[2025-11-10T18:39:02.315Z] [INFO   ] 2025-11-10T18:39:02.315Z [DEBUG] ü§ñ Discord bot configured, initializing gateway connection in background...
[2025-11-10T18:39:04.535Z] [INFO   ] 2025-11-10T18:39:04.535Z [DEBUG] Initializing Discord Gateway connection (singleton)...
[2025-11-10T18:39:04.535Z] [INFO   ] 2025-11-10T18:39:04.535Z [DEBUG] üîë Discord bot token loaded
[2025-11-10T18:39:04.878Z] [INFO   ] 2025-11-10T18:39:04.878Z [DEBUG] Discord Gateway initialization complete
[2025-11-10T18:39:04.882Z] [INFO   ] 2025-11-10T18:39:04.882Z [DEBUG] ‚úÖ Discord bot gateway connection initialized
[2025-11-10T18:39:05.146Z] [INFO   ] 2025-11-10T18:39:05.146Z [DEBUG] Discord Gateway WebSocket connection established
[2025-11-10T18:39:05.146Z] [INFO   ] 2025-11-10T18:39:05.146Z [DEBUG] üîë Sending identify with intents: {"GUILDS":true,"GUILD_MEMBERS":true,"GUILD_INVITES":true,"GUILD_MESSAGES":true,"MESSAGE_CONTENT":true,"intentsValue":33347}
[2025-11-10T18:39:05.390Z] [INFO   ] 2025-11-10T18:39:05.390Z [DEBUG] üéâ Discord bot ready! {"sessionId":"d2439db9912ac82602f13645b8dac401","username":"ChainReact-Bot","userId":"1378595955212812308","guildCount":2}
[2025-11-10T18:39:05.390Z] [INFO   ] 2025-11-10T18:39:05.390Z [DEBUG] üìã Initializing invite cache...
[2025-11-10T18:39:05.390Z] [INFO   ] 2025-11-10T18:39:05.390Z [DEBUG] üì° Discord event received: GUILD_CREATE
[2025-11-10T18:39:05.391Z] [INFO   ] 2025-11-10T18:39:05.391Z [DEBUG] üì° Discord event received: GUILD_CREATE
[2025-11-10T18:39:05.845Z] [INFO   ] 2025-11-10T18:39:05.845Z [DEBUG] ‚úÖ Cached 3 invites for guild 1378950884045623406
[2025-11-10T18:39:10.306Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /test/nodes in 8.7s (5300 modules)
[2025-11-10T18:39:11.024Z] [INFO   ] 2025-11-10T18:39:11.024Z [DEBUG] üíß [AUTH] Rehydrating auth state from storage {"hasState":true,"hasUser":false,"initialized":false,"timestamp":"2025-11-10T18:39:11.024Z"}
[2025-11-10T18:39:11.036Z] [INFO   ] 2025-11-10T18:39:11.036Z [DEBUG] üíß [AUTH] State hydrated and reset {"hasUser":false,"initialized":false,"timestamp":"2025-11-10T18:39:11.036Z"}
[2025-11-10T18:39:11.036Z] [INFO   ] 2025-11-10T18:39:11.036Z [DEBUG] ‚è≠Ô∏è [AUTH] Skipping initialization {"hasState":true,"alreadyInitialized":false,"isClient":false,"timestamp":"2025-11-10T18:39:11.036Z"}
[2025-11-10T18:39:11.661Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1314ms (1166 modules)
[2025-11-10T18:39:13.528Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations ...
[2025-11-10T18:39:15.447Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations in 2.5s (5652 modules)
[2025-11-10T18:39:15.852Z] [INFO   ] 2025-11-10T18:39:15.852Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-10T18:39:15.852Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-10T18:39:16.106Z] [INFO   ] 2025-11-10T18:39:16.106Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-10T18:39:16.106Z] [INFO   ] 2025-11-10T18:39:16.106Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-10T18:39:16.248Z] [INFO   ] 2025-11-10T18:39:16.248Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":1,"permissionsCount":1,"integrationsError":null,"permissionsError":null}
[2025-11-10T18:39:16.248Z] [INFO   ] 2025-11-10T18:39:16.248Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","provider":"google-sheets","permission":"admin"}
[2025-11-10T18:39:16.248Z] [INFO   ] 2025-11-10T18:39:16.248Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":1,"workspaceType":"personal"}
[2025-11-10T18:39:16.312Z] [INFO   ] 2025-11-10T18:39:16.312Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-10T18:39:16.312Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-10T18:39:16.457Z] [INFO   ] 2025-11-10T18:39:16.457Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-10T18:39:16.457Z] [INFO   ] 2025-11-10T18:39:16.457Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-10T18:39:16.611Z] [INFO   ] 2025-11-10T18:39:16.611Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":1,"permissionsCount":1,"integrationsError":null,"permissionsError":null}
[2025-11-10T18:39:16.611Z] [INFO   ] 2025-11-10T18:39:16.611Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","provider":"google-sheets","permission":"admin"}
[2025-11-10T18:39:16.611Z] [INFO   ] 2025-11-10T18:39:16.611Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":1,"workspaceType":"personal"}
[2025-11-10T18:39:16.978Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/fetch-user-data ...
[2025-11-10T18:39:16.982Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/fetch-user-data in 558ms (5422 modules)
[2025-11-10T18:39:17.090Z] [INFO   ] 2025-11-10T18:39:17.090Z [DEBUG] üöÄ [SERVER] fetch-user-data API route called
[2025-11-10T18:39:17.091Z] [INFO   ] 2025-11-10T18:39:17.091Z [DEBUG] üîç [SERVER] fetch-user-data request parsed: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_spreadsheets","options":{}}
[2025-11-10T18:39:17.182Z] [INFO   ] 2025-11-10T18:39:17.182Z [DEBUG] üîÑ [SERVER] Routing Google request to dedicated API: google-sheets_spreadsheets (provider: google-sheets)
[2025-11-10T18:39:17.714Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/google/data ...
[2025-11-10T18:39:17.781Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/google/data in 570ms (5458 modules)
[2025-11-10T18:39:17.880Z] [INFO   ] 2025-11-10T18:39:17.880Z [DEBUG] üöÄ [Google Data API] POST handler invoked
[2025-11-10T18:39:17.881Z] [INFO   ] 2025-11-10T18:39:17.881Z [DEBUG] üîç [Google Data API] Request received: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_spreadsheets","options":{},"fullRequestBody":{"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_spreadsheets","options":{}}}
[2025-11-10T18:39:17.983Z] [INFO   ] 2025-11-10T18:39:17.983Z [DEBUG] üìä [Google API] Integration provider check: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","actualProvider":"google-sheets","dataType":"google-sheets_spreadsheets","providerLowerCase":"google-sheets"}
[2025-11-10T18:39:17.983Z] [INFO   ] 2025-11-10T18:39:17.983Z [DEBUG] üîç [Google API] Processing request: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_spreadsheets","provider":"google-sheets","status":"connected","hasToken":true}
[2025-11-10T18:39:17.983Z] [INFO   ] 2025-11-10T18:39:17.983Z [DEBUG] üìä [Google Sheets] Fetching spreadsheets
[2025-11-10T18:39:18.518Z] [INFO   ] 2025-11-10T18:39:18.518Z [DEBUG] ‚úÖ [Google Sheets] Retrieved 21 spreadsheets
[2025-11-10T18:39:18.518Z] [INFO   ] 2025-11-10T18:39:18.518Z [DEBUG] ‚úÖ [Google API] Successfully processed google-sheets_spreadsheets: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","resultCount":21}
[2025-11-10T18:39:18.521Z] [INFO   ] 2025-11-10T18:39:18.521Z [DEBUG] ‚úÖ [SERVER] Google API completed for google-sheets_spreadsheets, result length: 21
[2025-11-10T18:39:19.927Z] [INFO   ] 2025-11-10T18:39:19.927Z [DEBUG] üöÄ [SERVER] fetch-user-data API route called
[2025-11-10T18:39:19.927Z] [INFO   ] 2025-11-10T18:39:19.927Z [DEBUG] üîç [SERVER] fetch-user-data request parsed: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_sheets","options":{"spreadsheetId":"13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI"}}
[2025-11-10T18:39:20.033Z] [INFO   ] 2025-11-10T18:39:20.033Z [DEBUG] üîÑ [SERVER] Routing Google request to dedicated API: google-sheets_sheets (provider: google-sheets)
[2025-11-10T18:39:20.084Z] [INFO   ] 2025-11-10T18:39:20.084Z [DEBUG] üöÄ [Google Data API] POST handler invoked
[2025-11-10T18:39:20.085Z] [INFO   ] 2025-11-10T18:39:20.085Z [DEBUG] üîç [Google Data API] Request received: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_sheets","options":{"spreadsheetId":"13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI"},"fullRequestBody":{"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_sheets","options":{"spreadsheetId":"13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI"}}}
[2025-11-10T18:39:20.186Z] [INFO   ] 2025-11-10T18:39:20.186Z [DEBUG] üìä [Google API] Integration provider check: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","actualProvider":"google-sheets","dataType":"google-sheets_sheets","providerLowerCase":"google-sheets"}
[2025-11-10T18:39:20.186Z] [INFO   ] 2025-11-10T18:39:20.186Z [DEBUG] üîç [Google API] Processing request: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_sheets","provider":"google-sheets","status":"connected","hasToken":true}
[2025-11-10T18:39:20.186Z] [INFO   ] 2025-11-10T18:39:20.186Z [DEBUG] üìä [Google Sheets] Fetching sheets for spreadsheet: 13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI
[2025-11-10T18:39:20.756Z] [INFO   ] 2025-11-10T18:39:20.756Z [DEBUG] ‚úÖ [Google Sheets] Retrieved 4 sheets
[2025-11-10T18:39:20.757Z] [INFO   ] 2025-11-10T18:39:20.756Z [DEBUG] ‚úÖ [Google API] Successfully processed google-sheets_sheets: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","resultCount":4}
[2025-11-10T18:39:20.762Z] [INFO   ] 2025-11-10T18:39:20.762Z [DEBUG] ‚úÖ [SERVER] Google API completed for google-sheets_sheets, result length: 4
[2025-11-10T18:40:00.941Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1482ms (5472 modules)
[2025-11-10T18:40:15.745Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 872ms (5472 modules)
[2025-11-10T18:40:35.482Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 619ms (5301 modules)
[2025-11-10T18:40:45.965Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 820ms (5301 modules)
[2025-11-10T18:41:38.873Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 925ms (5301 modules)
[2025-11-10T18:41:46.371Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 630ms (5301 modules)
[2025-11-10T18:42:14.090Z] [INFO   ] 2025-11-10T18:42:14.090Z [DEBUG] üíß [AUTH] Rehydrating auth state from storage {"hasState":true,"hasUser":false,"initialized":false,"timestamp":"2025-11-10T18:42:14.090Z"}
[2025-11-10T18:42:14.104Z] [INFO   ] 2025-11-10T18:42:14.103Z [DEBUG] üíß [AUTH] State hydrated and reset {"hasUser":false,"initialized":false,"timestamp":"2025-11-10T18:42:14.103Z"}
[2025-11-10T18:42:14.104Z] [INFO   ] 2025-11-10T18:42:14.104Z [DEBUG] ‚è≠Ô∏è [AUTH] Skipping initialization {"hasState":true,"alreadyInitialized":false,"isClient":false,"timestamp":"2025-11-10T18:42:14.104Z"}
[2025-11-10T18:42:27.466Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations in 408ms (4259 modules)
[2025-11-10T18:42:27.761Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled (4266 modules)
[2025-11-10T18:42:28.076Z] [INFO   ] 2025-11-10T18:42:28.076Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-10T18:42:28.076Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-10T18:42:28.726Z] [INFO   ] 2025-11-10T18:42:28.726Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-10T18:42:28.727Z] [INFO   ] 2025-11-10T18:42:28.727Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-10T18:42:28.872Z] [INFO   ] 2025-11-10T18:42:28.872Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":1,"permissionsCount":1,"integrationsError":null,"permissionsError":null}
[2025-11-10T18:42:28.873Z] [INFO   ] 2025-11-10T18:42:28.873Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","provider":"google-sheets","permission":"admin"}
[2025-11-10T18:42:28.873Z] [INFO   ] 2025-11-10T18:42:28.873Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":1,"workspaceType":"personal"}
[2025-11-10T18:42:30.626Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/fetch-user-data in 341ms (4269 modules)
[2025-11-10T18:42:30.733Z] [INFO   ] 2025-11-10T18:42:30.733Z [DEBUG] üöÄ [SERVER] fetch-user-data API route called
[2025-11-10T18:42:30.734Z] [INFO   ] 2025-11-10T18:42:30.734Z [DEBUG] üîç [SERVER] fetch-user-data request parsed: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_spreadsheets","options":{}}
[2025-11-10T18:42:30.896Z] [INFO   ] 2025-11-10T18:42:30.896Z [DEBUG] üîÑ [SERVER] Routing Google request to dedicated API: google-sheets_spreadsheets (provider: google-sheets)
[2025-11-10T18:42:31.245Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/google/data in 308ms (4305 modules)
[2025-11-10T18:42:31.355Z] [INFO   ] 2025-11-10T18:42:31.355Z [DEBUG] üöÄ [Google Data API] POST handler invoked
[2025-11-10T18:42:31.355Z] [INFO   ] 2025-11-10T18:42:31.355Z [DEBUG] üîç [Google Data API] Request received: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_spreadsheets","options":{},"fullRequestBody":{"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_spreadsheets","options":{}}}
[2025-11-10T18:42:31.468Z] [INFO   ] 2025-11-10T18:42:31.468Z [DEBUG] üìä [Google API] Integration provider check: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","actualProvider":"google-sheets","dataType":"google-sheets_spreadsheets","providerLowerCase":"google-sheets"}
[2025-11-10T18:42:31.469Z] [INFO   ] 2025-11-10T18:42:31.469Z [DEBUG] üîç [Google API] Processing request: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_spreadsheets","provider":"google-sheets","status":"connected","hasToken":true}
[2025-11-10T18:42:31.469Z] [INFO   ] 2025-11-10T18:42:31.469Z [DEBUG] üìä [Google Sheets] Fetching spreadsheets
[2025-11-10T18:42:31.922Z] [INFO   ] 2025-11-10T18:42:31.922Z [DEBUG] ‚úÖ [Google Sheets] Retrieved 21 spreadsheets
[2025-11-10T18:42:31.922Z] [INFO   ] 2025-11-10T18:42:31.922Z [DEBUG] ‚úÖ [Google API] Successfully processed google-sheets_spreadsheets: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","resultCount":21}
[2025-11-10T18:42:31.924Z] [INFO   ] 2025-11-10T18:42:31.924Z [DEBUG] ‚úÖ [SERVER] Google API completed for google-sheets_spreadsheets, result length: 21
[2025-11-10T18:42:33.300Z] [INFO   ] 2025-11-10T18:42:33.299Z [DEBUG] üöÄ [SERVER] fetch-user-data API route called
[2025-11-10T18:42:33.300Z] [INFO   ] 2025-11-10T18:42:33.300Z [DEBUG] üîç [SERVER] fetch-user-data request parsed: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_sheets","options":{"spreadsheetId":"13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI"}}
[2025-11-10T18:42:33.397Z] [INFO   ] 2025-11-10T18:42:33.397Z [DEBUG] üîÑ [SERVER] Routing Google request to dedicated API: google-sheets_sheets (provider: google-sheets)
[2025-11-10T18:42:33.457Z] [INFO   ] 2025-11-10T18:42:33.457Z [DEBUG] üöÄ [Google Data API] POST handler invoked
[2025-11-10T18:42:33.458Z] [INFO   ] 2025-11-10T18:42:33.458Z [DEBUG] üîç [Google Data API] Request received: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_sheets","options":{"spreadsheetId":"13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI"},"fullRequestBody":{"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_sheets","options":{"spreadsheetId":"13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI"}}}
[2025-11-10T18:42:33.541Z] [INFO   ] 2025-11-10T18:42:33.541Z [DEBUG] üìä [Google API] Integration provider check: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","actualProvider":"google-sheets","dataType":"google-sheets_sheets","providerLowerCase":"google-sheets"}
[2025-11-10T18:42:33.542Z] [INFO   ] 2025-11-10T18:42:33.542Z [DEBUG] üîç [Google API] Processing request: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_sheets","provider":"google-sheets","status":"connected","hasToken":true}
[2025-11-10T18:42:33.542Z] [INFO   ] 2025-11-10T18:42:33.542Z [DEBUG] üìä [Google Sheets] Fetching sheets for spreadsheet: 13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI
[2025-11-10T18:42:33.851Z] [INFO   ] 2025-11-10T18:42:33.851Z [DEBUG] ‚úÖ [Google Sheets] Retrieved 4 sheets
[2025-11-10T18:42:33.852Z] [INFO   ] 2025-11-10T18:42:33.852Z [DEBUG] ‚úÖ [Google API] Successfully processed google-sheets_sheets: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","resultCount":4}
[2025-11-10T18:42:33.857Z] [INFO   ] 2025-11-10T18:42:33.857Z [DEBUG] ‚úÖ [SERVER] Google API completed for google-sheets_sheets, result length: 4
[2025-11-10T18:43:56.245Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1964ms (5301 modules)
[2025-11-10T18:44:09.366Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 675ms (5301 modules)
[2025-11-10T18:46:47.821Z] [INFO   ] 2025-11-10T18:46:47.820Z [DEBUG] üíß [AUTH] Rehydrating auth state from storage {"hasState":true,"hasUser":false,"initialized":false,"timestamp":"2025-11-10T18:46:47.820Z"}
[2025-11-10T18:46:47.843Z] [INFO   ] 2025-11-10T18:46:47.843Z [DEBUG] üíß [AUTH] State hydrated and reset {"hasUser":false,"initialized":false,"timestamp":"2025-11-10T18:46:47.843Z"}
[2025-11-10T18:46:47.844Z] [INFO   ] 2025-11-10T18:46:47.844Z [DEBUG] ‚è≠Ô∏è [AUTH] Skipping initialization {"hasState":true,"alreadyInitialized":false,"isClient":false,"timestamp":"2025-11-10T18:46:47.843Z"}
[2025-11-10T18:46:49.337Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations ...
[2025-11-10T18:46:49.373Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations in 744ms (4150 modules)
[2025-11-10T18:46:49.704Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled (4266 modules)
[2025-11-10T18:46:49.882Z] [INFO   ] 2025-11-10T18:46:49.882Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-10T18:46:49.882Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-10T18:46:50.141Z] [INFO   ] 2025-11-10T18:46:50.141Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-10T18:46:50.142Z] [INFO   ] 2025-11-10T18:46:50.142Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-10T18:46:50.377Z] [INFO   ] 2025-11-10T18:46:50.377Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":1,"permissionsCount":1,"integrationsError":null,"permissionsError":null}
[2025-11-10T18:46:50.377Z] [INFO   ] 2025-11-10T18:46:50.377Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","provider":"google-sheets","permission":"admin"}
[2025-11-10T18:46:50.377Z] [INFO   ] 2025-11-10T18:46:50.377Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":1,"workspaceType":"personal"}
[2025-11-10T18:46:51.205Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/fetch-user-data ...
[2025-11-10T18:46:52.052Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/fetch-user-data in 1347ms (4269 modules)
[2025-11-10T18:46:52.206Z] [INFO   ] 2025-11-10T18:46:52.206Z [DEBUG] üöÄ [SERVER] fetch-user-data API route called
[2025-11-10T18:46:52.206Z] [INFO   ] 2025-11-10T18:46:52.206Z [DEBUG] üîç [SERVER] fetch-user-data request parsed: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_spreadsheets","options":{}}
[2025-11-10T18:46:52.304Z] [INFO   ] 2025-11-10T18:46:52.304Z [DEBUG] üîÑ [SERVER] Routing Google request to dedicated API: google-sheets_spreadsheets (provider: google-sheets)
[2025-11-10T18:46:52.819Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/google/data in 480ms (4305 modules)
[2025-11-10T18:46:52.920Z] [INFO   ] 2025-11-10T18:46:52.920Z [DEBUG] üöÄ [Google Data API] POST handler invoked
[2025-11-10T18:46:52.920Z] [INFO   ] 2025-11-10T18:46:52.920Z [DEBUG] üîç [Google Data API] Request received: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_spreadsheets","options":{},"fullRequestBody":{"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_spreadsheets","options":{}}}
[2025-11-10T18:46:53.009Z] [INFO   ] 2025-11-10T18:46:53.009Z [DEBUG] üìä [Google API] Integration provider check: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","actualProvider":"google-sheets","dataType":"google-sheets_spreadsheets","providerLowerCase":"google-sheets"}
[2025-11-10T18:46:53.009Z] [INFO   ] 2025-11-10T18:46:53.009Z [DEBUG] üîç [Google API] Processing request: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_spreadsheets","provider":"google-sheets","status":"connected","hasToken":true}
[2025-11-10T18:46:53.009Z] [INFO   ] 2025-11-10T18:46:53.009Z [DEBUG] üìä [Google Sheets] Fetching spreadsheets
[2025-11-10T18:46:53.955Z] [INFO   ] 2025-11-10T18:46:53.955Z [DEBUG] ‚úÖ [Google Sheets] Retrieved 21 spreadsheets
[2025-11-10T18:46:53.955Z] [INFO   ] 2025-11-10T18:46:53.955Z [DEBUG] ‚úÖ [Google API] Successfully processed google-sheets_spreadsheets: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","resultCount":21}
[2025-11-10T18:46:53.959Z] [INFO   ] 2025-11-10T18:46:53.959Z [DEBUG] ‚úÖ [SERVER] Google API completed for google-sheets_spreadsheets, result length: 21
[2025-11-10T18:47:00.661Z] [INFO   ] 2025-11-10T18:47:00.661Z [DEBUG] üöÄ [SERVER] fetch-user-data API route called
[2025-11-10T18:47:00.662Z] [INFO   ] 2025-11-10T18:47:00.661Z [DEBUG] üîç [SERVER] fetch-user-data request parsed: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_sheets","options":{"spreadsheetId":"13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI"}}
[2025-11-10T18:47:00.798Z] [INFO   ] 2025-11-10T18:47:00.798Z [DEBUG] üîÑ [SERVER] Routing Google request to dedicated API: google-sheets_sheets (provider: google-sheets)
[2025-11-10T18:47:00.863Z] [INFO   ] 2025-11-10T18:47:00.863Z [DEBUG] üöÄ [Google Data API] POST handler invoked
[2025-11-10T18:47:00.864Z] [INFO   ] 2025-11-10T18:47:00.864Z [DEBUG] üîç [Google Data API] Request received: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_sheets","options":{"spreadsheetId":"13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI"},"fullRequestBody":{"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_sheets","options":{"spreadsheetId":"13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI"}}}
[2025-11-10T18:47:00.963Z] [INFO   ] 2025-11-10T18:47:00.963Z [DEBUG] üìä [Google API] Integration provider check: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","actualProvider":"google-sheets","dataType":"google-sheets_sheets","providerLowerCase":"google-sheets"}
[2025-11-10T18:47:00.963Z] [INFO   ] 2025-11-10T18:47:00.963Z [DEBUG] üîç [Google API] Processing request: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_sheets","provider":"google-sheets","status":"connected","hasToken":true}
[2025-11-10T18:47:00.963Z] [INFO   ] 2025-11-10T18:47:00.963Z [DEBUG] üìä [Google Sheets] Fetching sheets for spreadsheet: 13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI
[2025-11-10T18:47:01.501Z] [INFO   ] 2025-11-10T18:47:01.501Z [DEBUG] ‚úÖ [Google Sheets] Retrieved 4 sheets
[2025-11-10T18:47:01.502Z] [INFO   ] 2025-11-10T18:47:01.502Z [DEBUG] ‚úÖ [Google API] Successfully processed google-sheets_sheets: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","resultCount":4}
[2025-11-10T18:47:01.506Z] [INFO   ] 2025-11-10T18:47:01.506Z [DEBUG] ‚úÖ [SERVER] Google API completed for google-sheets_sheets, result length: 4
[2025-11-10T18:48:07.170Z] [WARN   ]  [33m[1m‚ö†[22m[39m Fast Refresh had to perform a full reload. Read more: https://nextjs.org/docs/messages/fast-refresh-reload
[2025-11-10T18:48:07.819Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1312ms (5301 modules)
[2025-11-10T18:48:08.598Z] [INFO   ] 2025-11-10T18:48:08.598Z [DEBUG] üíß [AUTH] Rehydrating auth state from storage {"hasState":true,"hasUser":false,"initialized":false,"timestamp":"2025-11-10T18:48:08.598Z"}
[2025-11-10T18:48:08.612Z] [INFO   ] 2025-11-10T18:48:08.612Z [DEBUG] üíß [AUTH] State hydrated and reset {"hasUser":false,"initialized":false,"timestamp":"2025-11-10T18:48:08.612Z"}
[2025-11-10T18:48:08.612Z] [INFO   ] 2025-11-10T18:48:08.612Z [DEBUG] ‚è≠Ô∏è [AUTH] Skipping initialization {"hasState":true,"alreadyInitialized":false,"isClient":false,"timestamp":"2025-11-10T18:48:08.612Z"}
[2025-11-10T18:48:09.675Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/presence/count in 307ms (4150 modules)
[2025-11-10T18:48:10.010Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations in 1ms (4263 modules)
[2025-11-10T18:48:10.646Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1ms (4266 modules)
[2025-11-10T18:48:10.918Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 0ms (4266 modules)
[2025-11-10T18:48:11.235Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 0ms (4266 modules)
[2025-11-10T18:48:11.655Z] [INFO   ] 2025-11-10T18:48:11.655Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-10T18:48:11.655Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-10T18:48:11.806Z] [INFO   ] 2025-11-10T18:48:11.806Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-10T18:48:11.806Z] [INFO   ] 2025-11-10T18:48:11.806Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-10T18:48:11.958Z] [INFO   ] 2025-11-10T18:48:11.958Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":1,"permissionsCount":1,"integrationsError":null,"permissionsError":null}
[2025-11-10T18:48:11.959Z] [INFO   ] 2025-11-10T18:48:11.959Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","provider":"google-sheets","permission":"admin"}
[2025-11-10T18:48:11.959Z] [INFO   ] 2025-11-10T18:48:11.959Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":1,"workspaceType":"personal"}
[2025-11-10T18:48:18.379Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 814ms (5433 modules)
[2025-11-10T18:50:13.758Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/fetch-user-data ...
[2025-11-10T18:50:14.913Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/fetch-user-data in 1655ms (4241 modules)
[2025-11-10T18:50:15.042Z] [INFO   ] 2025-11-10T18:50:15.042Z [DEBUG] üöÄ [SERVER] fetch-user-data API route called
[2025-11-10T18:50:15.042Z] [INFO   ] 2025-11-10T18:50:15.042Z [DEBUG] üîç [SERVER] fetch-user-data request parsed: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_spreadsheets","options":{}}
[2025-11-10T18:50:15.247Z] [INFO   ] 2025-11-10T18:50:15.246Z [DEBUG] üîÑ [SERVER] Routing Google request to dedicated API: google-sheets_spreadsheets (provider: google-sheets)
[2025-11-10T18:50:15.797Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/google/data ...
[2025-11-10T18:50:15.812Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/google/data in 520ms (4277 modules)
[2025-11-10T18:50:15.896Z] [INFO   ] 2025-11-10T18:50:15.896Z [DEBUG] üöÄ [Google Data API] POST handler invoked
[2025-11-10T18:50:15.897Z] [INFO   ] 2025-11-10T18:50:15.897Z [DEBUG] üîç [Google Data API] Request received: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_spreadsheets","options":{},"fullRequestBody":{"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_spreadsheets","options":{}}}
[2025-11-10T18:50:16.003Z] [INFO   ] 2025-11-10T18:50:16.003Z [DEBUG] üìä [Google API] Integration provider check: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","actualProvider":"google-sheets","dataType":"google-sheets_spreadsheets","providerLowerCase":"google-sheets"}
[2025-11-10T18:50:16.004Z] [INFO   ] 2025-11-10T18:50:16.004Z [DEBUG] üîç [Google API] Processing request: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_spreadsheets","provider":"google-sheets","status":"connected","hasToken":true}
[2025-11-10T18:50:16.004Z] [INFO   ] 2025-11-10T18:50:16.004Z [DEBUG] üìä [Google Sheets] Fetching spreadsheets
[2025-11-10T18:50:16.486Z] [INFO   ] 2025-11-10T18:50:16.486Z [DEBUG] ‚úÖ [Google Sheets] Retrieved 21 spreadsheets
[2025-11-10T18:50:16.486Z] [INFO   ] 2025-11-10T18:50:16.486Z [DEBUG] ‚úÖ [Google API] Successfully processed google-sheets_spreadsheets: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","resultCount":21}
[2025-11-10T18:50:16.488Z] [INFO   ] 2025-11-10T18:50:16.488Z [DEBUG] ‚úÖ [SERVER] Google API completed for google-sheets_spreadsheets, result length: 21
[2025-11-10T18:50:17.644Z] [INFO   ] 2025-11-10T18:50:17.644Z [DEBUG] üöÄ [SERVER] fetch-user-data API route called
[2025-11-10T18:50:17.645Z] [INFO   ] 2025-11-10T18:50:17.644Z [DEBUG] üîç [SERVER] fetch-user-data request parsed: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_sheets","options":{"spreadsheetId":"13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI"}}
[2025-11-10T18:50:17.754Z] [INFO   ] 2025-11-10T18:50:17.754Z [DEBUG] üîÑ [SERVER] Routing Google request to dedicated API: google-sheets_sheets (provider: google-sheets)
[2025-11-10T18:50:17.892Z] [INFO   ] 2025-11-10T18:50:17.892Z [DEBUG] üöÄ [Google Data API] POST handler invoked
[2025-11-10T18:50:17.893Z] [INFO   ] 2025-11-10T18:50:17.893Z [DEBUG] üîç [Google Data API] Request received: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_sheets","options":{"spreadsheetId":"13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI"},"fullRequestBody":{"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_sheets","options":{"spreadsheetId":"13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI"}}}
[2025-11-10T18:50:18.004Z] [INFO   ] 2025-11-10T18:50:18.004Z [DEBUG] üìä [Google API] Integration provider check: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","actualProvider":"google-sheets","dataType":"google-sheets_sheets","providerLowerCase":"google-sheets"}
[2025-11-10T18:50:18.004Z] [INFO   ] 2025-11-10T18:50:18.004Z [DEBUG] üîç [Google API] Processing request: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_sheets","provider":"google-sheets","status":"connected","hasToken":true}
[2025-11-10T18:50:18.004Z] [INFO   ] 2025-11-10T18:50:18.004Z [DEBUG] üìä [Google Sheets] Fetching sheets for spreadsheet: 13dykQ7u8Ef2c1gC2Tbr7_TbMGsJ4R-WlBlLshiN5XBI
[2025-11-10T18:50:18.313Z] [INFO   ] 2025-11-10T18:50:18.312Z [DEBUG] ‚úÖ [Google Sheets] Retrieved 4 sheets
[2025-11-10T18:50:18.314Z] [INFO   ] 2025-11-10T18:50:18.314Z [DEBUG] ‚úÖ [Google API] Successfully processed google-sheets_sheets: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","resultCount":4}
[2025-11-10T18:50:18.319Z] [INFO   ] 2025-11-10T18:50:18.319Z [DEBUG] ‚úÖ [SERVER] Google API completed for google-sheets_sheets, result length: 4
[2025-11-10T18:51:37.273Z] [INFO   ] 2025-11-10T18:51:37.273Z [DEBUG] üíß [AUTH] Rehydrating auth state from storage {"hasState":true,"hasUser":false,"initialized":false,"timestamp":"2025-11-10T18:51:37.273Z"}
[2025-11-10T18:51:37.285Z] [INFO   ] 2025-11-10T18:51:37.285Z [DEBUG] üíß [AUTH] State hydrated and reset {"hasUser":false,"initialized":false,"timestamp":"2025-11-10T18:51:37.285Z"}
[2025-11-10T18:51:37.286Z] [INFO   ] 2025-11-10T18:51:37.286Z [DEBUG] ‚è≠Ô∏è [AUTH] Skipping initialization {"hasState":true,"alreadyInitialized":false,"isClient":false,"timestamp":"2025-11-10T18:51:37.286Z"}
[2025-11-10T18:51:38.475Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations ...
[2025-11-10T18:51:39.468Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations in 1527ms (4150 modules)
[2025-11-10T18:51:39.866Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled (4266 modules)
[2025-11-10T18:51:40.089Z] [INFO   ] 2025-11-10T18:51:40.089Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-10T18:51:40.089Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-10T18:51:40.285Z] [INFO   ] 2025-11-10T18:51:40.285Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-10T18:51:40.286Z] [INFO   ] 2025-11-10T18:51:40.286Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-10T18:51:40.436Z] [INFO   ] 2025-11-10T18:51:40.436Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":1,"permissionsCount":1,"integrationsError":null,"permissionsError":null}
[2025-11-10T18:51:40.436Z] [INFO   ] 2025-11-10T18:51:40.436Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","provider":"google-sheets","permission":"admin"}
[2025-11-10T18:51:40.436Z] [INFO   ] 2025-11-10T18:51:40.436Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":1,"workspaceType":"personal"}
[2025-11-10T18:51:41.939Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/fetch-user-data in 288ms (4269 modules)
[2025-11-10T18:51:42.107Z] [INFO   ] 2025-11-10T18:51:42.107Z [DEBUG] üöÄ [SERVER] fetch-user-data API route called
[2025-11-10T18:51:42.108Z] [INFO   ] 2025-11-10T18:51:42.108Z [DEBUG] üîç [SERVER] fetch-user-data request parsed: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_spreadsheets","options":{}}
[2025-11-10T18:51:42.224Z] [INFO   ] 2025-11-10T18:51:42.223Z [DEBUG] üîÑ [SERVER] Routing Google request to dedicated API: google-sheets_spreadsheets (provider: google-sheets)
[2025-11-10T18:51:42.636Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/google/data in 376ms (4305 modules)
[2025-11-10T18:51:42.722Z] [INFO   ] 2025-11-10T18:51:42.722Z [DEBUG] üöÄ [Google Data API] POST handler invoked
[2025-11-10T18:51:42.722Z] [INFO   ] 2025-11-10T18:51:42.722Z [DEBUG] üîç [Google Data API] Request received: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_spreadsheets","options":{},"fullRequestBody":{"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_spreadsheets","options":{}}}
[2025-11-10T18:51:42.814Z] [INFO   ] 2025-11-10T18:51:42.814Z [DEBUG] üìä [Google API] Integration provider check: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","actualProvider":"google-sheets","dataType":"google-sheets_spreadsheets","providerLowerCase":"google-sheets"}
[2025-11-10T18:51:42.814Z] [INFO   ] 2025-11-10T18:51:42.814Z [DEBUG] üîç [Google API] Processing request: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","dataType":"google-sheets_spreadsheets","provider":"google-sheets","status":"connected","hasToken":true}
[2025-11-10T18:51:42.814Z] [INFO   ] 2025-11-10T18:51:42.814Z [DEBUG] üìä [Google Sheets] Fetching spreadsheets
[2025-11-10T18:51:43.251Z] [INFO   ] 2025-11-10T18:51:43.251Z [DEBUG] ‚úÖ [Google Sheets] Retrieved 21 spreadsheets
[2025-11-10T18:51:43.252Z] [INFO   ] 2025-11-10T18:51:43.252Z [DEBUG] ‚úÖ [Google API] Successfully processed google-sheets_spreadsheets: {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","resultCount":21}
[2025-11-10T18:51:43.254Z] [INFO   ] 2025-11-10T18:51:43.254Z [DEBUG] ‚úÖ [SERVER] Google API completed for google-sheets_spreadsheets, result length: 21
[2025-11-10T18:51:43.937Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/auth/generate-url ...
[2025-11-10T18:51:44.558Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/auth/generate-url in 1226ms (5460 modules)
[2025-11-10T18:51:53.730Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/google-sheets/callback ...
[2025-11-10T18:51:54.937Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/google-sheets/callback in 1707ms (5467 modules)
[2025-11-10T18:51:54.996Z] [INFO   ] 2025-11-10T18:51:54.996Z [DEBUG] üîç google-sheets callback called: {"url":"http://localhost:3000/api/integrations/google-sheets/callback?state=eyJ1c2VySWQiOiJhM2UzYTUxYS0xNzVjLTRiNTktYWQwMy0yMjdiYTEyYTE4YjAiLCJwcm92aWRlciI6Imdvb2dsZS1zaGVldHMiLCJyZWNvbm5lY3QiOmZhbHNlLCJ0aW1lc3RhbXAiOjE3NjI4MDA3MDQ3NTksIndvcmtzcGFjZVR5cGUiOiJwZXJzb25hbCJ9&code=4%2F0Ab32j90ItH8zP0Vvg5n953ZnPcRQmRbkYs6pHDzKdqtWYthbktU_GwfT8kDqiNmQ87Behw&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive.readonly+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fspreadsheets+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+openid&authuser=1&prompt=consent","hasCode":true,"hasState":true,"error":null,"userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36"}
[2025-11-10T18:51:54.997Z] [INFO   ] 2025-11-10T18:51:54.997Z [DEBUG] google-sheets OAuth callback state: {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"google-sheets","reconnect":false,"workspaceType":"personal"}
[2025-11-10T18:51:55.359Z] [INFO   ] 2025-11-10T18:51:55.359Z [DEBUG] ‚úÖ Google Sheets user info fetched: {"email":"chainreactapp@gmail.com","name":"Nathaniel"}
[2025-11-10T18:51:55.473Z] [ERROR  ] 2025-11-10T18:51:55.473Z [ERROR] Error inserting integration: {"code":"23505","details":"Key (user_id, provider)=(a3e3a51a-175c-4b59-ad03-227ba12a18b0, google-sheets) already exists.","hint":null,"message":"duplicate key value violates unique constraint \"integrations_user_id_provider_key\""}
[2025-11-10T18:51:55.473Z] [ERROR  ] 2025-11-10T18:51:55.473Z [ERROR] Error during google-sheets OAuth callback: {}
[2025-11-10T18:51:55.474Z] [INFO   ] 2025-11-10T18:51:55.474Z [DEBUG] üîÑ Creating popup response: type=error, provider=google-sheets, displayName=Google Sheets, message=Database Error: duplicate key value violates unique constraint "integrations_user_id_provider_key"
[2025-11-10T18:52:13.455Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 2.8s (5481 modules)
[2025-11-10T18:52:13.545Z] [INFO   ] 2025-11-10T18:52:13.545Z [DEBUG] üîç google-sheets callback called: {"url":"http://localhost:3000/api/integrations/google-sheets/callback?state=eyJ1c2VySWQiOiJhM2UzYTUxYS0xNzVjLTRiNTktYWQwMy0yMjdiYTEyYTE4YjAiLCJwcm92aWRlciI6Imdvb2dsZS1zaGVldHMiLCJyZWNvbm5lY3QiOmZhbHNlLCJ0aW1lc3RhbXAiOjE3NjI4MDA3MjQxMDIsIndvcmtzcGFjZVR5cGUiOiJwZXJzb25hbCJ9&code=4%2F0Ab32j93otcoemUy1HB_XQ36J4OLCpvE2IpD1g1KeBfSo4ua9-WFY7vWJyP3DEzMeOfBpOQ&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fspreadsheets+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive.readonly+openid+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&authuser=1&prompt=none","hasCode":true,"hasState":true,"error":null,"userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36"}
[2025-11-10T18:52:13.546Z] [INFO   ] 2025-11-10T18:52:13.546Z [DEBUG] google-sheets OAuth callback state: {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"google-sheets","reconnect":false,"workspaceType":"personal"}
[2025-11-10T18:52:13.999Z] [INFO   ] 2025-11-10T18:52:13.998Z [DEBUG] ‚úÖ Google Sheets user info fetched: {"email":"chainreactapp@gmail.com","name":"Nathaniel"}
[2025-11-10T18:52:14.153Z] [ERROR  ] 2025-11-10T18:52:14.153Z [ERROR] Error inserting integration: {"code":"23505","details":"Key (user_id, provider)=(a3e3a51a-175c-4b59-ad03-227ba12a18b0, google-sheets) already exists.","hint":null,"message":"duplicate key value violates unique constraint \"integrations_user_id_provider_key\""}
[2025-11-10T18:52:14.154Z] [ERROR  ] 2025-11-10T18:52:14.154Z [ERROR] Error during google-sheets OAuth callback: {}
[2025-11-10T18:52:14.154Z] [INFO   ] 2025-11-10T18:52:14.154Z [DEBUG] üîÑ Creating popup response: type=error, provider=google-sheets, displayName=Google Sheets, message=Database Error: duplicate key value violates unique constraint "integrations_user_id_provider_key"
[2025-11-10T18:52:19.970Z] [INFO   ] 2025-11-10T18:52:19.970Z [DEBUG] üîç google-sheets callback called: {"url":"http://localhost:3000/api/integrations/google-sheets/callback?state=eyJ1c2VySWQiOiJhM2UzYTUxYS0xNzVjLTRiNTktYWQwMy0yMjdiYTEyYTE4YjAiLCJwcm92aWRlciI6Imdvb2dsZS1zaGVldHMiLCJyZWNvbm5lY3QiOmZhbHNlLCJ0aW1lc3RhbXAiOjE3NjI4MDA3Mzc5NjEsIndvcmtzcGFjZVR5cGUiOiJwZXJzb25hbCJ9&code=4%2F0Ab32j93ePQqYfpKupV-yN2FUT2DnKnV3VoI33I_4coGwWJMIc1fnggVH8VLtTvPc6Mty7Q&scope=email+profile+openid+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fspreadsheets+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive.readonly+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&authuser=1&prompt=none","hasCode":true,"hasState":true,"error":null,"userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36"}
[2025-11-10T18:52:19.970Z] [INFO   ] 2025-11-10T18:52:19.970Z [DEBUG] google-sheets OAuth callback state: {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"google-sheets","reconnect":false,"workspaceType":"personal"}
[2025-11-10T18:52:20.229Z] [ERROR  ] 2025-11-10T18:52:20.229Z [ERROR] Error inserting integration: {"code":"23505","details":"Key (user_id, provider)=(a3e3a51a-175c-4b59-ad03-227ba12a18b0, google-sheets) already exists.","hint":null,"message":"duplicate key value violates unique constraint \"integrations_user_id_provider_key\""}
[2025-11-10T18:52:20.230Z] [ERROR  ] 2025-11-10T18:52:20.230Z [ERROR] Error during google-sheets OAuth callback: {}
[2025-11-10T18:52:20.230Z] [INFO   ] 2025-11-10T18:52:20.230Z [DEBUG] üîÑ Creating popup response: type=error, provider=google-sheets, displayName=Google Sheets, message=Database Error: duplicate key value violates unique constraint "integrations_user_id_provider_key"
[2025-11-10T18:52:20.243Z] [INFO   ] 2025-11-10T18:52:20.243Z [DEBUG] ‚úÖ Google Sheets user info fetched: {"email":"chainreactapp@gmail.com","name":"Nathaniel"}
[2025-11-10T18:52:24.603Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1299ms (5481 modules)
[2025-11-10T18:52:37.892Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1471ms (5481 modules)
[2025-11-10T18:52:49.602Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1309ms (5471 modules)
[2025-11-10T18:53:02.584Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 2.2s (5437 modules)
[2025-11-10T18:53:06.180Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1584ms (5437 modules)
[2025-11-10T18:53:13.509Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 969ms (5437 modules)
[2025-11-10T18:53:20.484Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1760ms (5416 modules)
[2025-11-10T18:53:25.972Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1052ms (5301 modules)
[2025-11-10T18:53:30.499Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 333ms (1167 modules)
[2025-11-10T18:53:41.242Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1570ms (5301 modules)
[2025-11-10T18:53:41.444Z] [WARN   ]  [33m[1m‚ö†[22m[39m Fast Refresh had to perform a full reload. Read more: https://nextjs.org/docs/messages/fast-refresh-reload
[2025-11-10T18:53:41.663Z] [INFO   ] 2025-11-10T18:53:41.663Z [DEBUG] üíß [AUTH] Rehydrating auth state from storage {"hasState":true,"hasUser":false,"initialized":false,"timestamp":"2025-11-10T18:53:41.662Z"}
[2025-11-10T18:53:41.675Z] [INFO   ] 2025-11-10T18:53:41.675Z [DEBUG] üíß [AUTH] State hydrated and reset {"hasUser":false,"initialized":false,"timestamp":"2025-11-10T18:53:41.675Z"}
[2025-11-10T18:53:41.675Z] [INFO   ] 2025-11-10T18:53:41.675Z [DEBUG] ‚è≠Ô∏è [AUTH] Skipping initialization {"hasState":true,"alreadyInitialized":false,"isClient":false,"timestamp":"2025-11-10T18:53:41.675Z"}
[2025-11-10T18:53:43.365Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations ...
[2025-11-10T18:53:43.562Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations in 715ms (4150 modules)
[2025-11-10T18:53:43.872Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled (4266 modules)
[2025-11-10T18:53:44.060Z] [INFO   ] 2025-11-10T18:53:44.060Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-10T18:53:44.060Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-10T18:53:44.322Z] [INFO   ] 2025-11-10T18:53:44.322Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-10T18:53:44.322Z] [INFO   ] 2025-11-10T18:53:44.322Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-10T18:53:44.640Z] [INFO   ] 2025-11-10T18:53:44.640Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":1,"permissionsCount":1,"integrationsError":null,"permissionsError":null}
[2025-11-10T18:53:44.640Z] [INFO   ] 2025-11-10T18:53:44.640Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","provider":"google-sheets","permission":"admin"}
[2025-11-10T18:53:44.640Z] [INFO   ] 2025-11-10T18:53:44.640Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":1,"workspaceType":"personal"}
[2025-11-10T18:55:23.546Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1558ms (1167 modules)
[2025-11-10T18:55:28.232Z] [INFO   ] 2025-11-10T18:55:28.232Z [DEBUG] üíß [AUTH] Rehydrating auth state from storage {"hasState":true,"hasUser":false,"initialized":false,"timestamp":"2025-11-10T18:55:28.232Z"}
[2025-11-10T18:55:28.247Z] [INFO   ] 2025-11-10T18:55:28.247Z [DEBUG] üíß [AUTH] State hydrated and reset {"hasUser":false,"initialized":false,"timestamp":"2025-11-10T18:55:28.247Z"}
[2025-11-10T18:55:28.248Z] [INFO   ] 2025-11-10T18:55:28.248Z [DEBUG] ‚è≠Ô∏è [AUTH] Skipping initialization {"hasState":true,"alreadyInitialized":false,"isClient":false,"timestamp":"2025-11-10T18:55:28.248Z"}
[2025-11-10T18:55:29.263Z] [INFO   ] 2025-11-10T18:55:29.263Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-10T18:55:29.263Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-10T18:55:29.502Z] [INFO   ] 2025-11-10T18:55:29.502Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-10T18:55:29.502Z] [INFO   ] 2025-11-10T18:55:29.502Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-10T18:55:29.650Z] [INFO   ] 2025-11-10T18:55:29.649Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":1,"permissionsCount":1,"integrationsError":null,"permissionsError":null}
[2025-11-10T18:55:29.650Z] [INFO   ] 2025-11-10T18:55:29.650Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","provider":"google-sheets","permission":"admin"}
[2025-11-10T18:55:29.650Z] [INFO   ] 2025-11-10T18:55:29.650Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":1,"workspaceType":"personal"}

=== Log Session Ended: 2025-11-10T18:55:39.106Z ===
