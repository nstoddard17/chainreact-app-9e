=== Log Session Started: 2025-10-25T19:07:46.727Z ===
Node Version: v23.7.0
Platform: darwin
Working Directory: /Users/nathanielstoddard/chainreact-app/chainreact-app-9e
================================================================================

[2025-10-25T19:07:46.727Z] [INFO   ] File logging initialized
[2025-10-25T19:07:46.727Z] [INFO   ] Log file: /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-10-25_14-07-46.log
[2025-10-25T19:07:46.733Z] [INFO   ] Deleted old log file: workflow_2025-10-18_14-05-34.log
[2025-10-25T19:07:46.734Z] [INFO   ] Deleted old log file: workflow_2025-10-18_13-58-37.log
[2025-10-25T19:07:46.734Z] [INFO   ] üìÅ File logging enabled
[2025-10-25T19:07:46.734Z] [INFO   ] üìù Logs will be written to: /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-10-25_14-07-46.log
[2025-10-25T19:07:46.734Z] [INFO   ] üí° To view logs in real-time: tail -f /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-10-25_14-07-46.log
[2025-10-25T19:07:46.734Z] [INFO   ] üí° To view all logs: cat /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-10-25_14-07-46.log
[2025-10-25T19:07:46.734Z] [INFO   ] üí° To share logs: Copy the file at /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-10-25_14-07-46.log
[2025-10-25T19:07:46.734Z] [INFO   ] --------------------------------------------------------------------------------
[2025-10-25T19:07:46.734Z] [DEBUG  ] üìÅ File logging system initialized
[2025-10-25T19:07:46.747Z] [INFO   ]  [32m[1m‚úì[22m[39m Ready in 3.1s
[2025-10-25T19:07:46.867Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /middleware in 115ms (233 modules)
[2025-10-25T19:07:47.161Z] [INFO   ] 2025-10-25T19:07:47.161Z [DEBUG] [Middleware] Username check: {"path":"/workflows/ai-agent","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":12852579761}
[2025-10-25T19:07:47.682Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /workflows/ai-agent ...
[2025-10-25T19:07:47.742Z] [INFO   ] 2025-10-25T19:07:47.742Z [DEBUG] ü§ñ Discord bot configured, initializing gateway connection in background...
[2025-10-25T19:07:49.882Z] [INFO   ] 2025-10-25T19:07:49.882Z [DEBUG] Initializing Discord Gateway connection (singleton)...
[2025-10-25T19:07:49.882Z] [INFO   ] 2025-10-25T19:07:49.882Z [DEBUG] üîë Discord bot token loaded
[2025-10-25T19:07:50.223Z] [INFO   ] 2025-10-25T19:07:50.223Z [DEBUG] Discord Gateway initialization complete
[2025-10-25T19:07:50.224Z] [INFO   ] 2025-10-25T19:07:50.224Z [DEBUG] ‚úÖ Discord bot gateway connection initialized
[2025-10-25T19:07:50.574Z] [INFO   ] 2025-10-25T19:07:50.574Z [DEBUG] Discord Gateway WebSocket connection established
[2025-10-25T19:07:50.575Z] [INFO   ] 2025-10-25T19:07:50.575Z [DEBUG] üîë Sending identify with intents: {"GUILDS":true,"GUILD_MEMBERS":true,"GUILD_INVITES":true,"GUILD_MESSAGES":true,"MESSAGE_CONTENT":true,"intentsValue":33347}
[2025-10-25T19:07:51.029Z] [INFO   ] 2025-10-25T19:07:51.029Z [DEBUG] üéâ Discord bot ready! {"sessionId":"b3cb648666e01e3e6dd0ac952e69f266","username":"ChainReact-Bot","userId":"1378595955212812308","guildCount":2}
[2025-10-25T19:07:51.029Z] [INFO   ] 2025-10-25T19:07:51.029Z [DEBUG] üìã Initializing invite cache...
[2025-10-25T19:07:51.030Z] [INFO   ] 2025-10-25T19:07:51.030Z [DEBUG] üì° Discord event received: GUILD_CREATE
[2025-10-25T19:07:51.031Z] [INFO   ] 2025-10-25T19:07:51.031Z [DEBUG] üì° Discord event received: GUILD_CREATE
[2025-10-25T19:07:52.104Z] [INFO   ] 2025-10-25T19:07:52.104Z [DEBUG] ‚úÖ Cached 3 invites for guild 1378950884045623406
[2025-10-25T19:07:53.340Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /workflows/ai-agent in 6.2s (3725 modules)
[2025-10-25T19:07:53.736Z] [INFO   ] 2025-10-25T19:07:53.736Z [DEBUG] üíß [AUTH] Rehydrating auth state from storage {"hasState":true,"hasUser":false,"initialized":false,"timestamp":"2025-10-25T19:07:53.736Z"}
[2025-10-25T19:07:53.739Z] [INFO   ] 2025-10-25T19:07:53.739Z [DEBUG] üíß [AUTH] State hydrated and reset {"hasUser":false,"initialized":false,"timestamp":"2025-10-25T19:07:53.739Z"}
[2025-10-25T19:07:53.739Z] [INFO   ] 2025-10-25T19:07:53.739Z [DEBUG] ‚è≠Ô∏è [AUTH] Skipping initialization {"hasState":true,"alreadyInitialized":false,"isClient":false,"timestamp":"2025-10-25T19:07:53.739Z"}
[2025-10-25T19:07:54.146Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 788ms (597 modules)
[2025-10-25T19:07:54.275Z] [INFO   ] 2025-10-25T19:07:54.274Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-10-25T19:07:55.462Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/presence/count ...
[2025-10-25T19:07:56.336Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/presence/count in 1537ms (3732 modules)
[2025-10-25T19:08:00.121Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations in 355ms (3734 modules)
[2025-10-25T19:08:00.209Z] [INFO   ] 2025-10-25T19:08:00.209Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-10-25T19:08:00.209Z","headers":{"referer":"check-console"}}
[2025-10-25T19:08:00.338Z] [INFO   ] 2025-10-25T19:08:00.338Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-10-25T19:08:00.426Z] [INFO   ] 2025-10-25T19:08:00.426Z [DEBUG] üìä [API /api/integrations] Query result {"count":14,"error":null,"firstFew":[{"provider":"notion","status":"connected"},{"provider":"mailchimp","status":"connected"}]}
[2025-10-25T19:08:01.045Z] [INFO   ] 2025-10-25T19:08:01.045Z [DEBUG] [Middleware] Username check: {"path":"/workflows/builder/bee4d81b-64ff-4fca-9043-ea43213ba0a4","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":12852593646}
[2025-10-25T19:08:01.601Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /workflows/builder/[id] ...
[2025-10-25T19:08:03.945Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /workflows/builder/[id] in 2.8s (5921 modules)
[2025-10-25T19:08:04.942Z] [INFO   ] 2025-10-25T19:08:04.941Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-10-25T19:08:06.010Z] [INFO   ] 2025-10-25T19:08:06.009Z [DEBUG] [Middleware] Username check: {"path":"/workflows/builder/bee4d81b-64ff-4fca-9043-ea43213ba0a4","userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"email","role":"free","username":"nstoddard17","hasUsername":true,"isBetaTester":false,"isNewBetaUser":false,"accountAge":12852598610}
[2025-10-25T19:08:06.222Z] [INFO   ] 2025-10-25T19:08:06.221Z [DEBUG] üíß [AUTH] Rehydrating auth state from storage {"hasState":true,"hasUser":false,"initialized":false,"timestamp":"2025-10-25T19:08:06.221Z"}
[2025-10-25T19:08:06.234Z] [INFO   ] 2025-10-25T19:08:06.234Z [DEBUG] üíß [AUTH] State hydrated and reset {"hasUser":false,"initialized":false,"timestamp":"2025-10-25T19:08:06.234Z"}
[2025-10-25T19:08:06.234Z] [INFO   ] 2025-10-25T19:08:06.234Z [DEBUG] ‚è≠Ô∏è [AUTH] Skipping initialization {"hasState":true,"alreadyInitialized":false,"isClient":false,"timestamp":"2025-10-25T19:08:06.234Z"}
[2025-10-25T19:08:06.471Z] [INFO   ] 2025-10-25T19:08:06.470Z [DEBUG] [Username Check] {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","hasEmail":true,"provider":"email","hasUsername":true,"isGoogleUser":false}
[2025-10-25T19:08:06.914Z] [INFO   ] 2025-10-25T19:08:06.913Z [INFO] [NewWorkflowBuilderContent] URL params: {"aiChat":"true","hasInitialPrompt":true,"initialPrompt":"when I get an email send it to slack"}
[2025-10-25T19:08:08.073Z] [INFO   ] 2025-10-25T19:08:08.073Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-10-25T19:08:08.073Z","headers":{"referer":"check-console"}}
[2025-10-25T19:08:08.218Z] [INFO   ] 2025-10-25T19:08:08.218Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-10-25T19:08:08.347Z] [INFO   ] 2025-10-25T19:08:08.347Z [DEBUG] üìä [API /api/integrations] Query result {"count":14,"error":null,"firstFew":[{"provider":"notion","status":"connected"},{"provider":"mailchimp","status":"connected"}]}
[2025-10-25T19:08:08.614Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/collaboration/join ...
[2025-10-25T19:08:08.759Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/collaboration/join in 651ms (5924 modules)
[2025-10-25T19:08:09.827Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/ai/stream-workflow ...
[2025-10-25T19:08:09.832Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/ai/stream-workflow in 526ms (2463 modules)
[2025-10-25T19:08:15.003Z] [INFO   ] [Prerequisite Check] Required apps: [ 'gmail', 'slack' ]
[2025-10-25T19:08:15.004Z] [INFO   ] [Prerequisite Check] Connected integrations: [
  'notion',
  'mailchimp',
  'gmail',
  'google-sheets',
  'facebook',
  'trello',
  'slack',
  'google-docs',
  'google-drive',
  'twitter',
  'dropbox',
  'google-calendar',
  'airtable',
  'google_calendar'
]
[2025-10-25T19:08:15.005Z] [INFO   ] [Prerequisite Check] Normalized connected: [
  'notion',
  'mailchimp',
  'gmail',
  'google-sheets',
  'facebook',
  'trello',
  'slack',
  'google-docs',
  'google-drive',
  'twitter',
  'dropbox',
  'google-calendar',
  'airtable',
  'google_calendar'
]
[2025-10-25T19:08:15.005Z] [INFO   ] [Prerequisite Check] Checking gmail (normalized: gmail): CONNECTED
[2025-10-25T19:08:15.005Z] [INFO   ] [Prerequisite Check] Checking slack (normalized: slack): CONNECTED
[2025-10-25T19:08:21.928Z] [INFO   ] [STREAM] Phase 2: Starting node creation, plan: {
  understanding: 'The user wants to automatically send a notification to a Slack channel whenever they receive a new email.',
  nodes: [
  {
  type: 'gmail_trigger_new_email',
  title: 'New Email Trigger',
  description: 'Triggers the workflow when a new email is received in the user\'s Gmail account.',
  reasoning: 'This node is essential to initiate the workflow based on the user\'s request to monitor incoming emails.'
},
  {
  type: 'slack_action_send_message',
  title: 'Send Message to Slack',
  description: 'Sends a message to a specified Slack channel.',
  reasoning: 'This node is needed to fulfill the user\'s requirement of notifying a Slack channel when a new email is received.'
}
],
  connections: 'The workflow starts with the \'New Email Trigger\' node, which activates when a new email is received. This then connects directly to the \'Send Message to Slack\' node, which sends a notification to Slack about the new email.'
}
[2025-10-25T19:08:21.929Z] [INFO   ] [STREAM] Plan nodes: [
  {
  type: 'gmail_trigger_new_email',
  title: 'New Email Trigger',
  description: 'Triggers the workflow when a new email is received in the user\'s Gmail account.',
  reasoning: 'This node is essential to initiate the workflow based on the user\'s request to monitor incoming emails.'
},
  {
  type: 'slack_action_send_message',
  title: 'Send Message to Slack',
  description: 'Sends a message to a specified Slack channel.',
  reasoning: 'This node is needed to fulfill the user\'s requirement of notifying a Slack channel when a new email is received.'
}
]
[2025-10-25T19:08:21.930Z] [INFO   ] [POSITION] Node 0 : {
  viewport: { width: 909, height: 1211, zoom: 0.75, chatPanelWidth: 1000 },
  effectiveViewportWidth: 2545.3333333333335,
  builderViewportWidth: 1212,
  visibleHeight: 1614.6666666666667,
  availableWidth: 1132,
  nodesPerRow: 1,
  row: 0,
  col: 0,
  position: { x: 381, y: 80 }
}
[2025-10-25T19:08:22.032Z] [INFO   ] [POSITION] Node 1 : {
  viewport: { width: 909, height: 1211, zoom: 0.75, chatPanelWidth: 1000 },
  effectiveViewportWidth: 2545.3333333333335,
  builderViewportWidth: 1212,
  visibleHeight: 1614.6666666666667,
  availableWidth: 1132,
  nodesPerRow: 1,
  row: 1,
  col: 0,
  position: { x: 381, y: 480 }
}
[2025-10-25T19:08:22.988Z] [INFO   ] [STREAM] Preparing New Email Trigger (node-1761419301929-0)
[2025-10-25T19:08:23.789Z] [INFO   ] [STREAM] Starting configuration for New Email Trigger (node-1761419301929-0)
[2025-10-25T19:08:30.356Z] [INFO   ] [STREAM] Config result: {
  success: true,
  hasConfig: true,
  configKeys: [
  'node_type',
  'description',
  'email_address',
  'label_ids',
  'include_spam_trash',
  'search_string',
  'trigger_on_read',
  'trigger_on_unread'
],
  finalConfigKeys: [
  'node_type',
  'description',
  'email_address',
  'label_ids',
  'include_spam_trash',
  'search_string',
  'trigger_on_read',
  'trigger_on_unread',
  'from'
],
  fallbackFields: [ 'from' ]
}
[2025-10-25T19:08:30.357Z] [INFO   ] [STREAM] Configuring 9 fields for New Email Trigger: node_type, description, email_address, label_ids, include_spam_trash, search_string, trigger_on_read, trigger_on_unread, from
[2025-10-25T19:08:30.357Z] [INFO   ] [STREAM] Setting field node_type = gmail_trigger_new_email for New Email Trigger
[2025-10-25T19:08:30.659Z] [INFO   ] [STREAM] Setting field description = Triggers the workflow when a new email is received in the user's Gmail account. for New Email Trigger
[2025-10-25T19:08:30.962Z] [INFO   ] [STREAM] Setting field email_address = {{trigger.email}} for New Email Trigger
[2025-10-25T19:08:31.265Z] [INFO   ] [STREAM] Setting field label_ids = INBOX for New Email Trigger
[2025-10-25T19:08:31.569Z] [INFO   ] [STREAM] Setting field include_spam_trash = false for New Email Trigger
[2025-10-25T19:08:31.871Z] [INFO   ] [STREAM] Setting field search_string =  for New Email Trigger
[2025-10-25T19:08:32.173Z] [INFO   ] [STREAM] Setting field trigger_on_read = false for New Email Trigger
[2025-10-25T19:08:32.475Z] [INFO   ] [STREAM] Setting field trigger_on_unread = true for New Email Trigger
[2025-10-25T19:08:32.779Z] [INFO   ] [STREAM] Setting field from = inbox@placeholder.com for New Email Trigger
[2025-10-25T19:08:33.583Z] [INFO   ] [STREAM] Skipping test for trigger New Email Trigger
[2025-10-25T19:08:35.388Z] [INFO   ] [STREAM] Preparing Send Message to Slack (node-1761419302031-1)
[2025-10-25T19:08:36.190Z] [INFO   ] [STREAM] Starting configuration for Send Message to Slack (node-1761419302031-1)
[2025-10-25T19:08:39.983Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/collaboration/collaborators ...
[2025-10-25T19:08:39.987Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/collaboration/collaborators in 522ms (5926 modules)
