=== Log Session Started: 2025-11-10T19:04:36.961Z ===
Node Version: v23.7.0
Platform: darwin
Working Directory: /Users/nathanielstoddard/chainreact-app/chainreact-app-9e
================================================================================

[2025-11-10T19:04:36.961Z] [INFO   ] File logging initialized
[2025-11-10T19:04:36.961Z] [INFO   ] Log file: /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-11-10_13-04-36.log
[2025-11-10T19:04:36.962Z] [INFO   ] üìÅ File logging enabled
[2025-11-10T19:04:36.962Z] [INFO   ] üìù Logs will be written to: /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-11-10_13-04-36.log
[2025-11-10T19:04:36.962Z] [INFO   ] üí° To view logs in real-time: tail -f /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-11-10_13-04-36.log
[2025-11-10T19:04:36.962Z] [INFO   ] üí° To view all logs: cat /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-11-10_13-04-36.log
[2025-11-10T19:04:36.962Z] [INFO   ] üí° To share logs: Copy the file at /Users/nathanielstoddard/chainreact-app/chainreact-app-9e/logs/workflow_2025-11-10_13-04-36.log
[2025-11-10T19:04:36.963Z] [INFO   ] --------------------------------------------------------------------------------
[2025-11-10T19:04:36.963Z] [DEBUG  ] üìÅ File logging system initialized
[2025-11-10T19:04:36.981Z] [INFO   ]  [32m[1m‚úì[22m[39m Ready in 3.4s
[2025-11-10T19:04:37.497Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /test/nodes ...
[2025-11-10T19:04:37.990Z] [INFO   ] 2025-11-10T19:04:37.990Z [DEBUG] ü§ñ Discord bot configured, initializing gateway connection in background...
[2025-11-10T19:04:39.928Z] [INFO   ] 2025-11-10T19:04:39.928Z [DEBUG] Initializing Discord Gateway connection (singleton)...
[2025-11-10T19:04:39.928Z] [INFO   ] 2025-11-10T19:04:39.928Z [DEBUG] üîë Discord bot token loaded
[2025-11-10T19:04:40.472Z] [INFO   ] 2025-11-10T19:04:40.472Z [DEBUG] Discord Gateway initialization complete
[2025-11-10T19:04:40.473Z] [INFO   ] 2025-11-10T19:04:40.473Z [DEBUG] ‚úÖ Discord bot gateway connection initialized
[2025-11-10T19:04:40.719Z] [INFO   ] 2025-11-10T19:04:40.719Z [DEBUG] Discord Gateway WebSocket connection established
[2025-11-10T19:04:40.719Z] [INFO   ] 2025-11-10T19:04:40.719Z [DEBUG] üîë Sending identify with intents: {"GUILDS":true,"GUILD_MEMBERS":true,"GUILD_INVITES":true,"GUILD_MESSAGES":true,"MESSAGE_CONTENT":true,"intentsValue":33347}
[2025-11-10T19:04:40.905Z] [INFO   ] 2025-11-10T19:04:40.905Z [DEBUG] üéâ Discord bot ready! {"sessionId":"7f3871b1eb315cf5c919cb9b0f29486a","username":"ChainReact-Bot","userId":"1378595955212812308","guildCount":2}
[2025-11-10T19:04:40.905Z] [INFO   ] 2025-11-10T19:04:40.905Z [DEBUG] üìã Initializing invite cache...
[2025-11-10T19:04:40.906Z] [INFO   ] 2025-11-10T19:04:40.906Z [DEBUG] üì° Discord event received: GUILD_CREATE
[2025-11-10T19:04:40.959Z] [INFO   ] 2025-11-10T19:04:40.959Z [DEBUG] üì° Discord event received: GUILD_CREATE
[2025-11-10T19:04:41.936Z] [INFO   ] 2025-11-10T19:04:41.936Z [DEBUG] ‚úÖ Cached 3 invites for guild 1378950884045623406
[2025-11-10T19:04:43.778Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /test/nodes in 6.8s (5300 modules)
[2025-11-10T19:04:44.377Z] [INFO   ] 2025-11-10T19:04:44.377Z [DEBUG] üíß [AUTH] Rehydrating auth state from storage {"hasState":true,"hasUser":false,"initialized":false,"timestamp":"2025-11-10T19:04:44.376Z"}
[2025-11-10T19:04:44.389Z] [INFO   ] 2025-11-10T19:04:44.389Z [DEBUG] üíß [AUTH] State hydrated and reset {"hasUser":false,"initialized":false,"timestamp":"2025-11-10T19:04:44.389Z"}
[2025-11-10T19:04:44.389Z] [INFO   ] 2025-11-10T19:04:44.389Z [DEBUG] ‚è≠Ô∏è [AUTH] Skipping initialization {"hasState":true,"alreadyInitialized":false,"isClient":false,"timestamp":"2025-11-10T19:04:44.389Z"}
[2025-11-10T19:04:45.005Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled in 1206ms (1166 modules)
[2025-11-10T19:04:45.845Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /icon.png ...
[2025-11-10T19:04:46.448Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /icon.png in 1104ms (4150 modules)
[2025-11-10T19:04:52.934Z] [INFO   ] 2025-11-10T19:04:52.934Z [DEBUG] üíß [AUTH] Rehydrating auth state from storage {"hasState":true,"hasUser":false,"initialized":false,"timestamp":"2025-11-10T19:04:52.934Z"}
[2025-11-10T19:04:52.946Z] [INFO   ] 2025-11-10T19:04:52.946Z [DEBUG] üíß [AUTH] State hydrated and reset {"hasUser":false,"initialized":false,"timestamp":"2025-11-10T19:04:52.946Z"}
[2025-11-10T19:04:52.946Z] [INFO   ] 2025-11-10T19:04:52.946Z [DEBUG] ‚è≠Ô∏è [AUTH] Skipping initialization {"hasState":true,"alreadyInitialized":false,"isClient":false,"timestamp":"2025-11-10T19:04:52.946Z"}
[2025-11-10T19:04:54.180Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /middleware ...
[2025-11-10T19:04:54.894Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /middleware in 1218ms (5649 modules)
[2025-11-10T19:04:55.720Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations ...
[2025-11-10T19:04:55.827Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations in 625ms (5419 modules)
[2025-11-10T19:04:55.926Z] [INFO   ] 2025-11-10T19:04:55.926Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-10T19:04:55.926Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-10T19:04:56.093Z] [INFO   ] 2025-11-10T19:04:56.093Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-10T19:04:56.093Z] [INFO   ] 2025-11-10T19:04:56.093Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-10T19:04:56.325Z] [INFO   ] 2025-11-10T19:04:56.324Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":1,"permissionsCount":1,"integrationsError":null,"permissionsError":null}
[2025-11-10T19:04:56.326Z] [INFO   ] 2025-11-10T19:04:56.326Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","provider":"google-sheets","permission":"admin"}
[2025-11-10T19:04:56.326Z] [INFO   ] 2025-11-10T19:04:56.326Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":1,"workspaceType":"personal"}
[2025-11-10T19:04:56.410Z] [INFO   ] 2025-11-10T19:04:56.410Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-10T19:04:56.410Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-10T19:04:56.513Z] [INFO   ] 2025-11-10T19:04:56.512Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-10T19:04:56.513Z] [INFO   ] 2025-11-10T19:04:56.513Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-10T19:04:56.609Z] [INFO   ] 2025-11-10T19:04:56.609Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":1,"permissionsCount":1,"integrationsError":null,"permissionsError":null}
[2025-11-10T19:04:56.609Z] [INFO   ] 2025-11-10T19:04:56.609Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","provider":"google-sheets","permission":"admin"}
[2025-11-10T19:04:56.609Z] [INFO   ] 2025-11-10T19:04:56.609Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":1,"workspaceType":"personal"}
[2025-11-10T19:04:56.657Z] [INFO   ] 2025-11-10T19:04:56.657Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-10T19:04:56.657Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-10T19:04:56.762Z] [INFO   ] 2025-11-10T19:04:56.762Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-10T19:04:56.763Z] [INFO   ] 2025-11-10T19:04:56.763Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-10T19:04:56.925Z] [INFO   ] 2025-11-10T19:04:56.925Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":1,"permissionsCount":1,"integrationsError":null,"permissionsError":null}
[2025-11-10T19:04:56.925Z] [INFO   ] 2025-11-10T19:04:56.925Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","provider":"google-sheets","permission":"admin"}
[2025-11-10T19:04:56.925Z] [INFO   ] 2025-11-10T19:04:56.925Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":1,"workspaceType":"personal"}
[2025-11-10T19:04:57.729Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/auth/generate-url ...
[2025-11-10T19:04:57.785Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/auth/generate-url in 556ms (5423 modules)
[2025-11-10T19:05:01.760Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/google-sheets/callback ...
[2025-11-10T19:05:02.104Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/google-sheets/callback in 1261ms (5431 modules)
[2025-11-10T19:05:02.232Z] [INFO   ] 2025-11-10T19:05:02.232Z [DEBUG] üîç google-sheets callback called: {"url":"http://localhost:3000/api/integrations/google-sheets/callback?state=eyJ1c2VySWQiOiJhM2UzYTUxYS0xNzVjLTRiNTktYWQwMy0yMjdiYTEyYTE4YjAiLCJwcm92aWRlciI6Imdvb2dsZS1zaGVldHMiLCJyZWNvbm5lY3QiOmZhbHNlLCJ0aW1lc3RhbXAiOjE3NjI4MDE0OTgwNjYsIndvcmtzcGFjZVR5cGUiOiJwZXJzb25hbCJ9&code=4%2F0Ab32j92clWa0aBTRMdDrjdyXPL8rSK_B3hb-SNPwY34w-TSGvyz83ksRwnxFcv5RJ_hFmg&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fanalytics.edit+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fcalendar+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive.readonly+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgmail.modify+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgmail.settings.basic+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgmail.settings.sharing+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fcontacts.readonly+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+openid+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fspreadsheets+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fanalytics.readonly+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdocuments&authuser=0&prompt=none","hasCode":true,"hasState":true,"error":null,"userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36"}
[2025-11-10T19:05:02.232Z] [INFO   ] 2025-11-10T19:05:02.232Z [DEBUG] google-sheets OAuth callback state: {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0","provider":"google-sheets","reconnect":false,"workspaceType":"personal"}
[2025-11-10T19:05:02.526Z] [INFO   ] 2025-11-10T19:05:02.525Z [DEBUG] ‚úÖ Google Sheets user info fetched: {"email":"stoddard.nathaniel900@gmail.com","name":"nathaniel stoddard"}
[2025-11-10T19:05:02.628Z] [INFO   ] 2025-11-10T19:05:02.628Z [DEBUG] ‚úÖ Created new integration: 84f5ca38-893e-47c1-a98b-940818b4f8f6
[2025-11-10T19:05:02.628Z] [INFO   ] 2025-11-10T19:05:02.628Z [DEBUG] Granting permissions for workspace context: {"type":"personal"}
[2025-11-10T19:05:02.804Z] [INFO   ] 2025-11-10T19:05:02.804Z [INFO] Granted admin permission to user a3e3a51a-175c-4b59-ad03-227ba12a18b0 for integration 84f5ca38-893e-47c1-a98b-940818b4f8f6
[2025-11-10T19:05:02.804Z] [INFO   ] 2025-11-10T19:05:02.804Z [INFO] Personal integration 84f5ca38-893e-47c1-a98b-940818b4f8f6 - granted admin to a3e3a51a-175c-4b59-ad03-227ba12a18b0
[2025-11-10T19:05:02.804Z] [INFO   ] 2025-11-10T19:05:02.804Z [DEBUG] ‚úÖ Permissions granted successfully
[2025-11-10T19:05:02.804Z] [INFO   ] 2025-11-10T19:05:02.804Z [DEBUG] ‚úÖ google-sheets integration successfully saved
[2025-11-10T19:05:02.804Z] [INFO   ] 2025-11-10T19:05:02.804Z [DEBUG] üîÑ Creating popup response: type=success, provider=google-sheets, displayName=Google Sheets, message=google-sheets connected successfully!
[2025-11-10T19:05:02.985Z] [INFO   ] 2025-11-10T19:05:02.985Z [DEBUG] üìç [API /api/integrations] GET request received {"timestamp":"2025-11-10T19:05:02.985Z","url":"http://localhost:3000/api/integrations?workspace_type=personal"}
[2025-11-10T19:05:03.165Z] [INFO   ] 2025-11-10T19:05:03.165Z [DEBUG] ‚úÖ [API /api/integrations] User authenticated {"userId":"a3e3a51a-175c-4b59-ad03-227ba12a18b0"}
[2025-11-10T19:05:03.165Z] [INFO   ] 2025-11-10T19:05:03.165Z [DEBUG] üè† [API /api/integrations] Workspace context {"workspaceType":"personal","workspaceId":null}
[2025-11-10T19:05:03.313Z] [INFO   ] 2025-11-10T19:05:03.313Z [DEBUG] üìä [API /api/integrations] Parallel query results {"workspaceType":"personal","workspaceId":null,"integrationsCount":2,"permissionsCount":2,"integrationsError":null,"permissionsError":null}
[2025-11-10T19:05:03.314Z] [INFO   ] 2025-11-10T19:05:03.314Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"84f5ca38-893e-47c1-a98b-940818b4f8f6","provider":"google-sheets","permission":"admin"}
[2025-11-10T19:05:03.314Z] [INFO   ] 2025-11-10T19:05:03.314Z [DEBUG] üìã [API /api/integrations] Using explicit permission {"integrationId":"27429c82-6b9e-4314-8147-4f8d56ded6c4","provider":"google-sheets","permission":"admin"}
[2025-11-10T19:05:03.314Z] [INFO   ] 2025-11-10T19:05:03.314Z [DEBUG] ‚úÖ [API /api/integrations] Returning integrations {"count":2,"workspaceType":"personal"}
[2025-11-10T19:05:03.970Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/fetch-user-data ...
[2025-11-10T19:05:04.038Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/fetch-user-data in 571ms (5433 modules)
[2025-11-10T19:05:04.122Z] [INFO   ] 2025-11-10T19:05:04.122Z [DEBUG] üöÄ [SERVER] fetch-user-data API route called
[2025-11-10T19:05:04.123Z] [INFO   ] 2025-11-10T19:05:04.122Z [DEBUG] üîç [SERVER] fetch-user-data request parsed: {"integrationId":"84f5ca38-893e-47c1-a98b-940818b4f8f6","dataType":"google-sheets_spreadsheets","options":{}}
[2025-11-10T19:05:04.258Z] [INFO   ] 2025-11-10T19:05:04.258Z [DEBUG] üîÑ [SERVER] Routing Google request to dedicated API: google-sheets_spreadsheets (provider: google-sheets)
[2025-11-10T19:05:04.806Z] [INFO   ]  [37m[1m‚óã[22m[39m Compiling /api/integrations/google/data ...
[2025-11-10T19:05:04.812Z] [INFO   ]  [32m[1m‚úì[22m[39m Compiled /api/integrations/google/data in 522ms (5467 modules)
[2025-11-10T19:05:04.951Z] [INFO   ] 2025-11-10T19:05:04.951Z [DEBUG] üöÄ [Google Data API] POST handler invoked
[2025-11-10T19:05:04.951Z] [INFO   ] 2025-11-10T19:05:04.951Z [DEBUG] üîç [Google Data API] Request received: {"integrationId":"84f5ca38-893e-47c1-a98b-940818b4f8f6","dataType":"google-sheets_spreadsheets","options":{},"fullRequestBody":{"integrationId":"84f5ca38-893e-47c1-a98b-940818b4f8f6","dataType":"google-sheets_spreadsheets","options":{}}}
[2025-11-10T19:05:05.063Z] [INFO   ] 2025-11-10T19:05:05.063Z [DEBUG] üìä [Google API] Integration provider check: {"integrationId":"84f5ca38-893e-47c1-a98b-940818b4f8f6","actualProvider":"google-sheets","dataType":"google-sheets_spreadsheets","providerLowerCase":"google-sheets"}
[2025-11-10T19:05:05.063Z] [INFO   ] 2025-11-10T19:05:05.063Z [DEBUG] üîç [Google API] Processing request: {"integrationId":"84f5ca38-893e-47c1-a98b-940818b4f8f6","dataType":"google-sheets_spreadsheets","provider":"google-sheets","status":"connected","hasToken":true}
[2025-11-10T19:05:05.063Z] [INFO   ] 2025-11-10T19:05:05.063Z [DEBUG] üìä [Google Sheets] Fetching spreadsheets
[2025-11-10T19:05:05.434Z] [INFO   ] 2025-11-10T19:05:05.434Z [DEBUG] ‚úÖ [Google Sheets] Retrieved 21 spreadsheets
[2025-11-10T19:05:05.435Z] [INFO   ] 2025-11-10T19:05:05.435Z [DEBUG] ‚úÖ [Google API] Successfully processed google-sheets_spreadsheets: {"integrationId":"84f5ca38-893e-47c1-a98b-940818b4f8f6","resultCount":21}
[2025-11-10T19:05:05.439Z] [INFO   ] 2025-11-10T19:05:05.439Z [DEBUG] ‚úÖ [SERVER] Google API completed for google-sheets_spreadsheets, result length: 21

=== Log Session Ended: 2025-11-10T19:07:15.579Z ===
