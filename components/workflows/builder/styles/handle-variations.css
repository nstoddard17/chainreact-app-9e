/**
 * Handle Design Variations for Testing
 *
 * This file contains different handle designs to test:
 * 1. Half-moons with pulse on hover (current + enhanced)
 * 2. Dots with pulse (Figma style)
 * 3. Full circles (n8n style)
 * 4. Half-moons with center dot
 */

/* ===== Option 1: Half-Moons with Pulse on Hover ===== */

/* Pulse animation for half-moons */
@keyframes handle-pulse {
  0%, 100% {
    box-shadow: 0 0 0 0 currentColor;
    opacity: 1;
  }
  50% {
    box-shadow: 0 0 0 4px currentColor;
    opacity: 0.6;
  }
}

.handle-halfmoon-pulse:hover::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  border-radius: inherit;
  animation: handle-pulse 1.5s ease-in-out infinite;
  color: hsl(var(--primary) / 0.3);
  pointer-events: none;
}

/* ===== Option 2: Dots with Pulse (Figma Style) ===== */

.handle-dot {
  width: 10px !important;
  height: 10px !important;
  border-radius: 50% !important;
  background: hsl(var(--muted)) !important;
  border: 2px solid hsl(var(--border)) !important;
  transition: all 0.2s ease !important;
}

.handle-dot:hover {
  background: hsl(var(--primary)) !important;
  border-color: hsl(var(--primary)) !important;
  transform: scale(1.3) !important;
  box-shadow: 0 0 0 4px hsl(var(--primary) / 0.2) !important;
  animation: handle-pulse 1.5s ease-in-out infinite !important;
}

/* Dot specific positioning */
.handle-dot[data-handlepos="left"] {
  left: -5px !important;
}

.handle-dot[data-handlepos="right"] {
  right: -5px !important;
}

/* ===== Option 3: Full Circles (n8n Style) ===== */

.handle-circle {
  width: 14px !important;
  height: 14px !important;
  border-radius: 50% !important;
  background: white !important;
  border: 2px solid hsl(var(--border)) !important;
  transition: all 0.2s ease !important;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1) !important;
}

.handle-circle:hover {
  background: hsl(var(--primary) / 0.1) !important;
  border-color: hsl(var(--primary)) !important;
  border-width: 3px !important;
  transform: scale(1.2) !important;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15) !important;
}

/* Circle specific positioning - sits on edge */
.handle-circle[data-handlepos="left"] {
  left: -7px !important;
}

.handle-circle[data-handlepos="right"] {
  right: -7px !important;
}

/* ===== Option 4: Half-Moons with Center Dot ===== */

.handle-halfmoon-dot {
  position: relative;
}

.handle-halfmoon-dot::before {
  content: '';
  position: absolute;
  width: 4px;
  height: 4px;
  border-radius: 50%;
  background: hsl(var(--primary));
  top: 50%;
  transform: translateY(-50%);
  opacity: 0.6;
  transition: opacity 0.2s ease;
}

.handle-halfmoon-dot[data-handlepos="left"]::before {
  right: 2px;
}

.handle-halfmoon-dot[data-handlepos="right"]::before {
  left: 2px;
}

.handle-halfmoon-dot:hover::before {
  opacity: 1;
  box-shadow: 0 0 6px hsl(var(--primary));
}

/* ===== State-Based Colors for All Handles ===== */

/* Running state handles - blue */
.node-running .handle-dot,
.node-running .handle-circle,
.node-running .handle-halfmoon-pulse,
.node-running .handle-halfmoon-dot {
  background: linear-gradient(90deg, #d3e7ff 0%, #e6f0ff 100%) !important;
  border-color: hsl(217 91% 60% / 0.5) !important;
}

.node-running .handle-dot:hover,
.node-running .handle-circle:hover {
  background: hsl(217 91% 60%) !important;
  border-color: hsl(217 91% 60%) !important;
}

/* Passed state handles - subtle green hint */
.node-passed .handle-dot,
.node-passed .handle-circle {
  border-color: hsl(142 76% 36% / 0.3) !important;
}

.node-passed .handle-dot:hover,
.node-passed .handle-circle:hover {
  border-color: hsl(142 76% 36%) !important;
}

/* Failed state handles - subtle red hint */
.node-failed .handle-dot,
.node-failed .handle-circle {
  border-color: hsl(var(--destructive) / 0.3) !important;
}

.node-failed .handle-dot:hover,
.node-failed .handle-circle:hover {
  border-color: hsl(var(--destructive)) !important;
}

/* ===== Reduced Motion Support ===== */
@media (prefers-reduced-motion: reduce) {
  .handle-halfmoon-pulse:hover::after,
  .handle-dot:hover {
    animation: none !important;
  }
}
